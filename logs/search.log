2025-04-14 14:18:00,096 - DEBUG - --- Initializing SearchService ---
2025-04-14 14:18:00,097 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 14:18:00,098 - DEBUG - Loading SentenceTransformer model
2025-04-14 14:18:03,714 - DEBUG - Initializing TikiService
2025-04-14 14:18:03,715 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 14:18:03,715 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 14:18:03,716 - DEBUG - Loading FAISS index
2025-04-14 14:18:03,723 - DEBUG - Loading product DataFrame
2025-04-14 14:18:03,745 - DEBUG - Loading product_ids
2025-04-14 14:18:03,747 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 14:18:03,747 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 14:18:03,747 - DEBUG - FAISS index ntotal: 8587
2025-04-14 14:19:48,119 - DEBUG - --- Initializing SearchService ---
2025-04-14 14:19:48,119 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 14:19:48,120 - DEBUG - Loading SentenceTransformer model
2025-04-14 14:19:51,788 - DEBUG - Initializing TikiService
2025-04-14 14:19:51,788 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 14:19:51,788 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 14:19:51,789 - DEBUG - Loading FAISS index
2025-04-14 14:19:51,796 - DEBUG - Loading product DataFrame
2025-04-14 14:19:51,821 - DEBUG - Loading product_ids
2025-04-14 14:19:51,822 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 14:19:51,822 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 14:19:51,822 - DEBUG - FAISS index ntotal: 8587
2025-04-14 14:20:45,844 - DEBUG - --- Initializing SearchService ---
2025-04-14 14:20:45,844 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 14:20:45,845 - DEBUG - Loading SentenceTransformer model
2025-04-14 14:20:49,207 - DEBUG - Initializing TikiService
2025-04-14 14:20:49,207 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 14:20:49,208 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 14:20:49,208 - DEBUG - Loading FAISS index
2025-04-14 14:20:49,215 - DEBUG - Loading product DataFrame
2025-04-14 14:20:49,239 - DEBUG - Loading product_ids
2025-04-14 14:20:49,240 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 14:20:49,240 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 14:20:49,240 - DEBUG - FAISS index ntotal: 8587
2025-04-14 14:21:32,867 - DEBUG - --- Initializing SearchService ---
2025-04-14 14:21:32,868 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 14:21:32,868 - DEBUG - Loading SentenceTransformer model
2025-04-14 14:21:37,449 - DEBUG - Initializing TikiService
2025-04-14 14:21:37,450 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 14:21:37,450 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 14:21:37,451 - DEBUG - Loading FAISS index
2025-04-14 14:21:37,458 - DEBUG - Loading product DataFrame
2025-04-14 14:21:37,482 - DEBUG - Loading product_ids
2025-04-14 14:21:37,484 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 14:21:37,485 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 14:21:37,486 - DEBUG - FAISS index ntotal: 8587
2025-04-14 14:24:44,498 - DEBUG - --- Initializing SearchService ---
2025-04-14 14:24:44,499 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 14:24:44,499 - DEBUG - Loading SentenceTransformer model
2025-04-14 14:24:48,085 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 14:24:48,086 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 14:24:48,086 - DEBUG - Loading FAISS index
2025-04-14 14:24:48,095 - DEBUG - Loading product DataFrame
2025-04-14 14:24:48,118 - DEBUG - Loading product_ids
2025-04-14 14:24:48,119 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 14:24:48,120 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 14:24:48,121 - DEBUG - FAISS index ntotal: 8587
2025-04-14 14:25:07,568 - DEBUG - --- Initializing SearchService ---
2025-04-14 14:25:07,569 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 14:25:07,569 - DEBUG - Loading SentenceTransformer model
2025-04-14 14:25:11,076 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 14:25:11,076 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 14:25:11,077 - DEBUG - Loading FAISS index
2025-04-14 14:25:11,084 - DEBUG - Loading product DataFrame
2025-04-14 14:25:11,106 - DEBUG - Loading product_ids
2025-04-14 14:25:11,107 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 14:25:11,108 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 14:25:11,108 - DEBUG - FAISS index ntotal: 8587
2025-04-14 14:25:11,515 - DEBUG - --- Processing request for /api/recommendations/199104980 ---
2025-04-14 14:25:11,516 - DEBUG - Limit set to: 10
2025-04-14 14:25:11,517 - DEBUG - --- Starting get_similar_products_by_id for product_id: 199104980 ---
2025-04-14 14:25:11,518 - DEBUG - Checking if product_id 199104980 exists in product_ids
2025-04-14 14:25:11,519 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:25:11,519 - DEBUG - Fetching product details from Tiki API for product_id: 199104980
2025-04-14 14:25:11,939 - DEBUG - Extracting product details
2025-04-14 14:25:11,939 - DEBUG - Name: Laptop HP 240 G9 6L1Y1PA |i5-1235U|8GB RAM |256GB SSD |14"FHD|Win11 - Hàng Chính Hãng
2025-04-14 14:25:11,946 - DEBUG - Brand_name: HP
2025-04-14 14:25:11,949 - DEBUG - Encoding combined text to embedding
2025-04-14 14:25:12,053 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:25:12,053 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:25:12,059 - DEBUG - FAISS search results - distances: [[1.6140645135546972e-13, 0.13221943378448486, 0.22469723224639893, 0.27136141061782837, 0.3160303235054016, 0.32161945104599, 0.33242177963256836, 0.341091513633728, 0.3448653221130371, 0.35070186853408813, 0.3699113428592682]]
2025-04-14 14:25:12,060 - DEBUG - FAISS search results - indices: [[56, 264, 1457, 301, 268, 73, 165, 107, 128, 1761, 1313]]
2025-04-14 14:25:12,061 - DEBUG - Filtered result_product_ids: [198592225, 199692559, 189466548, 248807159, 277363258, 213867594, 248912686, 195902379, 195901063, 214863343]
2025-04-14 14:25:12,061 - DEBUG - Checking product_id 198592225 in DataFrame
2025-04-14 14:25:12,064 - DEBUG - Added product 198592225 to similar_products
2025-04-14 14:25:12,065 - DEBUG - Checking product_id 199692559 in DataFrame
2025-04-14 14:25:12,066 - DEBUG - Added product 199692559 to similar_products
2025-04-14 14:25:12,067 - DEBUG - Checking product_id 189466548 in DataFrame
2025-04-14 14:25:12,068 - DEBUG - Added product 189466548 to similar_products
2025-04-14 14:25:12,069 - DEBUG - Checking product_id 248807159 in DataFrame
2025-04-14 14:25:12,070 - DEBUG - Added product 248807159 to similar_products
2025-04-14 14:25:12,071 - DEBUG - Checking product_id 277363258 in DataFrame
2025-04-14 14:25:12,073 - DEBUG - Added product 277363258 to similar_products
2025-04-14 14:25:12,074 - DEBUG - Checking product_id 213867594 in DataFrame
2025-04-14 14:25:12,075 - DEBUG - Added product 213867594 to similar_products
2025-04-14 14:25:12,076 - DEBUG - Checking product_id 248912686 in DataFrame
2025-04-14 14:25:12,077 - DEBUG - Added product 248912686 to similar_products
2025-04-14 14:25:12,078 - DEBUG - Checking product_id 195902379 in DataFrame
2025-04-14 14:25:12,080 - DEBUG - Added product 195902379 to similar_products
2025-04-14 14:25:12,080 - DEBUG - Checking product_id 195901063 in DataFrame
2025-04-14 14:25:12,082 - DEBUG - Added product 195901063 to similar_products
2025-04-14 14:25:12,083 - DEBUG - Checking product_id 214863343 in DataFrame
2025-04-14 14:25:12,084 - DEBUG - Added product 214863343 to similar_products
2025-04-14 14:25:12,085 - DEBUG - Final similar_products count: 10
2025-04-14 14:25:12,085 - DEBUG - Final similar_products: [198592225, 199692559, 189466548, 248807159, 277363258, 213867594, 248912686, 195902379, 195901063, 214863343]
2025-04-14 14:25:12,086 - DEBUG - --- Completed get_similar_products_by_id for product_id: 199104980 ---
2025-04-14 14:25:12,087 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:25:12,088 - DEBUG - Preparing response with similar products
2025-04-14 14:25:12,093 - DEBUG - --- Completed request for /api/recommendations/199104980 ---
2025-04-14 14:25:21,230 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:25:21,231 - DEBUG - Limit set to: 10
2025-04-14 14:25:21,233 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:25:21,233 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:25:21,234 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:25:21,234 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:25:22,014 - DEBUG - Extracting product details
2025-04-14 14:25:22,026 - DEBUG - Brand_name: Samsung
2025-04-14 14:25:22,030 - DEBUG - Encoding combined text to embedding
2025-04-14 14:25:22,121 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:25:22,122 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:25:22,124 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:25:22,124 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:25:22,125 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:25:22,126 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:25:22,132 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:25:22,136 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:25:22,142 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:25:22,143 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:25:22,153 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:25:22,155 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:25:22,157 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:25:22,158 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:25:22,162 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:25:22,163 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:25:22,165 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:25:22,166 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:25:22,170 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:25:22,172 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:25:22,178 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:25:22,181 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:25:22,184 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:25:22,185 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:25:22,188 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:25:22,189 - DEBUG - Final similar_products count: 10
2025-04-14 14:25:22,191 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:25:22,192 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:25:22,192 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:25:22,194 - DEBUG - Preparing response with similar products
2025-04-14 14:25:22,200 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:25:22,207 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:25:22,209 - DEBUG - Limit set to: 10
2025-04-14 14:25:22,210 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:25:22,211 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:25:22,212 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:25:22,213 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:25:22,500 - DEBUG - Extracting product details
2025-04-14 14:25:22,591 - DEBUG - Brand_name: Samsung
2025-04-14 14:25:22,598 - DEBUG - Encoding combined text to embedding
2025-04-14 14:25:22,666 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:25:22,667 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:25:22,670 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:25:22,671 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:25:22,672 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:25:22,672 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:25:22,674 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:25:22,675 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:25:22,677 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:25:22,678 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:25:22,679 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:25:22,680 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:25:22,682 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:25:22,683 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:25:22,685 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:25:22,685 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:25:22,687 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:25:22,688 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:25:22,689 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:25:22,690 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:25:22,692 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:25:22,692 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:25:22,694 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:25:22,695 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:25:22,696 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:25:22,697 - DEBUG - Final similar_products count: 10
2025-04-14 14:25:22,698 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:25:22,699 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:25:22,700 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:25:22,701 - DEBUG - Preparing response with similar products
2025-04-14 14:25:22,706 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:26:11,252 - DEBUG - --- Initializing SearchService ---
2025-04-14 14:26:11,252 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 14:26:11,253 - DEBUG - Loading SentenceTransformer model
2025-04-14 14:26:14,616 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 14:26:14,616 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 14:26:14,617 - DEBUG - Loading FAISS index
2025-04-14 14:26:14,625 - DEBUG - Loading product DataFrame
2025-04-14 14:26:14,647 - DEBUG - Loading product_ids
2025-04-14 14:26:14,648 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 14:26:14,648 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 14:26:14,649 - DEBUG - FAISS index ntotal: 8587
2025-04-14 14:29:31,649 - DEBUG - --- Initializing SearchService ---
2025-04-14 14:29:31,650 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 14:29:31,651 - DEBUG - Loading SentenceTransformer model
2025-04-14 14:29:35,310 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 14:29:35,310 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 14:29:35,311 - DEBUG - Loading FAISS index
2025-04-14 14:29:35,322 - DEBUG - Loading product DataFrame
2025-04-14 14:29:35,358 - DEBUG - Loading product_ids
2025-04-14 14:29:35,360 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 14:29:35,361 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 14:29:35,362 - DEBUG - FAISS index ntotal: 8587
2025-04-14 14:32:37,820 - DEBUG - --- Initializing SearchService ---
2025-04-14 14:32:37,821 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 14:32:37,822 - DEBUG - Loading SentenceTransformer model
2025-04-14 14:32:41,466 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 14:32:41,467 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 14:32:41,468 - DEBUG - Loading FAISS index
2025-04-14 14:32:41,476 - DEBUG - Loading product DataFrame
2025-04-14 14:32:41,504 - DEBUG - Loading product_ids
2025-04-14 14:32:41,505 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 14:32:41,506 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 14:32:41,506 - DEBUG - FAISS index ntotal: 8587
2025-04-14 14:32:41,999 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:32:42,000 - DEBUG - Limit set to: 10
2025-04-14 14:32:42,002 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:32:42,008 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:32:42,009 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:32:42,010 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:32:42,397 - DEBUG - Extracting product details
2025-04-14 14:32:42,414 - DEBUG - Brand_name: Samsung
2025-04-14 14:32:42,419 - DEBUG - Encoding combined text to embedding
2025-04-14 14:32:42,557 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:32:42,557 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:32:42,615 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:32:42,727 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:32:42,732 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:32:42,752 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:32:42,785 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:32:42,791 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:32:42,794 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:32:42,812 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:32:42,821 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:32:42,822 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:32:42,825 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:32:42,827 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:32:42,830 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:32:42,831 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:32:42,839 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:32:42,843 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:32:42,853 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:32:42,854 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:32:42,867 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:32:42,870 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:32:42,872 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:32:42,873 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:32:42,877 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:32:42,878 - DEBUG - Final similar_products count: 10
2025-04-14 14:32:42,880 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:32:42,881 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:32:42,882 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:32:42,884 - DEBUG - Preparing response with similar products
2025-04-14 14:32:42,903 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:34:01,946 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:34:01,951 - DEBUG - Limit set to: 10
2025-04-14 14:34:01,953 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:34:01,954 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:34:01,955 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:34:01,956 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:34:02,675 - DEBUG - Extracting product details
2025-04-14 14:34:02,701 - DEBUG - Brand_name: Samsung
2025-04-14 14:34:02,706 - DEBUG - Encoding combined text to embedding
2025-04-14 14:34:02,786 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:34:02,787 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:34:02,790 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:34:02,791 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:34:02,792 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:34:02,793 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:34:02,796 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:34:02,798 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:34:02,801 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:34:02,802 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:34:02,804 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:34:02,805 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:34:02,808 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:34:02,809 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:34:02,812 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:34:02,812 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:34:02,815 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:34:02,816 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:34:02,818 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:34:02,819 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:34:02,822 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:34:02,822 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:34:02,825 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:34:02,826 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:34:02,828 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:34:02,829 - DEBUG - Final similar_products count: 10
2025-04-14 14:34:02,829 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:34:02,831 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:34:02,832 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:34:02,834 - DEBUG - Preparing response with similar products
2025-04-14 14:34:02,842 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:34:02,852 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:34:02,855 - DEBUG - Limit set to: 10
2025-04-14 14:34:02,856 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:34:02,858 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:34:02,860 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:34:02,862 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:34:03,154 - DEBUG - Extracting product details
2025-04-14 14:34:03,168 - DEBUG - Brand_name: Samsung
2025-04-14 14:34:03,172 - DEBUG - Encoding combined text to embedding
2025-04-14 14:34:03,244 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:34:03,245 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:34:03,247 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:34:03,247 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:34:03,248 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:34:03,249 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:34:03,250 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:34:03,251 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:34:03,253 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:34:03,254 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:34:03,255 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:34:03,256 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:34:03,258 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:34:03,259 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:34:03,261 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:34:03,261 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:34:03,264 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:34:03,264 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:34:03,266 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:34:03,267 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:34:03,268 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:34:03,269 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:34:03,271 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:34:03,271 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:34:03,273 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:34:03,274 - DEBUG - Final similar_products count: 10
2025-04-14 14:34:03,275 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:34:03,275 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:34:03,276 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:34:03,278 - DEBUG - Preparing response with similar products
2025-04-14 14:34:03,286 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:34:10,659 - DEBUG - --- Processing request for /api/recommendations/273029857 ---
2025-04-14 14:34:10,659 - DEBUG - Limit set to: 10
2025-04-14 14:34:10,660 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273029857 ---
2025-04-14 14:34:10,661 - DEBUG - Checking if product_id 273029857 exists in product_ids
2025-04-14 14:34:10,661 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:34:10,662 - DEBUG - Fetching product details from Tiki API for product_id: 273029857
2025-04-14 14:34:10,890 - DEBUG - Extracting product details
2025-04-14 14:34:10,902 - DEBUG - Brand_name: Samsung
2025-04-14 14:34:10,907 - DEBUG - Encoding combined text to embedding
2025-04-14 14:34:10,976 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:34:10,976 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:34:10,978 - DEBUG - FAISS search results - distances: [[1.4452309249519957e-13, 0.13922789692878723, 0.16818246245384216, 0.1776253581047058, 0.20491687953472137, 0.20841555297374725, 0.2103061079978943, 0.2209327220916748, 0.2226022481918335, 0.2318483591079712, 0.23520714044570923]]
2025-04-14 14:34:10,980 - DEBUG - FAISS search results - indices: [[2024, 2204, 859, 2013, 228, 123, 33, 23, 224, 318, 242]]
2025-04-14 14:34:10,980 - DEBUG - Filtered result_product_ids: [273186334, 272270730, 273185467, 272328188, 272348047, 276250878, 274405521, 273636845, 276944892, 276274790]
2025-04-14 14:34:10,981 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:34:10,983 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:34:10,983 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:34:10,985 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:34:10,986 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-14 14:34:10,987 - DEBUG - Added product 273185467 to similar_products
2025-04-14 14:34:10,988 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:34:10,989 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:34:10,990 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:34:10,991 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:34:10,992 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:34:10,994 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:34:10,995 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:34:10,997 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:34:10,998 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:34:10,999 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:34:11,000 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:34:11,002 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:34:11,002 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:34:11,004 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:34:11,005 - DEBUG - Final similar_products count: 10
2025-04-14 14:34:11,006 - DEBUG - Final similar_products: [273186334, 272270730, 273185467, 272328188, 272348047, 276250878, 274405521, 273636845, 276944892, 276274790]
2025-04-14 14:34:11,007 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273029857 ---
2025-04-14 14:34:11,008 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:34:11,009 - DEBUG - Preparing response with similar products
2025-04-14 14:34:11,017 - DEBUG - --- Completed request for /api/recommendations/273029857 ---
2025-04-14 14:34:11,022 - DEBUG - --- Processing request for /api/recommendations/273029857 ---
2025-04-14 14:34:11,023 - DEBUG - Limit set to: 10
2025-04-14 14:34:11,024 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273029857 ---
2025-04-14 14:34:11,025 - DEBUG - Checking if product_id 273029857 exists in product_ids
2025-04-14 14:34:11,027 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:34:11,028 - DEBUG - Fetching product details from Tiki API for product_id: 273029857
2025-04-14 14:34:11,384 - DEBUG - Extracting product details
2025-04-14 14:34:11,398 - DEBUG - Brand_name: Samsung
2025-04-14 14:34:11,402 - DEBUG - Encoding combined text to embedding
2025-04-14 14:34:11,488 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:34:11,488 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:34:11,490 - DEBUG - FAISS search results - distances: [[1.4452309249519957e-13, 0.13922789692878723, 0.16818246245384216, 0.1776253581047058, 0.20491687953472137, 0.20841555297374725, 0.2103061079978943, 0.2209327220916748, 0.2226022481918335, 0.2318483591079712, 0.23520714044570923]]
2025-04-14 14:34:11,491 - DEBUG - FAISS search results - indices: [[2024, 2204, 859, 2013, 228, 123, 33, 23, 224, 318, 242]]
2025-04-14 14:34:11,492 - DEBUG - Filtered result_product_ids: [273186334, 272270730, 273185467, 272328188, 272348047, 276250878, 274405521, 273636845, 276944892, 276274790]
2025-04-14 14:34:11,493 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:34:11,495 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:34:11,496 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:34:11,498 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:34:11,499 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-14 14:34:11,501 - DEBUG - Added product 273185467 to similar_products
2025-04-14 14:34:11,502 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:34:11,504 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:34:11,505 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:34:11,507 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:34:11,508 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:34:11,510 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:34:11,510 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:34:11,513 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:34:11,514 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:34:11,515 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:34:11,516 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:34:11,518 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:34:11,519 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:34:11,520 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:34:11,521 - DEBUG - Final similar_products count: 10
2025-04-14 14:34:11,522 - DEBUG - Final similar_products: [273186334, 272270730, 273185467, 272328188, 272348047, 276250878, 274405521, 273636845, 276944892, 276274790]
2025-04-14 14:34:11,523 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273029857 ---
2025-04-14 14:34:11,523 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:34:11,524 - DEBUG - Preparing response with similar products
2025-04-14 14:34:11,531 - DEBUG - --- Completed request for /api/recommendations/273029857 ---
2025-04-14 14:34:25,193 - DEBUG - --- Processing request for /api/recommendations/272348047 ---
2025-04-14 14:34:25,194 - DEBUG - Limit set to: 10
2025-04-14 14:34:25,195 - DEBUG - --- Starting get_similar_products_by_id for product_id: 272348047 ---
2025-04-14 14:34:25,196 - DEBUG - Checking if product_id 272348047 exists in product_ids
2025-04-14 14:34:25,197 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:34:25,199 - DEBUG - Fetching product details from Tiki API for product_id: 272348047
2025-04-14 14:34:25,440 - DEBUG - Extracting product details
2025-04-14 14:34:25,458 - DEBUG - Brand_name: Samsung
2025-04-14 14:34:25,463 - DEBUG - Encoding combined text to embedding
2025-04-14 14:34:25,538 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:34:25,539 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:34:25,541 - DEBUG - FAISS search results - distances: [[1.4342963394666647e-13, 0.015570789575576782, 0.029496390372514725, 0.04906315356492996, 0.061989761888980865, 0.0629267692565918, 0.08717593550682068, 0.17413324117660522, 0.18362681567668915, 0.19785751402378082, 0.199163556098938]]
2025-04-14 14:34:25,542 - DEBUG - FAISS search results - indices: [[123, 228, 242, 23, 315, 318, 213, 2204, 1353, 1265, 2545]]
2025-04-14 14:34:25,543 - DEBUG - Filtered result_product_ids: [272328188, 276274790, 274405521, 276944868, 276944892, 277437876, 273186334, 277360329, 274156763, 276945332]
2025-04-14 14:34:25,544 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:34:25,545 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:34:25,546 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:34:25,547 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:34:25,548 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:34:25,550 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:34:25,551 - DEBUG - Checking product_id 276944868 in DataFrame
2025-04-14 14:34:25,553 - DEBUG - Added product 276944868 to similar_products
2025-04-14 14:34:25,554 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:34:25,556 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:34:25,556 - DEBUG - Checking product_id 277437876 in DataFrame
2025-04-14 14:34:25,558 - DEBUG - Added product 277437876 to similar_products
2025-04-14 14:34:25,559 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:34:25,561 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:34:25,562 - DEBUG - Checking product_id 277360329 in DataFrame
2025-04-14 14:34:25,564 - DEBUG - Added product 277360329 to similar_products
2025-04-14 14:34:25,565 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-14 14:34:25,566 - DEBUG - Added product 274156763 to similar_products
2025-04-14 14:34:25,567 - DEBUG - Checking product_id 276945332 in DataFrame
2025-04-14 14:34:25,569 - DEBUG - Added product 276945332 to similar_products
2025-04-14 14:34:25,570 - DEBUG - Final similar_products count: 10
2025-04-14 14:34:25,571 - DEBUG - Final similar_products: [272328188, 276274790, 274405521, 276944868, 276944892, 277437876, 273186334, 277360329, 274156763, 276945332]
2025-04-14 14:34:25,571 - DEBUG - --- Completed get_similar_products_by_id for product_id: 272348047 ---
2025-04-14 14:34:25,572 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:34:25,573 - DEBUG - Preparing response with similar products
2025-04-14 14:34:25,577 - DEBUG - --- Completed request for /api/recommendations/272348047 ---
2025-04-14 14:34:25,582 - DEBUG - --- Processing request for /api/recommendations/272348047 ---
2025-04-14 14:34:25,585 - DEBUG - Limit set to: 10
2025-04-14 14:34:25,586 - DEBUG - --- Starting get_similar_products_by_id for product_id: 272348047 ---
2025-04-14 14:34:25,587 - DEBUG - Checking if product_id 272348047 exists in product_ids
2025-04-14 14:34:25,587 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:34:25,588 - DEBUG - Fetching product details from Tiki API for product_id: 272348047
2025-04-14 14:34:25,940 - DEBUG - Extracting product details
2025-04-14 14:34:25,955 - DEBUG - Brand_name: Samsung
2025-04-14 14:34:25,961 - DEBUG - Encoding combined text to embedding
2025-04-14 14:34:26,025 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:34:26,026 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:34:26,028 - DEBUG - FAISS search results - distances: [[1.4342963394666647e-13, 0.015570789575576782, 0.029496390372514725, 0.04906315356492996, 0.061989761888980865, 0.0629267692565918, 0.08717593550682068, 0.17413324117660522, 0.18362681567668915, 0.19785751402378082, 0.199163556098938]]
2025-04-14 14:34:26,029 - DEBUG - FAISS search results - indices: [[123, 228, 242, 23, 315, 318, 213, 2204, 1353, 1265, 2545]]
2025-04-14 14:34:26,029 - DEBUG - Filtered result_product_ids: [272328188, 276274790, 274405521, 276944868, 276944892, 277437876, 273186334, 277360329, 274156763, 276945332]
2025-04-14 14:34:26,030 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:34:26,033 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:34:26,034 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:34:26,036 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:34:26,037 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:34:26,039 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:34:26,039 - DEBUG - Checking product_id 276944868 in DataFrame
2025-04-14 14:34:26,041 - DEBUG - Added product 276944868 to similar_products
2025-04-14 14:34:26,042 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:34:26,044 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:34:26,044 - DEBUG - Checking product_id 277437876 in DataFrame
2025-04-14 14:34:26,046 - DEBUG - Added product 277437876 to similar_products
2025-04-14 14:34:26,046 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:34:26,047 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:34:26,048 - DEBUG - Checking product_id 277360329 in DataFrame
2025-04-14 14:34:26,050 - DEBUG - Added product 277360329 to similar_products
2025-04-14 14:34:26,051 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-14 14:34:26,054 - DEBUG - Added product 274156763 to similar_products
2025-04-14 14:34:26,055 - DEBUG - Checking product_id 276945332 in DataFrame
2025-04-14 14:34:26,056 - DEBUG - Added product 276945332 to similar_products
2025-04-14 14:34:26,057 - DEBUG - Final similar_products count: 10
2025-04-14 14:34:26,057 - DEBUG - Final similar_products: [272328188, 276274790, 274405521, 276944868, 276944892, 277437876, 273186334, 277360329, 274156763, 276945332]
2025-04-14 14:34:26,058 - DEBUG - --- Completed get_similar_products_by_id for product_id: 272348047 ---
2025-04-14 14:34:26,059 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:34:26,059 - DEBUG - Preparing response with similar products
2025-04-14 14:34:26,063 - DEBUG - --- Completed request for /api/recommendations/272348047 ---
2025-04-14 14:34:30,585 - DEBUG - --- Processing request for /api/recommendations/276944892 ---
2025-04-14 14:34:30,587 - DEBUG - Limit set to: 10
2025-04-14 14:34:30,588 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276944892 ---
2025-04-14 14:34:30,589 - DEBUG - Checking if product_id 276944892 exists in product_ids
2025-04-14 14:34:30,590 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:34:30,591 - DEBUG - Fetching product details from Tiki API for product_id: 276944892
2025-04-14 14:34:31,288 - DEBUG - Extracting product details
2025-04-14 14:34:31,297 - DEBUG - Brand_name: Samsung
2025-04-14 14:34:31,302 - DEBUG - Encoding combined text to embedding
2025-04-14 14:34:31,373 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:34:31,374 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:34:31,377 - DEBUG - FAISS search results - distances: [[1.1909574617729318e-13, 0.03356482833623886, 0.05118638649582863, 0.06292673945426941, 0.06883507966995239, 0.07915368676185608, 0.1399085521697998, 0.2013041377067566, 0.20333516597747803, 0.20651915669441223, 0.20839110016822815]]
2025-04-14 14:34:31,378 - DEBUG - FAISS search results - indices: [[318, 242, 228, 123, 315, 23, 213, 2616, 1426, 1304, 33]]
2025-04-14 14:34:31,379 - DEBUG - Filtered result_product_ids: [276274790, 272328188, 272348047, 276944868, 274405521, 277437876, 277348490, 275386465, 277360073, 276250878]
2025-04-14 14:34:31,380 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:34:31,382 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:34:31,382 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:34:31,385 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:34:31,386 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:34:31,388 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:34:31,389 - DEBUG - Checking product_id 276944868 in DataFrame
2025-04-14 14:34:31,392 - DEBUG - Added product 276944868 to similar_products
2025-04-14 14:34:31,394 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:34:31,396 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:34:31,397 - DEBUG - Checking product_id 277437876 in DataFrame
2025-04-14 14:34:31,398 - DEBUG - Added product 277437876 to similar_products
2025-04-14 14:34:31,399 - DEBUG - Checking product_id 277348490 in DataFrame
2025-04-14 14:34:31,401 - DEBUG - Added product 277348490 to similar_products
2025-04-14 14:34:31,402 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-14 14:34:31,404 - DEBUG - Added product 275386465 to similar_products
2025-04-14 14:34:31,405 - DEBUG - Checking product_id 277360073 in DataFrame
2025-04-14 14:34:31,407 - DEBUG - Added product 277360073 to similar_products
2025-04-14 14:34:31,408 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:34:31,410 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:34:31,411 - DEBUG - Final similar_products count: 10
2025-04-14 14:34:31,412 - DEBUG - Final similar_products: [276274790, 272328188, 272348047, 276944868, 274405521, 277437876, 277348490, 275386465, 277360073, 276250878]
2025-04-14 14:34:31,413 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276944892 ---
2025-04-14 14:34:31,414 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:34:31,415 - DEBUG - Preparing response with similar products
2025-04-14 14:34:31,422 - DEBUG - --- Completed request for /api/recommendations/276944892 ---
2025-04-14 14:34:31,428 - DEBUG - --- Processing request for /api/recommendations/276944892 ---
2025-04-14 14:34:31,430 - DEBUG - Limit set to: 10
2025-04-14 14:34:31,431 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276944892 ---
2025-04-14 14:34:31,431 - DEBUG - Checking if product_id 276944892 exists in product_ids
2025-04-14 14:34:31,432 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:34:31,433 - DEBUG - Fetching product details from Tiki API for product_id: 276944892
2025-04-14 14:34:31,830 - DEBUG - Extracting product details
2025-04-14 14:34:31,845 - DEBUG - Brand_name: Samsung
2025-04-14 14:34:31,850 - DEBUG - Encoding combined text to embedding
2025-04-14 14:34:31,933 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:34:31,934 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:34:31,937 - DEBUG - FAISS search results - distances: [[1.1909574617729318e-13, 0.03356482833623886, 0.05118638649582863, 0.06292673945426941, 0.06883507966995239, 0.07915368676185608, 0.1399085521697998, 0.2013041377067566, 0.20333516597747803, 0.20651915669441223, 0.20839110016822815]]
2025-04-14 14:34:31,937 - DEBUG - FAISS search results - indices: [[318, 242, 228, 123, 315, 23, 213, 2616, 1426, 1304, 33]]
2025-04-14 14:34:31,938 - DEBUG - Filtered result_product_ids: [276274790, 272328188, 272348047, 276944868, 274405521, 277437876, 277348490, 275386465, 277360073, 276250878]
2025-04-14 14:34:31,940 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:34:31,942 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:34:31,943 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:34:31,946 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:34:31,947 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:34:31,949 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:34:31,950 - DEBUG - Checking product_id 276944868 in DataFrame
2025-04-14 14:34:31,952 - DEBUG - Added product 276944868 to similar_products
2025-04-14 14:34:31,953 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:34:31,956 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:34:31,956 - DEBUG - Checking product_id 277437876 in DataFrame
2025-04-14 14:34:31,959 - DEBUG - Added product 277437876 to similar_products
2025-04-14 14:34:31,960 - DEBUG - Checking product_id 277348490 in DataFrame
2025-04-14 14:34:31,961 - DEBUG - Added product 277348490 to similar_products
2025-04-14 14:34:31,962 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-14 14:34:31,964 - DEBUG - Added product 275386465 to similar_products
2025-04-14 14:34:31,965 - DEBUG - Checking product_id 277360073 in DataFrame
2025-04-14 14:34:31,967 - DEBUG - Added product 277360073 to similar_products
2025-04-14 14:34:31,968 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:34:31,970 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:34:31,971 - DEBUG - Final similar_products count: 10
2025-04-14 14:34:31,972 - DEBUG - Final similar_products: [276274790, 272328188, 272348047, 276944868, 274405521, 277437876, 277348490, 275386465, 277360073, 276250878]
2025-04-14 14:34:31,973 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276944892 ---
2025-04-14 14:34:31,973 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:34:31,974 - DEBUG - Preparing response with similar products
2025-04-14 14:34:31,979 - DEBUG - --- Completed request for /api/recommendations/276944892 ---
2025-04-14 14:38:09,270 - DEBUG - --- Initializing SearchService ---
2025-04-14 14:38:09,271 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 14:38:09,272 - DEBUG - Loading SentenceTransformer model
2025-04-14 14:38:13,493 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 14:38:13,494 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 14:38:13,495 - DEBUG - Loading FAISS index
2025-04-14 14:38:13,503 - DEBUG - Loading product DataFrame
2025-04-14 14:38:13,528 - DEBUG - Loading product_ids
2025-04-14 14:38:13,529 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 14:38:13,530 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 14:38:13,530 - DEBUG - FAISS index ntotal: 8587
2025-04-14 14:38:38,362 - DEBUG - --- Initializing SearchService ---
2025-04-14 14:38:38,363 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 14:38:38,364 - DEBUG - Loading SentenceTransformer model
2025-04-14 14:38:42,004 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 14:38:42,005 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 14:38:42,006 - DEBUG - Loading FAISS index
2025-04-14 14:38:42,016 - DEBUG - Loading product DataFrame
2025-04-14 14:38:42,049 - DEBUG - Loading product_ids
2025-04-14 14:38:42,050 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 14:38:42,051 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 14:38:42,051 - DEBUG - FAISS index ntotal: 8587
2025-04-14 14:41:39,563 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:41:39,565 - DEBUG - Limit set to: 10
2025-04-14 14:41:39,565 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:41:39,566 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:41:39,567 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:41:39,568 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:41:39,983 - DEBUG - Extracting product details
2025-04-14 14:41:39,994 - DEBUG - Brand_name: Samsung
2025-04-14 14:41:40,000 - DEBUG - Encoding combined text to embedding
2025-04-14 14:41:40,094 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:41:40,095 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:41:40,102 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:41:40,103 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:41:40,104 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:41:40,105 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:41:40,108 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:41:40,108 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:41:40,110 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:41:40,111 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:41:40,114 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:41:40,114 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:41:40,116 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:41:40,117 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:41:40,118 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:41:40,119 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:41:40,120 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:41:40,121 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:41:40,123 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:41:40,124 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:41:40,127 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:41:40,129 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:41:40,131 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:41:40,132 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:41:40,134 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:41:40,135 - DEBUG - Final similar_products count: 10
2025-04-14 14:41:40,136 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:41:40,137 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:41:40,138 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:41:40,138 - DEBUG - Preparing response with similar products
2025-04-14 14:41:40,145 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:41:40,151 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:41:40,155 - DEBUG - Limit set to: 10
2025-04-14 14:41:40,156 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:41:40,157 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:41:40,158 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:41:40,158 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:41:40,466 - DEBUG - Extracting product details
2025-04-14 14:41:40,478 - DEBUG - Brand_name: Samsung
2025-04-14 14:41:40,483 - DEBUG - Encoding combined text to embedding
2025-04-14 14:41:40,559 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:41:40,560 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:41:40,563 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:41:40,564 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:41:40,565 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:41:40,565 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:41:40,567 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:41:40,568 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:41:40,571 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:41:40,572 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:41:40,575 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:41:40,575 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:41:40,577 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:41:40,578 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:41:40,580 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:41:40,580 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:41:40,582 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:41:40,583 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:41:40,585 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:41:40,586 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:41:40,588 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:41:40,590 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:41:40,592 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:41:40,592 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:41:40,594 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:41:40,595 - DEBUG - Final similar_products count: 10
2025-04-14 14:41:40,596 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:41:40,598 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:41:40,598 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:41:40,599 - DEBUG - Preparing response with similar products
2025-04-14 14:41:40,605 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:41:48,873 - DEBUG - --- Processing request for /api/recommendations/276250878 ---
2025-04-14 14:41:48,874 - DEBUG - Limit set to: 10
2025-04-14 14:41:48,875 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250878 ---
2025-04-14 14:41:48,876 - DEBUG - Checking if product_id 276250878 exists in product_ids
2025-04-14 14:41:48,876 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:41:48,877 - DEBUG - Fetching product details from Tiki API for product_id: 276250878
2025-04-14 14:41:49,103 - DEBUG - Extracting product details
2025-04-14 14:41:49,122 - DEBUG - Brand_name: Samsung
2025-04-14 14:41:49,127 - DEBUG - Encoding combined text to embedding
2025-04-14 14:41:49,198 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:41:49,199 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:41:49,201 - DEBUG - FAISS search results - distances: [[1.5281200783923143e-13, 0.2048451006412506, 0.20767593383789062, 0.20839110016822815, 0.20851877331733704, 0.2103060781955719, 0.22707059979438782, 0.22834089398384094, 0.24846692383289337, 0.2511472702026367, 0.2545849084854126]]
2025-04-14 14:41:49,201 - DEBUG - FAISS search results - indices: [[33, 2013, 644, 318, 2204, 2024, 242, 228, 123, 23, 859]]
2025-04-14 14:41:49,202 - DEBUG - Filtered result_product_ids: [273185467, 277553639, 276944892, 273186334, 273029857, 276274790, 272328188, 272348047, 274405521, 272270730]
2025-04-14 14:41:49,202 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-14 14:41:49,204 - DEBUG - Added product 273185467 to similar_products
2025-04-14 14:41:49,205 - DEBUG - Checking product_id 277553639 in DataFrame
2025-04-14 14:41:49,206 - DEBUG - Added product 277553639 to similar_products
2025-04-14 14:41:49,207 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:41:49,208 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:41:49,209 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:41:49,211 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:41:49,212 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:41:49,213 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:41:49,214 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:41:49,216 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:41:49,216 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:41:49,218 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:41:49,219 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:41:49,220 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:41:49,221 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:41:49,223 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:41:49,223 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:41:49,225 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:41:49,226 - DEBUG - Final similar_products count: 10
2025-04-14 14:41:49,226 - DEBUG - Final similar_products: [273185467, 277553639, 276944892, 273186334, 273029857, 276274790, 272328188, 272348047, 274405521, 272270730]
2025-04-14 14:41:49,227 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250878 ---
2025-04-14 14:41:49,227 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:41:49,228 - DEBUG - Preparing response with similar products
2025-04-14 14:41:49,234 - DEBUG - --- Completed request for /api/recommendations/276250878 ---
2025-04-14 14:41:49,238 - DEBUG - --- Processing request for /api/recommendations/276250878 ---
2025-04-14 14:41:49,240 - DEBUG - Limit set to: 10
2025-04-14 14:41:49,241 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250878 ---
2025-04-14 14:41:49,242 - DEBUG - Checking if product_id 276250878 exists in product_ids
2025-04-14 14:41:49,243 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:41:49,244 - DEBUG - Fetching product details from Tiki API for product_id: 276250878
2025-04-14 14:41:49,464 - DEBUG - Extracting product details
2025-04-14 14:41:49,477 - DEBUG - Brand_name: Samsung
2025-04-14 14:41:49,481 - DEBUG - Encoding combined text to embedding
2025-04-14 14:41:49,565 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:41:49,566 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:41:49,568 - DEBUG - FAISS search results - distances: [[1.5281200783923143e-13, 0.2048451006412506, 0.20767593383789062, 0.20839110016822815, 0.20851877331733704, 0.2103060781955719, 0.22707059979438782, 0.22834089398384094, 0.24846692383289337, 0.2511472702026367, 0.2545849084854126]]
2025-04-14 14:41:49,569 - DEBUG - FAISS search results - indices: [[33, 2013, 644, 318, 2204, 2024, 242, 228, 123, 23, 859]]
2025-04-14 14:41:49,569 - DEBUG - Filtered result_product_ids: [273185467, 277553639, 276944892, 273186334, 273029857, 276274790, 272328188, 272348047, 274405521, 272270730]
2025-04-14 14:41:49,570 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-14 14:41:49,572 - DEBUG - Added product 273185467 to similar_products
2025-04-14 14:41:49,573 - DEBUG - Checking product_id 277553639 in DataFrame
2025-04-14 14:41:49,574 - DEBUG - Added product 277553639 to similar_products
2025-04-14 14:41:49,575 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:41:49,577 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:41:49,577 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:41:49,579 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:41:49,580 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:41:49,582 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:41:49,582 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:41:49,584 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:41:49,585 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:41:49,587 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:41:49,587 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:41:49,589 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:41:49,590 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:41:49,591 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:41:49,592 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:41:49,594 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:41:49,594 - DEBUG - Final similar_products count: 10
2025-04-14 14:41:49,595 - DEBUG - Final similar_products: [273185467, 277553639, 276944892, 273186334, 273029857, 276274790, 272328188, 272348047, 274405521, 272270730]
2025-04-14 14:41:49,596 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250878 ---
2025-04-14 14:41:49,596 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:41:49,597 - DEBUG - Preparing response with similar products
2025-04-14 14:41:49,603 - DEBUG - --- Completed request for /api/recommendations/276250878 ---
2025-04-14 14:41:55,277 - DEBUG - --- Processing request for /api/recommendations/277553639 ---
2025-04-14 14:41:55,279 - DEBUG - Limit set to: 10
2025-04-14 14:41:55,279 - DEBUG - --- Starting get_similar_products_by_id for product_id: 277553639 ---
2025-04-14 14:41:55,280 - DEBUG - Checking if product_id 277553639 exists in product_ids
2025-04-14 14:41:55,281 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:41:55,282 - DEBUG - Fetching product details from Tiki API for product_id: 277553639
2025-04-14 14:41:55,527 - DEBUG - Extracting product details
2025-04-14 14:41:55,541 - DEBUG - Brand_name: Samsung
2025-04-14 14:41:55,546 - DEBUG - Encoding combined text to embedding
2025-04-14 14:41:55,638 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:41:55,638 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:41:55,641 - DEBUG - FAISS search results - distances: [[1.3186720053577627e-13, 0.207675963640213, 0.22662240266799927, 0.2524796724319458, 0.2746109664440155, 0.27654126286506653, 0.27929532527923584, 0.28126734495162964, 0.28685086965560913, 0.2873936593532562, 0.29092860221862793]]
2025-04-14 14:41:55,641 - DEBUG - FAISS search results - indices: [[644, 33, 224, 1785, 23, 2204, 228, 1550, 859, 204, 1015]]
2025-04-14 14:41:55,642 - DEBUG - Filtered result_product_ids: [276250878, 273636845, 273438458, 274405521, 273186334, 272328188, 272241346, 272270730, 273610105, 272238679]
2025-04-14 14:41:55,643 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:41:55,645 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:41:55,646 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:41:55,647 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:41:55,648 - DEBUG - Checking product_id 273438458 in DataFrame
2025-04-14 14:41:55,652 - DEBUG - Added product 273438458 to similar_products
2025-04-14 14:41:55,653 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:41:55,655 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:41:55,655 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:41:55,657 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:41:55,658 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:41:55,660 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:41:55,661 - DEBUG - Checking product_id 272241346 in DataFrame
2025-04-14 14:41:55,663 - DEBUG - Added product 272241346 to similar_products
2025-04-14 14:41:55,663 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:41:55,665 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:41:55,666 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:41:55,669 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:41:55,669 - DEBUG - Checking product_id 272238679 in DataFrame
2025-04-14 14:41:55,671 - DEBUG - Added product 272238679 to similar_products
2025-04-14 14:41:55,672 - DEBUG - Final similar_products count: 10
2025-04-14 14:41:55,673 - DEBUG - Final similar_products: [276250878, 273636845, 273438458, 274405521, 273186334, 272328188, 272241346, 272270730, 273610105, 272238679]
2025-04-14 14:41:55,673 - DEBUG - --- Completed get_similar_products_by_id for product_id: 277553639 ---
2025-04-14 14:41:55,674 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:41:55,676 - DEBUG - Preparing response with similar products
2025-04-14 14:41:55,682 - DEBUG - --- Completed request for /api/recommendations/277553639 ---
2025-04-14 14:41:55,691 - DEBUG - --- Processing request for /api/recommendations/277553639 ---
2025-04-14 14:41:55,693 - DEBUG - Limit set to: 10
2025-04-14 14:41:55,695 - DEBUG - --- Starting get_similar_products_by_id for product_id: 277553639 ---
2025-04-14 14:41:55,696 - DEBUG - Checking if product_id 277553639 exists in product_ids
2025-04-14 14:41:55,698 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:41:55,699 - DEBUG - Fetching product details from Tiki API for product_id: 277553639
2025-04-14 14:41:55,971 - DEBUG - Extracting product details
2025-04-14 14:41:55,981 - DEBUG - Brand_name: Samsung
2025-04-14 14:41:55,986 - DEBUG - Encoding combined text to embedding
2025-04-14 14:41:56,068 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:41:56,069 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:41:56,071 - DEBUG - FAISS search results - distances: [[1.3186720053577627e-13, 0.207675963640213, 0.22662240266799927, 0.2524796724319458, 0.2746109664440155, 0.27654126286506653, 0.27929532527923584, 0.28126734495162964, 0.28685086965560913, 0.2873936593532562, 0.29092860221862793]]
2025-04-14 14:41:56,072 - DEBUG - FAISS search results - indices: [[644, 33, 224, 1785, 23, 2204, 228, 1550, 859, 204, 1015]]
2025-04-14 14:41:56,073 - DEBUG - Filtered result_product_ids: [276250878, 273636845, 273438458, 274405521, 273186334, 272328188, 272241346, 272270730, 273610105, 272238679]
2025-04-14 14:41:56,073 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:41:56,075 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:41:56,076 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:41:56,078 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:41:56,078 - DEBUG - Checking product_id 273438458 in DataFrame
2025-04-14 14:41:56,080 - DEBUG - Added product 273438458 to similar_products
2025-04-14 14:41:56,080 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:41:56,082 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:41:56,084 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:41:56,086 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:41:56,087 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:41:56,088 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:41:56,089 - DEBUG - Checking product_id 272241346 in DataFrame
2025-04-14 14:41:56,091 - DEBUG - Added product 272241346 to similar_products
2025-04-14 14:41:56,091 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:41:56,093 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:41:56,094 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:41:56,095 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:41:56,096 - DEBUG - Checking product_id 272238679 in DataFrame
2025-04-14 14:41:56,097 - DEBUG - Added product 272238679 to similar_products
2025-04-14 14:41:56,098 - DEBUG - Final similar_products count: 10
2025-04-14 14:41:56,098 - DEBUG - Final similar_products: [276250878, 273636845, 273438458, 274405521, 273186334, 272328188, 272241346, 272270730, 273610105, 272238679]
2025-04-14 14:41:56,099 - DEBUG - --- Completed get_similar_products_by_id for product_id: 277553639 ---
2025-04-14 14:41:56,101 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:41:56,102 - DEBUG - Preparing response with similar products
2025-04-14 14:41:56,108 - DEBUG - --- Completed request for /api/recommendations/277553639 ---
2025-04-14 14:41:58,211 - DEBUG - --- Processing request for /api/recommendations/276250878 ---
2025-04-14 14:41:58,213 - DEBUG - Limit set to: 10
2025-04-14 14:41:58,213 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250878 ---
2025-04-14 14:41:58,214 - DEBUG - Checking if product_id 276250878 exists in product_ids
2025-04-14 14:41:58,215 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:41:58,215 - DEBUG - Fetching product details from Tiki API for product_id: 276250878
2025-04-14 14:41:58,417 - DEBUG - Extracting product details
2025-04-14 14:41:58,440 - DEBUG - Brand_name: Samsung
2025-04-14 14:41:58,448 - DEBUG - Encoding combined text to embedding
2025-04-14 14:41:58,552 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:41:58,553 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:41:58,555 - DEBUG - FAISS search results - distances: [[1.5281200783923143e-13, 0.2048451006412506, 0.20767593383789062, 0.20839110016822815, 0.20851877331733704, 0.2103060781955719, 0.22707059979438782, 0.22834089398384094, 0.24846692383289337, 0.2511472702026367, 0.2545849084854126]]
2025-04-14 14:41:58,556 - DEBUG - FAISS search results - indices: [[33, 2013, 644, 318, 2204, 2024, 242, 228, 123, 23, 859]]
2025-04-14 14:41:58,557 - DEBUG - Filtered result_product_ids: [273185467, 277553639, 276944892, 273186334, 273029857, 276274790, 272328188, 272348047, 274405521, 272270730]
2025-04-14 14:41:58,558 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-14 14:41:58,560 - DEBUG - Added product 273185467 to similar_products
2025-04-14 14:41:58,561 - DEBUG - Checking product_id 277553639 in DataFrame
2025-04-14 14:41:58,563 - DEBUG - Added product 277553639 to similar_products
2025-04-14 14:41:58,564 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:41:58,566 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:41:58,567 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:41:58,570 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:41:58,571 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:41:58,574 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:41:58,574 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:41:58,576 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:41:58,577 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:41:58,579 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:41:58,580 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:41:58,582 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:41:58,583 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:41:58,586 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:41:58,587 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:41:58,590 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:41:58,590 - DEBUG - Final similar_products count: 10
2025-04-14 14:41:58,591 - DEBUG - Final similar_products: [273185467, 277553639, 276944892, 273186334, 273029857, 276274790, 272328188, 272348047, 274405521, 272270730]
2025-04-14 14:41:58,592 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250878 ---
2025-04-14 14:41:58,593 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:41:58,594 - DEBUG - Preparing response with similar products
2025-04-14 14:41:58,607 - DEBUG - --- Completed request for /api/recommendations/276250878 ---
2025-04-14 14:41:58,616 - DEBUG - --- Processing request for /api/recommendations/276250878 ---
2025-04-14 14:41:58,621 - DEBUG - Limit set to: 10
2025-04-14 14:41:58,622 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250878 ---
2025-04-14 14:41:58,623 - DEBUG - Checking if product_id 276250878 exists in product_ids
2025-04-14 14:41:58,626 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:41:58,628 - DEBUG - Fetching product details from Tiki API for product_id: 276250878
2025-04-14 14:41:58,920 - DEBUG - Extracting product details
2025-04-14 14:41:58,942 - DEBUG - Brand_name: Samsung
2025-04-14 14:41:58,949 - DEBUG - Encoding combined text to embedding
2025-04-14 14:41:59,054 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:41:59,055 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:41:59,057 - DEBUG - FAISS search results - distances: [[1.5281200783923143e-13, 0.2048451006412506, 0.20767593383789062, 0.20839110016822815, 0.20851877331733704, 0.2103060781955719, 0.22707059979438782, 0.22834089398384094, 0.24846692383289337, 0.2511472702026367, 0.2545849084854126]]
2025-04-14 14:41:59,058 - DEBUG - FAISS search results - indices: [[33, 2013, 644, 318, 2204, 2024, 242, 228, 123, 23, 859]]
2025-04-14 14:41:59,059 - DEBUG - Filtered result_product_ids: [273185467, 277553639, 276944892, 273186334, 273029857, 276274790, 272328188, 272348047, 274405521, 272270730]
2025-04-14 14:41:59,060 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-14 14:41:59,063 - DEBUG - Added product 273185467 to similar_products
2025-04-14 14:41:59,064 - DEBUG - Checking product_id 277553639 in DataFrame
2025-04-14 14:41:59,067 - DEBUG - Added product 277553639 to similar_products
2025-04-14 14:41:59,069 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:41:59,071 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:41:59,072 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:41:59,074 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:41:59,075 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:41:59,078 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:41:59,079 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:41:59,081 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:41:59,082 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:41:59,085 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:41:59,085 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:41:59,088 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:41:59,088 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:41:59,090 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:41:59,091 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:41:59,094 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:41:59,095 - DEBUG - Final similar_products count: 10
2025-04-14 14:41:59,095 - DEBUG - Final similar_products: [273185467, 277553639, 276944892, 273186334, 273029857, 276274790, 272328188, 272348047, 274405521, 272270730]
2025-04-14 14:41:59,096 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250878 ---
2025-04-14 14:41:59,097 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:41:59,098 - DEBUG - Preparing response with similar products
2025-04-14 14:41:59,104 - DEBUG - --- Completed request for /api/recommendations/276250878 ---
2025-04-14 14:41:59,979 - DEBUG - --- Processing request for /api/recommendations/273185467 ---
2025-04-14 14:41:59,986 - DEBUG - Limit set to: 10
2025-04-14 14:41:59,989 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273185467 ---
2025-04-14 14:41:59,991 - DEBUG - Checking if product_id 273185467 exists in product_ids
2025-04-14 14:41:59,992 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:41:59,992 - DEBUG - Fetching product details from Tiki API for product_id: 273185467
2025-04-14 14:42:00,238 - DEBUG - Extracting product details
2025-04-14 14:42:00,267 - DEBUG - Brand_name: Samsung
2025-04-14 14:42:00,274 - DEBUG - Encoding combined text to embedding
2025-04-14 14:42:00,412 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:42:00,413 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:42:00,416 - DEBUG - FAISS search results - distances: [[1.239027326918607e-13, 0.17762544751167297, 0.204845130443573, 0.22581443190574646, 0.24840706586837769, 0.2525520622730255, 0.255867063999176, 0.2628058195114136, 0.2630249857902527, 0.2638685405254364, 0.26548850536346436]]
2025-04-14 14:42:00,420 - DEBUG - FAISS search results - indices: [[2013, 2024, 33, 2204, 228, 23, 1702, 318, 213, 123, 859]]
2025-04-14 14:42:00,422 - DEBUG - Filtered result_product_ids: [273029857, 276250878, 273186334, 272328188, 274405521, 277034393, 276944892, 277437876, 272348047, 272270730]
2025-04-14 14:42:00,422 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:42:00,425 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:42:00,427 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:42:00,429 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:42:00,430 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:42:00,432 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:42:00,436 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:42:00,439 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:42:00,441 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:42:00,444 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:42:00,445 - DEBUG - Checking product_id 277034393 in DataFrame
2025-04-14 14:42:00,447 - DEBUG - Added product 277034393 to similar_products
2025-04-14 14:42:00,448 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:42:00,450 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:42:00,455 - DEBUG - Checking product_id 277437876 in DataFrame
2025-04-14 14:42:00,459 - DEBUG - Added product 277437876 to similar_products
2025-04-14 14:42:00,460 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:42:00,462 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:42:00,464 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:42:00,466 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:42:00,475 - DEBUG - Final similar_products count: 10
2025-04-14 14:42:00,476 - DEBUG - Final similar_products: [273029857, 276250878, 273186334, 272328188, 274405521, 277034393, 276944892, 277437876, 272348047, 272270730]
2025-04-14 14:42:00,482 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273185467 ---
2025-04-14 14:42:00,488 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:42:00,489 - DEBUG - Preparing response with similar products
2025-04-14 14:42:00,499 - DEBUG - --- Completed request for /api/recommendations/273185467 ---
2025-04-14 14:42:00,515 - DEBUG - --- Processing request for /api/recommendations/273185467 ---
2025-04-14 14:42:00,523 - DEBUG - Limit set to: 10
2025-04-14 14:42:00,524 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273185467 ---
2025-04-14 14:42:00,525 - DEBUG - Checking if product_id 273185467 exists in product_ids
2025-04-14 14:42:00,526 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:42:00,528 - DEBUG - Fetching product details from Tiki API for product_id: 273185467
2025-04-14 14:42:00,784 - DEBUG - Extracting product details
2025-04-14 14:42:00,803 - DEBUG - Brand_name: Samsung
2025-04-14 14:42:00,809 - DEBUG - Encoding combined text to embedding
2025-04-14 14:42:00,893 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:42:00,894 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:42:00,896 - DEBUG - FAISS search results - distances: [[1.239027326918607e-13, 0.17762544751167297, 0.204845130443573, 0.22581443190574646, 0.24840706586837769, 0.2525520622730255, 0.255867063999176, 0.2628058195114136, 0.2630249857902527, 0.2638685405254364, 0.26548850536346436]]
2025-04-14 14:42:00,897 - DEBUG - FAISS search results - indices: [[2013, 2024, 33, 2204, 228, 23, 1702, 318, 213, 123, 859]]
2025-04-14 14:42:00,898 - DEBUG - Filtered result_product_ids: [273029857, 276250878, 273186334, 272328188, 274405521, 277034393, 276944892, 277437876, 272348047, 272270730]
2025-04-14 14:42:00,898 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:42:00,900 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:42:00,901 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:42:00,903 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:42:00,904 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:42:00,905 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:42:00,906 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:42:00,908 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:42:00,909 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:42:00,911 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:42:00,912 - DEBUG - Checking product_id 277034393 in DataFrame
2025-04-14 14:42:00,914 - DEBUG - Added product 277034393 to similar_products
2025-04-14 14:42:00,915 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:42:00,916 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:42:00,917 - DEBUG - Checking product_id 277437876 in DataFrame
2025-04-14 14:42:00,919 - DEBUG - Added product 277437876 to similar_products
2025-04-14 14:42:00,920 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:42:00,922 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:42:00,922 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:42:00,924 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:42:00,925 - DEBUG - Final similar_products count: 10
2025-04-14 14:42:00,926 - DEBUG - Final similar_products: [273029857, 276250878, 273186334, 272328188, 274405521, 277034393, 276944892, 277437876, 272348047, 272270730]
2025-04-14 14:42:00,927 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273185467 ---
2025-04-14 14:42:00,928 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:42:00,929 - DEBUG - Preparing response with similar products
2025-04-14 14:42:00,934 - DEBUG - --- Completed request for /api/recommendations/273185467 ---
2025-04-14 14:45:55,290 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:45:55,292 - DEBUG - Limit set to: 10
2025-04-14 14:45:55,293 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:45:55,294 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:45:55,295 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:45:55,296 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:45:55,536 - DEBUG - Extracting product details
2025-04-14 14:45:55,552 - DEBUG - Brand_name: Samsung
2025-04-14 14:45:55,557 - DEBUG - Encoding combined text to embedding
2025-04-14 14:45:55,640 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:45:55,641 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:45:55,643 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:45:55,644 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:45:55,645 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:45:55,645 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:45:55,647 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:45:55,648 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:45:55,650 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:45:55,651 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:45:55,652 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:45:55,653 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:45:55,655 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:45:55,656 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:45:55,658 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:45:55,659 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:45:55,660 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:45:55,661 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:45:55,663 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:45:55,664 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:45:55,666 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:45:55,666 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:45:55,667 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:45:55,668 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:45:55,669 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:45:55,670 - DEBUG - Final similar_products count: 10
2025-04-14 14:45:55,671 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:45:55,672 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:45:55,674 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:45:55,674 - DEBUG - Preparing response with similar products
2025-04-14 14:45:55,679 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:45:55,684 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:45:55,687 - DEBUG - Limit set to: 10
2025-04-14 14:45:55,687 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:45:55,689 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:45:55,690 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:45:55,691 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:45:56,031 - DEBUG - Extracting product details
2025-04-14 14:45:56,055 - DEBUG - Brand_name: Samsung
2025-04-14 14:45:56,061 - DEBUG - Encoding combined text to embedding
2025-04-14 14:45:56,151 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:45:56,152 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:45:56,154 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:45:56,155 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:45:56,156 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:45:56,157 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:45:56,159 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:45:56,160 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:45:56,163 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:45:56,164 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:45:56,166 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:45:56,166 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:45:56,168 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:45:56,169 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:45:56,171 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:45:56,172 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:45:56,175 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:45:56,176 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:45:56,178 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:45:56,179 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:45:56,182 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:45:56,182 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:45:56,184 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:45:56,185 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:45:56,187 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:45:56,187 - DEBUG - Final similar_products count: 10
2025-04-14 14:45:56,188 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:45:56,189 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:45:56,189 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:45:56,191 - DEBUG - Preparing response with similar products
2025-04-14 14:45:56,198 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:46:00,533 - DEBUG - --- Processing request for /api/recommendations/273186334 ---
2025-04-14 14:46:00,534 - DEBUG - Limit set to: 10
2025-04-14 14:46:00,535 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273186334 ---
2025-04-14 14:46:00,536 - DEBUG - Checking if product_id 273186334 exists in product_ids
2025-04-14 14:46:00,537 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:46:00,538 - DEBUG - Fetching product details from Tiki API for product_id: 273186334
2025-04-14 14:46:00,798 - DEBUG - Extracting product details
2025-04-14 14:46:00,811 - DEBUG - Brand_name: Samsung
2025-04-14 14:46:00,816 - DEBUG - Encoding combined text to embedding
2025-04-14 14:46:00,892 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:46:00,893 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:46:00,895 - DEBUG - FAISS search results - distances: [[1.0347429700184249e-13, 0.13922788202762604, 0.14463213086128235, 0.1698482185602188, 0.17413318157196045, 0.18274560570716858, 0.20291867852210999, 0.20851878821849823, 0.21144047379493713, 0.22059789299964905, 0.22581441700458527]]
2025-04-14 14:46:00,896 - DEBUG - FAISS search results - indices: [[2204, 2024, 859, 228, 123, 23, 1037, 33, 1913, 242, 2013]]
2025-04-14 14:46:00,897 - DEBUG - Filtered result_product_ids: [273029857, 272270730, 272328188, 272348047, 274405521, 277039291, 276250878, 273258830, 276274790, 273185467]
2025-04-14 14:46:00,898 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:46:00,900 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:46:00,901 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:46:00,902 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:46:00,903 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:46:00,905 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:46:00,906 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:46:00,909 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:46:00,910 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:46:00,912 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:46:00,913 - DEBUG - Checking product_id 277039291 in DataFrame
2025-04-14 14:46:00,915 - DEBUG - Added product 277039291 to similar_products
2025-04-14 14:46:00,916 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:46:00,917 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:46:00,918 - DEBUG - Checking product_id 273258830 in DataFrame
2025-04-14 14:46:00,919 - DEBUG - Added product 273258830 to similar_products
2025-04-14 14:46:00,920 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:46:00,922 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:46:00,923 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-14 14:46:00,924 - DEBUG - Added product 273185467 to similar_products
2025-04-14 14:46:00,925 - DEBUG - Final similar_products count: 10
2025-04-14 14:46:00,926 - DEBUG - Final similar_products: [273029857, 272270730, 272328188, 272348047, 274405521, 277039291, 276250878, 273258830, 276274790, 273185467]
2025-04-14 14:46:00,927 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273186334 ---
2025-04-14 14:46:00,928 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:46:00,929 - DEBUG - Preparing response with similar products
2025-04-14 14:46:00,934 - DEBUG - --- Completed request for /api/recommendations/273186334 ---
2025-04-14 14:46:00,939 - DEBUG - --- Processing request for /api/recommendations/273186334 ---
2025-04-14 14:46:00,941 - DEBUG - Limit set to: 10
2025-04-14 14:46:00,942 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273186334 ---
2025-04-14 14:46:00,943 - DEBUG - Checking if product_id 273186334 exists in product_ids
2025-04-14 14:46:00,945 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:46:00,946 - DEBUG - Fetching product details from Tiki API for product_id: 273186334
2025-04-14 14:46:01,254 - DEBUG - Extracting product details
2025-04-14 14:46:01,266 - DEBUG - Brand_name: Samsung
2025-04-14 14:46:01,269 - DEBUG - Encoding combined text to embedding
2025-04-14 14:46:01,338 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:46:01,339 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:46:01,342 - DEBUG - FAISS search results - distances: [[1.0347429700184249e-13, 0.13922788202762604, 0.14463213086128235, 0.1698482185602188, 0.17413318157196045, 0.18274560570716858, 0.20291867852210999, 0.20851878821849823, 0.21144047379493713, 0.22059789299964905, 0.22581441700458527]]
2025-04-14 14:46:01,344 - DEBUG - FAISS search results - indices: [[2204, 2024, 859, 228, 123, 23, 1037, 33, 1913, 242, 2013]]
2025-04-14 14:46:01,345 - DEBUG - Filtered result_product_ids: [273029857, 272270730, 272328188, 272348047, 274405521, 277039291, 276250878, 273258830, 276274790, 273185467]
2025-04-14 14:46:01,346 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:46:01,348 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:46:01,349 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:46:01,351 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:46:01,352 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:46:01,353 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:46:01,354 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:46:01,355 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:46:01,357 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:46:01,359 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:46:01,360 - DEBUG - Checking product_id 277039291 in DataFrame
2025-04-14 14:46:01,362 - DEBUG - Added product 277039291 to similar_products
2025-04-14 14:46:01,363 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:46:01,365 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:46:01,367 - DEBUG - Checking product_id 273258830 in DataFrame
2025-04-14 14:46:01,369 - DEBUG - Added product 273258830 to similar_products
2025-04-14 14:46:01,370 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:46:01,372 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:46:01,373 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-14 14:46:01,378 - DEBUG - Added product 273185467 to similar_products
2025-04-14 14:46:01,379 - DEBUG - Final similar_products count: 10
2025-04-14 14:46:01,380 - DEBUG - Final similar_products: [273029857, 272270730, 272328188, 272348047, 274405521, 277039291, 276250878, 273258830, 276274790, 273185467]
2025-04-14 14:46:01,380 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273186334 ---
2025-04-14 14:46:01,381 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:46:01,382 - DEBUG - Preparing response with similar products
2025-04-14 14:46:01,388 - DEBUG - --- Completed request for /api/recommendations/273186334 ---
2025-04-14 14:46:53,226 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:46:53,228 - DEBUG - Limit set to: 10
2025-04-14 14:46:53,229 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:46:53,231 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:46:53,232 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:46:53,233 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:46:53,468 - DEBUG - Extracting product details
2025-04-14 14:46:53,484 - DEBUG - Brand_name: Samsung
2025-04-14 14:46:53,488 - DEBUG - Encoding combined text to embedding
2025-04-14 14:46:53,568 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:46:53,569 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:46:53,572 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:46:53,573 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:46:53,573 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:46:53,574 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:46:53,576 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:46:53,577 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:46:53,579 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:46:53,580 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:46:53,582 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:46:53,583 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:46:53,584 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:46:53,585 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:46:53,587 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:46:53,587 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:46:53,589 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:46:53,590 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:46:53,591 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:46:53,592 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:46:53,595 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:46:53,595 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:46:53,597 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:46:53,598 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:46:53,600 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:46:53,600 - DEBUG - Final similar_products count: 10
2025-04-14 14:46:53,601 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:46:53,602 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:46:53,603 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:46:53,603 - DEBUG - Preparing response with similar products
2025-04-14 14:46:53,609 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:47:22,200 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:47:22,202 - DEBUG - Limit set to: 10
2025-04-14 14:47:22,203 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:47:22,203 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:47:22,204 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:47:22,205 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:47:22,459 - DEBUG - Extracting product details
2025-04-14 14:47:22,469 - DEBUG - Brand_name: Samsung
2025-04-14 14:47:22,473 - DEBUG - Encoding combined text to embedding
2025-04-14 14:47:22,555 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:47:22,555 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:47:22,558 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:47:22,559 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:47:22,560 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:47:22,561 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:47:22,563 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:47:22,563 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:47:22,565 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:47:22,566 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:47:22,568 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:47:22,568 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:47:22,570 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:47:22,571 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:47:22,573 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:47:22,574 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:47:22,576 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:47:22,577 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:47:22,578 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:47:22,579 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:47:22,580 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:47:22,581 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:47:22,582 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:47:22,583 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:47:22,585 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:47:22,585 - DEBUG - Final similar_products count: 10
2025-04-14 14:47:22,586 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:47:22,587 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:47:22,587 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:47:22,588 - DEBUG - Preparing response with similar products
2025-04-14 14:47:22,595 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:47:27,831 - DEBUG - --- Processing request for /api/recommendations/273186334 ---
2025-04-14 14:47:27,833 - DEBUG - Limit set to: 10
2025-04-14 14:47:27,833 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273186334 ---
2025-04-14 14:47:27,834 - DEBUG - Checking if product_id 273186334 exists in product_ids
2025-04-14 14:47:27,835 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:47:27,836 - DEBUG - Fetching product details from Tiki API for product_id: 273186334
2025-04-14 14:47:28,028 - DEBUG - Extracting product details
2025-04-14 14:47:28,037 - DEBUG - Brand_name: Samsung
2025-04-14 14:47:28,041 - DEBUG - Encoding combined text to embedding
2025-04-14 14:47:28,118 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:47:28,118 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:47:28,120 - DEBUG - FAISS search results - distances: [[1.0347429700184249e-13, 0.13922788202762604, 0.14463213086128235, 0.1698482185602188, 0.17413318157196045, 0.18274560570716858, 0.20291867852210999, 0.20851878821849823, 0.21144047379493713, 0.22059789299964905, 0.22581441700458527]]
2025-04-14 14:47:28,121 - DEBUG - FAISS search results - indices: [[2204, 2024, 859, 228, 123, 23, 1037, 33, 1913, 242, 2013]]
2025-04-14 14:47:28,122 - DEBUG - Filtered result_product_ids: [273029857, 272270730, 272328188, 272348047, 274405521, 277039291, 276250878, 273258830, 276274790, 273185467]
2025-04-14 14:47:28,123 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:47:28,125 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:47:28,126 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 14:47:28,128 - DEBUG - Added product 272270730 to similar_products
2025-04-14 14:47:28,129 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:47:28,130 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:47:28,131 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:47:28,132 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:47:28,133 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:47:28,134 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:47:28,135 - DEBUG - Checking product_id 277039291 in DataFrame
2025-04-14 14:47:28,136 - DEBUG - Added product 277039291 to similar_products
2025-04-14 14:47:28,137 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:47:28,138 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:47:28,140 - DEBUG - Checking product_id 273258830 in DataFrame
2025-04-14 14:47:28,142 - DEBUG - Added product 273258830 to similar_products
2025-04-14 14:47:28,143 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:47:28,144 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:47:28,145 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-14 14:47:28,146 - DEBUG - Added product 273185467 to similar_products
2025-04-14 14:47:28,147 - DEBUG - Final similar_products count: 10
2025-04-14 14:47:28,148 - DEBUG - Final similar_products: [273029857, 272270730, 272328188, 272348047, 274405521, 277039291, 276250878, 273258830, 276274790, 273185467]
2025-04-14 14:47:28,148 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273186334 ---
2025-04-14 14:47:28,149 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:47:28,149 - DEBUG - Preparing response with similar products
2025-04-14 14:47:28,155 - DEBUG - --- Completed request for /api/recommendations/273186334 ---
2025-04-14 14:47:30,929 - DEBUG - --- Processing request for /api/recommendations/276944892 ---
2025-04-14 14:47:30,931 - DEBUG - Limit set to: 10
2025-04-14 14:47:30,932 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276944892 ---
2025-04-14 14:47:30,933 - DEBUG - Checking if product_id 276944892 exists in product_ids
2025-04-14 14:47:30,934 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:47:30,935 - DEBUG - Fetching product details from Tiki API for product_id: 276944892
2025-04-14 14:47:31,186 - DEBUG - Extracting product details
2025-04-14 14:47:31,206 - DEBUG - Brand_name: Samsung
2025-04-14 14:47:31,212 - DEBUG - Encoding combined text to embedding
2025-04-14 14:47:31,289 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:47:31,290 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:47:31,293 - DEBUG - FAISS search results - distances: [[1.1909574617729318e-13, 0.03356482833623886, 0.05118638649582863, 0.06292673945426941, 0.06883507966995239, 0.07915368676185608, 0.1399085521697998, 0.2013041377067566, 0.20333516597747803, 0.20651915669441223, 0.20839110016822815]]
2025-04-14 14:47:31,294 - DEBUG - FAISS search results - indices: [[318, 242, 228, 123, 315, 23, 213, 2616, 1426, 1304, 33]]
2025-04-14 14:47:31,295 - DEBUG - Filtered result_product_ids: [276274790, 272328188, 272348047, 276944868, 274405521, 277437876, 277348490, 275386465, 277360073, 276250878]
2025-04-14 14:47:31,296 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:47:31,298 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:47:31,300 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:47:31,302 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:47:31,303 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:47:31,306 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:47:31,307 - DEBUG - Checking product_id 276944868 in DataFrame
2025-04-14 14:47:31,309 - DEBUG - Added product 276944868 to similar_products
2025-04-14 14:47:31,310 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:47:31,313 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:47:31,314 - DEBUG - Checking product_id 277437876 in DataFrame
2025-04-14 14:47:31,316 - DEBUG - Added product 277437876 to similar_products
2025-04-14 14:47:31,317 - DEBUG - Checking product_id 277348490 in DataFrame
2025-04-14 14:47:31,319 - DEBUG - Added product 277348490 to similar_products
2025-04-14 14:47:31,320 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-14 14:47:31,322 - DEBUG - Added product 275386465 to similar_products
2025-04-14 14:47:31,323 - DEBUG - Checking product_id 277360073 in DataFrame
2025-04-14 14:47:31,325 - DEBUG - Added product 277360073 to similar_products
2025-04-14 14:47:31,326 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:47:31,328 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:47:31,329 - DEBUG - Final similar_products count: 10
2025-04-14 14:47:31,330 - DEBUG - Final similar_products: [276274790, 272328188, 272348047, 276944868, 274405521, 277437876, 277348490, 275386465, 277360073, 276250878]
2025-04-14 14:47:31,331 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276944892 ---
2025-04-14 14:47:31,332 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:47:31,333 - DEBUG - Preparing response with similar products
2025-04-14 14:47:31,344 - DEBUG - --- Completed request for /api/recommendations/276944892 ---
2025-04-14 14:47:54,124 - DEBUG - --- Processing request for /api/recommendations/276166741 ---
2025-04-14 14:47:54,126 - DEBUG - Limit set to: 10
2025-04-14 14:47:54,126 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276166741 ---
2025-04-14 14:47:54,127 - DEBUG - Checking if product_id 276166741 exists in product_ids
2025-04-14 14:47:54,128 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:47:54,129 - DEBUG - Fetching product details from Tiki API for product_id: 276166741
2025-04-14 14:47:54,353 - DEBUG - Extracting product details
2025-04-14 14:47:54,364 - DEBUG - Brand_name: Tecno
2025-04-14 14:47:54,370 - DEBUG - Encoding combined text to embedding
2025-04-14 14:47:54,459 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:47:54,460 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:47:54,462 - DEBUG - FAISS search results - distances: [[1.2842784019410913e-13, 0.31442129611968994, 0.33132219314575195, 0.33495086431503296, 0.3394099175930023, 0.3424556851387024, 0.3502369523048401, 0.3536352217197418, 0.3562469780445099, 0.3611341118812561, 0.36904382705688477]]
2025-04-14 14:47:54,463 - DEBUG - FAISS search results - indices: [[12, 23, 224, 1885, 240, 975, 1561, 644, 549, 318, 1550]]
2025-04-14 14:47:54,464 - DEBUG - Filtered result_product_ids: [274405521, 273636845, 273373420, 276536922, 277030799, 275206906, 277553639, 272850971, 276944892, 272241346]
2025-04-14 14:47:54,464 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:47:54,466 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:47:54,467 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:47:54,469 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:47:54,471 - DEBUG - Checking product_id 273373420 in DataFrame
2025-04-14 14:47:54,473 - DEBUG - Added product 273373420 to similar_products
2025-04-14 14:47:54,474 - DEBUG - Checking product_id 276536922 in DataFrame
2025-04-14 14:47:54,476 - DEBUG - Added product 276536922 to similar_products
2025-04-14 14:47:54,477 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-14 14:47:54,479 - DEBUG - Added product 277030799 to similar_products
2025-04-14 14:47:54,479 - DEBUG - Checking product_id 275206906 in DataFrame
2025-04-14 14:47:54,481 - DEBUG - Added product 275206906 to similar_products
2025-04-14 14:47:54,483 - DEBUG - Checking product_id 277553639 in DataFrame
2025-04-14 14:47:54,487 - DEBUG - Added product 277553639 to similar_products
2025-04-14 14:47:54,487 - DEBUG - Checking product_id 272850971 in DataFrame
2025-04-14 14:47:54,489 - DEBUG - Added product 272850971 to similar_products
2025-04-14 14:47:54,490 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:47:54,491 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:47:54,492 - DEBUG - Checking product_id 272241346 in DataFrame
2025-04-14 14:47:54,494 - DEBUG - Added product 272241346 to similar_products
2025-04-14 14:47:54,495 - DEBUG - Final similar_products count: 10
2025-04-14 14:47:54,496 - DEBUG - Final similar_products: [274405521, 273636845, 273373420, 276536922, 277030799, 275206906, 277553639, 272850971, 276944892, 272241346]
2025-04-14 14:47:54,496 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276166741 ---
2025-04-14 14:47:54,497 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:47:54,497 - DEBUG - Preparing response with similar products
2025-04-14 14:47:54,507 - DEBUG - --- Completed request for /api/recommendations/276166741 ---
2025-04-14 14:48:06,924 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:48:06,926 - DEBUG - Limit set to: 10
2025-04-14 14:48:06,927 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:48:06,927 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:48:06,928 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:48:06,929 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:48:07,151 - DEBUG - Extracting product details
2025-04-14 14:48:07,164 - DEBUG - Brand_name: Samsung
2025-04-14 14:48:07,168 - DEBUG - Encoding combined text to embedding
2025-04-14 14:48:07,244 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:48:07,245 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:48:07,247 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:48:07,247 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:48:07,248 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:48:07,249 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:48:07,251 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:48:07,251 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:48:07,253 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:48:07,254 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:48:07,256 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:48:07,257 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:48:07,259 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:48:07,259 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:48:07,261 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:48:07,265 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:48:07,267 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:48:07,268 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:48:07,272 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:48:07,273 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:48:07,276 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:48:07,277 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:48:07,279 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:48:07,281 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:48:07,286 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:48:07,288 - DEBUG - Final similar_products count: 10
2025-04-14 14:48:07,291 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:48:07,292 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:48:07,294 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:48:07,295 - DEBUG - Preparing response with similar products
2025-04-14 14:48:07,301 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:48:40,333 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:48:40,336 - DEBUG - Limit set to: 10
2025-04-14 14:48:40,338 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:48:40,339 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:48:40,340 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:48:40,342 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:48:40,559 - DEBUG - Extracting product details
2025-04-14 14:48:40,577 - DEBUG - Brand_name: Samsung
2025-04-14 14:48:40,583 - DEBUG - Encoding combined text to embedding
2025-04-14 14:48:40,787 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:48:40,788 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:48:40,790 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:48:40,792 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:48:40,793 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:48:40,794 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:48:40,796 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:48:40,797 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:48:40,799 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:48:40,804 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:48:40,807 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:48:40,809 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:48:40,811 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:48:40,813 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:48:40,814 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:48:40,815 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:48:40,818 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:48:40,819 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:48:40,822 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:48:40,824 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:48:40,827 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:48:40,828 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:48:40,830 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:48:40,834 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:48:40,837 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:48:40,838 - DEBUG - Final similar_products count: 10
2025-04-14 14:48:40,838 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:48:40,839 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:48:40,840 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:48:40,841 - DEBUG - Preparing response with similar products
2025-04-14 14:48:40,847 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:48:58,169 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 14:48:58,172 - DEBUG - Limit set to: 10
2025-04-14 14:48:58,173 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:48:58,174 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 14:48:58,175 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:48:58,176 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 14:48:58,379 - DEBUG - Extracting product details
2025-04-14 14:48:58,396 - DEBUG - Brand_name: Samsung
2025-04-14 14:48:58,428 - DEBUG - Encoding combined text to embedding
2025-04-14 14:48:58,550 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:48:58,551 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:48:58,556 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 14:48:58,557 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 14:48:58,558 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:48:58,560 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 14:48:58,562 - DEBUG - Added product 273186334 to similar_products
2025-04-14 14:48:58,564 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 14:48:58,566 - DEBUG - Added product 276250878 to similar_products
2025-04-14 14:48:58,567 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 14:48:58,569 - DEBUG - Added product 273029857 to similar_products
2025-04-14 14:48:58,572 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 14:48:58,576 - DEBUG - Added product 273636845 to similar_products
2025-04-14 14:48:58,577 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:48:58,581 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:48:58,582 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 14:48:58,584 - DEBUG - Added product 276274790 to similar_products
2025-04-14 14:48:58,587 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:48:58,591 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:48:58,592 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:48:58,596 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:48:58,597 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:48:58,600 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:48:58,600 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 14:48:58,607 - DEBUG - Added product 273610105 to similar_products
2025-04-14 14:48:58,608 - DEBUG - Final similar_products count: 10
2025-04-14 14:48:58,609 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 14:48:58,610 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 14:48:58,612 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:48:58,613 - DEBUG - Preparing response with similar products
2025-04-14 14:48:58,620 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 14:49:09,865 - DEBUG - --- Processing request for /api/recommendations/276274790 ---
2025-04-14 14:49:09,867 - DEBUG - Limit set to: 10
2025-04-14 14:49:09,867 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276274790 ---
2025-04-14 14:49:09,868 - DEBUG - Checking if product_id 276274790 exists in product_ids
2025-04-14 14:49:09,869 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:49:09,870 - DEBUG - Fetching product details from Tiki API for product_id: 276274790
2025-04-14 14:49:10,077 - DEBUG - Extracting product details
2025-04-14 14:49:10,097 - DEBUG - Brand_name: Samsung
2025-04-14 14:49:10,102 - DEBUG - Encoding combined text to embedding
2025-04-14 14:49:10,171 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:49:10,171 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:49:10,174 - DEBUG - FAISS search results - distances: [[1.431716615922507e-13, 0.025952879339456558, 0.02949638105928898, 0.033564817160367966, 0.04260799288749695, 0.05314033851027489, 0.10926796495914459, 0.18103960156440735, 0.18344208598136902, 0.19602875411510468, 0.19735360145568848]]
2025-04-14 14:49:10,175 - DEBUG - FAISS search results - indices: [[242, 228, 123, 318, 315, 23, 213, 2616, 1353, 793, 1265]]
2025-04-14 14:49:10,175 - DEBUG - Filtered result_product_ids: [272328188, 272348047, 276944892, 276944868, 274405521, 277437876, 277348490, 277360329, 277005407, 274156763]
2025-04-14 14:49:10,176 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 14:49:10,178 - DEBUG - Added product 272328188 to similar_products
2025-04-14 14:49:10,179 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 14:49:10,180 - DEBUG - Added product 272348047 to similar_products
2025-04-14 14:49:10,181 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 14:49:10,183 - DEBUG - Added product 276944892 to similar_products
2025-04-14 14:49:10,184 - DEBUG - Checking product_id 276944868 in DataFrame
2025-04-14 14:49:10,186 - DEBUG - Added product 276944868 to similar_products
2025-04-14 14:49:10,186 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 14:49:10,187 - DEBUG - Added product 274405521 to similar_products
2025-04-14 14:49:10,188 - DEBUG - Checking product_id 277437876 in DataFrame
2025-04-14 14:49:10,189 - DEBUG - Added product 277437876 to similar_products
2025-04-14 14:49:10,190 - DEBUG - Checking product_id 277348490 in DataFrame
2025-04-14 14:49:10,192 - DEBUG - Added product 277348490 to similar_products
2025-04-14 14:49:10,194 - DEBUG - Checking product_id 277360329 in DataFrame
2025-04-14 14:49:10,196 - DEBUG - Added product 277360329 to similar_products
2025-04-14 14:49:10,197 - DEBUG - Checking product_id 277005407 in DataFrame
2025-04-14 14:49:10,199 - DEBUG - Added product 277005407 to similar_products
2025-04-14 14:49:10,201 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-14 14:49:10,203 - DEBUG - Added product 274156763 to similar_products
2025-04-14 14:49:10,204 - DEBUG - Final similar_products count: 10
2025-04-14 14:49:10,205 - DEBUG - Final similar_products: [272328188, 272348047, 276944892, 276944868, 274405521, 277437876, 277348490, 277360329, 277005407, 274156763]
2025-04-14 14:49:10,206 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276274790 ---
2025-04-14 14:49:10,206 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:49:10,207 - DEBUG - Preparing response with similar products
2025-04-14 14:49:10,213 - DEBUG - --- Completed request for /api/recommendations/276274790 ---
2025-04-14 14:49:21,667 - DEBUG - --- Processing request for /api/recommendations/271967379 ---
2025-04-14 14:49:21,668 - DEBUG - Limit set to: 10
2025-04-14 14:49:21,671 - DEBUG - --- Starting get_similar_products_by_id for product_id: 271967379 ---
2025-04-14 14:49:21,671 - DEBUG - Checking if product_id 271967379 exists in product_ids
2025-04-14 14:49:21,673 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:49:21,674 - DEBUG - Fetching product details from Tiki API for product_id: 271967379
2025-04-14 14:49:22,359 - DEBUG - Extracting product details
2025-04-14 14:49:22,359 - DEBUG - Name: Apple iPhone 15 Plus
2025-04-14 14:49:22,371 - DEBUG - Brand_name: Apple
2025-04-14 14:49:22,377 - DEBUG - Encoding combined text to embedding
2025-04-14 14:49:22,453 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:49:22,454 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:49:22,457 - DEBUG - FAISS search results - distances: [[0.4618679881095886, 0.4729158878326416, 0.4860759675502777, 0.49942657351493835, 0.5195915699005127, 0.5206080675125122, 0.5286359786987305, 0.5377883911132812, 0.5427141189575195, 0.5428407192230225, 0.546871542930603]]
2025-04-14 14:49:22,458 - DEBUG - FAISS search results - indices: [[2725, 2136, 5600, 8171, 3022, 7963, 8308, 2736, 1450, 1471, 616]]
2025-04-14 14:49:22,459 - DEBUG - Filtered result_product_ids: [197528405, 102743247, 143113507, 43349730, 274596446, 16052726, 272857473, 134933833, 226947327, 22368573]
2025-04-14 14:49:22,459 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-14 14:49:22,462 - DEBUG - Added product 197528405 to similar_products
2025-04-14 14:49:22,462 - DEBUG - Checking product_id 102743247 in DataFrame
2025-04-14 14:49:22,466 - DEBUG - Added product 102743247 to similar_products
2025-04-14 14:49:22,467 - DEBUG - Checking product_id 143113507 in DataFrame
2025-04-14 14:49:22,469 - DEBUG - Added product 143113507 to similar_products
2025-04-14 14:49:22,471 - DEBUG - Checking product_id 43349730 in DataFrame
2025-04-14 14:49:22,473 - DEBUG - Added product 43349730 to similar_products
2025-04-14 14:49:22,474 - DEBUG - Checking product_id 274596446 in DataFrame
2025-04-14 14:49:22,476 - DEBUG - Added product 274596446 to similar_products
2025-04-14 14:49:22,477 - DEBUG - Checking product_id 16052726 in DataFrame
2025-04-14 14:49:22,478 - DEBUG - Added product 16052726 to similar_products
2025-04-14 14:49:22,479 - DEBUG - Checking product_id 272857473 in DataFrame
2025-04-14 14:49:22,482 - DEBUG - Added product 272857473 to similar_products
2025-04-14 14:49:22,483 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-14 14:49:22,485 - DEBUG - Added product 134933833 to similar_products
2025-04-14 14:49:22,486 - DEBUG - Checking product_id 226947327 in DataFrame
2025-04-14 14:49:22,488 - DEBUG - Added product 226947327 to similar_products
2025-04-14 14:49:22,489 - DEBUG - Checking product_id 22368573 in DataFrame
2025-04-14 14:49:22,491 - DEBUG - Added product 22368573 to similar_products
2025-04-14 14:49:22,491 - DEBUG - Final similar_products count: 10
2025-04-14 14:49:22,492 - DEBUG - Final similar_products: [197528405, 102743247, 143113507, 43349730, 274596446, 16052726, 272857473, 134933833, 226947327, 22368573]
2025-04-14 14:49:22,492 - DEBUG - --- Completed get_similar_products_by_id for product_id: 271967379 ---
2025-04-14 14:49:22,493 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:49:22,494 - DEBUG - Preparing response with similar products
2025-04-14 14:49:22,502 - DEBUG - --- Completed request for /api/recommendations/271967379 ---
2025-04-14 14:49:28,238 - DEBUG - --- Processing request for /api/recommendations/276109904 ---
2025-04-14 14:49:28,240 - DEBUG - Limit set to: 10
2025-04-14 14:49:28,243 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276109904 ---
2025-04-14 14:49:28,244 - DEBUG - Checking if product_id 276109904 exists in product_ids
2025-04-14 14:49:28,245 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:49:28,246 - DEBUG - Fetching product details from Tiki API for product_id: 276109904
2025-04-14 14:49:28,543 - DEBUG - Extracting product details
2025-04-14 14:49:28,544 - DEBUG - Name: Apple iPhone 16 Pro Max
2025-04-14 14:49:28,548 - DEBUG - Short_description: ...
2025-04-14 14:49:28,561 - DEBUG - Brand_name: Apple
2025-04-14 14:49:28,570 - DEBUG - Encoding combined text to embedding
2025-04-14 14:49:28,687 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:49:28,688 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:49:28,693 - DEBUG - FAISS search results - distances: [[0.7518423795700073, 0.7643933296203613, 0.7799360156059265, 0.8041405081748962, 0.8314632773399353, 0.8337122201919556, 0.8422623872756958, 0.8424800634384155, 0.8474961519241333, 0.8499079942703247, 0.8533103466033936]]
2025-04-14 14:49:28,694 - DEBUG - FAISS search results - indices: [[930, 3877, 7387, 2736, 1310, 1205, 8546, 2725, 2294, 780, 1833]]
2025-04-14 14:49:28,695 - DEBUG - Filtered result_product_ids: [273237704, 72849098, 183330021, 134933833, 274378214, 230157205, 205815576, 197528405, 273440662, 230155305]
2025-04-14 14:49:28,696 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-14 14:49:28,698 - DEBUG - Added product 273237704 to similar_products
2025-04-14 14:49:28,700 - DEBUG - Checking product_id 72849098 in DataFrame
2025-04-14 14:49:28,702 - DEBUG - Added product 72849098 to similar_products
2025-04-14 14:49:28,704 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-14 14:49:28,707 - DEBUG - Added product 183330021 to similar_products
2025-04-14 14:49:28,709 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-14 14:49:28,711 - DEBUG - Added product 134933833 to similar_products
2025-04-14 14:49:28,712 - DEBUG - Checking product_id 274378214 in DataFrame
2025-04-14 14:49:28,714 - DEBUG - Added product 274378214 to similar_products
2025-04-14 14:49:28,715 - DEBUG - Checking product_id 230157205 in DataFrame
2025-04-14 14:49:28,717 - DEBUG - Added product 230157205 to similar_products
2025-04-14 14:49:28,719 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-14 14:49:28,722 - DEBUG - Added product 205815576 to similar_products
2025-04-14 14:49:28,723 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-14 14:49:28,743 - DEBUG - Added product 197528405 to similar_products
2025-04-14 14:49:28,744 - DEBUG - Checking product_id 273440662 in DataFrame
2025-04-14 14:49:28,746 - DEBUG - Added product 273440662 to similar_products
2025-04-14 14:49:28,748 - DEBUG - Checking product_id 230155305 in DataFrame
2025-04-14 14:49:28,752 - DEBUG - Added product 230155305 to similar_products
2025-04-14 14:49:28,753 - DEBUG - Final similar_products count: 10
2025-04-14 14:49:28,753 - DEBUG - Final similar_products: [273237704, 72849098, 183330021, 134933833, 274378214, 230157205, 205815576, 197528405, 273440662, 230155305]
2025-04-14 14:49:28,754 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276109904 ---
2025-04-14 14:49:28,755 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:49:28,756 - DEBUG - Preparing response with similar products
2025-04-14 14:49:28,761 - DEBUG - --- Completed request for /api/recommendations/276109904 ---
2025-04-14 14:49:31,910 - DEBUG - --- Processing request for /api/recommendations/276110276 ---
2025-04-14 14:49:31,913 - DEBUG - Limit set to: 10
2025-04-14 14:49:31,915 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276110276 ---
2025-04-14 14:49:31,916 - DEBUG - Checking if product_id 276110276 exists in product_ids
2025-04-14 14:49:31,918 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:49:31,918 - DEBUG - Fetching product details from Tiki API for product_id: 276110276
2025-04-14 14:49:32,137 - DEBUG - Extracting product details
2025-04-14 14:49:32,137 - DEBUG - Name: Apple iPhone 16 Plus
2025-04-14 14:49:32,138 - DEBUG - Short_description: ...
2025-04-14 14:49:32,144 - DEBUG - Brand_name: Apple
2025-04-14 14:49:32,296 - DEBUG - Encoding combined text to embedding
2025-04-14 14:49:32,366 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:49:32,367 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:49:32,369 - DEBUG - FAISS search results - distances: [[0.7177587747573853, 0.7276871204376221, 0.7491031885147095, 0.7756264209747314, 0.7769712209701538, 0.7823809385299683, 0.7919240593910217, 0.795739471912384, 0.7974156737327576, 0.7989251613616943, 0.8006691932678223]]
2025-04-14 14:49:32,370 - DEBUG - FAISS search results - indices: [[3877, 7387, 930, 8546, 35, 1205, 2294, 1115, 1785, 1833, 1188]]
2025-04-14 14:49:32,371 - DEBUG - Filtered result_product_ids: [72849098, 183330021, 273237704, 205815576, 275589387, 230157205, 273440662, 277490201, 273438458, 274544634]
2025-04-14 14:49:32,372 - DEBUG - Checking product_id 72849098 in DataFrame
2025-04-14 14:49:32,375 - DEBUG - Added product 72849098 to similar_products
2025-04-14 14:49:32,375 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-14 14:49:32,378 - DEBUG - Added product 183330021 to similar_products
2025-04-14 14:49:32,379 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-14 14:49:32,381 - DEBUG - Added product 273237704 to similar_products
2025-04-14 14:49:32,382 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-14 14:49:32,384 - DEBUG - Added product 205815576 to similar_products
2025-04-14 14:49:32,386 - DEBUG - Checking product_id 275589387 in DataFrame
2025-04-14 14:49:32,388 - DEBUG - Added product 275589387 to similar_products
2025-04-14 14:49:32,389 - DEBUG - Checking product_id 230157205 in DataFrame
2025-04-14 14:49:32,392 - DEBUG - Added product 230157205 to similar_products
2025-04-14 14:49:32,393 - DEBUG - Checking product_id 273440662 in DataFrame
2025-04-14 14:49:32,396 - DEBUG - Added product 273440662 to similar_products
2025-04-14 14:49:32,397 - DEBUG - Checking product_id 277490201 in DataFrame
2025-04-14 14:49:32,399 - DEBUG - Added product 277490201 to similar_products
2025-04-14 14:49:32,400 - DEBUG - Checking product_id 273438458 in DataFrame
2025-04-14 14:49:32,402 - DEBUG - Added product 273438458 to similar_products
2025-04-14 14:49:32,403 - DEBUG - Checking product_id 274544634 in DataFrame
2025-04-14 14:49:32,406 - DEBUG - Added product 274544634 to similar_products
2025-04-14 14:49:32,406 - DEBUG - Final similar_products count: 10
2025-04-14 14:49:32,407 - DEBUG - Final similar_products: [72849098, 183330021, 273237704, 205815576, 275589387, 230157205, 273440662, 277490201, 273438458, 274544634]
2025-04-14 14:49:32,408 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276110276 ---
2025-04-14 14:49:32,409 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:49:32,410 - DEBUG - Preparing response with similar products
2025-04-14 14:49:32,426 - DEBUG - --- Completed request for /api/recommendations/276110276 ---
2025-04-14 14:49:35,725 - DEBUG - --- Processing request for /api/recommendations/91066307 ---
2025-04-14 14:49:35,726 - DEBUG - Limit set to: 10
2025-04-14 14:49:35,727 - DEBUG - --- Starting get_similar_products_by_id for product_id: 91066307 ---
2025-04-14 14:49:35,728 - DEBUG - Checking if product_id 91066307 exists in product_ids
2025-04-14 14:49:35,729 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:49:35,730 - DEBUG - Fetching product details from Tiki API for product_id: 91066307
2025-04-14 14:49:36,430 - DEBUG - Extracting product details
2025-04-14 14:49:36,444 - DEBUG - Brand_name: OLSG
2025-04-14 14:49:36,449 - DEBUG - Encoding combined text to embedding
2025-04-14 14:49:36,521 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:49:36,522 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:49:36,526 - DEBUG - FAISS search results - distances: [[0.16174395382404327, 0.2962440848350525, 0.3041945695877075, 0.35296139121055603, 0.35783204436302185, 0.3620367646217346, 0.36435794830322266, 0.3982672691345215, 0.39940470457077026, 0.4093884229660034, 0.4313722252845764]]
2025-04-14 14:49:36,527 - DEBUG - FAISS search results - indices: [[1678, 2820, 2806, 2798, 2772, 2761, 2804, 2736, 2725, 2782, 998]]
2025-04-14 14:49:36,528 - DEBUG - Filtered result_product_ids: [85562664, 48420623, 48420268, 48420056, 48419360, 48419114, 48420250, 134933833, 197528405, 48419610]
2025-04-14 14:49:36,529 - DEBUG - Checking product_id 85562664 in DataFrame
2025-04-14 14:49:36,532 - DEBUG - Added product 85562664 to similar_products
2025-04-14 14:49:36,533 - DEBUG - Checking product_id 48420623 in DataFrame
2025-04-14 14:49:36,535 - DEBUG - Added product 48420623 to similar_products
2025-04-14 14:49:36,537 - DEBUG - Checking product_id 48420268 in DataFrame
2025-04-14 14:49:36,540 - DEBUG - Added product 48420268 to similar_products
2025-04-14 14:49:36,541 - DEBUG - Checking product_id 48420056 in DataFrame
2025-04-14 14:49:36,544 - DEBUG - Added product 48420056 to similar_products
2025-04-14 14:49:36,546 - DEBUG - Checking product_id 48419360 in DataFrame
2025-04-14 14:49:36,548 - DEBUG - Added product 48419360 to similar_products
2025-04-14 14:49:36,549 - DEBUG - Checking product_id 48419114 in DataFrame
2025-04-14 14:49:36,551 - DEBUG - Added product 48419114 to similar_products
2025-04-14 14:49:36,552 - DEBUG - Checking product_id 48420250 in DataFrame
2025-04-14 14:49:36,554 - DEBUG - Added product 48420250 to similar_products
2025-04-14 14:49:36,555 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-14 14:49:36,557 - DEBUG - Added product 134933833 to similar_products
2025-04-14 14:49:36,557 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-14 14:49:36,560 - DEBUG - Added product 197528405 to similar_products
2025-04-14 14:49:36,561 - DEBUG - Checking product_id 48419610 in DataFrame
2025-04-14 14:49:36,563 - DEBUG - Added product 48419610 to similar_products
2025-04-14 14:49:36,564 - DEBUG - Final similar_products count: 10
2025-04-14 14:49:36,564 - DEBUG - Final similar_products: [85562664, 48420623, 48420268, 48420056, 48419360, 48419114, 48420250, 134933833, 197528405, 48419610]
2025-04-14 14:49:36,565 - DEBUG - --- Completed get_similar_products_by_id for product_id: 91066307 ---
2025-04-14 14:49:36,566 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:49:36,567 - DEBUG - Preparing response with similar products
2025-04-14 14:49:36,572 - DEBUG - --- Completed request for /api/recommendations/91066307 ---
2025-04-14 14:49:42,319 - DEBUG - --- Processing request for /api/recommendations/91090581 ---
2025-04-14 14:49:42,322 - DEBUG - Limit set to: 10
2025-04-14 14:49:42,324 - DEBUG - --- Starting get_similar_products_by_id for product_id: 91090581 ---
2025-04-14 14:49:42,325 - DEBUG - Checking if product_id 91090581 exists in product_ids
2025-04-14 14:49:42,325 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:49:42,327 - DEBUG - Fetching product details from Tiki API for product_id: 91090581
2025-04-14 14:49:43,029 - DEBUG - Extracting product details
2025-04-14 14:49:43,041 - DEBUG - Brand_name: OLSG
2025-04-14 14:49:43,047 - DEBUG - Encoding combined text to embedding
2025-04-14 14:49:43,135 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:49:43,136 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:49:43,138 - DEBUG - FAISS search results - distances: [[0.15260547399520874, 0.29065507650375366, 0.2964828610420227, 0.346099317073822, 0.348572701215744, 0.35189858078956604, 0.3571597635746002, 0.3956987261772156, 0.39946460723876953, 0.4008857011795044, 0.4211275577545166]]
2025-04-14 14:49:43,139 - DEBUG - FAISS search results - indices: [[1678, 2820, 2806, 2798, 2772, 2761, 2804, 2725, 2782, 2736, 616]]
2025-04-14 14:49:43,141 - DEBUG - Filtered result_product_ids: [85562664, 48420623, 48420268, 48420056, 48419360, 48419114, 48420250, 197528405, 48419610, 134933833]
2025-04-14 14:49:43,142 - DEBUG - Checking product_id 85562664 in DataFrame
2025-04-14 14:49:43,144 - DEBUG - Added product 85562664 to similar_products
2025-04-14 14:49:43,145 - DEBUG - Checking product_id 48420623 in DataFrame
2025-04-14 14:49:43,148 - DEBUG - Added product 48420623 to similar_products
2025-04-14 14:49:43,149 - DEBUG - Checking product_id 48420268 in DataFrame
2025-04-14 14:49:43,151 - DEBUG - Added product 48420268 to similar_products
2025-04-14 14:49:43,151 - DEBUG - Checking product_id 48420056 in DataFrame
2025-04-14 14:49:43,154 - DEBUG - Added product 48420056 to similar_products
2025-04-14 14:49:43,154 - DEBUG - Checking product_id 48419360 in DataFrame
2025-04-14 14:49:43,157 - DEBUG - Added product 48419360 to similar_products
2025-04-14 14:49:43,158 - DEBUG - Checking product_id 48419114 in DataFrame
2025-04-14 14:49:43,160 - DEBUG - Added product 48419114 to similar_products
2025-04-14 14:49:43,160 - DEBUG - Checking product_id 48420250 in DataFrame
2025-04-14 14:49:43,162 - DEBUG - Added product 48420250 to similar_products
2025-04-14 14:49:43,163 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-14 14:49:43,166 - DEBUG - Added product 197528405 to similar_products
2025-04-14 14:49:43,166 - DEBUG - Checking product_id 48419610 in DataFrame
2025-04-14 14:49:43,168 - DEBUG - Added product 48419610 to similar_products
2025-04-14 14:49:43,169 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-14 14:49:43,170 - DEBUG - Added product 134933833 to similar_products
2025-04-14 14:49:43,171 - DEBUG - Final similar_products count: 10
2025-04-14 14:49:43,172 - DEBUG - Final similar_products: [85562664, 48420623, 48420268, 48420056, 48419360, 48419114, 48420250, 197528405, 48419610, 134933833]
2025-04-14 14:49:43,173 - DEBUG - --- Completed get_similar_products_by_id for product_id: 91090581 ---
2025-04-14 14:49:43,174 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:49:43,175 - DEBUG - Preparing response with similar products
2025-04-14 14:49:43,181 - DEBUG - --- Completed request for /api/recommendations/91090581 ---
2025-04-14 14:49:50,596 - DEBUG - --- Processing request for /api/recommendations/91055702 ---
2025-04-14 14:49:50,599 - DEBUG - Limit set to: 10
2025-04-14 14:49:50,599 - DEBUG - --- Starting get_similar_products_by_id for product_id: 91055702 ---
2025-04-14 14:49:50,600 - DEBUG - Checking if product_id 91055702 exists in product_ids
2025-04-14 14:49:50,601 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:49:50,602 - DEBUG - Fetching product details from Tiki API for product_id: 91055702
2025-04-14 14:49:50,850 - DEBUG - Extracting product details
2025-04-14 14:49:50,867 - DEBUG - Brand_name: OLSG
2025-04-14 14:49:50,872 - DEBUG - Encoding combined text to embedding
2025-04-14 14:49:50,986 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:49:50,988 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:49:50,992 - DEBUG - FAISS search results - distances: [[0.1364046186208725, 0.2883426547050476, 0.2921663522720337, 0.3482415974140167, 0.35137373208999634, 0.35174083709716797, 0.3542959690093994, 0.3850215971469879, 0.38541609048843384, 0.3991585969924927, 0.3994481563568115]]
2025-04-14 14:49:50,994 - DEBUG - FAISS search results - indices: [[1678, 2820, 2806, 2772, 2798, 2761, 2804, 2725, 2736, 2782, 616]]
2025-04-14 14:49:50,996 - DEBUG - Filtered result_product_ids: [85562664, 48420623, 48420268, 48419360, 48420056, 48419114, 48420250, 197528405, 134933833, 48419610]
2025-04-14 14:49:50,997 - DEBUG - Checking product_id 85562664 in DataFrame
2025-04-14 14:49:51,000 - DEBUG - Added product 85562664 to similar_products
2025-04-14 14:49:51,001 - DEBUG - Checking product_id 48420623 in DataFrame
2025-04-14 14:49:51,004 - DEBUG - Added product 48420623 to similar_products
2025-04-14 14:49:51,006 - DEBUG - Checking product_id 48420268 in DataFrame
2025-04-14 14:49:51,008 - DEBUG - Added product 48420268 to similar_products
2025-04-14 14:49:51,012 - DEBUG - Checking product_id 48419360 in DataFrame
2025-04-14 14:49:51,017 - DEBUG - Added product 48419360 to similar_products
2025-04-14 14:49:51,018 - DEBUG - Checking product_id 48420056 in DataFrame
2025-04-14 14:49:51,021 - DEBUG - Added product 48420056 to similar_products
2025-04-14 14:49:51,022 - DEBUG - Checking product_id 48419114 in DataFrame
2025-04-14 14:49:51,026 - DEBUG - Added product 48419114 to similar_products
2025-04-14 14:49:51,028 - DEBUG - Checking product_id 48420250 in DataFrame
2025-04-14 14:49:51,031 - DEBUG - Added product 48420250 to similar_products
2025-04-14 14:49:51,033 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-14 14:49:51,035 - DEBUG - Added product 197528405 to similar_products
2025-04-14 14:49:51,036 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-14 14:49:51,038 - DEBUG - Added product 134933833 to similar_products
2025-04-14 14:49:51,039 - DEBUG - Checking product_id 48419610 in DataFrame
2025-04-14 14:49:51,043 - DEBUG - Added product 48419610 to similar_products
2025-04-14 14:49:51,045 - DEBUG - Final similar_products count: 10
2025-04-14 14:49:51,046 - DEBUG - Final similar_products: [85562664, 48420623, 48420268, 48419360, 48420056, 48419114, 48420250, 197528405, 134933833, 48419610]
2025-04-14 14:49:51,048 - DEBUG - --- Completed get_similar_products_by_id for product_id: 91055702 ---
2025-04-14 14:49:51,049 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:49:51,049 - DEBUG - Preparing response with similar products
2025-04-14 14:49:51,055 - DEBUG - --- Completed request for /api/recommendations/91055702 ---
2025-04-14 14:50:01,557 - DEBUG - --- Processing request for /api/recommendations/102782859 ---
2025-04-14 14:50:01,558 - DEBUG - Limit set to: 10
2025-04-14 14:50:01,559 - DEBUG - --- Starting get_similar_products_by_id for product_id: 102782859 ---
2025-04-14 14:50:01,561 - DEBUG - Checking if product_id 102782859 exists in product_ids
2025-04-14 14:50:01,562 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:50:01,563 - DEBUG - Fetching product details from Tiki API for product_id: 102782859
2025-04-14 14:50:02,263 - DEBUG - Extracting product details
2025-04-14 14:50:02,264 - DEBUG - Name: Tai nghe In Ear Remax RM330 - Hàng chính hãng
2025-04-14 14:50:02,269 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-14 14:50:02,269 - DEBUG - Brand_name: Remax
2025-04-14 14:50:02,274 - DEBUG - Encoding combined text to embedding
2025-04-14 14:50:02,404 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:50:02,405 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:50:02,407 - DEBUG - FAISS search results - distances: [[2.060875477433513e-13, 0.2062053084373474, 0.20735466480255127, 0.36586976051330566, 0.3676488995552063, 0.37697479128837585, 0.3882271647453308, 0.3888179063796997, 0.3909284472465515, 0.394778311252594, 0.3963314890861511]]
2025-04-14 14:50:02,408 - DEBUG - FAISS search results - indices: [[296, 103, 3024, 207, 544, 5317, 7719, 540, 670, 7857, 312]]
2025-04-14 14:50:02,409 - DEBUG - Filtered result_product_ids: [102785769, 102859364, 123518348, 118286272, 116963157, 12151865, 13524866, 180576829, 978850, 110850007]
2025-04-14 14:50:02,409 - DEBUG - Checking product_id 102785769 in DataFrame
2025-04-14 14:50:02,412 - DEBUG - Added product 102785769 to similar_products
2025-04-14 14:50:02,413 - DEBUG - Checking product_id 102859364 in DataFrame
2025-04-14 14:50:02,415 - DEBUG - Added product 102859364 to similar_products
2025-04-14 14:50:02,416 - DEBUG - Checking product_id 123518348 in DataFrame
2025-04-14 14:50:02,418 - DEBUG - Added product 123518348 to similar_products
2025-04-14 14:50:02,419 - DEBUG - Checking product_id 118286272 in DataFrame
2025-04-14 14:50:02,421 - DEBUG - Added product 118286272 to similar_products
2025-04-14 14:50:02,422 - DEBUG - Checking product_id 116963157 in DataFrame
2025-04-14 14:50:02,424 - DEBUG - Added product 116963157 to similar_products
2025-04-14 14:50:02,425 - DEBUG - Checking product_id 12151865 in DataFrame
2025-04-14 14:50:02,429 - DEBUG - Added product 12151865 to similar_products
2025-04-14 14:50:02,431 - DEBUG - Checking product_id 13524866 in DataFrame
2025-04-14 14:50:02,434 - DEBUG - Added product 13524866 to similar_products
2025-04-14 14:50:02,435 - DEBUG - Checking product_id 180576829 in DataFrame
2025-04-14 14:50:02,437 - DEBUG - Added product 180576829 to similar_products
2025-04-14 14:50:02,438 - DEBUG - Checking product_id 978850 in DataFrame
2025-04-14 14:50:02,440 - DEBUG - Added product 978850 to similar_products
2025-04-14 14:50:02,441 - DEBUG - Checking product_id 110850007 in DataFrame
2025-04-14 14:50:02,449 - DEBUG - Added product 110850007 to similar_products
2025-04-14 14:50:02,450 - DEBUG - Final similar_products count: 10
2025-04-14 14:50:02,451 - DEBUG - Final similar_products: [102785769, 102859364, 123518348, 118286272, 116963157, 12151865, 13524866, 180576829, 978850, 110850007]
2025-04-14 14:50:02,451 - DEBUG - --- Completed get_similar_products_by_id for product_id: 102782859 ---
2025-04-14 14:50:02,456 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:50:02,457 - DEBUG - Preparing response with similar products
2025-04-14 14:50:02,472 - DEBUG - --- Completed request for /api/recommendations/102782859 ---
2025-04-14 14:50:06,590 - DEBUG - --- Processing request for /api/recommendations/102859364 ---
2025-04-14 14:50:06,591 - DEBUG - Limit set to: 10
2025-04-14 14:50:06,592 - DEBUG - --- Starting get_similar_products_by_id for product_id: 102859364 ---
2025-04-14 14:50:06,593 - DEBUG - Checking if product_id 102859364 exists in product_ids
2025-04-14 14:50:06,594 - DEBUG - Product_id exists in vector database: True
2025-04-14 14:50:06,595 - DEBUG - Fetching product details from Tiki API for product_id: 102859364
2025-04-14 14:50:06,850 - DEBUG - Extracting product details
2025-04-14 14:50:06,851 - DEBUG - Name: Tai Nghe In Ear Remax RM-550 hàng chính hãng
2025-04-14 14:50:06,855 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-14 14:50:06,855 - DEBUG - Brand_name: Remax
2025-04-14 14:50:06,860 - DEBUG - Encoding combined text to embedding
2025-04-14 14:50:06,929 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:50:06,929 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:50:06,931 - DEBUG - FAISS search results - distances: [[1.744053306721588e-13, 0.20735475420951843, 0.2111792266368866, 0.29617297649383545, 0.3540247082710266, 0.3790362477302551, 0.3819064199924469, 0.39424824714660645, 0.3969539999961853, 0.4012596011161804, 0.41075462102890015]]
2025-04-14 14:50:06,932 - DEBUG - FAISS search results - indices: [[3024, 296, 103, 207, 312, 5196, 1582, 283, 5717, 7857, 5106]]
2025-04-14 14:50:06,933 - DEBUG - Filtered result_product_ids: [102782859, 102785769, 123518348, 110850007, 126235874, 202879835, 155780905, 201375708, 978850, 202879696]
2025-04-14 14:50:06,934 - DEBUG - Checking product_id 102782859 in DataFrame
2025-04-14 14:50:06,936 - DEBUG - Added product 102782859 to similar_products
2025-04-14 14:50:06,937 - DEBUG - Checking product_id 102785769 in DataFrame
2025-04-14 14:50:06,938 - DEBUG - Added product 102785769 to similar_products
2025-04-14 14:50:06,939 - DEBUG - Checking product_id 123518348 in DataFrame
2025-04-14 14:50:06,941 - DEBUG - Added product 123518348 to similar_products
2025-04-14 14:50:06,942 - DEBUG - Checking product_id 110850007 in DataFrame
2025-04-14 14:50:06,943 - DEBUG - Added product 110850007 to similar_products
2025-04-14 14:50:06,944 - DEBUG - Checking product_id 126235874 in DataFrame
2025-04-14 14:50:06,945 - DEBUG - Added product 126235874 to similar_products
2025-04-14 14:50:06,946 - DEBUG - Checking product_id 202879835 in DataFrame
2025-04-14 14:50:06,948 - DEBUG - Added product 202879835 to similar_products
2025-04-14 14:50:06,949 - DEBUG - Checking product_id 155780905 in DataFrame
2025-04-14 14:50:06,951 - DEBUG - Added product 155780905 to similar_products
2025-04-14 14:50:06,951 - DEBUG - Checking product_id 201375708 in DataFrame
2025-04-14 14:50:06,953 - DEBUG - Added product 201375708 to similar_products
2025-04-14 14:50:06,954 - DEBUG - Checking product_id 978850 in DataFrame
2025-04-14 14:50:06,955 - DEBUG - Added product 978850 to similar_products
2025-04-14 14:50:06,957 - DEBUG - Checking product_id 202879696 in DataFrame
2025-04-14 14:50:06,958 - DEBUG - Added product 202879696 to similar_products
2025-04-14 14:50:06,959 - DEBUG - Final similar_products count: 10
2025-04-14 14:50:06,960 - DEBUG - Final similar_products: [102782859, 102785769, 123518348, 110850007, 126235874, 202879835, 155780905, 201375708, 978850, 202879696]
2025-04-14 14:50:06,960 - DEBUG - --- Completed get_similar_products_by_id for product_id: 102859364 ---
2025-04-14 14:50:06,961 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:50:06,962 - DEBUG - Preparing response with similar products
2025-04-14 14:50:06,969 - DEBUG - --- Completed request for /api/recommendations/102859364 ---
2025-04-14 14:50:14,043 - DEBUG - --- Processing request for /api/recommendations/203996021 ---
2025-04-14 14:50:14,045 - DEBUG - Limit set to: 10
2025-04-14 14:50:14,046 - DEBUG - --- Starting get_similar_products_by_id for product_id: 203996021 ---
2025-04-14 14:50:14,047 - DEBUG - Checking if product_id 203996021 exists in product_ids
2025-04-14 14:50:14,048 - DEBUG - Product_id exists in vector database: False
2025-04-14 14:50:14,049 - DEBUG - Fetching product details from Tiki API for product_id: 203996021
2025-04-14 14:50:14,199 - DEBUG - Extracting product details
2025-04-14 14:50:14,200 - DEBUG - Name: Bàn phím có dây WIRED A4TECH KK-3 - Hàng chính hãng
2025-04-14 14:50:14,208 - DEBUG - Brand_name: A4Tech
2025-04-14 14:50:14,212 - DEBUG - Encoding combined text to embedding
2025-04-14 14:50:14,280 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 14:50:14,281 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 14:50:14,284 - DEBUG - FAISS search results - distances: [[0.26680788397789, 0.27809518575668335, 0.32086336612701416, 0.34587782621383667, 0.3578389286994934, 0.374907910823822, 0.3768221139907837, 0.38519030809402466, 0.3904504179954529, 0.4100847840309143, 0.4161595106124878]]
2025-04-14 14:50:14,285 - DEBUG - FAISS search results - indices: [[2589, 65, 473, 2382, 390, 2701, 2418, 2401, 14, 2889, 2787]]
2025-04-14 14:50:14,287 - DEBUG - Filtered result_product_ids: [277388657, 247921158, 276043741, 275179235, 276548464, 272648343, 197536580, 263047349, 168230999, 189472651]
2025-04-14 14:50:14,288 - DEBUG - Checking product_id 277388657 in DataFrame
2025-04-14 14:50:14,290 - DEBUG - Added product 277388657 to similar_products
2025-04-14 14:50:14,291 - DEBUG - Checking product_id 247921158 in DataFrame
2025-04-14 14:50:14,294 - DEBUG - Added product 247921158 to similar_products
2025-04-14 14:50:14,294 - DEBUG - Checking product_id 276043741 in DataFrame
2025-04-14 14:50:14,296 - DEBUG - Added product 276043741 to similar_products
2025-04-14 14:50:14,297 - DEBUG - Checking product_id 275179235 in DataFrame
2025-04-14 14:50:14,298 - DEBUG - Added product 275179235 to similar_products
2025-04-14 14:50:14,299 - DEBUG - Checking product_id 276548464 in DataFrame
2025-04-14 14:50:14,301 - DEBUG - Added product 276548464 to similar_products
2025-04-14 14:50:14,302 - DEBUG - Checking product_id 272648343 in DataFrame
2025-04-14 14:50:14,304 - DEBUG - Added product 272648343 to similar_products
2025-04-14 14:50:14,305 - DEBUG - Checking product_id 197536580 in DataFrame
2025-04-14 14:50:14,307 - DEBUG - Added product 197536580 to similar_products
2025-04-14 14:50:14,308 - DEBUG - Checking product_id 263047349 in DataFrame
2025-04-14 14:50:14,309 - DEBUG - Added product 263047349 to similar_products
2025-04-14 14:50:14,310 - DEBUG - Checking product_id 168230999 in DataFrame
2025-04-14 14:50:14,312 - DEBUG - Added product 168230999 to similar_products
2025-04-14 14:50:14,312 - DEBUG - Checking product_id 189472651 in DataFrame
2025-04-14 14:50:14,314 - DEBUG - Added product 189472651 to similar_products
2025-04-14 14:50:14,315 - DEBUG - Final similar_products count: 10
2025-04-14 14:50:14,315 - DEBUG - Final similar_products: [277388657, 247921158, 276043741, 275179235, 276548464, 272648343, 197536580, 263047349, 168230999, 189472651]
2025-04-14 14:50:14,316 - DEBUG - --- Completed get_similar_products_by_id for product_id: 203996021 ---
2025-04-14 14:50:14,317 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 14:50:14,318 - DEBUG - Preparing response with similar products
2025-04-14 14:50:14,324 - DEBUG - --- Completed request for /api/recommendations/203996021 ---
2025-04-14 15:14:32,602 - DEBUG - --- Initializing SearchService ---
2025-04-14 15:14:32,603 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 15:14:32,603 - DEBUG - Loading SentenceTransformer model
2025-04-14 15:14:36,067 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 15:14:36,068 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 15:14:36,069 - DEBUG - Loading FAISS index
2025-04-14 15:14:36,087 - DEBUG - Loading product DataFrame
2025-04-14 15:14:36,115 - DEBUG - Loading product_ids
2025-04-14 15:14:36,116 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 15:14:36,117 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 15:14:36,117 - DEBUG - FAISS index ntotal: 8587
2025-04-14 15:14:59,489 - DEBUG - --- Initializing SearchService ---
2025-04-14 15:14:59,489 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 15:14:59,490 - DEBUG - Loading SentenceTransformer model
2025-04-14 15:15:03,373 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 15:15:03,374 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 15:15:03,375 - DEBUG - Loading FAISS index
2025-04-14 15:15:03,384 - DEBUG - Loading product DataFrame
2025-04-14 15:15:03,422 - DEBUG - Loading product_ids
2025-04-14 15:15:03,424 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 15:15:03,425 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 15:15:03,426 - DEBUG - FAISS index ntotal: 8587
2025-04-14 15:15:21,187 - DEBUG - --- Processing request for /api/recommendations/123518348 ---
2025-04-14 15:15:21,188 - DEBUG - Limit set to: 10
2025-04-14 15:15:21,189 - DEBUG - --- Starting get_similar_products_by_id for product_id: 123518348 ---
2025-04-14 15:15:21,190 - DEBUG - Checking if product_id 123518348 exists in product_ids
2025-04-14 15:15:21,191 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:15:21,192 - DEBUG - Fetching product details from Tiki API for product_id: 123518348
2025-04-14 15:15:21,541 - DEBUG - Extracting product details
2025-04-14 15:15:21,542 - DEBUG - Name: Tai nghe Remax RM-201 - Hàng chính hãng
2025-04-14 15:15:21,549 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-14 15:15:21,551 - DEBUG - Brand_name: Remax
2025-04-14 15:15:21,558 - DEBUG - Encoding combined text to embedding
2025-04-14 15:15:21,838 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:15:21,840 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:15:21,853 - DEBUG - FAISS search results - distances: [[1.5445289361717962e-13, 0.24725571274757385, 0.29311609268188477, 0.2961730360984802, 0.31907978653907776, 0.34723448753356934, 0.3509403169155121, 0.3572787344455719, 0.3642429709434509, 0.3658698499202728, 0.3905647099018097]]
2025-04-14 15:15:21,864 - DEBUG - FAISS search results - indices: [[207, 1582, 103, 3024, 312, 5196, 7857, 283, 6892, 296, 7338]]
2025-04-14 15:15:21,865 - DEBUG - Filtered result_product_ids: [202879835, 102785769, 102859364, 110850007, 126235874, 978850, 155780905, 270686707, 102782859, 272163837]
2025-04-14 15:15:21,866 - DEBUG - Checking product_id 202879835 in DataFrame
2025-04-14 15:15:21,870 - DEBUG - Added product 202879835 to similar_products
2025-04-14 15:15:21,877 - DEBUG - Checking product_id 102785769 in DataFrame
2025-04-14 15:15:21,879 - DEBUG - Added product 102785769 to similar_products
2025-04-14 15:15:21,880 - DEBUG - Checking product_id 102859364 in DataFrame
2025-04-14 15:15:21,883 - DEBUG - Added product 102859364 to similar_products
2025-04-14 15:15:21,887 - DEBUG - Checking product_id 110850007 in DataFrame
2025-04-14 15:15:21,897 - DEBUG - Added product 110850007 to similar_products
2025-04-14 15:15:21,901 - DEBUG - Checking product_id 126235874 in DataFrame
2025-04-14 15:15:21,909 - DEBUG - Added product 126235874 to similar_products
2025-04-14 15:15:21,913 - DEBUG - Checking product_id 978850 in DataFrame
2025-04-14 15:15:21,915 - DEBUG - Added product 978850 to similar_products
2025-04-14 15:15:21,916 - DEBUG - Checking product_id 155780905 in DataFrame
2025-04-14 15:15:21,919 - DEBUG - Added product 155780905 to similar_products
2025-04-14 15:15:21,920 - DEBUG - Checking product_id 270686707 in DataFrame
2025-04-14 15:15:21,924 - DEBUG - Added product 270686707 to similar_products
2025-04-14 15:15:21,925 - DEBUG - Checking product_id 102782859 in DataFrame
2025-04-14 15:15:21,928 - DEBUG - Added product 102782859 to similar_products
2025-04-14 15:15:21,928 - DEBUG - Checking product_id 272163837 in DataFrame
2025-04-14 15:15:21,935 - DEBUG - Added product 272163837 to similar_products
2025-04-14 15:15:21,939 - DEBUG - Final similar_products count: 10
2025-04-14 15:15:21,944 - DEBUG - Final similar_products: [202879835, 102785769, 102859364, 110850007, 126235874, 978850, 155780905, 270686707, 102782859, 272163837]
2025-04-14 15:15:21,948 - DEBUG - --- Completed get_similar_products_by_id for product_id: 123518348 ---
2025-04-14 15:15:21,950 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:15:21,954 - DEBUG - Preparing response with similar products
2025-04-14 15:15:21,968 - DEBUG - --- Completed request for /api/recommendations/123518348 ---
2025-04-14 15:15:42,798 - DEBUG - --- Processing request for /api/recommendations/8209696 ---
2025-04-14 15:15:42,800 - DEBUG - Limit set to: 10
2025-04-14 15:15:42,801 - DEBUG - --- Starting get_similar_products_by_id for product_id: 8209696 ---
2025-04-14 15:15:42,802 - DEBUG - Checking if product_id 8209696 exists in product_ids
2025-04-14 15:15:42,802 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:15:42,803 - DEBUG - Fetching product details from Tiki API for product_id: 8209696
2025-04-14 15:15:43,050 - DEBUG - Extracting product details
2025-04-14 15:15:43,060 - DEBUG - Category_name: Tai Nghe Có Dây
2025-04-14 15:15:43,061 - DEBUG - Brand_name: Baseus
2025-04-14 15:15:43,068 - DEBUG - Encoding combined text to embedding
2025-04-14 15:15:43,155 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:15:43,156 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:15:43,158 - DEBUG - FAISS search results - distances: [[1.440608022413789e-13, 0.3729829788208008, 0.3815586566925049, 0.3868768811225891, 0.38781672716140747, 0.3985738158226013, 0.4021236002445221, 0.40567341446876526, 0.4068779945373535, 0.4074329733848572, 0.41037243604660034]]
2025-04-14 15:15:43,159 - DEBUG - FAISS search results - indices: [[195, 283, 313, 2117, 529, 477, 96, 503, 238, 543, 7719]]
2025-04-14 15:15:43,159 - DEBUG - Filtered result_product_ids: [155780905, 271968218, 178044028, 122162526, 75075591, 56859344, 181185263, 246160963, 19408798, 12151865]
2025-04-14 15:15:43,160 - DEBUG - Checking product_id 155780905 in DataFrame
2025-04-14 15:15:43,162 - DEBUG - Added product 155780905 to similar_products
2025-04-14 15:15:43,163 - DEBUG - Checking product_id 271968218 in DataFrame
2025-04-14 15:15:43,166 - DEBUG - Added product 271968218 to similar_products
2025-04-14 15:15:43,167 - DEBUG - Checking product_id 178044028 in DataFrame
2025-04-14 15:15:43,170 - DEBUG - Added product 178044028 to similar_products
2025-04-14 15:15:43,170 - DEBUG - Checking product_id 122162526 in DataFrame
2025-04-14 15:15:43,173 - DEBUG - Added product 122162526 to similar_products
2025-04-14 15:15:43,174 - DEBUG - Checking product_id 75075591 in DataFrame
2025-04-14 15:15:43,176 - DEBUG - Added product 75075591 to similar_products
2025-04-14 15:15:43,177 - DEBUG - Checking product_id 56859344 in DataFrame
2025-04-14 15:15:43,180 - DEBUG - Added product 56859344 to similar_products
2025-04-14 15:15:43,181 - DEBUG - Checking product_id 181185263 in DataFrame
2025-04-14 15:15:43,183 - DEBUG - Added product 181185263 to similar_products
2025-04-14 15:15:43,184 - DEBUG - Checking product_id 246160963 in DataFrame
2025-04-14 15:15:43,187 - DEBUG - Added product 246160963 to similar_products
2025-04-14 15:15:43,189 - DEBUG - Checking product_id 19408798 in DataFrame
2025-04-14 15:15:43,191 - DEBUG - Added product 19408798 to similar_products
2025-04-14 15:15:43,192 - DEBUG - Checking product_id 12151865 in DataFrame
2025-04-14 15:15:43,194 - DEBUG - Added product 12151865 to similar_products
2025-04-14 15:15:43,196 - DEBUG - Final similar_products count: 10
2025-04-14 15:15:43,196 - DEBUG - Final similar_products: [155780905, 271968218, 178044028, 122162526, 75075591, 56859344, 181185263, 246160963, 19408798, 12151865]
2025-04-14 15:15:43,197 - DEBUG - --- Completed get_similar_products_by_id for product_id: 8209696 ---
2025-04-14 15:15:43,198 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:15:43,198 - DEBUG - Preparing response with similar products
2025-04-14 15:15:43,207 - DEBUG - --- Completed request for /api/recommendations/8209696 ---
2025-04-14 15:16:04,363 - DEBUG - --- Processing request for /api/recommendations/8209696 ---
2025-04-14 15:16:04,364 - DEBUG - Limit set to: 10
2025-04-14 15:16:04,366 - DEBUG - --- Starting get_similar_products_by_id for product_id: 8209696 ---
2025-04-14 15:16:04,366 - DEBUG - Checking if product_id 8209696 exists in product_ids
2025-04-14 15:16:04,367 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:16:04,368 - DEBUG - Fetching product details from Tiki API for product_id: 8209696
2025-04-14 15:16:04,551 - DEBUG - Extracting product details
2025-04-14 15:16:04,559 - DEBUG - Category_name: Tai Nghe Có Dây
2025-04-14 15:16:04,560 - DEBUG - Brand_name: Baseus
2025-04-14 15:16:04,564 - DEBUG - Encoding combined text to embedding
2025-04-14 15:16:04,639 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:16:04,640 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:16:04,642 - DEBUG - FAISS search results - distances: [[1.440608022413789e-13, 0.3729829788208008, 0.3815586566925049, 0.3868768811225891, 0.38781672716140747, 0.3985738158226013, 0.4021236002445221, 0.40567341446876526, 0.4068779945373535, 0.4074329733848572, 0.41037243604660034]]
2025-04-14 15:16:04,643 - DEBUG - FAISS search results - indices: [[195, 283, 313, 2117, 529, 477, 96, 503, 238, 543, 7719]]
2025-04-14 15:16:04,644 - DEBUG - Filtered result_product_ids: [155780905, 271968218, 178044028, 122162526, 75075591, 56859344, 181185263, 246160963, 19408798, 12151865]
2025-04-14 15:16:04,644 - DEBUG - Checking product_id 155780905 in DataFrame
2025-04-14 15:16:04,647 - DEBUG - Added product 155780905 to similar_products
2025-04-14 15:16:04,648 - DEBUG - Checking product_id 271968218 in DataFrame
2025-04-14 15:16:04,650 - DEBUG - Added product 271968218 to similar_products
2025-04-14 15:16:04,651 - DEBUG - Checking product_id 178044028 in DataFrame
2025-04-14 15:16:04,654 - DEBUG - Added product 178044028 to similar_products
2025-04-14 15:16:04,655 - DEBUG - Checking product_id 122162526 in DataFrame
2025-04-14 15:16:04,656 - DEBUG - Added product 122162526 to similar_products
2025-04-14 15:16:04,657 - DEBUG - Checking product_id 75075591 in DataFrame
2025-04-14 15:16:04,660 - DEBUG - Added product 75075591 to similar_products
2025-04-14 15:16:04,660 - DEBUG - Checking product_id 56859344 in DataFrame
2025-04-14 15:16:04,663 - DEBUG - Added product 56859344 to similar_products
2025-04-14 15:16:04,664 - DEBUG - Checking product_id 181185263 in DataFrame
2025-04-14 15:16:04,667 - DEBUG - Added product 181185263 to similar_products
2025-04-14 15:16:04,668 - DEBUG - Checking product_id 246160963 in DataFrame
2025-04-14 15:16:04,670 - DEBUG - Added product 246160963 to similar_products
2025-04-14 15:16:04,671 - DEBUG - Checking product_id 19408798 in DataFrame
2025-04-14 15:16:04,673 - DEBUG - Added product 19408798 to similar_products
2025-04-14 15:16:04,674 - DEBUG - Checking product_id 12151865 in DataFrame
2025-04-14 15:16:04,677 - DEBUG - Added product 12151865 to similar_products
2025-04-14 15:16:04,678 - DEBUG - Final similar_products count: 10
2025-04-14 15:16:04,679 - DEBUG - Final similar_products: [155780905, 271968218, 178044028, 122162526, 75075591, 56859344, 181185263, 246160963, 19408798, 12151865]
2025-04-14 15:16:04,680 - DEBUG - --- Completed get_similar_products_by_id for product_id: 8209696 ---
2025-04-14 15:16:04,681 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:16:04,682 - DEBUG - Preparing response with similar products
2025-04-14 15:16:04,688 - DEBUG - --- Completed request for /api/recommendations/8209696 ---
2025-04-14 15:17:26,141 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-14 15:17:26,143 - DEBUG - Limit set to: 10
2025-04-14 15:17:26,144 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 15:17:26,146 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-14 15:17:26,147 - DEBUG - Product_id exists in vector database: False
2025-04-14 15:17:26,148 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-14 15:17:26,366 - DEBUG - Extracting product details
2025-04-14 15:17:26,382 - DEBUG - Brand_name: Samsung
2025-04-14 15:17:26,387 - DEBUG - Encoding combined text to embedding
2025-04-14 15:17:26,500 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:17:26,501 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:17:26,504 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-14 15:17:26,505 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-14 15:17:26,506 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 15:17:26,507 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 15:17:26,509 - DEBUG - Added product 273186334 to similar_products
2025-04-14 15:17:26,510 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-14 15:17:26,513 - DEBUG - Added product 276250878 to similar_products
2025-04-14 15:17:26,514 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 15:17:26,516 - DEBUG - Added product 273029857 to similar_products
2025-04-14 15:17:26,517 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 15:17:26,520 - DEBUG - Added product 273636845 to similar_products
2025-04-14 15:17:26,522 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 15:17:26,524 - DEBUG - Added product 272348047 to similar_products
2025-04-14 15:17:26,525 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 15:17:26,527 - DEBUG - Added product 276274790 to similar_products
2025-04-14 15:17:26,528 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 15:17:26,529 - DEBUG - Added product 276944892 to similar_products
2025-04-14 15:17:26,530 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 15:17:26,533 - DEBUG - Added product 272328188 to similar_products
2025-04-14 15:17:26,534 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 15:17:26,536 - DEBUG - Added product 274405521 to similar_products
2025-04-14 15:17:26,537 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-14 15:17:26,539 - DEBUG - Added product 273610105 to similar_products
2025-04-14 15:17:26,540 - DEBUG - Final similar_products count: 10
2025-04-14 15:17:26,541 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-14 15:17:26,541 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-14 15:17:26,542 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:17:26,543 - DEBUG - Preparing response with similar products
2025-04-14 15:17:26,549 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-14 15:17:33,306 - DEBUG - --- Processing request for /api/recommendations/276250878 ---
2025-04-14 15:17:33,312 - DEBUG - Limit set to: 10
2025-04-14 15:17:33,316 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250878 ---
2025-04-14 15:17:33,317 - DEBUG - Checking if product_id 276250878 exists in product_ids
2025-04-14 15:17:33,318 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:17:33,319 - DEBUG - Fetching product details from Tiki API for product_id: 276250878
2025-04-14 15:17:33,510 - DEBUG - Extracting product details
2025-04-14 15:17:33,524 - DEBUG - Brand_name: Samsung
2025-04-14 15:17:33,532 - DEBUG - Encoding combined text to embedding
2025-04-14 15:17:33,638 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:17:33,639 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:17:33,643 - DEBUG - FAISS search results - distances: [[1.5281200783923143e-13, 0.2048451006412506, 0.20767593383789062, 0.20839110016822815, 0.20851877331733704, 0.2103060781955719, 0.22707059979438782, 0.22834089398384094, 0.24846692383289337, 0.2511472702026367, 0.2545849084854126]]
2025-04-14 15:17:33,645 - DEBUG - FAISS search results - indices: [[33, 2013, 644, 318, 2204, 2024, 242, 228, 123, 23, 859]]
2025-04-14 15:17:33,646 - DEBUG - Filtered result_product_ids: [273185467, 277553639, 276944892, 273186334, 273029857, 276274790, 272328188, 272348047, 274405521, 272270730]
2025-04-14 15:17:33,647 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-14 15:17:33,649 - DEBUG - Added product 273185467 to similar_products
2025-04-14 15:17:33,650 - DEBUG - Checking product_id 277553639 in DataFrame
2025-04-14 15:17:33,652 - DEBUG - Added product 277553639 to similar_products
2025-04-14 15:17:33,653 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 15:17:33,655 - DEBUG - Added product 276944892 to similar_products
2025-04-14 15:17:33,656 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-14 15:17:33,659 - DEBUG - Added product 273186334 to similar_products
2025-04-14 15:17:33,660 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-14 15:17:33,662 - DEBUG - Added product 273029857 to similar_products
2025-04-14 15:17:33,663 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 15:17:33,665 - DEBUG - Added product 276274790 to similar_products
2025-04-14 15:17:33,666 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-14 15:17:33,668 - DEBUG - Added product 272328188 to similar_products
2025-04-14 15:17:33,669 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-14 15:17:33,671 - DEBUG - Added product 272348047 to similar_products
2025-04-14 15:17:33,672 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 15:17:33,676 - DEBUG - Added product 274405521 to similar_products
2025-04-14 15:17:33,676 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-14 15:17:33,679 - DEBUG - Added product 272270730 to similar_products
2025-04-14 15:17:33,679 - DEBUG - Final similar_products count: 10
2025-04-14 15:17:33,680 - DEBUG - Final similar_products: [273185467, 277553639, 276944892, 273186334, 273029857, 276274790, 272328188, 272348047, 274405521, 272270730]
2025-04-14 15:17:33,681 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250878 ---
2025-04-14 15:17:33,682 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:17:33,683 - DEBUG - Preparing response with similar products
2025-04-14 15:17:33,689 - DEBUG - --- Completed request for /api/recommendations/276250878 ---
2025-04-14 15:17:49,100 - DEBUG - --- Processing request for /api/recommendations/276166741 ---
2025-04-14 15:17:49,105 - DEBUG - Limit set to: 10
2025-04-14 15:17:49,107 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276166741 ---
2025-04-14 15:17:49,108 - DEBUG - Checking if product_id 276166741 exists in product_ids
2025-04-14 15:17:49,109 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:17:49,110 - DEBUG - Fetching product details from Tiki API for product_id: 276166741
2025-04-14 15:17:49,335 - DEBUG - Extracting product details
2025-04-14 15:17:49,353 - DEBUG - Brand_name: Tecno
2025-04-14 15:17:49,360 - DEBUG - Encoding combined text to embedding
2025-04-14 15:17:49,482 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:17:49,483 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:17:49,486 - DEBUG - FAISS search results - distances: [[1.2842784019410913e-13, 0.31442129611968994, 0.33132219314575195, 0.33495086431503296, 0.3394099175930023, 0.3424556851387024, 0.3502369523048401, 0.3536352217197418, 0.3562469780445099, 0.3611341118812561, 0.36904382705688477]]
2025-04-14 15:17:49,487 - DEBUG - FAISS search results - indices: [[12, 23, 224, 1885, 240, 975, 1561, 644, 549, 318, 1550]]
2025-04-14 15:17:49,488 - DEBUG - Filtered result_product_ids: [274405521, 273636845, 273373420, 276536922, 277030799, 275206906, 277553639, 272850971, 276944892, 272241346]
2025-04-14 15:17:49,489 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 15:17:49,491 - DEBUG - Added product 274405521 to similar_products
2025-04-14 15:17:49,492 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-14 15:17:49,494 - DEBUG - Added product 273636845 to similar_products
2025-04-14 15:17:49,495 - DEBUG - Checking product_id 273373420 in DataFrame
2025-04-14 15:17:49,499 - DEBUG - Added product 273373420 to similar_products
2025-04-14 15:17:49,499 - DEBUG - Checking product_id 276536922 in DataFrame
2025-04-14 15:17:49,502 - DEBUG - Added product 276536922 to similar_products
2025-04-14 15:17:49,504 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-14 15:17:49,507 - DEBUG - Added product 277030799 to similar_products
2025-04-14 15:17:49,508 - DEBUG - Checking product_id 275206906 in DataFrame
2025-04-14 15:17:49,510 - DEBUG - Added product 275206906 to similar_products
2025-04-14 15:17:49,510 - DEBUG - Checking product_id 277553639 in DataFrame
2025-04-14 15:17:49,513 - DEBUG - Added product 277553639 to similar_products
2025-04-14 15:17:49,514 - DEBUG - Checking product_id 272850971 in DataFrame
2025-04-14 15:17:49,517 - DEBUG - Added product 272850971 to similar_products
2025-04-14 15:17:49,518 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-14 15:17:49,520 - DEBUG - Added product 276944892 to similar_products
2025-04-14 15:17:49,521 - DEBUG - Checking product_id 272241346 in DataFrame
2025-04-14 15:17:49,524 - DEBUG - Added product 272241346 to similar_products
2025-04-14 15:17:49,524 - DEBUG - Final similar_products count: 10
2025-04-14 15:17:49,525 - DEBUG - Final similar_products: [274405521, 273636845, 273373420, 276536922, 277030799, 275206906, 277553639, 272850971, 276944892, 272241346]
2025-04-14 15:17:49,526 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276166741 ---
2025-04-14 15:17:49,527 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:17:49,528 - DEBUG - Preparing response with similar products
2025-04-14 15:17:49,536 - DEBUG - --- Completed request for /api/recommendations/276166741 ---
2025-04-14 15:19:15,022 - DEBUG - --- Processing request for /api/recommendations/273668660 ---
2025-04-14 15:19:15,023 - DEBUG - Limit set to: 10
2025-04-14 15:19:15,024 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273668660 ---
2025-04-14 15:19:15,026 - DEBUG - Checking if product_id 273668660 exists in product_ids
2025-04-14 15:19:15,026 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:19:15,028 - DEBUG - Fetching product details from Tiki API for product_id: 273668660
2025-04-14 15:19:15,250 - DEBUG - Extracting product details
2025-04-14 15:19:15,266 - DEBUG - Brand_name: OPPO
2025-04-14 15:19:15,272 - DEBUG - Encoding combined text to embedding
2025-04-14 15:19:15,373 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:19:15,374 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:19:15,376 - DEBUG - FAISS search results - distances: [[1.2073024871495086e-13, 0.011584763415157795, 0.060070350766181946, 0.10548487305641174, 0.11010187864303589, 0.12039189040660858, 0.1267261803150177, 0.13870376348495483, 0.19952967762947083, 0.21247722208499908, 0.24021491408348083]]
2025-04-14 15:19:15,378 - DEBUG - FAISS search results - indices: [[72, 55, 111, 2236, 1265, 1426, 793, 261, 23, 315, 242]]
2025-04-14 15:19:15,379 - DEBUG - Filtered result_product_ids: [273664463, 276046675, 277175972, 274156763, 275386465, 277005407, 271128271, 274405521, 276944868, 276274790]
2025-04-14 15:19:15,380 - DEBUG - Checking product_id 273664463 in DataFrame
2025-04-14 15:19:15,383 - DEBUG - Added product 273664463 to similar_products
2025-04-14 15:19:15,384 - DEBUG - Checking product_id 276046675 in DataFrame
2025-04-14 15:19:15,388 - DEBUG - Added product 276046675 to similar_products
2025-04-14 15:19:15,389 - DEBUG - Checking product_id 277175972 in DataFrame
2025-04-14 15:19:15,390 - DEBUG - Added product 277175972 to similar_products
2025-04-14 15:19:15,392 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-14 15:19:15,395 - DEBUG - Added product 274156763 to similar_products
2025-04-14 15:19:15,396 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-14 15:19:15,398 - DEBUG - Added product 275386465 to similar_products
2025-04-14 15:19:15,399 - DEBUG - Checking product_id 277005407 in DataFrame
2025-04-14 15:19:15,401 - DEBUG - Added product 277005407 to similar_products
2025-04-14 15:19:15,401 - DEBUG - Checking product_id 271128271 in DataFrame
2025-04-14 15:19:15,405 - DEBUG - Added product 271128271 to similar_products
2025-04-14 15:19:15,406 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-14 15:19:15,407 - DEBUG - Added product 274405521 to similar_products
2025-04-14 15:19:15,408 - DEBUG - Checking product_id 276944868 in DataFrame
2025-04-14 15:19:15,410 - DEBUG - Added product 276944868 to similar_products
2025-04-14 15:19:15,411 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-14 15:19:15,414 - DEBUG - Added product 276274790 to similar_products
2025-04-14 15:19:15,415 - DEBUG - Final similar_products count: 10
2025-04-14 15:19:15,416 - DEBUG - Final similar_products: [273664463, 276046675, 277175972, 274156763, 275386465, 277005407, 271128271, 274405521, 276944868, 276274790]
2025-04-14 15:19:15,417 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273668660 ---
2025-04-14 15:19:15,418 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:19:15,418 - DEBUG - Preparing response with similar products
2025-04-14 15:19:15,425 - DEBUG - --- Completed request for /api/recommendations/273668660 ---
2025-04-14 15:19:16,390 - DEBUG - --- Processing request for /api/recommendations/270975124 ---
2025-04-14 15:19:16,392 - DEBUG - Limit set to: 10
2025-04-14 15:19:16,394 - DEBUG - --- Starting get_similar_products_by_id for product_id: 270975124 ---
2025-04-14 15:19:16,395 - DEBUG - Checking if product_id 270975124 exists in product_ids
2025-04-14 15:19:16,396 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:19:16,397 - DEBUG - Fetching product details from Tiki API for product_id: 270975124
2025-04-14 15:19:16,643 - DEBUG - Extracting product details
2025-04-14 15:19:16,657 - DEBUG - Brand_name: OPPO
2025-04-14 15:19:16,682 - DEBUG - Encoding combined text to embedding
2025-04-14 15:19:16,797 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:19:16,798 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:19:16,801 - DEBUG - FAISS search results - distances: [[1.1005309348294939e-13, 0.23759132623672485, 0.2565249502658844, 0.284262478351593, 0.29593971371650696, 0.3031706213951111, 0.30994874238967896, 0.31468427181243896, 0.315155565738678, 0.31857672333717346, 0.32109448313713074]]
2025-04-14 15:19:16,802 - DEBUG - FAISS search results - indices: [[24, 75, 261, 1426, 1265, 2242, 831, 111, 2236, 72, 55]]
2025-04-14 15:19:16,803 - DEBUG - Filtered result_product_ids: [273252926, 271128271, 275386465, 274156763, 230203067, 274171148, 276046675, 277175972, 273668660, 273664463]
2025-04-14 15:19:16,804 - DEBUG - Checking product_id 273252926 in DataFrame
2025-04-14 15:19:16,805 - DEBUG - Added product 273252926 to similar_products
2025-04-14 15:19:16,806 - DEBUG - Checking product_id 271128271 in DataFrame
2025-04-14 15:19:16,808 - DEBUG - Added product 271128271 to similar_products
2025-04-14 15:19:16,809 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-14 15:19:16,811 - DEBUG - Added product 275386465 to similar_products
2025-04-14 15:19:16,812 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-14 15:19:16,814 - DEBUG - Added product 274156763 to similar_products
2025-04-14 15:19:16,815 - DEBUG - Checking product_id 230203067 in DataFrame
2025-04-14 15:19:16,817 - DEBUG - Added product 230203067 to similar_products
2025-04-14 15:19:16,818 - DEBUG - Checking product_id 274171148 in DataFrame
2025-04-14 15:19:16,820 - DEBUG - Added product 274171148 to similar_products
2025-04-14 15:19:16,821 - DEBUG - Checking product_id 276046675 in DataFrame
2025-04-14 15:19:16,823 - DEBUG - Added product 276046675 to similar_products
2025-04-14 15:19:16,823 - DEBUG - Checking product_id 277175972 in DataFrame
2025-04-14 15:19:16,826 - DEBUG - Added product 277175972 to similar_products
2025-04-14 15:19:16,826 - DEBUG - Checking product_id 273668660 in DataFrame
2025-04-14 15:19:16,829 - DEBUG - Added product 273668660 to similar_products
2025-04-14 15:19:16,830 - DEBUG - Checking product_id 273664463 in DataFrame
2025-04-14 15:19:16,832 - DEBUG - Added product 273664463 to similar_products
2025-04-14 15:19:16,833 - DEBUG - Final similar_products count: 10
2025-04-14 15:19:16,834 - DEBUG - Final similar_products: [273252926, 271128271, 275386465, 274156763, 230203067, 274171148, 276046675, 277175972, 273668660, 273664463]
2025-04-14 15:19:16,835 - DEBUG - --- Completed get_similar_products_by_id for product_id: 270975124 ---
2025-04-14 15:19:16,836 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:19:16,837 - DEBUG - Preparing response with similar products
2025-04-14 15:19:16,843 - DEBUG - --- Completed request for /api/recommendations/270975124 ---
2025-04-14 15:27:23,339 - DEBUG - --- Initializing SearchService ---
2025-04-14 15:27:23,340 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 15:27:23,345 - DEBUG - Loading SentenceTransformer model
2025-04-14 15:27:27,204 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 15:27:27,206 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 15:27:27,207 - DEBUG - Loading FAISS index
2025-04-14 15:27:27,235 - DEBUG - Loading product DataFrame
2025-04-14 15:27:27,269 - DEBUG - Loading product_ids
2025-04-14 15:27:27,271 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 15:27:27,272 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 15:27:27,272 - DEBUG - FAISS index ntotal: 8587
2025-04-14 15:33:30,759 - DEBUG - --- Initializing SearchService ---
2025-04-14 15:33:30,760 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 15:33:30,760 - DEBUG - Loading SentenceTransformer model
2025-04-14 15:33:34,278 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 15:33:34,280 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 15:33:34,281 - DEBUG - Loading FAISS index
2025-04-14 15:33:34,293 - DEBUG - Loading product DataFrame
2025-04-14 15:33:34,349 - DEBUG - Loading product_ids
2025-04-14 15:33:34,356 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 15:33:34,359 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 15:33:34,360 - DEBUG - FAISS index ntotal: 8587
2025-04-14 15:34:00,192 - DEBUG - --- Initializing SearchService ---
2025-04-14 15:34:00,193 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 15:34:00,196 - DEBUG - Loading SentenceTransformer model
2025-04-14 15:34:03,712 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 15:34:03,712 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 15:34:03,714 - DEBUG - Loading FAISS index
2025-04-14 15:34:03,728 - DEBUG - Loading product DataFrame
2025-04-14 15:34:03,771 - DEBUG - Loading product_ids
2025-04-14 15:34:03,773 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 15:34:03,774 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 15:34:03,775 - DEBUG - FAISS index ntotal: 8587
2025-04-14 15:34:27,085 - DEBUG - --- Processing request for /api/recommendations/9734201 ---
2025-04-14 15:34:27,087 - DEBUG - Limit set to: 10
2025-04-14 15:34:27,090 - DEBUG - --- Starting get_similar_products_by_id for product_id: 9734201 ---
2025-04-14 15:34:27,091 - DEBUG - Checking if product_id 9734201 exists in product_ids
2025-04-14 15:34:27,092 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:34:27,094 - DEBUG - Fetching product details from Tiki API for product_id: 9734201
2025-04-14 15:34:27,839 - DEBUG - Extracting product details
2025-04-14 15:34:27,845 - DEBUG - Name: Tai Nghe Nhét Tai Hoco M24 - Chính Hãng
2025-04-14 15:34:27,877 - DEBUG - Category_name: Tai Nghe Có Dây
2025-04-14 15:34:27,882 - DEBUG - Brand_name: Hoco
2025-04-14 15:34:27,924 - DEBUG - Encoding combined text to embedding
2025-04-14 15:34:28,375 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:34:28,376 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:34:28,408 - DEBUG - FAISS search results - distances: [[1.4342720804430553e-13, 0.2856220006942749, 0.2859984338283539, 0.30672597885131836, 0.32839757204055786, 0.3357648551464081, 0.34240657091140747, 0.35758548974990845, 0.3713510036468506, 0.37444281578063965, 0.39686089754104614]]
2025-04-14 15:34:28,409 - DEBUG - FAISS search results - indices: [[478, 543, 480, 2741, 529, 130, 534, 238, 502, 496, 95]]
2025-04-14 15:34:28,409 - DEBUG - Filtered result_product_ids: [19408798, 26230964, 44936696, 122162526, 246160313, 37527109, 246160963, 10906349, 125555311, 275921612]
2025-04-14 15:34:28,410 - DEBUG - Checking product_id 19408798 in DataFrame
2025-04-14 15:34:28,424 - DEBUG - Added product 19408798 to similar_products
2025-04-14 15:34:28,425 - DEBUG - Checking product_id 26230964 in DataFrame
2025-04-14 15:34:28,428 - DEBUG - Added product 26230964 to similar_products
2025-04-14 15:34:28,429 - DEBUG - Checking product_id 44936696 in DataFrame
2025-04-14 15:34:28,432 - DEBUG - Added product 44936696 to similar_products
2025-04-14 15:34:28,434 - DEBUG - Checking product_id 122162526 in DataFrame
2025-04-14 15:34:28,437 - DEBUG - Added product 122162526 to similar_products
2025-04-14 15:34:28,439 - DEBUG - Checking product_id 246160313 in DataFrame
2025-04-14 15:34:28,442 - DEBUG - Added product 246160313 to similar_products
2025-04-14 15:34:28,443 - DEBUG - Checking product_id 37527109 in DataFrame
2025-04-14 15:34:28,445 - DEBUG - Added product 37527109 to similar_products
2025-04-14 15:34:28,446 - DEBUG - Checking product_id 246160963 in DataFrame
2025-04-14 15:34:28,449 - DEBUG - Added product 246160963 to similar_products
2025-04-14 15:34:28,451 - DEBUG - Checking product_id 10906349 in DataFrame
2025-04-14 15:34:28,454 - DEBUG - Added product 10906349 to similar_products
2025-04-14 15:34:28,455 - DEBUG - Checking product_id 125555311 in DataFrame
2025-04-14 15:34:28,459 - DEBUG - Added product 125555311 to similar_products
2025-04-14 15:34:28,460 - DEBUG - Checking product_id 275921612 in DataFrame
2025-04-14 15:34:28,463 - DEBUG - Added product 275921612 to similar_products
2025-04-14 15:34:28,464 - DEBUG - Final similar_products count: 10
2025-04-14 15:34:28,465 - DEBUG - Final similar_products: [19408798, 26230964, 44936696, 122162526, 246160313, 37527109, 246160963, 10906349, 125555311, 275921612]
2025-04-14 15:34:28,467 - DEBUG - --- Completed get_similar_products_by_id for product_id: 9734201 ---
2025-04-14 15:34:28,468 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:34:28,469 - DEBUG - Preparing response with similar products
2025-04-14 15:34:28,486 - DEBUG - --- Completed request for /api/recommendations/9734201 ---
2025-04-14 15:34:31,949 - DEBUG - --- Processing request for /api/recommendations/246160313 ---
2025-04-14 15:34:31,950 - DEBUG - Limit set to: 10
2025-04-14 15:34:31,951 - DEBUG - --- Starting get_similar_products_by_id for product_id: 246160313 ---
2025-04-14 15:34:31,952 - DEBUG - Checking if product_id 246160313 exists in product_ids
2025-04-14 15:34:31,953 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:34:31,954 - DEBUG - Fetching product details from Tiki API for product_id: 246160313
2025-04-14 15:34:32,565 - DEBUG - Extracting product details
2025-04-14 15:34:32,574 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-14 15:34:32,575 - DEBUG - Brand_name: HuQu
2025-04-14 15:34:32,579 - DEBUG - Encoding combined text to embedding
2025-04-14 15:34:32,692 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:34:32,693 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:34:32,696 - DEBUG - FAISS search results - distances: [[1.589421682376274e-13, 0.11964968591928482, 0.309694766998291, 0.3154507875442505, 0.32221537828445435, 0.33576500415802, 0.34367167949676514, 0.3549383878707886, 0.36533021926879883, 0.3832409083843231, 0.39057624340057373]]
2025-04-14 15:34:32,697 - DEBUG - FAISS search results - indices: [[130, 238, 48, 129, 529, 478, 95, 283, 480, 543, 6655]]
2025-04-14 15:34:32,698 - DEBUG - Filtered result_product_ids: [246160963, 107530603, 208956336, 122162526, 9734201, 275921612, 155780905, 26230964, 19408798, 271438952]
2025-04-14 15:34:32,699 - DEBUG - Checking product_id 246160963 in DataFrame
2025-04-14 15:34:32,704 - DEBUG - Added product 246160963 to similar_products
2025-04-14 15:34:32,705 - DEBUG - Checking product_id 107530603 in DataFrame
2025-04-14 15:34:32,707 - DEBUG - Added product 107530603 to similar_products
2025-04-14 15:34:32,708 - DEBUG - Checking product_id 208956336 in DataFrame
2025-04-14 15:34:32,710 - DEBUG - Added product 208956336 to similar_products
2025-04-14 15:34:32,711 - DEBUG - Checking product_id 122162526 in DataFrame
2025-04-14 15:34:32,714 - DEBUG - Added product 122162526 to similar_products
2025-04-14 15:34:32,714 - DEBUG - Checking product_id 9734201 in DataFrame
2025-04-14 15:34:32,717 - DEBUG - Added product 9734201 to similar_products
2025-04-14 15:34:32,721 - DEBUG - Checking product_id 275921612 in DataFrame
2025-04-14 15:34:32,724 - DEBUG - Added product 275921612 to similar_products
2025-04-14 15:34:32,725 - DEBUG - Checking product_id 155780905 in DataFrame
2025-04-14 15:34:32,728 - DEBUG - Added product 155780905 to similar_products
2025-04-14 15:34:32,729 - DEBUG - Checking product_id 26230964 in DataFrame
2025-04-14 15:34:32,731 - DEBUG - Added product 26230964 to similar_products
2025-04-14 15:34:32,731 - DEBUG - Checking product_id 19408798 in DataFrame
2025-04-14 15:34:32,734 - DEBUG - Added product 19408798 to similar_products
2025-04-14 15:34:32,736 - DEBUG - Checking product_id 271438952 in DataFrame
2025-04-14 15:34:32,739 - DEBUG - Added product 271438952 to similar_products
2025-04-14 15:34:32,740 - DEBUG - Final similar_products count: 10
2025-04-14 15:34:32,741 - DEBUG - Final similar_products: [246160963, 107530603, 208956336, 122162526, 9734201, 275921612, 155780905, 26230964, 19408798, 271438952]
2025-04-14 15:34:32,742 - DEBUG - --- Completed get_similar_products_by_id for product_id: 246160313 ---
2025-04-14 15:34:32,743 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:34:32,744 - DEBUG - Preparing response with similar products
2025-04-14 15:34:32,752 - DEBUG - --- Completed request for /api/recommendations/246160313 ---
2025-04-14 15:34:34,517 - DEBUG - --- Processing request for /api/recommendations/208956336 ---
2025-04-14 15:34:34,518 - DEBUG - Limit set to: 10
2025-04-14 15:34:34,519 - DEBUG - --- Starting get_similar_products_by_id for product_id: 208956336 ---
2025-04-14 15:34:34,521 - DEBUG - Checking if product_id 208956336 exists in product_ids
2025-04-14 15:34:34,521 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:34:34,522 - DEBUG - Fetching product details from Tiki API for product_id: 208956336
2025-04-14 15:34:34,753 - DEBUG - Extracting product details
2025-04-14 15:34:34,774 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-14 15:34:34,776 - DEBUG - Brand_name: HuQu
2025-04-14 15:34:34,784 - DEBUG - Encoding combined text to embedding
2025-04-14 15:34:34,901 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:34:34,903 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:34:34,905 - DEBUG - FAISS search results - distances: [[1.282156347238994e-13, 0.29840177297592163, 0.3154507279396057, 0.3278593420982361, 0.3372977674007416, 0.34620416164398193, 0.35468190908432007, 0.36059126257896423, 0.36081668734550476, 0.36750560998916626, 0.3705390989780426]]
2025-04-14 15:34:34,907 - DEBUG - FAISS search results - indices: [[129, 238, 130, 118, 495, 3, 48, 283, 529, 96, 519]]
2025-04-14 15:34:34,908 - DEBUG - Filtered result_product_ids: [246160963, 246160313, 58207084, 172145253, 44328989, 107530603, 155780905, 122162526, 56859344, 122160254]
2025-04-14 15:34:34,909 - DEBUG - Checking product_id 246160963 in DataFrame
2025-04-14 15:34:34,912 - DEBUG - Added product 246160963 to similar_products
2025-04-14 15:34:34,913 - DEBUG - Checking product_id 246160313 in DataFrame
2025-04-14 15:34:34,916 - DEBUG - Added product 246160313 to similar_products
2025-04-14 15:34:34,917 - DEBUG - Checking product_id 58207084 in DataFrame
2025-04-14 15:34:34,920 - DEBUG - Added product 58207084 to similar_products
2025-04-14 15:34:34,921 - DEBUG - Checking product_id 172145253 in DataFrame
2025-04-14 15:34:34,925 - DEBUG - Added product 172145253 to similar_products
2025-04-14 15:34:34,927 - DEBUG - Checking product_id 44328989 in DataFrame
2025-04-14 15:34:34,930 - DEBUG - Added product 44328989 to similar_products
2025-04-14 15:34:34,931 - DEBUG - Checking product_id 107530603 in DataFrame
2025-04-14 15:34:34,933 - DEBUG - Added product 107530603 to similar_products
2025-04-14 15:34:34,935 - DEBUG - Checking product_id 155780905 in DataFrame
2025-04-14 15:34:34,938 - DEBUG - Added product 155780905 to similar_products
2025-04-14 15:34:34,940 - DEBUG - Checking product_id 122162526 in DataFrame
2025-04-14 15:34:34,943 - DEBUG - Added product 122162526 to similar_products
2025-04-14 15:34:34,944 - DEBUG - Checking product_id 56859344 in DataFrame
2025-04-14 15:34:34,947 - DEBUG - Added product 56859344 to similar_products
2025-04-14 15:34:34,947 - DEBUG - Checking product_id 122160254 in DataFrame
2025-04-14 15:34:34,950 - DEBUG - Added product 122160254 to similar_products
2025-04-14 15:34:34,951 - DEBUG - Final similar_products count: 10
2025-04-14 15:34:34,954 - DEBUG - Final similar_products: [246160963, 246160313, 58207084, 172145253, 44328989, 107530603, 155780905, 122162526, 56859344, 122160254]
2025-04-14 15:34:34,956 - DEBUG - --- Completed get_similar_products_by_id for product_id: 208956336 ---
2025-04-14 15:34:34,957 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:34:34,959 - DEBUG - Preparing response with similar products
2025-04-14 15:34:34,966 - DEBUG - --- Completed request for /api/recommendations/208956336 ---
2025-04-14 15:34:40,151 - DEBUG - --- Processing request for /api/recommendations/58207084 ---
2025-04-14 15:34:40,152 - DEBUG - Limit set to: 10
2025-04-14 15:34:40,153 - DEBUG - --- Starting get_similar_products_by_id for product_id: 58207084 ---
2025-04-14 15:34:40,154 - DEBUG - Checking if product_id 58207084 exists in product_ids
2025-04-14 15:34:40,155 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:34:40,156 - DEBUG - Fetching product details from Tiki API for product_id: 58207084
2025-04-14 15:34:40,401 - DEBUG - Extracting product details
2025-04-14 15:34:40,411 - DEBUG - Category_name: Tai Nghe Có Dây
2025-04-14 15:34:40,412 - DEBUG - Brand_name: Hoco
2025-04-14 15:34:40,416 - DEBUG - Encoding combined text to embedding
2025-04-14 15:34:40,499 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:34:40,500 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:34:40,503 - DEBUG - FAISS search results - distances: [[1.6289579277475874e-13, 0.2735497057437897, 0.2759982943534851, 0.2801364064216614, 0.2860168516635895, 0.3000289499759674, 0.30850356817245483, 0.3140414357185364, 0.32313400506973267, 0.32785943150520325, 0.32835328578948975]]
2025-04-14 15:34:40,505 - DEBUG - FAISS search results - indices: [[118, 495, 509, 34, 539, 529, 496, 534, 2741, 129, 519]]
2025-04-14 15:34:40,507 - DEBUG - Filtered result_product_ids: [172145253, 108954466, 273217798, 91449194, 122162526, 125555311, 37527109, 44936696, 208956336, 122160254]
2025-04-14 15:34:40,508 - DEBUG - Checking product_id 172145253 in DataFrame
2025-04-14 15:34:40,511 - DEBUG - Added product 172145253 to similar_products
2025-04-14 15:34:40,512 - DEBUG - Checking product_id 108954466 in DataFrame
2025-04-14 15:34:40,515 - DEBUG - Added product 108954466 to similar_products
2025-04-14 15:34:40,516 - DEBUG - Checking product_id 273217798 in DataFrame
2025-04-14 15:34:40,519 - DEBUG - Added product 273217798 to similar_products
2025-04-14 15:34:40,522 - DEBUG - Checking product_id 91449194 in DataFrame
2025-04-14 15:34:40,525 - DEBUG - Added product 91449194 to similar_products
2025-04-14 15:34:40,526 - DEBUG - Checking product_id 122162526 in DataFrame
2025-04-14 15:34:40,529 - DEBUG - Added product 122162526 to similar_products
2025-04-14 15:34:40,531 - DEBUG - Checking product_id 125555311 in DataFrame
2025-04-14 15:34:40,534 - DEBUG - Added product 125555311 to similar_products
2025-04-14 15:34:40,535 - DEBUG - Checking product_id 37527109 in DataFrame
2025-04-14 15:34:40,538 - DEBUG - Added product 37527109 to similar_products
2025-04-14 15:34:40,539 - DEBUG - Checking product_id 44936696 in DataFrame
2025-04-14 15:34:40,542 - DEBUG - Added product 44936696 to similar_products
2025-04-14 15:34:40,543 - DEBUG - Checking product_id 208956336 in DataFrame
2025-04-14 15:34:40,546 - DEBUG - Added product 208956336 to similar_products
2025-04-14 15:34:40,547 - DEBUG - Checking product_id 122160254 in DataFrame
2025-04-14 15:34:40,550 - DEBUG - Added product 122160254 to similar_products
2025-04-14 15:34:40,552 - DEBUG - Final similar_products count: 10
2025-04-14 15:34:40,553 - DEBUG - Final similar_products: [172145253, 108954466, 273217798, 91449194, 122162526, 125555311, 37527109, 44936696, 208956336, 122160254]
2025-04-14 15:34:40,554 - DEBUG - --- Completed get_similar_products_by_id for product_id: 58207084 ---
2025-04-14 15:34:40,555 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:34:40,556 - DEBUG - Preparing response with similar products
2025-04-14 15:34:40,565 - DEBUG - --- Completed request for /api/recommendations/58207084 ---
2025-04-14 15:34:53,365 - DEBUG - --- Processing request for /api/recommendations/101847035 ---
2025-04-14 15:34:53,366 - DEBUG - Limit set to: 10
2025-04-14 15:34:53,367 - DEBUG - --- Starting get_similar_products_by_id for product_id: 101847035 ---
2025-04-14 15:34:53,368 - DEBUG - Checking if product_id 101847035 exists in product_ids
2025-04-14 15:34:53,368 - DEBUG - Product_id exists in vector database: False
2025-04-14 15:34:53,369 - DEBUG - Fetching product details from Tiki API for product_id: 101847035
2025-04-14 15:34:53,500 - DEBUG - Extracting product details
2025-04-14 15:34:53,507 - DEBUG - Category_name: Loa Bluetooth
2025-04-14 15:34:53,508 - DEBUG - Brand_name: XSmart
2025-04-14 15:34:53,512 - DEBUG - Encoding combined text to embedding
2025-04-14 15:34:53,616 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:34:53,618 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:34:53,622 - DEBUG - FAISS search results - distances: [[0.3356372117996216, 0.34184885025024414, 0.3490653336048126, 0.3494727611541748, 0.3506142497062683, 0.35115566849708557, 0.3515375852584839, 0.35537564754486084, 0.35596799850463867, 0.35683995485305786, 0.36262422800064087]]
2025-04-14 15:34:53,624 - DEBUG - FAISS search results - indices: [[7807, 7644, 5749, 5435, 340, 4522, 3626, 715, 6677, 2809, 2715]]
2025-04-14 15:34:53,627 - DEBUG - Filtered result_product_ids: [50327179, 275671660, 73744564, 275659219, 75301142, 275326482, 6655991, 106685187, 274748634, 73987509]
2025-04-14 15:34:53,629 - DEBUG - Checking product_id 50327179 in DataFrame
2025-04-14 15:34:53,632 - DEBUG - Added product 50327179 to similar_products
2025-04-14 15:34:53,633 - DEBUG - Checking product_id 275671660 in DataFrame
2025-04-14 15:34:53,636 - DEBUG - Added product 275671660 to similar_products
2025-04-14 15:34:53,637 - DEBUG - Checking product_id 73744564 in DataFrame
2025-04-14 15:34:53,640 - DEBUG - Added product 73744564 to similar_products
2025-04-14 15:34:53,641 - DEBUG - Checking product_id 275659219 in DataFrame
2025-04-14 15:34:53,646 - DEBUG - Added product 275659219 to similar_products
2025-04-14 15:34:53,649 - DEBUG - Checking product_id 75301142 in DataFrame
2025-04-14 15:34:53,652 - DEBUG - Added product 75301142 to similar_products
2025-04-14 15:34:53,655 - DEBUG - Checking product_id 275326482 in DataFrame
2025-04-14 15:34:53,657 - DEBUG - Added product 275326482 to similar_products
2025-04-14 15:34:53,667 - DEBUG - Checking product_id 6655991 in DataFrame
2025-04-14 15:34:53,671 - DEBUG - Added product 6655991 to similar_products
2025-04-14 15:34:53,674 - DEBUG - Checking product_id 106685187 in DataFrame
2025-04-14 15:34:53,677 - DEBUG - Added product 106685187 to similar_products
2025-04-14 15:34:53,681 - DEBUG - Checking product_id 274748634 in DataFrame
2025-04-14 15:34:53,685 - DEBUG - Added product 274748634 to similar_products
2025-04-14 15:34:53,686 - DEBUG - Checking product_id 73987509 in DataFrame
2025-04-14 15:34:53,698 - DEBUG - Added product 73987509 to similar_products
2025-04-14 15:34:53,706 - DEBUG - Final similar_products count: 10
2025-04-14 15:34:53,707 - DEBUG - Final similar_products: [50327179, 275671660, 73744564, 275659219, 75301142, 275326482, 6655991, 106685187, 274748634, 73987509]
2025-04-14 15:34:53,716 - DEBUG - --- Completed get_similar_products_by_id for product_id: 101847035 ---
2025-04-14 15:34:53,718 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:34:53,719 - DEBUG - Preparing response with similar products
2025-04-14 15:34:53,736 - DEBUG - --- Completed request for /api/recommendations/101847035 ---
2025-04-14 15:34:57,101 - DEBUG - --- Processing request for /api/recommendations/75301142 ---
2025-04-14 15:34:57,102 - DEBUG - Limit set to: 10
2025-04-14 15:34:57,103 - DEBUG - --- Starting get_similar_products_by_id for product_id: 75301142 ---
2025-04-14 15:34:57,104 - DEBUG - Checking if product_id 75301142 exists in product_ids
2025-04-14 15:34:57,105 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:34:57,106 - DEBUG - Fetching product details from Tiki API for product_id: 75301142
2025-04-14 15:34:57,207 - DEBUG - Extracting product details
2025-04-14 15:34:57,215 - DEBUG - Category_name: 
2025-04-14 15:34:57,216 - DEBUG - Brand_name: PKCB
2025-04-14 15:34:57,223 - DEBUG - Encoding combined text to embedding
2025-04-14 15:34:57,317 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:34:57,318 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:34:57,320 - DEBUG - FAISS search results - distances: [[0.008342099376022816, 0.23960089683532715, 0.24090301990509033, 0.2517140209674835, 0.28889504075050354, 0.3072120249271393, 0.3112175464630127, 0.3122965693473816, 0.3197464346885681, 0.3246191740036011, 0.32506006956100464]]
2025-04-14 15:34:57,321 - DEBUG - FAISS search results - indices: [[340, 328, 385, 438, 715, 444, 1091, 342, 5749, 7807, 5435]]
2025-04-14 15:34:57,322 - DEBUG - Filtered result_product_ids: [77918308, 77712221, 77710857, 106685187, 77743707, 89065883, 31246621, 73744564, 50327179, 275659219]
2025-04-14 15:34:57,323 - DEBUG - Checking product_id 77918308 in DataFrame
2025-04-14 15:34:57,325 - DEBUG - Added product 77918308 to similar_products
2025-04-14 15:34:57,326 - DEBUG - Checking product_id 77712221 in DataFrame
2025-04-14 15:34:57,328 - DEBUG - Added product 77712221 to similar_products
2025-04-14 15:34:57,329 - DEBUG - Checking product_id 77710857 in DataFrame
2025-04-14 15:34:57,331 - DEBUG - Added product 77710857 to similar_products
2025-04-14 15:34:57,332 - DEBUG - Checking product_id 106685187 in DataFrame
2025-04-14 15:34:57,335 - DEBUG - Added product 106685187 to similar_products
2025-04-14 15:34:57,336 - DEBUG - Checking product_id 77743707 in DataFrame
2025-04-14 15:34:57,337 - DEBUG - Added product 77743707 to similar_products
2025-04-14 15:34:57,338 - DEBUG - Checking product_id 89065883 in DataFrame
2025-04-14 15:34:57,340 - DEBUG - Added product 89065883 to similar_products
2025-04-14 15:34:57,341 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-14 15:34:57,343 - DEBUG - Added product 31246621 to similar_products
2025-04-14 15:34:57,344 - DEBUG - Checking product_id 73744564 in DataFrame
2025-04-14 15:34:57,346 - DEBUG - Added product 73744564 to similar_products
2025-04-14 15:34:57,347 - DEBUG - Checking product_id 50327179 in DataFrame
2025-04-14 15:34:57,349 - DEBUG - Added product 50327179 to similar_products
2025-04-14 15:34:57,350 - DEBUG - Checking product_id 275659219 in DataFrame
2025-04-14 15:34:57,352 - DEBUG - Added product 275659219 to similar_products
2025-04-14 15:34:57,353 - DEBUG - Final similar_products count: 10
2025-04-14 15:34:57,354 - DEBUG - Final similar_products: [77918308, 77712221, 77710857, 106685187, 77743707, 89065883, 31246621, 73744564, 50327179, 275659219]
2025-04-14 15:34:57,355 - DEBUG - --- Completed get_similar_products_by_id for product_id: 75301142 ---
2025-04-14 15:34:57,356 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:34:57,357 - DEBUG - Preparing response with similar products
2025-04-14 15:34:57,366 - DEBUG - --- Completed request for /api/recommendations/75301142 ---
2025-04-14 15:34:59,487 - DEBUG - --- Processing request for /api/recommendations/77712221 ---
2025-04-14 15:34:59,488 - DEBUG - Limit set to: 10
2025-04-14 15:34:59,489 - DEBUG - --- Starting get_similar_products_by_id for product_id: 77712221 ---
2025-04-14 15:34:59,490 - DEBUG - Checking if product_id 77712221 exists in product_ids
2025-04-14 15:34:59,491 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:34:59,492 - DEBUG - Fetching product details from Tiki API for product_id: 77712221
2025-04-14 15:34:59,636 - DEBUG - Extracting product details
2025-04-14 15:34:59,644 - DEBUG - Category_name: 
2025-04-14 15:34:59,645 - DEBUG - Brand_name: PKCB
2025-04-14 15:34:59,651 - DEBUG - Encoding combined text to embedding
2025-04-14 15:34:59,739 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:34:59,740 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:34:59,742 - DEBUG - FAISS search results - distances: [[0.020525243133306503, 0.2063107192516327, 0.20779922604560852, 0.21680942177772522, 0.28439268469810486, 0.34251832962036133, 0.34850263595581055, 0.3506041467189789, 0.35076552629470825, 0.35297271609306335, 0.3585665822029114]]
2025-04-14 15:34:59,743 - DEBUG - FAISS search results - indices: [[385, 438, 420, 340, 328, 444, 7644, 6793, 891, 1091, 2169]]
2025-04-14 15:34:59,744 - DEBUG - Filtered result_product_ids: [77710857, 121156873, 75301142, 77918308, 77743707, 275671660, 277043114, 139200046, 89065883, 58359137]
2025-04-14 15:34:59,744 - DEBUG - Checking product_id 77710857 in DataFrame
2025-04-14 15:34:59,748 - DEBUG - Added product 77710857 to similar_products
2025-04-14 15:34:59,749 - DEBUG - Checking product_id 121156873 in DataFrame
2025-04-14 15:34:59,751 - DEBUG - Added product 121156873 to similar_products
2025-04-14 15:34:59,752 - DEBUG - Checking product_id 75301142 in DataFrame
2025-04-14 15:34:59,754 - DEBUG - Added product 75301142 to similar_products
2025-04-14 15:34:59,755 - DEBUG - Checking product_id 77918308 in DataFrame
2025-04-14 15:34:59,758 - DEBUG - Added product 77918308 to similar_products
2025-04-14 15:34:59,759 - DEBUG - Checking product_id 77743707 in DataFrame
2025-04-14 15:34:59,762 - DEBUG - Added product 77743707 to similar_products
2025-04-14 15:34:59,763 - DEBUG - Checking product_id 275671660 in DataFrame
2025-04-14 15:34:59,767 - DEBUG - Added product 275671660 to similar_products
2025-04-14 15:34:59,768 - DEBUG - Checking product_id 277043114 in DataFrame
2025-04-14 15:34:59,771 - DEBUG - Added product 277043114 to similar_products
2025-04-14 15:34:59,772 - DEBUG - Checking product_id 139200046 in DataFrame
2025-04-14 15:34:59,774 - DEBUG - Added product 139200046 to similar_products
2025-04-14 15:34:59,775 - DEBUG - Checking product_id 89065883 in DataFrame
2025-04-14 15:34:59,778 - DEBUG - Added product 89065883 to similar_products
2025-04-14 15:34:59,780 - DEBUG - Checking product_id 58359137 in DataFrame
2025-04-14 15:34:59,785 - DEBUG - Added product 58359137 to similar_products
2025-04-14 15:34:59,786 - DEBUG - Final similar_products count: 10
2025-04-14 15:34:59,787 - DEBUG - Final similar_products: [77710857, 121156873, 75301142, 77918308, 77743707, 275671660, 277043114, 139200046, 89065883, 58359137]
2025-04-14 15:34:59,788 - DEBUG - --- Completed get_similar_products_by_id for product_id: 77712221 ---
2025-04-14 15:34:59,790 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:34:59,791 - DEBUG - Preparing response with similar products
2025-04-14 15:34:59,799 - DEBUG - --- Completed request for /api/recommendations/77712221 ---
2025-04-14 15:35:02,584 - DEBUG - --- Processing request for /api/recommendations/75301142 ---
2025-04-14 15:35:02,587 - DEBUG - Limit set to: 10
2025-04-14 15:35:02,588 - DEBUG - --- Starting get_similar_products_by_id for product_id: 75301142 ---
2025-04-14 15:35:02,589 - DEBUG - Checking if product_id 75301142 exists in product_ids
2025-04-14 15:35:02,589 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:35:02,590 - DEBUG - Fetching product details from Tiki API for product_id: 75301142
2025-04-14 15:35:02,717 - DEBUG - Extracting product details
2025-04-14 15:35:02,729 - DEBUG - Category_name: 
2025-04-14 15:35:02,748 - DEBUG - Brand_name: PKCB
2025-04-14 15:35:02,760 - DEBUG - Encoding combined text to embedding
2025-04-14 15:35:02,849 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:35:02,850 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:35:02,852 - DEBUG - FAISS search results - distances: [[0.008342099376022816, 0.23960089683532715, 0.24090301990509033, 0.2517140209674835, 0.28889504075050354, 0.3072120249271393, 0.3112175464630127, 0.3122965693473816, 0.3197464346885681, 0.3246191740036011, 0.32506006956100464]]
2025-04-14 15:35:02,853 - DEBUG - FAISS search results - indices: [[340, 328, 385, 438, 715, 444, 1091, 342, 5749, 7807, 5435]]
2025-04-14 15:35:02,853 - DEBUG - Filtered result_product_ids: [77918308, 77712221, 77710857, 106685187, 77743707, 89065883, 31246621, 73744564, 50327179, 275659219]
2025-04-14 15:35:02,854 - DEBUG - Checking product_id 77918308 in DataFrame
2025-04-14 15:35:02,856 - DEBUG - Added product 77918308 to similar_products
2025-04-14 15:35:02,857 - DEBUG - Checking product_id 77712221 in DataFrame
2025-04-14 15:35:02,859 - DEBUG - Added product 77712221 to similar_products
2025-04-14 15:35:02,859 - DEBUG - Checking product_id 77710857 in DataFrame
2025-04-14 15:35:02,861 - DEBUG - Added product 77710857 to similar_products
2025-04-14 15:35:02,862 - DEBUG - Checking product_id 106685187 in DataFrame
2025-04-14 15:35:02,865 - DEBUG - Added product 106685187 to similar_products
2025-04-14 15:35:02,866 - DEBUG - Checking product_id 77743707 in DataFrame
2025-04-14 15:35:02,868 - DEBUG - Added product 77743707 to similar_products
2025-04-14 15:35:02,868 - DEBUG - Checking product_id 89065883 in DataFrame
2025-04-14 15:35:02,870 - DEBUG - Added product 89065883 to similar_products
2025-04-14 15:35:02,871 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-14 15:35:02,873 - DEBUG - Added product 31246621 to similar_products
2025-04-14 15:35:02,873 - DEBUG - Checking product_id 73744564 in DataFrame
2025-04-14 15:35:02,875 - DEBUG - Added product 73744564 to similar_products
2025-04-14 15:35:02,876 - DEBUG - Checking product_id 50327179 in DataFrame
2025-04-14 15:35:02,878 - DEBUG - Added product 50327179 to similar_products
2025-04-14 15:35:02,879 - DEBUG - Checking product_id 275659219 in DataFrame
2025-04-14 15:35:02,881 - DEBUG - Added product 275659219 to similar_products
2025-04-14 15:35:02,883 - DEBUG - Final similar_products count: 10
2025-04-14 15:35:02,884 - DEBUG - Final similar_products: [77918308, 77712221, 77710857, 106685187, 77743707, 89065883, 31246621, 73744564, 50327179, 275659219]
2025-04-14 15:35:02,885 - DEBUG - --- Completed get_similar_products_by_id for product_id: 75301142 ---
2025-04-14 15:35:02,886 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:35:02,886 - DEBUG - Preparing response with similar products
2025-04-14 15:35:02,891 - DEBUG - --- Completed request for /api/recommendations/75301142 ---
2025-04-14 15:35:34,477 - DEBUG - --- Processing request for /api/recommendations/77918308 ---
2025-04-14 15:35:34,480 - DEBUG - Limit set to: 10
2025-04-14 15:35:34,483 - DEBUG - --- Starting get_similar_products_by_id for product_id: 77918308 ---
2025-04-14 15:35:34,485 - DEBUG - Checking if product_id 77918308 exists in product_ids
2025-04-14 15:35:34,487 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:35:34,488 - DEBUG - Fetching product details from Tiki API for product_id: 77918308
2025-04-14 15:35:35,073 - DEBUG - Extracting product details
2025-04-14 15:35:35,087 - DEBUG - Category_name: 
2025-04-14 15:35:35,088 - DEBUG - Brand_name: PKCB
2025-04-14 15:35:35,097 - DEBUG - Encoding combined text to embedding
2025-04-14 15:35:35,228 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:35:35,229 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:35:35,232 - DEBUG - FAISS search results - distances: [[0.0222504660487175, 0.1603492796421051, 0.21174880862236023, 0.21479682624340057, 0.21479682624340057, 0.24458841979503632, 0.2662736475467682, 0.32248127460479736, 0.3293382525444031, 0.33204585313796997, 0.33590781688690186]]
2025-04-14 15:35:35,232 - DEBUG - FAISS search results - indices: [[328, 438, 340, 714, 2068, 715, 385, 4970, 4321, 5435, 6656]]
2025-04-14 15:35:35,233 - DEBUG - Filtered result_product_ids: [77710857, 75301142, 75662072, 94886842, 106685187, 77712221, 275492797, 2466163, 275659219, 6837353]
2025-04-14 15:35:35,235 - DEBUG - Checking product_id 77710857 in DataFrame
2025-04-14 15:35:35,237 - DEBUG - Added product 77710857 to similar_products
2025-04-14 15:35:35,239 - DEBUG - Checking product_id 75301142 in DataFrame
2025-04-14 15:35:35,241 - DEBUG - Added product 75301142 to similar_products
2025-04-14 15:35:35,242 - DEBUG - Checking product_id 75662072 in DataFrame
2025-04-14 15:35:35,244 - DEBUG - Added product 75662072 to similar_products
2025-04-14 15:35:35,245 - DEBUG - Checking product_id 94886842 in DataFrame
2025-04-14 15:35:35,248 - DEBUG - Added product 94886842 to similar_products
2025-04-14 15:35:35,249 - DEBUG - Checking product_id 106685187 in DataFrame
2025-04-14 15:35:35,251 - DEBUG - Added product 106685187 to similar_products
2025-04-14 15:35:35,252 - DEBUG - Checking product_id 77712221 in DataFrame
2025-04-14 15:35:35,254 - DEBUG - Added product 77712221 to similar_products
2025-04-14 15:35:35,255 - DEBUG - Checking product_id 275492797 in DataFrame
2025-04-14 15:35:35,256 - DEBUG - Added product 275492797 to similar_products
2025-04-14 15:35:35,257 - DEBUG - Checking product_id 2466163 in DataFrame
2025-04-14 15:35:35,259 - DEBUG - Added product 2466163 to similar_products
2025-04-14 15:35:35,267 - DEBUG - Checking product_id 275659219 in DataFrame
2025-04-14 15:35:35,269 - DEBUG - Added product 275659219 to similar_products
2025-04-14 15:35:35,273 - DEBUG - Checking product_id 6837353 in DataFrame
2025-04-14 15:35:35,275 - DEBUG - Added product 6837353 to similar_products
2025-04-14 15:35:35,280 - DEBUG - Final similar_products count: 10
2025-04-14 15:35:35,282 - DEBUG - Final similar_products: [77710857, 75301142, 75662072, 94886842, 106685187, 77712221, 275492797, 2466163, 275659219, 6837353]
2025-04-14 15:35:35,287 - DEBUG - --- Completed get_similar_products_by_id for product_id: 77918308 ---
2025-04-14 15:35:35,288 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:35:35,288 - DEBUG - Preparing response with similar products
2025-04-14 15:35:35,299 - DEBUG - --- Completed request for /api/recommendations/77918308 ---
2025-04-14 15:35:38,491 - DEBUG - --- Processing request for /api/recommendations/75301142 ---
2025-04-14 15:35:38,493 - DEBUG - Limit set to: 10
2025-04-14 15:35:38,494 - DEBUG - --- Starting get_similar_products_by_id for product_id: 75301142 ---
2025-04-14 15:35:38,495 - DEBUG - Checking if product_id 75301142 exists in product_ids
2025-04-14 15:35:38,496 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:35:38,497 - DEBUG - Fetching product details from Tiki API for product_id: 75301142
2025-04-14 15:35:38,634 - DEBUG - Extracting product details
2025-04-14 15:35:38,645 - DEBUG - Category_name: 
2025-04-14 15:35:38,646 - DEBUG - Brand_name: PKCB
2025-04-14 15:35:38,652 - DEBUG - Encoding combined text to embedding
2025-04-14 15:35:38,735 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:35:38,736 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:35:38,738 - DEBUG - FAISS search results - distances: [[0.008342099376022816, 0.23960089683532715, 0.24090301990509033, 0.2517140209674835, 0.28889504075050354, 0.3072120249271393, 0.3112175464630127, 0.3122965693473816, 0.3197464346885681, 0.3246191740036011, 0.32506006956100464]]
2025-04-14 15:35:38,739 - DEBUG - FAISS search results - indices: [[340, 328, 385, 438, 715, 444, 1091, 342, 5749, 7807, 5435]]
2025-04-14 15:35:38,740 - DEBUG - Filtered result_product_ids: [77918308, 77712221, 77710857, 106685187, 77743707, 89065883, 31246621, 73744564, 50327179, 275659219]
2025-04-14 15:35:38,740 - DEBUG - Checking product_id 77918308 in DataFrame
2025-04-14 15:35:38,742 - DEBUG - Added product 77918308 to similar_products
2025-04-14 15:35:38,743 - DEBUG - Checking product_id 77712221 in DataFrame
2025-04-14 15:35:38,746 - DEBUG - Added product 77712221 to similar_products
2025-04-14 15:35:38,747 - DEBUG - Checking product_id 77710857 in DataFrame
2025-04-14 15:35:38,750 - DEBUG - Added product 77710857 to similar_products
2025-04-14 15:35:38,750 - DEBUG - Checking product_id 106685187 in DataFrame
2025-04-14 15:35:38,752 - DEBUG - Added product 106685187 to similar_products
2025-04-14 15:35:38,753 - DEBUG - Checking product_id 77743707 in DataFrame
2025-04-14 15:35:38,755 - DEBUG - Added product 77743707 to similar_products
2025-04-14 15:35:38,756 - DEBUG - Checking product_id 89065883 in DataFrame
2025-04-14 15:35:38,758 - DEBUG - Added product 89065883 to similar_products
2025-04-14 15:35:38,759 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-14 15:35:38,761 - DEBUG - Added product 31246621 to similar_products
2025-04-14 15:35:38,762 - DEBUG - Checking product_id 73744564 in DataFrame
2025-04-14 15:35:38,764 - DEBUG - Added product 73744564 to similar_products
2025-04-14 15:35:38,765 - DEBUG - Checking product_id 50327179 in DataFrame
2025-04-14 15:35:38,767 - DEBUG - Added product 50327179 to similar_products
2025-04-14 15:35:38,768 - DEBUG - Checking product_id 275659219 in DataFrame
2025-04-14 15:35:38,770 - DEBUG - Added product 275659219 to similar_products
2025-04-14 15:35:38,770 - DEBUG - Final similar_products count: 10
2025-04-14 15:35:38,771 - DEBUG - Final similar_products: [77918308, 77712221, 77710857, 106685187, 77743707, 89065883, 31246621, 73744564, 50327179, 275659219]
2025-04-14 15:35:38,772 - DEBUG - --- Completed get_similar_products_by_id for product_id: 75301142 ---
2025-04-14 15:35:38,773 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:35:38,774 - DEBUG - Preparing response with similar products
2025-04-14 15:35:38,781 - DEBUG - --- Completed request for /api/recommendations/75301142 ---
2025-04-14 15:35:54,148 - DEBUG - --- Processing request for /api/recommendations/106685187 ---
2025-04-14 15:35:54,151 - DEBUG - Limit set to: 10
2025-04-14 15:35:54,152 - DEBUG - --- Starting get_similar_products_by_id for product_id: 106685187 ---
2025-04-14 15:35:54,154 - DEBUG - Checking if product_id 106685187 exists in product_ids
2025-04-14 15:35:54,157 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:35:54,158 - DEBUG - Fetching product details from Tiki API for product_id: 106685187
2025-04-14 15:35:54,771 - DEBUG - Extracting product details
2025-04-14 15:35:54,781 - DEBUG - Category_name: 
2025-04-14 15:35:54,782 - DEBUG - Brand_name: PKCB
2025-04-14 15:35:54,792 - DEBUG - Encoding combined text to embedding
2025-04-14 15:35:54,901 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:35:54,902 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:35:54,904 - DEBUG - FAISS search results - distances: [[0.009703490883111954, 0.2278672605752945, 0.2683422565460205, 0.2853766679763794, 0.28686991333961487, 0.2921382784843445, 0.2921382784843445, 0.2967151999473572, 0.29710161685943604, 0.30248862504959106, 0.30861344933509827]]
2025-04-14 15:35:54,906 - DEBUG - FAISS search results - indices: [[715, 1293, 5435, 328, 4970, 714, 2068, 1946, 438, 340, 331]]
2025-04-14 15:35:54,907 - DEBUG - Filtered result_product_ids: [115117462, 275659219, 77918308, 275492797, 75662072, 94886842, 89692612, 77710857, 75301142, 74891402]
2025-04-14 15:35:54,908 - DEBUG - Checking product_id 115117462 in DataFrame
2025-04-14 15:35:54,911 - DEBUG - Added product 115117462 to similar_products
2025-04-14 15:35:54,911 - DEBUG - Checking product_id 275659219 in DataFrame
2025-04-14 15:35:54,914 - DEBUG - Added product 275659219 to similar_products
2025-04-14 15:35:54,915 - DEBUG - Checking product_id 77918308 in DataFrame
2025-04-14 15:35:54,917 - DEBUG - Added product 77918308 to similar_products
2025-04-14 15:35:54,924 - DEBUG - Checking product_id 275492797 in DataFrame
2025-04-14 15:35:54,926 - DEBUG - Added product 275492797 to similar_products
2025-04-14 15:35:54,927 - DEBUG - Checking product_id 75662072 in DataFrame
2025-04-14 15:35:54,929 - DEBUG - Added product 75662072 to similar_products
2025-04-14 15:35:54,933 - DEBUG - Checking product_id 94886842 in DataFrame
2025-04-14 15:35:54,935 - DEBUG - Added product 94886842 to similar_products
2025-04-14 15:35:54,941 - DEBUG - Checking product_id 89692612 in DataFrame
2025-04-14 15:35:54,947 - DEBUG - Added product 89692612 to similar_products
2025-04-14 15:35:54,951 - DEBUG - Checking product_id 77710857 in DataFrame
2025-04-14 15:35:54,960 - DEBUG - Added product 77710857 to similar_products
2025-04-14 15:35:54,963 - DEBUG - Checking product_id 75301142 in DataFrame
2025-04-14 15:35:54,973 - DEBUG - Added product 75301142 to similar_products
2025-04-14 15:35:54,982 - DEBUG - Checking product_id 74891402 in DataFrame
2025-04-14 15:35:54,986 - DEBUG - Added product 74891402 to similar_products
2025-04-14 15:35:54,988 - DEBUG - Final similar_products count: 10
2025-04-14 15:35:54,991 - DEBUG - Final similar_products: [115117462, 275659219, 77918308, 275492797, 75662072, 94886842, 89692612, 77710857, 75301142, 74891402]
2025-04-14 15:35:54,992 - DEBUG - --- Completed get_similar_products_by_id for product_id: 106685187 ---
2025-04-14 15:35:54,994 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:35:54,995 - DEBUG - Preparing response with similar products
2025-04-14 15:35:55,030 - DEBUG - --- Completed request for /api/recommendations/106685187 ---
2025-04-14 15:35:59,293 - DEBUG - --- Processing request for /api/recommendations/275492797 ---
2025-04-14 15:35:59,295 - DEBUG - Limit set to: 10
2025-04-14 15:35:59,296 - DEBUG - --- Starting get_similar_products_by_id for product_id: 275492797 ---
2025-04-14 15:35:59,298 - DEBUG - Checking if product_id 275492797 exists in product_ids
2025-04-14 15:35:59,300 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:35:59,302 - DEBUG - Fetching product details from Tiki API for product_id: 275492797
2025-04-14 15:35:59,460 - DEBUG - Extracting product details
2025-04-14 15:35:59,474 - DEBUG - Brand_name: SOAIY
2025-04-14 15:35:59,479 - DEBUG - Encoding combined text to embedding
2025-04-14 15:35:59,579 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:35:59,596 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:35:59,599 - DEBUG - FAISS search results - distances: [[1.118134854453598e-13, 0.1363254189491272, 0.1521773785352707, 0.16149809956550598, 0.1711423397064209, 0.17915202677249908, 0.18010717630386353, 0.1874532848596573, 0.20785123109817505, 0.2365272343158722, 0.23895278573036194]]
2025-04-14 15:35:59,600 - DEBUG - FAISS search results - indices: [[4970, 4294, 6802, 4963, 7769, 7598, 4270, 5435, 8285, 7644, 4321]]
2025-04-14 15:35:59,605 - DEBUG - Filtered result_product_ids: [275587285, 277043150, 275492742, 124480915, 275671433, 275587181, 275659219, 275511595, 275671660, 2466163]
2025-04-14 15:35:59,606 - DEBUG - Checking product_id 275587285 in DataFrame
2025-04-14 15:35:59,608 - DEBUG - Added product 275587285 to similar_products
2025-04-14 15:35:59,608 - DEBUG - Checking product_id 277043150 in DataFrame
2025-04-14 15:35:59,610 - DEBUG - Added product 277043150 to similar_products
2025-04-14 15:35:59,611 - DEBUG - Checking product_id 275492742 in DataFrame
2025-04-14 15:35:59,613 - DEBUG - Added product 275492742 to similar_products
2025-04-14 15:35:59,614 - DEBUG - Checking product_id 124480915 in DataFrame
2025-04-14 15:35:59,616 - DEBUG - Added product 124480915 to similar_products
2025-04-14 15:35:59,617 - DEBUG - Checking product_id 275671433 in DataFrame
2025-04-14 15:35:59,619 - DEBUG - Added product 275671433 to similar_products
2025-04-14 15:35:59,619 - DEBUG - Checking product_id 275587181 in DataFrame
2025-04-14 15:35:59,621 - DEBUG - Added product 275587181 to similar_products
2025-04-14 15:35:59,622 - DEBUG - Checking product_id 275659219 in DataFrame
2025-04-14 15:35:59,624 - DEBUG - Added product 275659219 to similar_products
2025-04-14 15:35:59,625 - DEBUG - Checking product_id 275511595 in DataFrame
2025-04-14 15:35:59,627 - DEBUG - Added product 275511595 to similar_products
2025-04-14 15:35:59,628 - DEBUG - Checking product_id 275671660 in DataFrame
2025-04-14 15:35:59,629 - DEBUG - Added product 275671660 to similar_products
2025-04-14 15:35:59,630 - DEBUG - Checking product_id 2466163 in DataFrame
2025-04-14 15:35:59,632 - DEBUG - Added product 2466163 to similar_products
2025-04-14 15:35:59,633 - DEBUG - Final similar_products count: 10
2025-04-14 15:35:59,636 - DEBUG - Final similar_products: [275587285, 277043150, 275492742, 124480915, 275671433, 275587181, 275659219, 275511595, 275671660, 2466163]
2025-04-14 15:35:59,637 - DEBUG - --- Completed get_similar_products_by_id for product_id: 275492797 ---
2025-04-14 15:35:59,638 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:35:59,639 - DEBUG - Preparing response with similar products
2025-04-14 15:35:59,645 - DEBUG - --- Completed request for /api/recommendations/275492797 ---
2025-04-14 15:36:04,655 - DEBUG - --- Processing request for /api/recommendations/274171878 ---
2025-04-14 15:36:04,657 - DEBUG - Limit set to: 10
2025-04-14 15:36:04,659 - DEBUG - --- Starting get_similar_products_by_id for product_id: 274171878 ---
2025-04-14 15:36:04,660 - DEBUG - Checking if product_id 274171878 exists in product_ids
2025-04-14 15:36:04,662 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:36:04,663 - DEBUG - Fetching product details from Tiki API for product_id: 274171878
2025-04-14 15:36:05,629 - DEBUG - Extracting product details
2025-04-14 15:36:05,644 - DEBUG - Brand_name: Cyboris
2025-04-14 15:36:05,650 - DEBUG - Encoding combined text to embedding
2025-04-14 15:36:05,758 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:36:05,760 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:36:05,762 - DEBUG - FAISS search results - distances: [[1.5076434295869384e-13, 0.191182941198349, 0.3608713746070862, 0.37572282552719116, 0.39530760049819946, 0.40070515871047974, 0.40948009490966797, 0.4104684293270111, 0.41704440116882324, 0.4190964698791504, 0.4237046241760254]]
2025-04-14 15:36:05,763 - DEBUG - FAISS search results - indices: [[3294, 5177, 447, 3727, 1138, 1038, 656, 2169, 474, 7189, 5749]]
2025-04-14 15:36:05,764 - DEBUG - Filtered result_product_ids: [274642014, 109878891, 275190482, 72837727, 43395259, 58393093, 58359137, 74985442, 275210282, 73744564]
2025-04-14 15:36:05,764 - DEBUG - Checking product_id 274642014 in DataFrame
2025-04-14 15:36:05,766 - DEBUG - Added product 274642014 to similar_products
2025-04-14 15:36:05,767 - DEBUG - Checking product_id 109878891 in DataFrame
2025-04-14 15:36:05,770 - DEBUG - Added product 109878891 to similar_products
2025-04-14 15:36:05,771 - DEBUG - Checking product_id 275190482 in DataFrame
2025-04-14 15:36:05,773 - DEBUG - Added product 275190482 to similar_products
2025-04-14 15:36:05,776 - DEBUG - Checking product_id 72837727 in DataFrame
2025-04-14 15:36:05,778 - DEBUG - Added product 72837727 to similar_products
2025-04-14 15:36:05,779 - DEBUG - Checking product_id 43395259 in DataFrame
2025-04-14 15:36:05,781 - DEBUG - Added product 43395259 to similar_products
2025-04-14 15:36:05,782 - DEBUG - Checking product_id 58393093 in DataFrame
2025-04-14 15:36:05,784 - DEBUG - Added product 58393093 to similar_products
2025-04-14 15:36:05,784 - DEBUG - Checking product_id 58359137 in DataFrame
2025-04-14 15:36:05,789 - DEBUG - Added product 58359137 to similar_products
2025-04-14 15:36:05,790 - DEBUG - Checking product_id 74985442 in DataFrame
2025-04-14 15:36:05,792 - DEBUG - Added product 74985442 to similar_products
2025-04-14 15:36:05,794 - DEBUG - Checking product_id 275210282 in DataFrame
2025-04-14 15:36:05,796 - DEBUG - Added product 275210282 to similar_products
2025-04-14 15:36:05,797 - DEBUG - Checking product_id 73744564 in DataFrame
2025-04-14 15:36:05,798 - DEBUG - Added product 73744564 to similar_products
2025-04-14 15:36:05,799 - DEBUG - Final similar_products count: 10
2025-04-14 15:36:05,800 - DEBUG - Final similar_products: [274642014, 109878891, 275190482, 72837727, 43395259, 58393093, 58359137, 74985442, 275210282, 73744564]
2025-04-14 15:36:05,802 - DEBUG - --- Completed get_similar_products_by_id for product_id: 274171878 ---
2025-04-14 15:36:05,804 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:36:05,806 - DEBUG - Preparing response with similar products
2025-04-14 15:36:05,813 - DEBUG - --- Completed request for /api/recommendations/274171878 ---
2025-04-14 15:36:07,032 - DEBUG - --- Processing request for /api/recommendations/109878891 ---
2025-04-14 15:36:07,033 - DEBUG - Limit set to: 10
2025-04-14 15:36:07,034 - DEBUG - --- Starting get_similar_products_by_id for product_id: 109878891 ---
2025-04-14 15:36:07,035 - DEBUG - Checking if product_id 109878891 exists in product_ids
2025-04-14 15:36:07,036 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:36:07,037 - DEBUG - Fetching product details from Tiki API for product_id: 109878891
2025-04-14 15:36:07,653 - DEBUG - Extracting product details
2025-04-14 15:36:07,674 - DEBUG - Category_name: 
2025-04-14 15:36:07,675 - DEBUG - Brand_name: PKCB
2025-04-14 15:36:07,682 - DEBUG - Encoding combined text to embedding
2025-04-14 15:36:07,802 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:36:07,804 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:36:07,809 - DEBUG - FAISS search results - distances: [[0.014639736153185368, 0.3079143166542053, 0.31765317916870117, 0.3286935091018677, 0.3535822629928589, 0.35771042108535767, 0.36379575729370117, 0.3653639554977417, 0.38071197271347046, 0.3944910764694214, 0.3944910764694214]]
2025-04-14 15:36:07,810 - DEBUG - FAISS search results - indices: [[447, 656, 474, 2169, 5177, 1214, 3294, 1091, 1138, 1876, 2189]]
2025-04-14 15:36:07,811 - DEBUG - Filtered result_product_ids: [58393093, 74985442, 58359137, 274642014, 136981450, 274171878, 89065883, 72837727, 160946349, 143416791]
2025-04-14 15:36:07,813 - DEBUG - Checking product_id 58393093 in DataFrame
2025-04-14 15:36:07,815 - DEBUG - Added product 58393093 to similar_products
2025-04-14 15:36:07,819 - DEBUG - Checking product_id 74985442 in DataFrame
2025-04-14 15:36:07,828 - DEBUG - Added product 74985442 to similar_products
2025-04-14 15:36:07,830 - DEBUG - Checking product_id 58359137 in DataFrame
2025-04-14 15:36:07,832 - DEBUG - Added product 58359137 to similar_products
2025-04-14 15:36:07,833 - DEBUG - Checking product_id 274642014 in DataFrame
2025-04-14 15:36:07,835 - DEBUG - Added product 274642014 to similar_products
2025-04-14 15:36:07,838 - DEBUG - Checking product_id 136981450 in DataFrame
2025-04-14 15:36:07,841 - DEBUG - Added product 136981450 to similar_products
2025-04-14 15:36:07,842 - DEBUG - Checking product_id 274171878 in DataFrame
2025-04-14 15:36:07,845 - DEBUG - Added product 274171878 to similar_products
2025-04-14 15:36:07,845 - DEBUG - Checking product_id 89065883 in DataFrame
2025-04-14 15:36:07,847 - DEBUG - Added product 89065883 to similar_products
2025-04-14 15:36:07,848 - DEBUG - Checking product_id 72837727 in DataFrame
2025-04-14 15:36:07,850 - DEBUG - Added product 72837727 to similar_products
2025-04-14 15:36:07,850 - DEBUG - Checking product_id 160946349 in DataFrame
2025-04-14 15:36:07,852 - DEBUG - Added product 160946349 to similar_products
2025-04-14 15:36:07,854 - DEBUG - Checking product_id 143416791 in DataFrame
2025-04-14 15:36:07,856 - DEBUG - Added product 143416791 to similar_products
2025-04-14 15:36:07,857 - DEBUG - Final similar_products count: 10
2025-04-14 15:36:07,857 - DEBUG - Final similar_products: [58393093, 74985442, 58359137, 274642014, 136981450, 274171878, 89065883, 72837727, 160946349, 143416791]
2025-04-14 15:36:07,858 - DEBUG - --- Completed get_similar_products_by_id for product_id: 109878891 ---
2025-04-14 15:36:07,860 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:36:07,861 - DEBUG - Preparing response with similar products
2025-04-14 15:36:07,869 - DEBUG - --- Completed request for /api/recommendations/109878891 ---
2025-04-14 15:36:16,501 - DEBUG - --- Processing request for /api/recommendations/74985442 ---
2025-04-14 15:36:16,502 - DEBUG - Limit set to: 10
2025-04-14 15:36:16,503 - DEBUG - --- Starting get_similar_products_by_id for product_id: 74985442 ---
2025-04-14 15:36:16,504 - DEBUG - Checking if product_id 74985442 exists in product_ids
2025-04-14 15:36:16,505 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:36:16,506 - DEBUG - Fetching product details from Tiki API for product_id: 74985442
2025-04-14 15:36:16,675 - DEBUG - Extracting product details
2025-04-14 15:36:16,686 - DEBUG - Category_name: 
2025-04-14 15:36:16,686 - DEBUG - Brand_name: PKCB
2025-04-14 15:36:16,692 - DEBUG - Encoding combined text to embedding
2025-04-14 15:36:16,791 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:36:16,792 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:36:16,795 - DEBUG - FAISS search results - distances: [[0.012683809734880924, 0.26160168647766113, 0.2635384202003479, 0.2672131657600403, 0.2672131657600403, 0.26978862285614014, 0.27730318903923035, 0.28682833909988403, 0.3037232756614685, 0.31811898946762085, 0.32118237018585205]]
2025-04-14 15:36:16,795 - DEBUG - FAISS search results - indices: [[474, 1091, 1138, 1876, 2189, 656, 7503, 2169, 1438, 447, 352]]
2025-04-14 15:36:16,796 - DEBUG - Filtered result_product_ids: [89065883, 72837727, 160946349, 143416791, 58393093, 273704800, 58359137, 199553225, 109878891, 88191430]
2025-04-14 15:36:16,797 - DEBUG - Checking product_id 89065883 in DataFrame
2025-04-14 15:36:16,798 - DEBUG - Added product 89065883 to similar_products
2025-04-14 15:36:16,799 - DEBUG - Checking product_id 72837727 in DataFrame
2025-04-14 15:36:16,801 - DEBUG - Added product 72837727 to similar_products
2025-04-14 15:36:16,802 - DEBUG - Checking product_id 160946349 in DataFrame
2025-04-14 15:36:16,803 - DEBUG - Added product 160946349 to similar_products
2025-04-14 15:36:16,804 - DEBUG - Checking product_id 143416791 in DataFrame
2025-04-14 15:36:16,808 - DEBUG - Added product 143416791 to similar_products
2025-04-14 15:36:16,809 - DEBUG - Checking product_id 58393093 in DataFrame
2025-04-14 15:36:16,810 - DEBUG - Added product 58393093 to similar_products
2025-04-14 15:36:16,811 - DEBUG - Checking product_id 273704800 in DataFrame
2025-04-14 15:36:16,812 - DEBUG - Added product 273704800 to similar_products
2025-04-14 15:36:16,813 - DEBUG - Checking product_id 58359137 in DataFrame
2025-04-14 15:36:16,815 - DEBUG - Added product 58359137 to similar_products
2025-04-14 15:36:16,816 - DEBUG - Checking product_id 199553225 in DataFrame
2025-04-14 15:36:16,817 - DEBUG - Added product 199553225 to similar_products
2025-04-14 15:36:16,818 - DEBUG - Checking product_id 109878891 in DataFrame
2025-04-14 15:36:16,820 - DEBUG - Added product 109878891 to similar_products
2025-04-14 15:36:16,820 - DEBUG - Checking product_id 88191430 in DataFrame
2025-04-14 15:36:16,821 - DEBUG - Added product 88191430 to similar_products
2025-04-14 15:36:16,822 - DEBUG - Final similar_products count: 10
2025-04-14 15:36:16,824 - DEBUG - Final similar_products: [89065883, 72837727, 160946349, 143416791, 58393093, 273704800, 58359137, 199553225, 109878891, 88191430]
2025-04-14 15:36:16,826 - DEBUG - --- Completed get_similar_products_by_id for product_id: 74985442 ---
2025-04-14 15:36:16,827 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:36:16,828 - DEBUG - Preparing response with similar products
2025-04-14 15:36:16,833 - DEBUG - --- Completed request for /api/recommendations/74985442 ---
2025-04-14 15:36:48,374 - DEBUG - --- Processing request for /api/recommendations/274171878 ---
2025-04-14 15:36:48,376 - DEBUG - Limit set to: 10
2025-04-14 15:36:48,378 - DEBUG - --- Starting get_similar_products_by_id for product_id: 274171878 ---
2025-04-14 15:36:48,379 - DEBUG - Checking if product_id 274171878 exists in product_ids
2025-04-14 15:36:48,380 - DEBUG - Product_id exists in vector database: True
2025-04-14 15:36:48,381 - DEBUG - Fetching product details from Tiki API for product_id: 274171878
2025-04-14 15:36:48,606 - DEBUG - Extracting product details
2025-04-14 15:36:48,637 - DEBUG - Brand_name: Cyboris
2025-04-14 15:36:48,645 - DEBUG - Encoding combined text to embedding
2025-04-14 15:36:48,777 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 15:36:48,784 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 15:36:48,792 - DEBUG - FAISS search results - distances: [[1.5076434295869384e-13, 0.191182941198349, 0.3608713746070862, 0.37572282552719116, 0.39530760049819946, 0.40070515871047974, 0.40948009490966797, 0.4104684293270111, 0.41704440116882324, 0.4190964698791504, 0.4237046241760254]]
2025-04-14 15:36:48,797 - DEBUG - FAISS search results - indices: [[3294, 5177, 447, 3727, 1138, 1038, 656, 2169, 474, 7189, 5749]]
2025-04-14 15:36:48,807 - DEBUG - Filtered result_product_ids: [274642014, 109878891, 275190482, 72837727, 43395259, 58393093, 58359137, 74985442, 275210282, 73744564]
2025-04-14 15:36:48,810 - DEBUG - Checking product_id 274642014 in DataFrame
2025-04-14 15:36:48,813 - DEBUG - Added product 274642014 to similar_products
2025-04-14 15:36:48,814 - DEBUG - Checking product_id 109878891 in DataFrame
2025-04-14 15:36:48,816 - DEBUG - Added product 109878891 to similar_products
2025-04-14 15:36:48,819 - DEBUG - Checking product_id 275190482 in DataFrame
2025-04-14 15:36:48,822 - DEBUG - Added product 275190482 to similar_products
2025-04-14 15:36:48,825 - DEBUG - Checking product_id 72837727 in DataFrame
2025-04-14 15:36:48,833 - DEBUG - Added product 72837727 to similar_products
2025-04-14 15:36:48,839 - DEBUG - Checking product_id 43395259 in DataFrame
2025-04-14 15:36:48,845 - DEBUG - Added product 43395259 to similar_products
2025-04-14 15:36:48,861 - DEBUG - Checking product_id 58393093 in DataFrame
2025-04-14 15:36:48,865 - DEBUG - Added product 58393093 to similar_products
2025-04-14 15:36:48,867 - DEBUG - Checking product_id 58359137 in DataFrame
2025-04-14 15:36:48,873 - DEBUG - Added product 58359137 to similar_products
2025-04-14 15:36:48,874 - DEBUG - Checking product_id 74985442 in DataFrame
2025-04-14 15:36:48,876 - DEBUG - Added product 74985442 to similar_products
2025-04-14 15:36:48,877 - DEBUG - Checking product_id 275210282 in DataFrame
2025-04-14 15:36:48,880 - DEBUG - Added product 275210282 to similar_products
2025-04-14 15:36:48,882 - DEBUG - Checking product_id 73744564 in DataFrame
2025-04-14 15:36:48,884 - DEBUG - Added product 73744564 to similar_products
2025-04-14 15:36:48,885 - DEBUG - Final similar_products count: 10
2025-04-14 15:36:48,886 - DEBUG - Final similar_products: [274642014, 109878891, 275190482, 72837727, 43395259, 58393093, 58359137, 74985442, 275210282, 73744564]
2025-04-14 15:36:48,887 - DEBUG - --- Completed get_similar_products_by_id for product_id: 274171878 ---
2025-04-14 15:36:48,888 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 15:36:48,889 - DEBUG - Preparing response with similar products
2025-04-14 15:36:48,898 - DEBUG - --- Completed request for /api/recommendations/274171878 ---
2025-04-14 17:40:31,462 - DEBUG - --- Initializing SearchService ---
2025-04-14 17:40:31,463 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 17:40:31,464 - DEBUG - Loading SentenceTransformer model
2025-04-14 17:40:35,276 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 17:40:35,276 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 17:40:35,277 - DEBUG - Loading FAISS index
2025-04-14 17:40:35,307 - DEBUG - Loading product DataFrame
2025-04-14 17:40:35,346 - DEBUG - Loading product_ids
2025-04-14 17:40:35,361 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 17:40:35,362 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 17:40:35,363 - DEBUG - FAISS index ntotal: 8587
2025-04-14 17:40:54,802 - DEBUG - --- Initializing SearchService ---
2025-04-14 17:40:54,802 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 17:40:54,803 - DEBUG - Loading SentenceTransformer model
2025-04-14 17:40:58,030 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 17:40:58,031 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 17:40:58,032 - DEBUG - Loading FAISS index
2025-04-14 17:40:58,039 - DEBUG - Loading product DataFrame
2025-04-14 17:40:58,062 - DEBUG - Loading product_ids
2025-04-14 17:40:58,063 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 17:40:58,063 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 17:40:58,064 - DEBUG - FAISS index ntotal: 8587
2025-04-14 17:41:07,709 - DEBUG - --- Processing request for /api/recommendations/204408190 ---
2025-04-14 17:41:07,710 - DEBUG - Limit set to: 10
2025-04-14 17:41:07,712 - DEBUG - --- Starting get_similar_products_by_id for product_id: 204408190 ---
2025-04-14 17:41:07,713 - DEBUG - Checking if product_id 204408190 exists in product_ids
2025-04-14 17:41:07,715 - DEBUG - Product_id exists in vector database: True
2025-04-14 17:41:07,715 - DEBUG - Fetching product details from Tiki API for product_id: 204408190
2025-04-14 17:41:08,141 - DEBUG - Extracting product details
2025-04-14 17:41:08,142 - DEBUG - Name: Tai Nghe Baseus Encok 3.5mm lateral in-ear Wired Earphone H17 (Hàng chính hãng)
2025-04-14 17:41:08,147 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-14 17:41:08,147 - DEBUG - Brand_name: Baseus
2025-04-14 17:41:08,152 - DEBUG - Encoding combined text to embedding
2025-04-14 17:41:08,350 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 17:41:08,351 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 17:41:08,364 - DEBUG - FAISS search results - distances: [[1.344883134978686e-13, 0.1140998899936676, 0.12824618816375732, 0.1515629142522812, 0.22270479798316956, 0.2655543088912964, 0.27482926845550537, 0.28603118658065796, 0.3552875518798828, 0.40415263175964355, 0.40663278102874756]]
2025-04-14 17:41:08,365 - DEBUG - FAISS search results - indices: [[530, 542, 527, 537, 546, 503, 533, 477, 508, 538, 5317]]
2025-04-14 17:41:08,366 - DEBUG - Filtered result_product_ids: [248870796, 275018988, 187010803, 272611292, 181185263, 46693945, 75075591, 242715477, 275062632, 116963157]
2025-04-14 17:41:08,367 - DEBUG - Checking product_id 248870796 in DataFrame
2025-04-14 17:41:08,377 - DEBUG - Added product 248870796 to similar_products
2025-04-14 17:41:08,378 - DEBUG - Checking product_id 275018988 in DataFrame
2025-04-14 17:41:08,380 - DEBUG - Added product 275018988 to similar_products
2025-04-14 17:41:08,380 - DEBUG - Checking product_id 187010803 in DataFrame
2025-04-14 17:41:08,382 - DEBUG - Added product 187010803 to similar_products
2025-04-14 17:41:08,383 - DEBUG - Checking product_id 272611292 in DataFrame
2025-04-14 17:41:08,385 - DEBUG - Added product 272611292 to similar_products
2025-04-14 17:41:08,386 - DEBUG - Checking product_id 181185263 in DataFrame
2025-04-14 17:41:08,388 - DEBUG - Added product 181185263 to similar_products
2025-04-14 17:41:08,389 - DEBUG - Checking product_id 46693945 in DataFrame
2025-04-14 17:41:08,391 - DEBUG - Added product 46693945 to similar_products
2025-04-14 17:41:08,392 - DEBUG - Checking product_id 75075591 in DataFrame
2025-04-14 17:41:08,393 - DEBUG - Added product 75075591 to similar_products
2025-04-14 17:41:08,394 - DEBUG - Checking product_id 242715477 in DataFrame
2025-04-14 17:41:08,396 - DEBUG - Added product 242715477 to similar_products
2025-04-14 17:41:08,396 - DEBUG - Checking product_id 275062632 in DataFrame
2025-04-14 17:41:08,398 - DEBUG - Added product 275062632 to similar_products
2025-04-14 17:41:08,399 - DEBUG - Checking product_id 116963157 in DataFrame
2025-04-14 17:41:08,400 - DEBUG - Added product 116963157 to similar_products
2025-04-14 17:41:08,401 - DEBUG - Final similar_products count: 10
2025-04-14 17:41:08,402 - DEBUG - Final similar_products: [248870796, 275018988, 187010803, 272611292, 181185263, 46693945, 75075591, 242715477, 275062632, 116963157]
2025-04-14 17:41:08,403 - DEBUG - --- Completed get_similar_products_by_id for product_id: 204408190 ---
2025-04-14 17:41:08,404 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 17:41:08,404 - DEBUG - Preparing response with similar products
2025-04-14 17:41:08,409 - DEBUG - --- Completed request for /api/recommendations/204408190 ---
2025-04-14 17:41:14,615 - DEBUG - --- Processing request for /api/recommendations/181185263 ---
2025-04-14 17:41:14,616 - DEBUG - Limit set to: 10
2025-04-14 17:41:14,617 - DEBUG - --- Starting get_similar_products_by_id for product_id: 181185263 ---
2025-04-14 17:41:14,618 - DEBUG - Checking if product_id 181185263 exists in product_ids
2025-04-14 17:41:14,619 - DEBUG - Product_id exists in vector database: True
2025-04-14 17:41:14,621 - DEBUG - Fetching product details from Tiki API for product_id: 181185263
2025-04-14 17:41:14,753 - DEBUG - Extracting product details
2025-04-14 17:41:14,753 - DEBUG - Name: Tai Nghe Baseus Encok 3.5mm lateral in-ear Wired Earphone H17 - Hàng Chính Hãng
2025-04-14 17:41:14,757 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-14 17:41:14,758 - DEBUG - Brand_name: Baseus
2025-04-14 17:41:14,762 - DEBUG - Encoding combined text to embedding
2025-04-14 17:41:14,848 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 17:41:14,849 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 17:41:14,853 - DEBUG - FAISS search results - distances: [[1.2261972849852282e-13, 0.07634659111499786, 0.2263125479221344, 0.23477649688720703, 0.26555418968200684, 0.2743156850337982, 0.27441152930259705, 0.2761384844779968, 0.3069337010383606, 0.30712634325027466, 0.40379002690315247]]
2025-04-14 17:41:14,853 - DEBUG - FAISS search results - indices: [[503, 537, 477, 527, 530, 533, 546, 542, 5317, 544, 518]]
2025-04-14 17:41:14,854 - DEBUG - Filtered result_product_ids: [187010803, 75075591, 275018988, 204408190, 46693945, 272611292, 248870796, 116963157, 118286272, 116962411]
2025-04-14 17:41:14,855 - DEBUG - Checking product_id 187010803 in DataFrame
2025-04-14 17:41:14,857 - DEBUG - Added product 187010803 to similar_products
2025-04-14 17:41:14,858 - DEBUG - Checking product_id 75075591 in DataFrame
2025-04-14 17:41:14,860 - DEBUG - Added product 75075591 to similar_products
2025-04-14 17:41:14,861 - DEBUG - Checking product_id 275018988 in DataFrame
2025-04-14 17:41:14,863 - DEBUG - Added product 275018988 to similar_products
2025-04-14 17:41:14,863 - DEBUG - Checking product_id 204408190 in DataFrame
2025-04-14 17:41:14,867 - DEBUG - Added product 204408190 to similar_products
2025-04-14 17:41:14,868 - DEBUG - Checking product_id 46693945 in DataFrame
2025-04-14 17:41:14,870 - DEBUG - Added product 46693945 to similar_products
2025-04-14 17:41:14,871 - DEBUG - Checking product_id 272611292 in DataFrame
2025-04-14 17:41:14,874 - DEBUG - Added product 272611292 to similar_products
2025-04-14 17:41:14,875 - DEBUG - Checking product_id 248870796 in DataFrame
2025-04-14 17:41:14,876 - DEBUG - Added product 248870796 to similar_products
2025-04-14 17:41:14,877 - DEBUG - Checking product_id 116963157 in DataFrame
2025-04-14 17:41:14,878 - DEBUG - Added product 116963157 to similar_products
2025-04-14 17:41:14,879 - DEBUG - Checking product_id 118286272 in DataFrame
2025-04-14 17:41:14,881 - DEBUG - Added product 118286272 to similar_products
2025-04-14 17:41:14,882 - DEBUG - Checking product_id 116962411 in DataFrame
2025-04-14 17:41:14,885 - DEBUG - Added product 116962411 to similar_products
2025-04-14 17:41:14,886 - DEBUG - Final similar_products count: 10
2025-04-14 17:41:14,887 - DEBUG - Final similar_products: [187010803, 75075591, 275018988, 204408190, 46693945, 272611292, 248870796, 116963157, 118286272, 116962411]
2025-04-14 17:41:14,888 - DEBUG - --- Completed get_similar_products_by_id for product_id: 181185263 ---
2025-04-14 17:41:14,889 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 17:41:14,889 - DEBUG - Preparing response with similar products
2025-04-14 17:41:14,895 - DEBUG - --- Completed request for /api/recommendations/181185263 ---
2025-04-14 17:41:17,675 - DEBUG - --- Processing request for /api/recommendations/187010803 ---
2025-04-14 17:41:17,676 - DEBUG - Limit set to: 10
2025-04-14 17:41:17,676 - DEBUG - --- Starting get_similar_products_by_id for product_id: 187010803 ---
2025-04-14 17:41:17,677 - DEBUG - Checking if product_id 187010803 exists in product_ids
2025-04-14 17:41:17,677 - DEBUG - Product_id exists in vector database: True
2025-04-14 17:41:17,678 - DEBUG - Fetching product details from Tiki API for product_id: 187010803
2025-04-14 17:41:17,821 - DEBUG - Extracting product details
2025-04-14 17:41:17,822 - DEBUG - Name: Tai Nghe Baseus Encok 3.5mm lateral in-ear Wired Earphone H17 - Hàng chính hãng
2025-04-14 17:41:17,826 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-14 17:41:17,826 - DEBUG - Brand_name: Baseus
2025-04-14 17:41:17,830 - DEBUG - Encoding combined text to embedding
2025-04-14 17:41:17,916 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 17:41:17,917 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 17:41:17,920 - DEBUG - FAISS search results - distances: [[1.262453412208958e-13, 0.07634665071964264, 0.12275254726409912, 0.12983162701129913, 0.15156289935112, 0.19274279475212097, 0.21584463119506836, 0.23380054533481598, 0.2925678491592407, 0.313054621219635, 0.3722163140773773]]
2025-04-14 17:41:17,921 - DEBUG - FAISS search results - indices: [[537, 503, 527, 542, 530, 546, 477, 533, 5317, 544, 508]]
2025-04-14 17:41:17,922 - DEBUG - Filtered result_product_ids: [181185263, 275018988, 248870796, 204408190, 272611292, 75075591, 46693945, 116963157, 118286272, 242715477]
2025-04-14 17:41:17,923 - DEBUG - Checking product_id 181185263 in DataFrame
2025-04-14 17:41:17,926 - DEBUG - Added product 181185263 to similar_products
2025-04-14 17:41:17,926 - DEBUG - Checking product_id 275018988 in DataFrame
2025-04-14 17:41:17,928 - DEBUG - Added product 275018988 to similar_products
2025-04-14 17:41:17,929 - DEBUG - Checking product_id 248870796 in DataFrame
2025-04-14 17:41:17,932 - DEBUG - Added product 248870796 to similar_products
2025-04-14 17:41:17,934 - DEBUG - Checking product_id 204408190 in DataFrame
2025-04-14 17:41:17,936 - DEBUG - Added product 204408190 to similar_products
2025-04-14 17:41:17,937 - DEBUG - Checking product_id 272611292 in DataFrame
2025-04-14 17:41:17,939 - DEBUG - Added product 272611292 to similar_products
2025-04-14 17:41:17,940 - DEBUG - Checking product_id 75075591 in DataFrame
2025-04-14 17:41:17,942 - DEBUG - Added product 75075591 to similar_products
2025-04-14 17:41:17,944 - DEBUG - Checking product_id 46693945 in DataFrame
2025-04-14 17:41:17,945 - DEBUG - Added product 46693945 to similar_products
2025-04-14 17:41:17,946 - DEBUG - Checking product_id 116963157 in DataFrame
2025-04-14 17:41:17,948 - DEBUG - Added product 116963157 to similar_products
2025-04-14 17:41:17,949 - DEBUG - Checking product_id 118286272 in DataFrame
2025-04-14 17:41:17,952 - DEBUG - Added product 118286272 to similar_products
2025-04-14 17:41:17,953 - DEBUG - Checking product_id 242715477 in DataFrame
2025-04-14 17:41:17,955 - DEBUG - Added product 242715477 to similar_products
2025-04-14 17:41:17,956 - DEBUG - Final similar_products count: 10
2025-04-14 17:41:17,957 - DEBUG - Final similar_products: [181185263, 275018988, 248870796, 204408190, 272611292, 75075591, 46693945, 116963157, 118286272, 242715477]
2025-04-14 17:41:17,957 - DEBUG - --- Completed get_similar_products_by_id for product_id: 187010803 ---
2025-04-14 17:41:17,958 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 17:41:17,959 - DEBUG - Preparing response with similar products
2025-04-14 17:41:17,964 - DEBUG - --- Completed request for /api/recommendations/187010803 ---
2025-04-14 17:42:12,735 - DEBUG - --- Processing request for /api/recommendations/76080546 ---
2025-04-14 17:42:12,737 - DEBUG - Limit set to: 10
2025-04-14 17:42:12,738 - DEBUG - --- Starting get_similar_products_by_id for product_id: 76080546 ---
2025-04-14 17:42:12,739 - DEBUG - Checking if product_id 76080546 exists in product_ids
2025-04-14 17:42:12,740 - DEBUG - Product_id exists in vector database: False
2025-04-14 17:42:12,741 - DEBUG - Fetching product details from Tiki API for product_id: 76080546
2025-04-14 17:42:13,342 - DEBUG - Extracting product details
2025-04-14 17:42:13,343 - DEBUG - Name: Loa Harman Kardon Soundsticks 4 CHÍNH HÃNG
2025-04-14 17:42:13,348 - DEBUG - Category_name: Loa Bluetooth
2025-04-14 17:42:13,349 - DEBUG - Brand_name: Harman Kardon
2025-04-14 17:42:13,353 - DEBUG - Encoding combined text to embedding
2025-04-14 17:42:13,477 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 17:42:13,478 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 17:42:13,481 - DEBUG - FAISS search results - distances: [[0.20123562216758728, 0.20705527067184448, 0.2602044343948364, 0.2836979627609253, 0.29928964376449585, 0.3041313886642456, 0.3892105519771576, 0.4057008624076843, 0.4121382236480713, 0.4516887664794922, 0.45589911937713623]]
2025-04-14 17:42:13,482 - DEBUG - FAISS search results - indices: [[2796, 2622, 2826, 2735, 2705, 2440, 1214, 385, 340, 102, 8063]]
2025-04-14 17:42:13,483 - DEBUG - Filtered result_product_ids: [59430031, 192291113, 50476930, 50326792, 273328383, 577028, 136981450, 77712221, 75301142, 77925096]
2025-04-14 17:42:13,484 - DEBUG - Checking product_id 59430031 in DataFrame
2025-04-14 17:42:13,487 - DEBUG - Added product 59430031 to similar_products
2025-04-14 17:42:13,488 - DEBUG - Checking product_id 192291113 in DataFrame
2025-04-14 17:42:13,494 - DEBUG - Added product 192291113 to similar_products
2025-04-14 17:42:13,495 - DEBUG - Checking product_id 50476930 in DataFrame
2025-04-14 17:42:13,498 - DEBUG - Added product 50476930 to similar_products
2025-04-14 17:42:13,499 - DEBUG - Checking product_id 50326792 in DataFrame
2025-04-14 17:42:13,501 - DEBUG - Added product 50326792 to similar_products
2025-04-14 17:42:13,502 - DEBUG - Checking product_id 273328383 in DataFrame
2025-04-14 17:42:13,505 - DEBUG - Added product 273328383 to similar_products
2025-04-14 17:42:13,506 - DEBUG - Checking product_id 577028 in DataFrame
2025-04-14 17:42:13,509 - DEBUG - Added product 577028 to similar_products
2025-04-14 17:42:13,510 - DEBUG - Checking product_id 136981450 in DataFrame
2025-04-14 17:42:13,512 - DEBUG - Added product 136981450 to similar_products
2025-04-14 17:42:13,514 - DEBUG - Checking product_id 77712221 in DataFrame
2025-04-14 17:42:13,516 - DEBUG - Added product 77712221 to similar_products
2025-04-14 17:42:13,518 - DEBUG - Checking product_id 75301142 in DataFrame
2025-04-14 17:42:13,523 - DEBUG - Added product 75301142 to similar_products
2025-04-14 17:42:13,525 - DEBUG - Checking product_id 77925096 in DataFrame
2025-04-14 17:42:13,528 - DEBUG - Added product 77925096 to similar_products
2025-04-14 17:42:13,529 - DEBUG - Final similar_products count: 10
2025-04-14 17:42:13,530 - DEBUG - Final similar_products: [59430031, 192291113, 50476930, 50326792, 273328383, 577028, 136981450, 77712221, 75301142, 77925096]
2025-04-14 17:42:13,531 - DEBUG - --- Completed get_similar_products_by_id for product_id: 76080546 ---
2025-04-14 17:42:13,533 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 17:42:13,534 - DEBUG - Preparing response with similar products
2025-04-14 17:42:13,559 - DEBUG - --- Completed request for /api/recommendations/76080546 ---
2025-04-14 17:42:23,002 - DEBUG - --- Processing request for /api/recommendations/273328383 ---
2025-04-14 17:42:23,003 - DEBUG - Limit set to: 10
2025-04-14 17:42:23,004 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273328383 ---
2025-04-14 17:42:23,004 - DEBUG - Checking if product_id 273328383 exists in product_ids
2025-04-14 17:42:23,005 - DEBUG - Product_id exists in vector database: True
2025-04-14 17:42:23,006 - DEBUG - Fetching product details from Tiki API for product_id: 273328383
2025-04-14 17:42:23,726 - DEBUG - Extracting product details
2025-04-14 17:42:23,726 - DEBUG - Name: Loa Bluetooth Harman Kardon Go Play 3  - Hàng Chính Hãng
2025-04-14 17:42:23,730 - DEBUG - Category_name: Loa Bluetooth
2025-04-14 17:42:23,730 - DEBUG - Brand_name: Harman Kardon
2025-04-14 17:42:23,734 - DEBUG - Encoding combined text to embedding
2025-04-14 17:42:23,790 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 17:42:23,791 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 17:42:23,793 - DEBUG - FAISS search results - distances: [[1.0566504268783028e-13, 0.17969432473182678, 0.18403013050556183, 0.22368450462818146, 0.23898737132549286, 0.2546684741973877, 0.48389559984207153, 0.49460071325302124, 0.4966055154800415, 0.5009926557540894, 0.5018754601478577]]
2025-04-14 17:42:23,794 - DEBUG - FAISS search results - indices: [[2705, 2826, 2735, 2440, 2796, 2622, 340, 1091, 430, 385, 2892]]
2025-04-14 17:42:23,794 - DEBUG - Filtered result_product_ids: [50476930, 50326792, 577028, 59430031, 192291113, 75301142, 89065883, 73987485, 77712221, 215990219]
2025-04-14 17:42:23,795 - DEBUG - Checking product_id 50476930 in DataFrame
2025-04-14 17:42:23,796 - DEBUG - Added product 50476930 to similar_products
2025-04-14 17:42:23,797 - DEBUG - Checking product_id 50326792 in DataFrame
2025-04-14 17:42:23,798 - DEBUG - Added product 50326792 to similar_products
2025-04-14 17:42:23,799 - DEBUG - Checking product_id 577028 in DataFrame
2025-04-14 17:42:23,801 - DEBUG - Added product 577028 to similar_products
2025-04-14 17:42:23,801 - DEBUG - Checking product_id 59430031 in DataFrame
2025-04-14 17:42:23,803 - DEBUG - Added product 59430031 to similar_products
2025-04-14 17:42:23,803 - DEBUG - Checking product_id 192291113 in DataFrame
2025-04-14 17:42:23,805 - DEBUG - Added product 192291113 to similar_products
2025-04-14 17:42:23,806 - DEBUG - Checking product_id 75301142 in DataFrame
2025-04-14 17:42:23,808 - DEBUG - Added product 75301142 to similar_products
2025-04-14 17:42:23,809 - DEBUG - Checking product_id 89065883 in DataFrame
2025-04-14 17:42:23,811 - DEBUG - Added product 89065883 to similar_products
2025-04-14 17:42:23,811 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-14 17:42:23,813 - DEBUG - Added product 73987485 to similar_products
2025-04-14 17:42:23,813 - DEBUG - Checking product_id 77712221 in DataFrame
2025-04-14 17:42:23,814 - DEBUG - Added product 77712221 to similar_products
2025-04-14 17:42:23,815 - DEBUG - Checking product_id 215990219 in DataFrame
2025-04-14 17:42:23,817 - DEBUG - Added product 215990219 to similar_products
2025-04-14 17:42:23,818 - DEBUG - Final similar_products count: 10
2025-04-14 17:42:23,818 - DEBUG - Final similar_products: [50476930, 50326792, 577028, 59430031, 192291113, 75301142, 89065883, 73987485, 77712221, 215990219]
2025-04-14 17:42:23,819 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273328383 ---
2025-04-14 17:42:23,819 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 17:42:23,820 - DEBUG - Preparing response with similar products
2025-04-14 17:42:23,825 - DEBUG - --- Completed request for /api/recommendations/273328383 ---
2025-04-14 17:42:33,198 - DEBUG - --- Processing request for /api/recommendations/188565088 ---
2025-04-14 17:42:33,199 - DEBUG - Limit set to: 10
2025-04-14 17:42:33,200 - DEBUG - --- Starting get_similar_products_by_id for product_id: 188565088 ---
2025-04-14 17:42:33,201 - DEBUG - Checking if product_id 188565088 exists in product_ids
2025-04-14 17:42:33,204 - DEBUG - Product_id exists in vector database: True
2025-04-14 17:42:33,205 - DEBUG - Fetching product details from Tiki API for product_id: 188565088
2025-04-14 17:42:33,428 - DEBUG - Extracting product details
2025-04-14 17:42:33,430 - DEBUG - Name: Loa Bluetooth JBL Flip 6 - Hàng Chính Hãng
2025-04-14 17:42:33,438 - DEBUG - Category_name: Loa Bluetooth
2025-04-14 17:42:33,439 - DEBUG - Brand_name: JBL
2025-04-14 17:42:33,447 - DEBUG - Encoding combined text to embedding
2025-04-14 17:42:33,554 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 17:42:33,555 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 17:42:33,559 - DEBUG - FAISS search results - distances: [[2.0935933108673366e-13, 0.2275053709745407, 0.3052927255630493, 0.31409844756126404, 0.33338117599487305, 0.3472103476524353, 0.35706543922424316, 0.3578042984008789, 0.371890664100647, 0.37365543842315674, 0.38810718059539795]]
2025-04-14 17:42:33,567 - DEBUG - FAISS search results - indices: [[2677, 2848, 2802, 430, 2830, 2699, 2698, 2692, 2628, 2892, 2809]]
2025-04-14 17:42:33,568 - DEBUG - Filtered result_product_ids: [190544240, 73987448, 73987485, 275543974, 275130483, 275130480, 275761136, 275513834, 215990219, 73987509]
2025-04-14 17:42:33,572 - DEBUG - Checking product_id 190544240 in DataFrame
2025-04-14 17:42:33,575 - DEBUG - Added product 190544240 to similar_products
2025-04-14 17:42:33,576 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-14 17:42:33,579 - DEBUG - Added product 73987448 to similar_products
2025-04-14 17:42:33,580 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-14 17:42:33,583 - DEBUG - Added product 73987485 to similar_products
2025-04-14 17:42:33,587 - DEBUG - Checking product_id 275543974 in DataFrame
2025-04-14 17:42:33,589 - DEBUG - Added product 275543974 to similar_products
2025-04-14 17:42:33,590 - DEBUG - Checking product_id 275130483 in DataFrame
2025-04-14 17:42:33,592 - DEBUG - Added product 275130483 to similar_products
2025-04-14 17:42:33,595 - DEBUG - Checking product_id 275130480 in DataFrame
2025-04-14 17:42:33,599 - DEBUG - Added product 275130480 to similar_products
2025-04-14 17:42:33,600 - DEBUG - Checking product_id 275761136 in DataFrame
2025-04-14 17:42:33,602 - DEBUG - Added product 275761136 to similar_products
2025-04-14 17:42:33,603 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-14 17:42:33,605 - DEBUG - Added product 275513834 to similar_products
2025-04-14 17:42:33,606 - DEBUG - Checking product_id 215990219 in DataFrame
2025-04-14 17:42:33,608 - DEBUG - Added product 215990219 to similar_products
2025-04-14 17:42:33,609 - DEBUG - Checking product_id 73987509 in DataFrame
2025-04-14 17:42:33,619 - DEBUG - Added product 73987509 to similar_products
2025-04-14 17:42:33,621 - DEBUG - Final similar_products count: 10
2025-04-14 17:42:33,622 - DEBUG - Final similar_products: [190544240, 73987448, 73987485, 275543974, 275130483, 275130480, 275761136, 275513834, 215990219, 73987509]
2025-04-14 17:42:33,623 - DEBUG - --- Completed get_similar_products_by_id for product_id: 188565088 ---
2025-04-14 17:42:33,624 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 17:42:33,625 - DEBUG - Preparing response with similar products
2025-04-14 17:42:33,638 - DEBUG - --- Completed request for /api/recommendations/188565088 ---
2025-04-14 17:42:36,060 - DEBUG - --- Processing request for /api/recommendations/73987448 ---
2025-04-14 17:42:36,062 - DEBUG - Limit set to: 10
2025-04-14 17:42:36,063 - DEBUG - --- Starting get_similar_products_by_id for product_id: 73987448 ---
2025-04-14 17:42:36,064 - DEBUG - Checking if product_id 73987448 exists in product_ids
2025-04-14 17:42:36,065 - DEBUG - Product_id exists in vector database: True
2025-04-14 17:42:36,067 - DEBUG - Fetching product details from Tiki API for product_id: 73987448
2025-04-14 17:42:36,266 - DEBUG - Extracting product details
2025-04-14 17:42:36,267 - DEBUG - Name: Loa Bluetooth JBL Horizon 2 - Hàng Chính Hãng
2025-04-14 17:42:36,273 - DEBUG - Category_name: Loa Bluetooth
2025-04-14 17:42:36,273 - DEBUG - Brand_name: JBL
2025-04-14 17:42:36,278 - DEBUG - Encoding combined text to embedding
2025-04-14 17:42:36,370 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 17:42:36,371 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 17:42:36,373 - DEBUG - FAISS search results - distances: [[1.4541102696941088e-13, 0.26018083095550537, 0.27283018827438354, 0.2884690463542938, 0.29031381011009216, 0.30111637711524963, 0.30529266595840454, 0.30692046880722046, 0.31261852383613586, 0.31494855880737305, 0.32353612780570984]]
2025-04-14 17:42:36,374 - DEBUG - FAISS search results - indices: [[2802, 2809, 2892, 430, 2777, 2692, 2677, 2698, 2830, 2628, 342]]
2025-04-14 17:42:36,374 - DEBUG - Filtered result_product_ids: [73987509, 215990219, 73987485, 202052235, 275761136, 188565088, 275130480, 275543974, 275513834, 31246621]
2025-04-14 17:42:36,375 - DEBUG - Checking product_id 73987509 in DataFrame
2025-04-14 17:42:36,377 - DEBUG - Added product 73987509 to similar_products
2025-04-14 17:42:36,378 - DEBUG - Checking product_id 215990219 in DataFrame
2025-04-14 17:42:36,381 - DEBUG - Added product 215990219 to similar_products
2025-04-14 17:42:36,382 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-14 17:42:36,385 - DEBUG - Added product 73987485 to similar_products
2025-04-14 17:42:36,386 - DEBUG - Checking product_id 202052235 in DataFrame
2025-04-14 17:42:36,388 - DEBUG - Added product 202052235 to similar_products
2025-04-14 17:42:36,389 - DEBUG - Checking product_id 275761136 in DataFrame
2025-04-14 17:42:36,391 - DEBUG - Added product 275761136 to similar_products
2025-04-14 17:42:36,392 - DEBUG - Checking product_id 188565088 in DataFrame
2025-04-14 17:42:36,393 - DEBUG - Added product 188565088 to similar_products
2025-04-14 17:42:36,394 - DEBUG - Checking product_id 275130480 in DataFrame
2025-04-14 17:42:36,397 - DEBUG - Added product 275130480 to similar_products
2025-04-14 17:42:36,398 - DEBUG - Checking product_id 275543974 in DataFrame
2025-04-14 17:42:36,400 - DEBUG - Added product 275543974 to similar_products
2025-04-14 17:42:36,401 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-14 17:42:36,403 - DEBUG - Added product 275513834 to similar_products
2025-04-14 17:42:36,404 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-14 17:42:36,406 - DEBUG - Added product 31246621 to similar_products
2025-04-14 17:42:36,407 - DEBUG - Final similar_products count: 10
2025-04-14 17:42:36,408 - DEBUG - Final similar_products: [73987509, 215990219, 73987485, 202052235, 275761136, 188565088, 275130480, 275543974, 275513834, 31246621]
2025-04-14 17:42:36,409 - DEBUG - --- Completed get_similar_products_by_id for product_id: 73987448 ---
2025-04-14 17:42:36,410 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 17:42:36,411 - DEBUG - Preparing response with similar products
2025-04-14 17:42:36,419 - DEBUG - --- Completed request for /api/recommendations/73987448 ---
2025-04-14 17:42:39,777 - DEBUG - --- Processing request for /api/recommendations/188565088 ---
2025-04-14 17:42:39,778 - DEBUG - Limit set to: 10
2025-04-14 17:42:39,779 - DEBUG - --- Starting get_similar_products_by_id for product_id: 188565088 ---
2025-04-14 17:42:39,780 - DEBUG - Checking if product_id 188565088 exists in product_ids
2025-04-14 17:42:39,781 - DEBUG - Product_id exists in vector database: True
2025-04-14 17:42:39,782 - DEBUG - Fetching product details from Tiki API for product_id: 188565088
2025-04-14 17:42:39,987 - DEBUG - Extracting product details
2025-04-14 17:42:39,988 - DEBUG - Name: Loa Bluetooth JBL Flip 6 - Hàng Chính Hãng
2025-04-14 17:42:39,995 - DEBUG - Category_name: Loa Bluetooth
2025-04-14 17:42:39,996 - DEBUG - Brand_name: JBL
2025-04-14 17:42:40,005 - DEBUG - Encoding combined text to embedding
2025-04-14 17:42:40,080 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 17:42:40,082 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 17:42:40,083 - DEBUG - FAISS search results - distances: [[2.0935933108673366e-13, 0.2275053709745407, 0.3052927255630493, 0.31409844756126404, 0.33338117599487305, 0.3472103476524353, 0.35706543922424316, 0.3578042984008789, 0.371890664100647, 0.37365543842315674, 0.38810718059539795]]
2025-04-14 17:42:40,084 - DEBUG - FAISS search results - indices: [[2677, 2848, 2802, 430, 2830, 2699, 2698, 2692, 2628, 2892, 2809]]
2025-04-14 17:42:40,085 - DEBUG - Filtered result_product_ids: [190544240, 73987448, 73987485, 275543974, 275130483, 275130480, 275761136, 275513834, 215990219, 73987509]
2025-04-14 17:42:40,085 - DEBUG - Checking product_id 190544240 in DataFrame
2025-04-14 17:42:40,087 - DEBUG - Added product 190544240 to similar_products
2025-04-14 17:42:40,087 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-14 17:42:40,089 - DEBUG - Added product 73987448 to similar_products
2025-04-14 17:42:40,090 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-14 17:42:40,092 - DEBUG - Added product 73987485 to similar_products
2025-04-14 17:42:40,092 - DEBUG - Checking product_id 275543974 in DataFrame
2025-04-14 17:42:40,094 - DEBUG - Added product 275543974 to similar_products
2025-04-14 17:42:40,095 - DEBUG - Checking product_id 275130483 in DataFrame
2025-04-14 17:42:40,097 - DEBUG - Added product 275130483 to similar_products
2025-04-14 17:42:40,098 - DEBUG - Checking product_id 275130480 in DataFrame
2025-04-14 17:42:40,100 - DEBUG - Added product 275130480 to similar_products
2025-04-14 17:42:40,101 - DEBUG - Checking product_id 275761136 in DataFrame
2025-04-14 17:42:40,102 - DEBUG - Added product 275761136 to similar_products
2025-04-14 17:42:40,103 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-14 17:42:40,104 - DEBUG - Added product 275513834 to similar_products
2025-04-14 17:42:40,105 - DEBUG - Checking product_id 215990219 in DataFrame
2025-04-14 17:42:40,106 - DEBUG - Added product 215990219 to similar_products
2025-04-14 17:42:40,107 - DEBUG - Checking product_id 73987509 in DataFrame
2025-04-14 17:42:40,109 - DEBUG - Added product 73987509 to similar_products
2025-04-14 17:42:40,109 - DEBUG - Final similar_products count: 10
2025-04-14 17:42:40,110 - DEBUG - Final similar_products: [190544240, 73987448, 73987485, 275543974, 275130483, 275130480, 275761136, 275513834, 215990219, 73987509]
2025-04-14 17:42:40,110 - DEBUG - --- Completed get_similar_products_by_id for product_id: 188565088 ---
2025-04-14 17:42:40,111 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 17:42:40,111 - DEBUG - Preparing response with similar products
2025-04-14 17:42:40,116 - DEBUG - --- Completed request for /api/recommendations/188565088 ---
2025-04-14 17:42:55,538 - DEBUG - --- Processing request for /api/recommendations/50476930 ---
2025-04-14 17:42:55,540 - DEBUG - Limit set to: 10
2025-04-14 17:42:55,541 - DEBUG - --- Starting get_similar_products_by_id for product_id: 50476930 ---
2025-04-14 17:42:55,542 - DEBUG - Checking if product_id 50476930 exists in product_ids
2025-04-14 17:42:55,543 - DEBUG - Product_id exists in vector database: True
2025-04-14 17:42:55,544 - DEBUG - Fetching product details from Tiki API for product_id: 50476930
2025-04-14 17:42:55,693 - DEBUG - Extracting product details
2025-04-14 17:42:55,706 - DEBUG - Brand_name: Harman Kardon
2025-04-14 17:42:55,712 - DEBUG - Encoding combined text to embedding
2025-04-14 17:42:55,802 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 17:42:55,803 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 17:42:55,806 - DEBUG - FAISS search results - distances: [[2.0387820121384181e-13, 0.1483336091041565, 0.1796943098306656, 0.20146259665489197, 0.22973379492759705, 0.2728542387485504, 0.38409942388534546, 0.4107583165168762, 0.4194040894508362, 0.4266979694366455, 0.42876023054122925]]
2025-04-14 17:42:55,807 - DEBUG - FAISS search results - indices: [[2826, 2440, 2705, 2735, 2796, 2622, 340, 7807, 385, 342, 1887]]
2025-04-14 17:42:55,809 - DEBUG - Filtered result_product_ids: [577028, 273328383, 50326792, 59430031, 192291113, 75301142, 50327179, 77712221, 31246621, 23238896]
2025-04-14 17:42:55,810 - DEBUG - Checking product_id 577028 in DataFrame
2025-04-14 17:42:55,812 - DEBUG - Added product 577028 to similar_products
2025-04-14 17:42:55,813 - DEBUG - Checking product_id 273328383 in DataFrame
2025-04-14 17:42:55,815 - DEBUG - Added product 273328383 to similar_products
2025-04-14 17:42:55,816 - DEBUG - Checking product_id 50326792 in DataFrame
2025-04-14 17:42:55,818 - DEBUG - Added product 50326792 to similar_products
2025-04-14 17:42:55,819 - DEBUG - Checking product_id 59430031 in DataFrame
2025-04-14 17:42:55,822 - DEBUG - Added product 59430031 to similar_products
2025-04-14 17:42:55,822 - DEBUG - Checking product_id 192291113 in DataFrame
2025-04-14 17:42:55,825 - DEBUG - Added product 192291113 to similar_products
2025-04-14 17:42:55,826 - DEBUG - Checking product_id 75301142 in DataFrame
2025-04-14 17:42:55,828 - DEBUG - Added product 75301142 to similar_products
2025-04-14 17:42:55,829 - DEBUG - Checking product_id 50327179 in DataFrame
2025-04-14 17:42:55,831 - DEBUG - Added product 50327179 to similar_products
2025-04-14 17:42:55,832 - DEBUG - Checking product_id 77712221 in DataFrame
2025-04-14 17:42:55,834 - DEBUG - Added product 77712221 to similar_products
2025-04-14 17:42:55,835 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-14 17:42:55,837 - DEBUG - Added product 31246621 to similar_products
2025-04-14 17:42:55,838 - DEBUG - Checking product_id 23238896 in DataFrame
2025-04-14 17:42:55,841 - DEBUG - Added product 23238896 to similar_products
2025-04-14 17:42:55,842 - DEBUG - Final similar_products count: 10
2025-04-14 17:42:55,843 - DEBUG - Final similar_products: [577028, 273328383, 50326792, 59430031, 192291113, 75301142, 50327179, 77712221, 31246621, 23238896]
2025-04-14 17:42:55,844 - DEBUG - --- Completed get_similar_products_by_id for product_id: 50476930 ---
2025-04-14 17:42:55,845 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 17:42:55,846 - DEBUG - Preparing response with similar products
2025-04-14 17:42:55,853 - DEBUG - --- Completed request for /api/recommendations/50476930 ---
2025-04-14 17:43:02,069 - DEBUG - --- Processing request for /api/recommendations/8326109 ---
2025-04-14 17:43:02,072 - DEBUG - Limit set to: 10
2025-04-14 17:43:02,073 - DEBUG - --- Starting get_similar_products_by_id for product_id: 8326109 ---
2025-04-14 17:43:02,075 - DEBUG - Checking if product_id 8326109 exists in product_ids
2025-04-14 17:43:02,076 - DEBUG - Product_id exists in vector database: True
2025-04-14 17:43:02,077 - DEBUG - Fetching product details from Tiki API for product_id: 8326109
2025-04-14 17:43:02,377 - DEBUG - Extracting product details
2025-04-14 17:43:02,378 - DEBUG - Name: Loa Bluetooth JBL Charge 4 30W - Hàng Chính Hãng
2025-04-14 17:43:02,395 - DEBUG - Brand_name: JBL
2025-04-14 17:43:02,401 - DEBUG - Encoding combined text to embedding
2025-04-14 17:43:02,494 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 17:43:02,496 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 17:43:02,499 - DEBUG - FAISS search results - distances: [[1.1139934732052464e-13, 0.267808198928833, 0.26905328035354614, 0.393380343914032, 0.39516007900238037, 0.44843801856040955, 0.46900486946105957, 0.48187288641929626, 0.4848790168762207, 0.486257940530777, 0.49346864223480225]]
2025-04-14 17:43:02,500 - DEBUG - FAISS search results - indices: [[2730, 2836, 2865, 430, 2847, 2692, 2848, 8442, 2677, 2699, 2830]]
2025-04-14 17:43:02,501 - DEBUG - Filtered result_product_ids: [126998612, 50240635, 73987485, 165345530, 275761136, 190544240, 185334997, 188565088, 275130483, 275543974]
2025-04-14 17:43:02,504 - DEBUG - Checking product_id 126998612 in DataFrame
2025-04-14 17:43:02,507 - DEBUG - Added product 126998612 to similar_products
2025-04-14 17:43:02,508 - DEBUG - Checking product_id 50240635 in DataFrame
2025-04-14 17:43:02,511 - DEBUG - Added product 50240635 to similar_products
2025-04-14 17:43:02,512 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-14 17:43:02,514 - DEBUG - Added product 73987485 to similar_products
2025-04-14 17:43:02,515 - DEBUG - Checking product_id 165345530 in DataFrame
2025-04-14 17:43:02,517 - DEBUG - Added product 165345530 to similar_products
2025-04-14 17:43:02,518 - DEBUG - Checking product_id 275761136 in DataFrame
2025-04-14 17:43:02,520 - DEBUG - Added product 275761136 to similar_products
2025-04-14 17:43:02,522 - DEBUG - Checking product_id 190544240 in DataFrame
2025-04-14 17:43:02,524 - DEBUG - Added product 190544240 to similar_products
2025-04-14 17:43:02,525 - DEBUG - Checking product_id 185334997 in DataFrame
2025-04-14 17:43:02,527 - DEBUG - Added product 185334997 to similar_products
2025-04-14 17:43:02,528 - DEBUG - Checking product_id 188565088 in DataFrame
2025-04-14 17:43:02,530 - DEBUG - Added product 188565088 to similar_products
2025-04-14 17:43:02,531 - DEBUG - Checking product_id 275130483 in DataFrame
2025-04-14 17:43:02,533 - DEBUG - Added product 275130483 to similar_products
2025-04-14 17:43:02,534 - DEBUG - Checking product_id 275543974 in DataFrame
2025-04-14 17:43:02,535 - DEBUG - Added product 275543974 to similar_products
2025-04-14 17:43:02,536 - DEBUG - Final similar_products count: 10
2025-04-14 17:43:02,536 - DEBUG - Final similar_products: [126998612, 50240635, 73987485, 165345530, 275761136, 190544240, 185334997, 188565088, 275130483, 275543974]
2025-04-14 17:43:02,537 - DEBUG - --- Completed get_similar_products_by_id for product_id: 8326109 ---
2025-04-14 17:43:02,539 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 17:43:02,540 - DEBUG - Preparing response with similar products
2025-04-14 17:43:02,546 - DEBUG - --- Completed request for /api/recommendations/8326109 ---
2025-04-14 17:43:04,915 - DEBUG - --- Processing request for /api/recommendations/190544240 ---
2025-04-14 17:43:04,917 - DEBUG - Limit set to: 10
2025-04-14 17:43:04,919 - DEBUG - --- Starting get_similar_products_by_id for product_id: 190544240 ---
2025-04-14 17:43:04,936 - DEBUG - Checking if product_id 190544240 exists in product_ids
2025-04-14 17:43:04,942 - DEBUG - Product_id exists in vector database: True
2025-04-14 17:43:04,944 - DEBUG - Fetching product details from Tiki API for product_id: 190544240
2025-04-14 17:43:05,153 - DEBUG - Extracting product details
2025-04-14 17:43:05,154 - DEBUG - Name: Loa Bluetooth JBL Flip 6 JBLFLIP6 - Hàng chính hãng
2025-04-14 17:43:05,160 - DEBUG - Category_name: Loa Bluetooth
2025-04-14 17:43:05,161 - DEBUG - Brand_name: JBL
2025-04-14 17:43:05,167 - DEBUG - Encoding combined text to embedding
2025-04-14 17:43:05,267 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 17:43:05,268 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 17:43:05,270 - DEBUG - FAISS search results - distances: [[1.5042600411824258e-13, 0.22750547528266907, 0.23136650025844574, 0.2507860064506531, 0.2712940275669098, 0.30768463015556335, 0.3079506754875183, 0.32402682304382324, 0.3310646414756775, 0.33561980724334717, 0.33611491322517395]]
2025-04-14 17:43:05,271 - DEBUG - FAISS search results - indices: [[2848, 2677, 430, 2830, 2698, 2847, 2628, 2692, 2836, 2699, 2802]]
2025-04-14 17:43:05,272 - DEBUG - Filtered result_product_ids: [188565088, 73987485, 275543974, 275130480, 165345530, 275513834, 275761136, 126998612, 275130483, 73987448]
2025-04-14 17:43:05,273 - DEBUG - Checking product_id 188565088 in DataFrame
2025-04-14 17:43:05,275 - DEBUG - Added product 188565088 to similar_products
2025-04-14 17:43:05,276 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-14 17:43:05,278 - DEBUG - Added product 73987485 to similar_products
2025-04-14 17:43:05,279 - DEBUG - Checking product_id 275543974 in DataFrame
2025-04-14 17:43:05,281 - DEBUG - Added product 275543974 to similar_products
2025-04-14 17:43:05,283 - DEBUG - Checking product_id 275130480 in DataFrame
2025-04-14 17:43:05,285 - DEBUG - Added product 275130480 to similar_products
2025-04-14 17:43:05,286 - DEBUG - Checking product_id 165345530 in DataFrame
2025-04-14 17:43:05,288 - DEBUG - Added product 165345530 to similar_products
2025-04-14 17:43:05,290 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-14 17:43:05,292 - DEBUG - Added product 275513834 to similar_products
2025-04-14 17:43:05,293 - DEBUG - Checking product_id 275761136 in DataFrame
2025-04-14 17:43:05,295 - DEBUG - Added product 275761136 to similar_products
2025-04-14 17:43:05,296 - DEBUG - Checking product_id 126998612 in DataFrame
2025-04-14 17:43:05,298 - DEBUG - Added product 126998612 to similar_products
2025-04-14 17:43:05,299 - DEBUG - Checking product_id 275130483 in DataFrame
2025-04-14 17:43:05,301 - DEBUG - Added product 275130483 to similar_products
2025-04-14 17:43:05,302 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-14 17:43:05,305 - DEBUG - Added product 73987448 to similar_products
2025-04-14 17:43:05,306 - DEBUG - Final similar_products count: 10
2025-04-14 17:43:05,307 - DEBUG - Final similar_products: [188565088, 73987485, 275543974, 275130480, 165345530, 275513834, 275761136, 126998612, 275130483, 73987448]
2025-04-14 17:43:05,308 - DEBUG - --- Completed get_similar_products_by_id for product_id: 190544240 ---
2025-04-14 17:43:05,309 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 17:43:05,309 - DEBUG - Preparing response with similar products
2025-04-14 17:43:05,315 - DEBUG - --- Completed request for /api/recommendations/190544240 ---
2025-04-14 17:43:08,093 - DEBUG - --- Processing request for /api/recommendations/73987485 ---
2025-04-14 17:43:08,094 - DEBUG - Limit set to: 10
2025-04-14 17:43:08,095 - DEBUG - --- Starting get_similar_products_by_id for product_id: 73987485 ---
2025-04-14 17:43:08,096 - DEBUG - Checking if product_id 73987485 exists in product_ids
2025-04-14 17:43:08,097 - DEBUG - Product_id exists in vector database: True
2025-04-14 17:43:08,097 - DEBUG - Fetching product details from Tiki API for product_id: 73987485
2025-04-14 17:43:08,360 - DEBUG - Extracting product details
2025-04-14 17:43:08,361 - DEBUG - Name: Loa Bluetooth JBL Go 3 - Hàng Chính Hãng
2025-04-14 17:43:08,365 - DEBUG - Category_name: Loa Bluetooth
2025-04-14 17:43:08,366 - DEBUG - Brand_name: JBL
2025-04-14 17:43:08,370 - DEBUG - Encoding combined text to embedding
2025-04-14 17:43:08,465 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 17:43:08,466 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 17:43:08,468 - DEBUG - FAISS search results - distances: [[1.4734012078986003e-13, 0.1871301233768463, 0.23136639595031738, 0.24081039428710938, 0.2445048987865448, 0.2669559419155121, 0.26712560653686523, 0.2781882882118225, 0.2805670499801636, 0.2884690463542938, 0.2989574670791626]]
2025-04-14 17:43:08,469 - DEBUG - FAISS search results - indices: [[430, 2699, 2848, 2692, 2698, 2809, 2628, 2830, 7807, 2802, 2865]]
2025-04-14 17:43:08,470 - DEBUG - Filtered result_product_ids: [275130483, 190544240, 275761136, 275130480, 73987509, 275513834, 275543974, 50327179, 73987448, 50240635]
2025-04-14 17:43:08,471 - DEBUG - Checking product_id 275130483 in DataFrame
2025-04-14 17:43:08,473 - DEBUG - Added product 275130483 to similar_products
2025-04-14 17:43:08,474 - DEBUG - Checking product_id 190544240 in DataFrame
2025-04-14 17:43:08,478 - DEBUG - Added product 190544240 to similar_products
2025-04-14 17:43:08,479 - DEBUG - Checking product_id 275761136 in DataFrame
2025-04-14 17:43:08,481 - DEBUG - Added product 275761136 to similar_products
2025-04-14 17:43:08,482 - DEBUG - Checking product_id 275130480 in DataFrame
2025-04-14 17:43:08,484 - DEBUG - Added product 275130480 to similar_products
2025-04-14 17:43:08,484 - DEBUG - Checking product_id 73987509 in DataFrame
2025-04-14 17:43:08,486 - DEBUG - Added product 73987509 to similar_products
2025-04-14 17:43:08,487 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-14 17:43:08,489 - DEBUG - Added product 275513834 to similar_products
2025-04-14 17:43:08,490 - DEBUG - Checking product_id 275543974 in DataFrame
2025-04-14 17:43:08,492 - DEBUG - Added product 275543974 to similar_products
2025-04-14 17:43:08,493 - DEBUG - Checking product_id 50327179 in DataFrame
2025-04-14 17:43:08,495 - DEBUG - Added product 50327179 to similar_products
2025-04-14 17:43:08,496 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-14 17:43:08,498 - DEBUG - Added product 73987448 to similar_products
2025-04-14 17:43:08,499 - DEBUG - Checking product_id 50240635 in DataFrame
2025-04-14 17:43:08,501 - DEBUG - Added product 50240635 to similar_products
2025-04-14 17:43:08,502 - DEBUG - Final similar_products count: 10
2025-04-14 17:43:08,502 - DEBUG - Final similar_products: [275130483, 190544240, 275761136, 275130480, 73987509, 275513834, 275543974, 50327179, 73987448, 50240635]
2025-04-14 17:43:08,503 - DEBUG - --- Completed get_similar_products_by_id for product_id: 73987485 ---
2025-04-14 17:43:08,504 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 17:43:08,504 - DEBUG - Preparing response with similar products
2025-04-14 17:43:08,511 - DEBUG - --- Completed request for /api/recommendations/73987485 ---
2025-04-14 23:36:40,314 - DEBUG - --- Initializing SearchService ---
2025-04-14 23:36:40,315 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 23:36:40,316 - DEBUG - Loading SentenceTransformer model
2025-04-14 23:36:45,151 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 23:36:45,152 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 23:36:45,152 - DEBUG - Loading FAISS index
2025-04-14 23:36:45,605 - DEBUG - Loading product DataFrame
2025-04-14 23:36:45,786 - DEBUG - Loading product_ids
2025-04-14 23:36:45,789 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 23:36:45,790 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 23:36:45,791 - DEBUG - FAISS index ntotal: 8587
2025-04-14 23:37:07,499 - DEBUG - --- Initializing SearchService ---
2025-04-14 23:37:07,573 - DEBUG - Current working directory: D:\MonThu6
2025-04-14 23:37:07,574 - DEBUG - Loading SentenceTransformer model
2025-04-14 23:37:10,873 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-14 23:37:10,874 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-14 23:37:10,874 - DEBUG - Loading FAISS index
2025-04-14 23:37:10,885 - DEBUG - Loading product DataFrame
2025-04-14 23:37:10,908 - DEBUG - Loading product_ids
2025-04-14 23:37:10,909 - DEBUG - Vector database loaded. Total products: 8587
2025-04-14 23:37:10,910 - DEBUG - DataFrame shape: (8587, 12)
2025-04-14 23:37:10,910 - DEBUG - FAISS index ntotal: 8587
2025-04-14 23:38:48,948 - DEBUG - --- Processing request for /api/recommendations/123518348 ---
2025-04-14 23:38:48,951 - DEBUG - Limit set to: 10
2025-04-14 23:38:48,952 - DEBUG - --- Starting get_similar_products_by_id for product_id: 123518348 ---
2025-04-14 23:38:48,954 - DEBUG - Checking if product_id 123518348 exists in product_ids
2025-04-14 23:38:48,956 - DEBUG - Product_id exists in vector database: True
2025-04-14 23:38:48,957 - DEBUG - Fetching product details from Tiki API for product_id: 123518348
2025-04-14 23:38:49,765 - DEBUG - Extracting product details
2025-04-14 23:38:49,766 - DEBUG - Name: Tai nghe Remax RM-201 - Hàng chính hãng
2025-04-14 23:38:49,775 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-14 23:38:49,778 - DEBUG - Brand_name: Remax
2025-04-14 23:38:49,802 - DEBUG - Encoding combined text to embedding
2025-04-14 23:38:52,823 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 23:38:52,831 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 23:38:52,913 - DEBUG - FAISS search results - distances: [[1.5445289361717962e-13, 0.24725571274757385, 0.29311609268188477, 0.2961730360984802, 0.31907978653907776, 0.34723448753356934, 0.3509403169155121, 0.3572787344455719, 0.3642429709434509, 0.3658698499202728, 0.3905647099018097]]
2025-04-14 23:38:52,914 - DEBUG - FAISS search results - indices: [[207, 1582, 103, 3024, 312, 5196, 7857, 283, 6892, 296, 7338]]
2025-04-14 23:38:52,915 - DEBUG - Filtered result_product_ids: [202879835, 102785769, 102859364, 110850007, 126235874, 978850, 155780905, 270686707, 102782859, 272163837]
2025-04-14 23:38:52,916 - DEBUG - Checking product_id 202879835 in DataFrame
2025-04-14 23:38:53,001 - DEBUG - Added product 202879835 to similar_products
2025-04-14 23:38:53,008 - DEBUG - Checking product_id 102785769 in DataFrame
2025-04-14 23:38:53,010 - DEBUG - Added product 102785769 to similar_products
2025-04-14 23:38:53,011 - DEBUG - Checking product_id 102859364 in DataFrame
2025-04-14 23:38:53,016 - DEBUG - Added product 102859364 to similar_products
2025-04-14 23:38:53,018 - DEBUG - Checking product_id 110850007 in DataFrame
2025-04-14 23:38:53,019 - DEBUG - Added product 110850007 to similar_products
2025-04-14 23:38:53,025 - DEBUG - Checking product_id 126235874 in DataFrame
2025-04-14 23:38:53,032 - DEBUG - Added product 126235874 to similar_products
2025-04-14 23:38:53,033 - DEBUG - Checking product_id 978850 in DataFrame
2025-04-14 23:38:53,035 - DEBUG - Added product 978850 to similar_products
2025-04-14 23:38:53,037 - DEBUG - Checking product_id 155780905 in DataFrame
2025-04-14 23:38:53,040 - DEBUG - Added product 155780905 to similar_products
2025-04-14 23:38:53,046 - DEBUG - Checking product_id 270686707 in DataFrame
2025-04-14 23:38:53,052 - DEBUG - Added product 270686707 to similar_products
2025-04-14 23:38:53,057 - DEBUG - Checking product_id 102782859 in DataFrame
2025-04-14 23:38:53,069 - DEBUG - Added product 102782859 to similar_products
2025-04-14 23:38:53,070 - DEBUG - Checking product_id 272163837 in DataFrame
2025-04-14 23:38:53,073 - DEBUG - Added product 272163837 to similar_products
2025-04-14 23:38:53,074 - DEBUG - Final similar_products count: 10
2025-04-14 23:38:53,075 - DEBUG - Final similar_products: [202879835, 102785769, 102859364, 110850007, 126235874, 978850, 155780905, 270686707, 102782859, 272163837]
2025-04-14 23:38:53,078 - DEBUG - --- Completed get_similar_products_by_id for product_id: 123518348 ---
2025-04-14 23:38:53,079 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 23:38:53,080 - DEBUG - Preparing response with similar products
2025-04-14 23:38:53,106 - DEBUG - --- Completed request for /api/recommendations/123518348 ---
2025-04-14 23:39:01,455 - DEBUG - --- Processing request for /api/recommendations/102859364 ---
2025-04-14 23:39:01,456 - DEBUG - Limit set to: 10
2025-04-14 23:39:01,458 - DEBUG - --- Starting get_similar_products_by_id for product_id: 102859364 ---
2025-04-14 23:39:01,461 - DEBUG - Checking if product_id 102859364 exists in product_ids
2025-04-14 23:39:01,462 - DEBUG - Product_id exists in vector database: True
2025-04-14 23:39:01,463 - DEBUG - Fetching product details from Tiki API for product_id: 102859364
2025-04-14 23:39:02,103 - DEBUG - Extracting product details
2025-04-14 23:39:02,104 - DEBUG - Name: Tai Nghe In Ear Remax RM-550 hàng chính hãng
2025-04-14 23:39:02,115 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-14 23:39:02,116 - DEBUG - Brand_name: Remax
2025-04-14 23:39:02,145 - DEBUG - Encoding combined text to embedding
2025-04-14 23:39:02,379 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 23:39:02,386 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 23:39:02,390 - DEBUG - FAISS search results - distances: [[1.744053306721588e-13, 0.20735475420951843, 0.2111792266368866, 0.29617297649383545, 0.3540247082710266, 0.3790362477302551, 0.3819064199924469, 0.39424824714660645, 0.3969539999961853, 0.4012596011161804, 0.41075462102890015]]
2025-04-14 23:39:02,395 - DEBUG - FAISS search results - indices: [[3024, 296, 103, 207, 312, 5196, 1582, 283, 5717, 7857, 5106]]
2025-04-14 23:39:02,398 - DEBUG - Filtered result_product_ids: [102782859, 102785769, 123518348, 110850007, 126235874, 202879835, 155780905, 201375708, 978850, 202879696]
2025-04-14 23:39:02,400 - DEBUG - Checking product_id 102782859 in DataFrame
2025-04-14 23:39:02,403 - DEBUG - Added product 102782859 to similar_products
2025-04-14 23:39:02,405 - DEBUG - Checking product_id 102785769 in DataFrame
2025-04-14 23:39:02,408 - DEBUG - Added product 102785769 to similar_products
2025-04-14 23:39:02,409 - DEBUG - Checking product_id 123518348 in DataFrame
2025-04-14 23:39:02,412 - DEBUG - Added product 123518348 to similar_products
2025-04-14 23:39:02,416 - DEBUG - Checking product_id 110850007 in DataFrame
2025-04-14 23:39:02,418 - DEBUG - Added product 110850007 to similar_products
2025-04-14 23:39:02,419 - DEBUG - Checking product_id 126235874 in DataFrame
2025-04-14 23:39:02,422 - DEBUG - Added product 126235874 to similar_products
2025-04-14 23:39:02,423 - DEBUG - Checking product_id 202879835 in DataFrame
2025-04-14 23:39:02,426 - DEBUG - Added product 202879835 to similar_products
2025-04-14 23:39:02,430 - DEBUG - Checking product_id 155780905 in DataFrame
2025-04-14 23:39:02,432 - DEBUG - Added product 155780905 to similar_products
2025-04-14 23:39:02,434 - DEBUG - Checking product_id 201375708 in DataFrame
2025-04-14 23:39:02,436 - DEBUG - Added product 201375708 to similar_products
2025-04-14 23:39:02,437 - DEBUG - Checking product_id 978850 in DataFrame
2025-04-14 23:39:02,439 - DEBUG - Added product 978850 to similar_products
2025-04-14 23:39:02,440 - DEBUG - Checking product_id 202879696 in DataFrame
2025-04-14 23:39:02,443 - DEBUG - Added product 202879696 to similar_products
2025-04-14 23:39:02,444 - DEBUG - Final similar_products count: 10
2025-04-14 23:39:02,445 - DEBUG - Final similar_products: [102782859, 102785769, 123518348, 110850007, 126235874, 202879835, 155780905, 201375708, 978850, 202879696]
2025-04-14 23:39:02,446 - DEBUG - --- Completed get_similar_products_by_id for product_id: 102859364 ---
2025-04-14 23:39:02,448 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 23:39:02,450 - DEBUG - Preparing response with similar products
2025-04-14 23:39:02,467 - DEBUG - --- Completed request for /api/recommendations/102859364 ---
2025-04-14 23:39:05,719 - DEBUG - --- Processing request for /api/recommendations/123518348 ---
2025-04-14 23:39:05,721 - DEBUG - Limit set to: 10
2025-04-14 23:39:05,722 - DEBUG - --- Starting get_similar_products_by_id for product_id: 123518348 ---
2025-04-14 23:39:05,723 - DEBUG - Checking if product_id 123518348 exists in product_ids
2025-04-14 23:39:05,724 - DEBUG - Product_id exists in vector database: True
2025-04-14 23:39:05,724 - DEBUG - Fetching product details from Tiki API for product_id: 123518348
2025-04-14 23:39:05,878 - DEBUG - Extracting product details
2025-04-14 23:39:05,879 - DEBUG - Name: Tai nghe Remax RM-201 - Hàng chính hãng
2025-04-14 23:39:05,885 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-14 23:39:05,885 - DEBUG - Brand_name: Remax
2025-04-14 23:39:05,897 - DEBUG - Encoding combined text to embedding
2025-04-14 23:39:06,018 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 23:39:06,019 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 23:39:06,021 - DEBUG - FAISS search results - distances: [[1.5445289361717962e-13, 0.24725571274757385, 0.29311609268188477, 0.2961730360984802, 0.31907978653907776, 0.34723448753356934, 0.3509403169155121, 0.3572787344455719, 0.3642429709434509, 0.3658698499202728, 0.3905647099018097]]
2025-04-14 23:39:06,023 - DEBUG - FAISS search results - indices: [[207, 1582, 103, 3024, 312, 5196, 7857, 283, 6892, 296, 7338]]
2025-04-14 23:39:06,024 - DEBUG - Filtered result_product_ids: [202879835, 102785769, 102859364, 110850007, 126235874, 978850, 155780905, 270686707, 102782859, 272163837]
2025-04-14 23:39:06,025 - DEBUG - Checking product_id 202879835 in DataFrame
2025-04-14 23:39:06,030 - DEBUG - Added product 202879835 to similar_products
2025-04-14 23:39:06,032 - DEBUG - Checking product_id 102785769 in DataFrame
2025-04-14 23:39:06,034 - DEBUG - Added product 102785769 to similar_products
2025-04-14 23:39:06,035 - DEBUG - Checking product_id 102859364 in DataFrame
2025-04-14 23:39:06,038 - DEBUG - Added product 102859364 to similar_products
2025-04-14 23:39:06,039 - DEBUG - Checking product_id 110850007 in DataFrame
2025-04-14 23:39:06,041 - DEBUG - Added product 110850007 to similar_products
2025-04-14 23:39:06,041 - DEBUG - Checking product_id 126235874 in DataFrame
2025-04-14 23:39:06,044 - DEBUG - Added product 126235874 to similar_products
2025-04-14 23:39:06,045 - DEBUG - Checking product_id 978850 in DataFrame
2025-04-14 23:39:06,049 - DEBUG - Added product 978850 to similar_products
2025-04-14 23:39:06,050 - DEBUG - Checking product_id 155780905 in DataFrame
2025-04-14 23:39:06,053 - DEBUG - Added product 155780905 to similar_products
2025-04-14 23:39:06,054 - DEBUG - Checking product_id 270686707 in DataFrame
2025-04-14 23:39:06,057 - DEBUG - Added product 270686707 to similar_products
2025-04-14 23:39:06,058 - DEBUG - Checking product_id 102782859 in DataFrame
2025-04-14 23:39:06,064 - DEBUG - Added product 102782859 to similar_products
2025-04-14 23:39:06,065 - DEBUG - Checking product_id 272163837 in DataFrame
2025-04-14 23:39:06,069 - DEBUG - Added product 272163837 to similar_products
2025-04-14 23:39:06,070 - DEBUG - Final similar_products count: 10
2025-04-14 23:39:06,072 - DEBUG - Final similar_products: [202879835, 102785769, 102859364, 110850007, 126235874, 978850, 155780905, 270686707, 102782859, 272163837]
2025-04-14 23:39:06,073 - DEBUG - --- Completed get_similar_products_by_id for product_id: 123518348 ---
2025-04-14 23:39:06,074 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 23:39:06,074 - DEBUG - Preparing response with similar products
2025-04-14 23:39:06,087 - DEBUG - --- Completed request for /api/recommendations/123518348 ---
2025-04-14 23:39:10,362 - DEBUG - --- Processing request for /api/recommendations/126235874 ---
2025-04-14 23:39:10,368 - DEBUG - Limit set to: 10
2025-04-14 23:39:10,371 - DEBUG - --- Starting get_similar_products_by_id for product_id: 126235874 ---
2025-04-14 23:39:10,372 - DEBUG - Checking if product_id 126235874 exists in product_ids
2025-04-14 23:39:10,374 - DEBUG - Product_id exists in vector database: True
2025-04-14 23:39:10,375 - DEBUG - Fetching product details from Tiki API for product_id: 126235874
2025-04-14 23:39:10,947 - DEBUG - Extracting product details
2025-04-14 23:39:10,968 - DEBUG - Brand_name: Remax
2025-04-14 23:39:10,977 - DEBUG - Encoding combined text to embedding
2025-04-14 23:39:11,093 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 23:39:11,094 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 23:39:11,100 - DEBUG - FAISS search results - distances: [[1.5223125494553957e-13, 0.2838217318058014, 0.34132447838783264, 0.34723448753356934, 0.3628118336200714, 0.3690619468688965, 0.3706184923648834, 0.3758581280708313, 0.3790362477302551, 0.37954723834991455, 0.37959232926368713]]
2025-04-14 23:39:11,101 - DEBUG - FAISS search results - indices: [[5196, 5773, 6034, 207, 96, 8509, 3867, 6613, 3024, 5568, 3096]]
2025-04-14 23:39:11,102 - DEBUG - Filtered result_product_ids: [194101531, 80365183, 123518348, 56859344, 24641074, 50927270, 35279690, 102859364, 135412837, 248939498]
2025-04-14 23:39:11,103 - DEBUG - Checking product_id 194101531 in DataFrame
2025-04-14 23:39:11,108 - DEBUG - Added product 194101531 to similar_products
2025-04-14 23:39:11,109 - DEBUG - Checking product_id 80365183 in DataFrame
2025-04-14 23:39:11,114 - DEBUG - Added product 80365183 to similar_products
2025-04-14 23:39:11,115 - DEBUG - Checking product_id 123518348 in DataFrame
2025-04-14 23:39:11,119 - DEBUG - Added product 123518348 to similar_products
2025-04-14 23:39:11,120 - DEBUG - Checking product_id 56859344 in DataFrame
2025-04-14 23:39:11,122 - DEBUG - Added product 56859344 to similar_products
2025-04-14 23:39:11,123 - DEBUG - Checking product_id 24641074 in DataFrame
2025-04-14 23:39:11,126 - DEBUG - Added product 24641074 to similar_products
2025-04-14 23:39:11,127 - DEBUG - Checking product_id 50927270 in DataFrame
2025-04-14 23:39:11,131 - DEBUG - Added product 50927270 to similar_products
2025-04-14 23:39:11,132 - DEBUG - Checking product_id 35279690 in DataFrame
2025-04-14 23:39:11,135 - DEBUG - Added product 35279690 to similar_products
2025-04-14 23:39:11,136 - DEBUG - Checking product_id 102859364 in DataFrame
2025-04-14 23:39:11,139 - DEBUG - Added product 102859364 to similar_products
2025-04-14 23:39:11,140 - DEBUG - Checking product_id 135412837 in DataFrame
2025-04-14 23:39:11,142 - DEBUG - Added product 135412837 to similar_products
2025-04-14 23:39:11,143 - DEBUG - Checking product_id 248939498 in DataFrame
2025-04-14 23:39:11,145 - DEBUG - Added product 248939498 to similar_products
2025-04-14 23:39:11,147 - DEBUG - Final similar_products count: 10
2025-04-14 23:39:11,150 - DEBUG - Final similar_products: [194101531, 80365183, 123518348, 56859344, 24641074, 50927270, 35279690, 102859364, 135412837, 248939498]
2025-04-14 23:39:11,152 - DEBUG - --- Completed get_similar_products_by_id for product_id: 126235874 ---
2025-04-14 23:39:11,154 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 23:39:11,154 - DEBUG - Preparing response with similar products
2025-04-14 23:39:11,165 - DEBUG - --- Completed request for /api/recommendations/126235874 ---
2025-04-14 23:39:14,858 - DEBUG - --- Processing request for /api/recommendations/123518348 ---
2025-04-14 23:39:14,860 - DEBUG - Limit set to: 10
2025-04-14 23:39:14,861 - DEBUG - --- Starting get_similar_products_by_id for product_id: 123518348 ---
2025-04-14 23:39:14,863 - DEBUG - Checking if product_id 123518348 exists in product_ids
2025-04-14 23:39:14,867 - DEBUG - Product_id exists in vector database: True
2025-04-14 23:39:14,870 - DEBUG - Fetching product details from Tiki API for product_id: 123518348
2025-04-14 23:39:15,534 - DEBUG - Extracting product details
2025-04-14 23:39:15,535 - DEBUG - Name: Tai nghe Remax RM-201 - Hàng chính hãng
2025-04-14 23:39:15,542 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-14 23:39:15,544 - DEBUG - Brand_name: Remax
2025-04-14 23:39:15,553 - DEBUG - Encoding combined text to embedding
2025-04-14 23:39:15,754 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 23:39:15,755 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 23:39:15,759 - DEBUG - FAISS search results - distances: [[1.5445289361717962e-13, 0.24725571274757385, 0.29311609268188477, 0.2961730360984802, 0.31907978653907776, 0.34723448753356934, 0.3509403169155121, 0.3572787344455719, 0.3642429709434509, 0.3658698499202728, 0.3905647099018097]]
2025-04-14 23:39:15,760 - DEBUG - FAISS search results - indices: [[207, 1582, 103, 3024, 312, 5196, 7857, 283, 6892, 296, 7338]]
2025-04-14 23:39:15,761 - DEBUG - Filtered result_product_ids: [202879835, 102785769, 102859364, 110850007, 126235874, 978850, 155780905, 270686707, 102782859, 272163837]
2025-04-14 23:39:15,762 - DEBUG - Checking product_id 202879835 in DataFrame
2025-04-14 23:39:15,765 - DEBUG - Added product 202879835 to similar_products
2025-04-14 23:39:15,766 - DEBUG - Checking product_id 102785769 in DataFrame
2025-04-14 23:39:15,769 - DEBUG - Added product 102785769 to similar_products
2025-04-14 23:39:15,770 - DEBUG - Checking product_id 102859364 in DataFrame
2025-04-14 23:39:15,774 - DEBUG - Added product 102859364 to similar_products
2025-04-14 23:39:15,775 - DEBUG - Checking product_id 110850007 in DataFrame
2025-04-14 23:39:15,778 - DEBUG - Added product 110850007 to similar_products
2025-04-14 23:39:15,783 - DEBUG - Checking product_id 126235874 in DataFrame
2025-04-14 23:39:15,785 - DEBUG - Added product 126235874 to similar_products
2025-04-14 23:39:15,786 - DEBUG - Checking product_id 978850 in DataFrame
2025-04-14 23:39:15,790 - DEBUG - Added product 978850 to similar_products
2025-04-14 23:39:15,791 - DEBUG - Checking product_id 155780905 in DataFrame
2025-04-14 23:39:15,796 - DEBUG - Added product 155780905 to similar_products
2025-04-14 23:39:15,798 - DEBUG - Checking product_id 270686707 in DataFrame
2025-04-14 23:39:15,811 - DEBUG - Added product 270686707 to similar_products
2025-04-14 23:39:15,812 - DEBUG - Checking product_id 102782859 in DataFrame
2025-04-14 23:39:15,815 - DEBUG - Added product 102782859 to similar_products
2025-04-14 23:39:15,821 - DEBUG - Checking product_id 272163837 in DataFrame
2025-04-14 23:39:15,827 - DEBUG - Added product 272163837 to similar_products
2025-04-14 23:39:15,831 - DEBUG - Final similar_products count: 10
2025-04-14 23:39:15,836 - DEBUG - Final similar_products: [202879835, 102785769, 102859364, 110850007, 126235874, 978850, 155780905, 270686707, 102782859, 272163837]
2025-04-14 23:39:15,838 - DEBUG - --- Completed get_similar_products_by_id for product_id: 123518348 ---
2025-04-14 23:39:15,839 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 23:39:15,840 - DEBUG - Preparing response with similar products
2025-04-14 23:39:15,874 - DEBUG - --- Completed request for /api/recommendations/123518348 ---
2025-04-14 23:39:29,417 - DEBUG - --- Processing request for /api/recommendations/184059211 ---
2025-04-14 23:39:29,419 - DEBUG - Limit set to: 10
2025-04-14 23:39:29,424 - DEBUG - --- Starting get_similar_products_by_id for product_id: 184059211 ---
2025-04-14 23:39:29,427 - DEBUG - Checking if product_id 184059211 exists in product_ids
2025-04-14 23:39:29,428 - DEBUG - Product_id exists in vector database: False
2025-04-14 23:39:29,428 - DEBUG - Fetching product details from Tiki API for product_id: 184059211
2025-04-14 23:39:29,577 - DEBUG - Extracting product details
2025-04-14 23:39:29,578 - DEBUG - Name: Apple iPhone 13
2025-04-14 23:39:29,593 - DEBUG - Brand_name: Apple
2025-04-14 23:39:29,599 - DEBUG - Encoding combined text to embedding
2025-04-14 23:39:29,829 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 23:39:29,830 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 23:39:29,833 - DEBUG - FAISS search results - distances: [[0.6164488196372986, 0.6294758319854736, 0.650195837020874, 0.6850014328956604, 0.7004382610321045, 0.7051544189453125, 0.7058439254760742, 0.7092292308807373, 0.710883617401123, 0.7109403610229492, 0.7109628319740295]]
2025-04-14 23:39:29,836 - DEBUG - FAISS search results - indices: [[7387, 2736, 4172, 2521, 975, 1295, 6724, 2665, 2725, 8546, 240]]
2025-04-14 23:39:29,838 - DEBUG - Filtered result_product_ids: [183330021, 134933833, 203201921, 200914701, 277030799, 277466537, 50714154, 133039431, 197528405, 205815576]
2025-04-14 23:39:29,839 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-14 23:39:29,842 - DEBUG - Added product 183330021 to similar_products
2025-04-14 23:39:29,844 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-14 23:39:29,846 - DEBUG - Added product 134933833 to similar_products
2025-04-14 23:39:29,848 - DEBUG - Checking product_id 203201921 in DataFrame
2025-04-14 23:39:29,851 - DEBUG - Added product 203201921 to similar_products
2025-04-14 23:39:29,852 - DEBUG - Checking product_id 200914701 in DataFrame
2025-04-14 23:39:29,856 - DEBUG - Added product 200914701 to similar_products
2025-04-14 23:39:29,858 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-14 23:39:29,861 - DEBUG - Added product 277030799 to similar_products
2025-04-14 23:39:29,862 - DEBUG - Checking product_id 277466537 in DataFrame
2025-04-14 23:39:29,865 - DEBUG - Added product 277466537 to similar_products
2025-04-14 23:39:29,867 - DEBUG - Checking product_id 50714154 in DataFrame
2025-04-14 23:39:29,873 - DEBUG - Added product 50714154 to similar_products
2025-04-14 23:39:29,875 - DEBUG - Checking product_id 133039431 in DataFrame
2025-04-14 23:39:29,877 - DEBUG - Added product 133039431 to similar_products
2025-04-14 23:39:29,878 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-14 23:39:29,880 - DEBUG - Added product 197528405 to similar_products
2025-04-14 23:39:29,881 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-14 23:39:29,883 - DEBUG - Added product 205815576 to similar_products
2025-04-14 23:39:29,887 - DEBUG - Final similar_products count: 10
2025-04-14 23:39:29,888 - DEBUG - Final similar_products: [183330021, 134933833, 203201921, 200914701, 277030799, 277466537, 50714154, 133039431, 197528405, 205815576]
2025-04-14 23:39:29,889 - DEBUG - --- Completed get_similar_products_by_id for product_id: 184059211 ---
2025-04-14 23:39:29,890 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 23:39:29,891 - DEBUG - Preparing response with similar products
2025-04-14 23:39:29,898 - DEBUG - --- Completed request for /api/recommendations/184059211 ---
2025-04-14 23:39:39,956 - DEBUG - --- Processing request for /api/recommendations/200914701 ---
2025-04-14 23:39:39,960 - DEBUG - Limit set to: 10
2025-04-14 23:39:39,961 - DEBUG - --- Starting get_similar_products_by_id for product_id: 200914701 ---
2025-04-14 23:39:39,962 - DEBUG - Checking if product_id 200914701 exists in product_ids
2025-04-14 23:39:39,963 - DEBUG - Product_id exists in vector database: True
2025-04-14 23:39:39,964 - DEBUG - Fetching product details from Tiki API for product_id: 200914701
2025-04-14 23:39:40,149 - DEBUG - Extracting product details
2025-04-14 23:39:40,168 - DEBUG - Brand_name: WIWU
2025-04-14 23:39:40,175 - DEBUG - Encoding combined text to embedding
2025-04-14 23:39:40,350 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 23:39:40,351 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 23:39:40,353 - DEBUG - FAISS search results - distances: [[9.209722150486585e-14, 0.21888971328735352, 0.22960378229618073, 0.2338966578245163, 0.25436174869537354, 0.25436174869537354, 0.25874751806259155, 0.2604728937149048, 0.2694578170776367, 0.27988576889038086, 0.29426419734954834]]
2025-04-14 23:39:40,354 - DEBUG - FAISS search results - indices: [[2521, 1728, 1959, 2516, 2352, 2574, 1145, 2427, 1222, 2567, 1515]]
2025-04-14 23:39:40,355 - DEBUG - Filtered result_product_ids: [52049435, 136468984, 53999206, 276177761, 276159554, 104311425, 276368513, 212610046, 276814795, 276345339]
2025-04-14 23:39:40,360 - DEBUG - Checking product_id 52049435 in DataFrame
2025-04-14 23:39:40,363 - DEBUG - Added product 52049435 to similar_products
2025-04-14 23:39:40,364 - DEBUG - Checking product_id 136468984 in DataFrame
2025-04-14 23:39:40,365 - DEBUG - Added product 136468984 to similar_products
2025-04-14 23:39:40,366 - DEBUG - Checking product_id 53999206 in DataFrame
2025-04-14 23:39:40,369 - DEBUG - Added product 53999206 to similar_products
2025-04-14 23:39:40,371 - DEBUG - Checking product_id 276177761 in DataFrame
2025-04-14 23:39:40,374 - DEBUG - Added product 276177761 to similar_products
2025-04-14 23:39:40,376 - DEBUG - Checking product_id 276159554 in DataFrame
2025-04-14 23:39:40,378 - DEBUG - Added product 276159554 to similar_products
2025-04-14 23:39:40,379 - DEBUG - Checking product_id 104311425 in DataFrame
2025-04-14 23:39:40,381 - DEBUG - Added product 104311425 to similar_products
2025-04-14 23:39:40,382 - DEBUG - Checking product_id 276368513 in DataFrame
2025-04-14 23:39:40,383 - DEBUG - Added product 276368513 to similar_products
2025-04-14 23:39:40,384 - DEBUG - Checking product_id 212610046 in DataFrame
2025-04-14 23:39:40,386 - DEBUG - Added product 212610046 to similar_products
2025-04-14 23:39:40,386 - DEBUG - Checking product_id 276814795 in DataFrame
2025-04-14 23:39:40,389 - DEBUG - Added product 276814795 to similar_products
2025-04-14 23:39:40,391 - DEBUG - Checking product_id 276345339 in DataFrame
2025-04-14 23:39:40,395 - DEBUG - Added product 276345339 to similar_products
2025-04-14 23:39:40,395 - DEBUG - Final similar_products count: 10
2025-04-14 23:39:40,396 - DEBUG - Final similar_products: [52049435, 136468984, 53999206, 276177761, 276159554, 104311425, 276368513, 212610046, 276814795, 276345339]
2025-04-14 23:39:40,397 - DEBUG - --- Completed get_similar_products_by_id for product_id: 200914701 ---
2025-04-14 23:39:40,397 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 23:39:40,398 - DEBUG - Preparing response with similar products
2025-04-14 23:39:40,404 - DEBUG - --- Completed request for /api/recommendations/200914701 ---
2025-04-14 23:39:44,914 - DEBUG - --- Processing request for /api/recommendations/53999206 ---
2025-04-14 23:39:44,915 - DEBUG - Limit set to: 10
2025-04-14 23:39:44,916 - DEBUG - --- Starting get_similar_products_by_id for product_id: 53999206 ---
2025-04-14 23:39:44,919 - DEBUG - Checking if product_id 53999206 exists in product_ids
2025-04-14 23:39:44,921 - DEBUG - Product_id exists in vector database: True
2025-04-14 23:39:44,921 - DEBUG - Fetching product details from Tiki API for product_id: 53999206
2025-04-14 23:39:45,121 - DEBUG - Extracting product details
2025-04-14 23:39:45,149 - DEBUG - Brand_name: WIWU
2025-04-14 23:39:45,164 - DEBUG - Encoding combined text to embedding
2025-04-14 23:39:45,369 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 23:39:45,370 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 23:39:45,373 - DEBUG - FAISS search results - distances: [[1.3102337953745796e-13, 0.021278545260429382, 0.16983652114868164, 0.21676433086395264, 0.23389670252799988, 0.2371039092540741, 0.2749634385108948, 0.2749634385108948, 0.3039079010486603, 0.3117450773715973, 0.3170150816440582]]
2025-04-14 23:39:45,374 - DEBUG - FAISS search results - indices: [[2516, 1222, 1728, 1959, 2521, 2427, 2352, 2574, 1221, 2300, 2208]]
2025-04-14 23:39:45,375 - DEBUG - Filtered result_product_ids: [212610046, 52049435, 136468984, 200914701, 276368513, 276177761, 276159554, 55733244, 271245251, 36044335]
2025-04-14 23:39:45,378 - DEBUG - Checking product_id 212610046 in DataFrame
2025-04-14 23:39:45,382 - DEBUG - Added product 212610046 to similar_products
2025-04-14 23:39:45,384 - DEBUG - Checking product_id 52049435 in DataFrame
2025-04-14 23:39:45,398 - DEBUG - Added product 52049435 to similar_products
2025-04-14 23:39:45,403 - DEBUG - Checking product_id 136468984 in DataFrame
2025-04-14 23:39:45,411 - DEBUG - Added product 136468984 to similar_products
2025-04-14 23:39:45,414 - DEBUG - Checking product_id 200914701 in DataFrame
2025-04-14 23:39:45,420 - DEBUG - Added product 200914701 to similar_products
2025-04-14 23:39:45,431 - DEBUG - Checking product_id 276368513 in DataFrame
2025-04-14 23:39:45,434 - DEBUG - Added product 276368513 to similar_products
2025-04-14 23:39:45,435 - DEBUG - Checking product_id 276177761 in DataFrame
2025-04-14 23:39:45,437 - DEBUG - Added product 276177761 to similar_products
2025-04-14 23:39:45,438 - DEBUG - Checking product_id 276159554 in DataFrame
2025-04-14 23:39:45,440 - DEBUG - Added product 276159554 to similar_products
2025-04-14 23:39:45,442 - DEBUG - Checking product_id 55733244 in DataFrame
2025-04-14 23:39:45,445 - DEBUG - Added product 55733244 to similar_products
2025-04-14 23:39:45,445 - DEBUG - Checking product_id 271245251 in DataFrame
2025-04-14 23:39:45,452 - DEBUG - Added product 271245251 to similar_products
2025-04-14 23:39:45,453 - DEBUG - Checking product_id 36044335 in DataFrame
2025-04-14 23:39:45,455 - DEBUG - Added product 36044335 to similar_products
2025-04-14 23:39:45,457 - DEBUG - Final similar_products count: 10
2025-04-14 23:39:45,458 - DEBUG - Final similar_products: [212610046, 52049435, 136468984, 200914701, 276368513, 276177761, 276159554, 55733244, 271245251, 36044335]
2025-04-14 23:39:45,459 - DEBUG - --- Completed get_similar_products_by_id for product_id: 53999206 ---
2025-04-14 23:39:45,460 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 23:39:45,463 - DEBUG - Preparing response with similar products
2025-04-14 23:39:45,470 - DEBUG - --- Completed request for /api/recommendations/53999206 ---
2025-04-14 23:46:15,023 - DEBUG - --- Processing request for /api/recommendations/276110023 ---
2025-04-14 23:46:15,024 - DEBUG - Limit set to: 10
2025-04-14 23:46:15,026 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276110023 ---
2025-04-14 23:46:15,027 - DEBUG - Checking if product_id 276110023 exists in product_ids
2025-04-14 23:46:15,028 - DEBUG - Product_id exists in vector database: False
2025-04-14 23:46:15,029 - DEBUG - Fetching product details from Tiki API for product_id: 276110023
2025-04-14 23:46:15,224 - DEBUG - Extracting product details
2025-04-14 23:46:15,225 - DEBUG - Name: Apple iPhone 16 Pro
2025-04-14 23:46:15,226 - DEBUG - Short_description: ...
2025-04-14 23:46:15,231 - DEBUG - Brand_name: Apple
2025-04-14 23:46:15,238 - DEBUG - Encoding combined text to embedding
2025-04-14 23:46:15,280 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 23:46:15,281 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 23:46:15,284 - DEBUG - FAISS search results - distances: [[0.7634570002555847, 0.7803307771682739, 0.7984361052513123, 0.8113734722137451, 0.8383305072784424, 0.8400169610977173, 0.8428742289543152, 0.8520941734313965, 0.8555965423583984, 0.8572062849998474, 0.8598330020904541]]
2025-04-14 23:46:15,285 - DEBUG - FAISS search results - indices: [[7387, 930, 8546, 3877, 2736, 35, 1310, 1205, 1833, 2294, 1785]]
2025-04-14 23:46:15,286 - DEBUG - Filtered result_product_ids: [183330021, 273237704, 205815576, 72849098, 134933833, 275589387, 274378214, 230157205, 274544634, 273440662]
2025-04-14 23:46:15,287 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-14 23:46:15,291 - DEBUG - Added product 183330021 to similar_products
2025-04-14 23:46:15,292 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-14 23:46:15,294 - DEBUG - Added product 273237704 to similar_products
2025-04-14 23:46:15,295 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-14 23:46:15,296 - DEBUG - Added product 205815576 to similar_products
2025-04-14 23:46:15,297 - DEBUG - Checking product_id 72849098 in DataFrame
2025-04-14 23:46:15,299 - DEBUG - Added product 72849098 to similar_products
2025-04-14 23:46:15,300 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-14 23:46:15,301 - DEBUG - Added product 134933833 to similar_products
2025-04-14 23:46:15,302 - DEBUG - Checking product_id 275589387 in DataFrame
2025-04-14 23:46:15,304 - DEBUG - Added product 275589387 to similar_products
2025-04-14 23:46:15,305 - DEBUG - Checking product_id 274378214 in DataFrame
2025-04-14 23:46:15,310 - DEBUG - Added product 274378214 to similar_products
2025-04-14 23:46:15,311 - DEBUG - Checking product_id 230157205 in DataFrame
2025-04-14 23:46:15,313 - DEBUG - Added product 230157205 to similar_products
2025-04-14 23:46:15,314 - DEBUG - Checking product_id 274544634 in DataFrame
2025-04-14 23:46:15,315 - DEBUG - Added product 274544634 to similar_products
2025-04-14 23:46:15,316 - DEBUG - Checking product_id 273440662 in DataFrame
2025-04-14 23:46:15,318 - DEBUG - Added product 273440662 to similar_products
2025-04-14 23:46:15,318 - DEBUG - Final similar_products count: 10
2025-04-14 23:46:15,319 - DEBUG - Final similar_products: [183330021, 273237704, 205815576, 72849098, 134933833, 275589387, 274378214, 230157205, 274544634, 273440662]
2025-04-14 23:46:15,322 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276110023 ---
2025-04-14 23:46:15,324 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 23:46:15,326 - DEBUG - Preparing response with similar products
2025-04-14 23:46:15,332 - DEBUG - --- Completed request for /api/recommendations/276110023 ---
2025-04-14 23:46:22,686 - DEBUG - --- Processing request for /api/recommendations/276110349 ---
2025-04-14 23:46:22,688 - DEBUG - Limit set to: 10
2025-04-14 23:46:22,688 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276110349 ---
2025-04-14 23:46:22,691 - DEBUG - Checking if product_id 276110349 exists in product_ids
2025-04-14 23:46:22,693 - DEBUG - Product_id exists in vector database: False
2025-04-14 23:46:22,694 - DEBUG - Fetching product details from Tiki API for product_id: 276110349
2025-04-14 23:46:22,868 - DEBUG - Extracting product details
2025-04-14 23:46:22,869 - DEBUG - Name: Apple iPhone 16
2025-04-14 23:46:22,869 - DEBUG - Short_description: ...
2025-04-14 23:46:22,872 - DEBUG - Brand_name: Apple
2025-04-14 23:46:22,878 - DEBUG - Encoding combined text to embedding
2025-04-14 23:46:22,915 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 23:46:22,916 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 23:46:22,919 - DEBUG - FAISS search results - distances: [[0.7269222736358643, 0.7687099575996399, 0.7795100212097168, 0.7871565818786621, 0.8045234680175781, 0.817284345626831, 0.8229020237922668, 0.8246817588806152, 0.8259897232055664, 0.8284562230110168, 0.8299679160118103]]
2025-04-14 23:46:22,920 - DEBUG - FAISS search results - indices: [[7387, 930, 3877, 8546, 35, 2294, 1115, 1205, 1833, 1188, 1785]]
2025-04-14 23:46:22,922 - DEBUG - Filtered result_product_ids: [183330021, 273237704, 72849098, 205815576, 275589387, 273440662, 277490201, 230157205, 274544634, 275589968]
2025-04-14 23:46:22,926 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-14 23:46:22,931 - DEBUG - Added product 183330021 to similar_products
2025-04-14 23:46:22,931 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-14 23:46:22,934 - DEBUG - Added product 273237704 to similar_products
2025-04-14 23:46:22,935 - DEBUG - Checking product_id 72849098 in DataFrame
2025-04-14 23:46:22,938 - DEBUG - Added product 72849098 to similar_products
2025-04-14 23:46:22,939 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-14 23:46:22,942 - DEBUG - Added product 205815576 to similar_products
2025-04-14 23:46:22,945 - DEBUG - Checking product_id 275589387 in DataFrame
2025-04-14 23:46:22,948 - DEBUG - Added product 275589387 to similar_products
2025-04-14 23:46:22,949 - DEBUG - Checking product_id 273440662 in DataFrame
2025-04-14 23:46:22,952 - DEBUG - Added product 273440662 to similar_products
2025-04-14 23:46:22,953 - DEBUG - Checking product_id 277490201 in DataFrame
2025-04-14 23:46:22,955 - DEBUG - Added product 277490201 to similar_products
2025-04-14 23:46:22,956 - DEBUG - Checking product_id 230157205 in DataFrame
2025-04-14 23:46:22,963 - DEBUG - Added product 230157205 to similar_products
2025-04-14 23:46:22,967 - DEBUG - Checking product_id 274544634 in DataFrame
2025-04-14 23:46:22,970 - DEBUG - Added product 274544634 to similar_products
2025-04-14 23:46:22,971 - DEBUG - Checking product_id 275589968 in DataFrame
2025-04-14 23:46:22,973 - DEBUG - Added product 275589968 to similar_products
2025-04-14 23:46:22,977 - DEBUG - Final similar_products count: 10
2025-04-14 23:46:22,978 - DEBUG - Final similar_products: [183330021, 273237704, 72849098, 205815576, 275589387, 273440662, 277490201, 230157205, 274544634, 275589968]
2025-04-14 23:46:22,979 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276110349 ---
2025-04-14 23:46:22,980 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 23:46:22,981 - DEBUG - Preparing response with similar products
2025-04-14 23:46:22,989 - DEBUG - --- Completed request for /api/recommendations/276110349 ---
2025-04-14 23:46:29,334 - DEBUG - --- Processing request for /api/recommendations/273440662 ---
2025-04-14 23:46:29,335 - DEBUG - Limit set to: 10
2025-04-14 23:46:29,336 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273440662 ---
2025-04-14 23:46:29,336 - DEBUG - Checking if product_id 273440662 exists in product_ids
2025-04-14 23:46:29,337 - DEBUG - Product_id exists in vector database: True
2025-04-14 23:46:29,338 - DEBUG - Fetching product details from Tiki API for product_id: 273440662
2025-04-14 23:46:30,043 - DEBUG - Extracting product details
2025-04-14 23:46:30,058 - DEBUG - Brand_name: Xiaomi
2025-04-14 23:46:30,064 - DEBUG - Encoding combined text to embedding
2025-04-14 23:46:30,180 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 23:46:30,181 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 23:46:30,184 - DEBUG - FAISS search results - distances: [[1.192833673632418e-13, 0.25689002871513367, 0.2646476626396179, 0.2816215455532074, 0.28822457790374756, 0.28866544365882874, 0.32090410590171814, 0.3303256034851074, 0.3309156596660614, 0.33333128690719604, 0.3498809337615967]]
2025-04-14 23:46:30,185 - DEBUG - FAISS search results - indices: [[2294, 1205, 2281, 780, 1427, 1833, 1885, 898, 2234, 305, 230]]
2025-04-14 23:46:30,185 - DEBUG - Filtered result_product_ids: [230157205, 277315433, 230155305, 273412211, 274544634, 273373420, 274638430, 277175955, 277360579, 277356031]
2025-04-14 23:46:30,186 - DEBUG - Checking product_id 230157205 in DataFrame
2025-04-14 23:46:30,187 - DEBUG - Added product 230157205 to similar_products
2025-04-14 23:46:30,188 - DEBUG - Checking product_id 277315433 in DataFrame
2025-04-14 23:46:30,190 - DEBUG - Added product 277315433 to similar_products
2025-04-14 23:46:30,190 - DEBUG - Checking product_id 230155305 in DataFrame
2025-04-14 23:46:30,191 - DEBUG - Added product 230155305 to similar_products
2025-04-14 23:46:30,192 - DEBUG - Checking product_id 273412211 in DataFrame
2025-04-14 23:46:30,194 - DEBUG - Added product 273412211 to similar_products
2025-04-14 23:46:30,195 - DEBUG - Checking product_id 274544634 in DataFrame
2025-04-14 23:46:30,197 - DEBUG - Added product 274544634 to similar_products
2025-04-14 23:46:30,198 - DEBUG - Checking product_id 273373420 in DataFrame
2025-04-14 23:46:30,200 - DEBUG - Added product 273373420 to similar_products
2025-04-14 23:46:30,201 - DEBUG - Checking product_id 274638430 in DataFrame
2025-04-14 23:46:30,202 - DEBUG - Added product 274638430 to similar_products
2025-04-14 23:46:30,203 - DEBUG - Checking product_id 277175955 in DataFrame
2025-04-14 23:46:30,204 - DEBUG - Added product 277175955 to similar_products
2025-04-14 23:46:30,205 - DEBUG - Checking product_id 277360579 in DataFrame
2025-04-14 23:46:30,206 - DEBUG - Added product 277360579 to similar_products
2025-04-14 23:46:30,207 - DEBUG - Checking product_id 277356031 in DataFrame
2025-04-14 23:46:30,208 - DEBUG - Added product 277356031 to similar_products
2025-04-14 23:46:30,209 - DEBUG - Final similar_products count: 10
2025-04-14 23:46:30,210 - DEBUG - Final similar_products: [230157205, 277315433, 230155305, 273412211, 274544634, 273373420, 274638430, 277175955, 277360579, 277356031]
2025-04-14 23:46:30,210 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273440662 ---
2025-04-14 23:46:30,211 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 23:46:30,211 - DEBUG - Preparing response with similar products
2025-04-14 23:46:30,217 - DEBUG - --- Completed request for /api/recommendations/273440662 ---
2025-04-14 23:46:50,140 - DEBUG - --- Processing request for /api/recommendations/138941669 ---
2025-04-14 23:46:50,141 - DEBUG - Limit set to: 10
2025-04-14 23:46:50,142 - DEBUG - --- Starting get_similar_products_by_id for product_id: 138941669 ---
2025-04-14 23:46:50,144 - DEBUG - Checking if product_id 138941669 exists in product_ids
2025-04-14 23:46:50,145 - DEBUG - Product_id exists in vector database: False
2025-04-14 23:46:50,147 - DEBUG - Fetching product details from Tiki API for product_id: 138941669
2025-04-14 23:46:50,331 - DEBUG - Extracting product details
2025-04-14 23:46:50,340 - DEBUG - Category_name: Root
2025-04-14 23:46:50,341 - DEBUG - Brand_name: OLSG
2025-04-14 23:46:50,343 - DEBUG - Encoding combined text to embedding
2025-04-14 23:46:50,431 - DEBUG - Query embedding shape: (1, 384)
2025-04-14 23:46:50,432 - DEBUG - Searching FAISS index with top_k: 11
2025-04-14 23:46:50,436 - DEBUG - FAISS search results - distances: [[0.29004570841789246, 0.29736587405204773, 0.3024236559867859, 0.32251444458961487, 0.32936352491378784, 0.33364206552505493, 0.33410847187042236, 0.35461628437042236, 0.38296082615852356, 0.3849276304244995, 0.4371597170829773]]
2025-04-14 23:46:50,437 - DEBUG - FAISS search results - indices: [[2820, 1678, 2806, 2804, 2772, 2798, 2761, 2736, 2782, 998, 2725]]
2025-04-14 23:46:50,438 - DEBUG - Filtered result_product_ids: [48420623, 85562664, 48420268, 48420250, 48419360, 48420056, 48419114, 134933833, 48419610, 15230971]
2025-04-14 23:46:50,439 - DEBUG - Checking product_id 48420623 in DataFrame
2025-04-14 23:46:50,441 - DEBUG - Added product 48420623 to similar_products
2025-04-14 23:46:50,442 - DEBUG - Checking product_id 85562664 in DataFrame
2025-04-14 23:46:50,444 - DEBUG - Added product 85562664 to similar_products
2025-04-14 23:46:50,445 - DEBUG - Checking product_id 48420268 in DataFrame
2025-04-14 23:46:50,446 - DEBUG - Added product 48420268 to similar_products
2025-04-14 23:46:50,447 - DEBUG - Checking product_id 48420250 in DataFrame
2025-04-14 23:46:50,449 - DEBUG - Added product 48420250 to similar_products
2025-04-14 23:46:50,450 - DEBUG - Checking product_id 48419360 in DataFrame
2025-04-14 23:46:50,453 - DEBUG - Added product 48419360 to similar_products
2025-04-14 23:46:50,453 - DEBUG - Checking product_id 48420056 in DataFrame
2025-04-14 23:46:50,455 - DEBUG - Added product 48420056 to similar_products
2025-04-14 23:46:50,455 - DEBUG - Checking product_id 48419114 in DataFrame
2025-04-14 23:46:50,457 - DEBUG - Added product 48419114 to similar_products
2025-04-14 23:46:50,458 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-14 23:46:50,459 - DEBUG - Added product 134933833 to similar_products
2025-04-14 23:46:50,460 - DEBUG - Checking product_id 48419610 in DataFrame
2025-04-14 23:46:50,461 - DEBUG - Added product 48419610 to similar_products
2025-04-14 23:46:50,462 - DEBUG - Checking product_id 15230971 in DataFrame
2025-04-14 23:46:50,463 - DEBUG - Added product 15230971 to similar_products
2025-04-14 23:46:50,464 - DEBUG - Final similar_products count: 10
2025-04-14 23:46:50,464 - DEBUG - Final similar_products: [48420623, 85562664, 48420268, 48420250, 48419360, 48420056, 48419114, 134933833, 48419610, 15230971]
2025-04-14 23:46:50,465 - DEBUG - --- Completed get_similar_products_by_id for product_id: 138941669 ---
2025-04-14 23:46:50,465 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-14 23:46:50,466 - DEBUG - Preparing response with similar products
2025-04-14 23:46:50,472 - DEBUG - --- Completed request for /api/recommendations/138941669 ---
2025-04-15 00:04:24,522 - DEBUG - --- Processing request for /api/recommendations/196201409 ---
2025-04-15 00:04:24,525 - DEBUG - Limit set to: 10
2025-04-15 00:04:24,528 - DEBUG - --- Starting get_similar_products_by_id for product_id: 196201409 ---
2025-04-15 00:04:24,530 - DEBUG - Checking if product_id 196201409 exists in product_ids
2025-04-15 00:04:24,531 - DEBUG - Product_id exists in vector database: False
2025-04-15 00:04:24,532 - DEBUG - Fetching product details from Tiki API for product_id: 196201409
2025-04-15 00:04:24,686 - DEBUG - Extracting product details
2025-04-15 00:04:24,694 - DEBUG - Category_name: Loa Bluetooth
2025-04-15 00:04:24,695 - DEBUG - Brand_name: XM
2025-04-15 00:04:24,699 - DEBUG - Encoding combined text to embedding
2025-04-15 00:04:24,793 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:04:24,794 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:04:24,798 - DEBUG - FAISS search results - distances: [[0.3470276892185211, 0.36550372838974, 0.3868965208530426, 0.40195971727371216, 0.41470450162887573, 0.42378538846969604, 0.42743897438049316, 0.4304928779602051, 0.431251585483551, 0.441254198551178, 0.44264060258865356]]
2025-04-15 00:04:24,799 - DEBUG - FAISS search results - indices: [[2715, 2747, 1888, 2395, 679, 8205, 1247, 365, 1818, 3201, 4595]]
2025-04-15 00:04:24,800 - DEBUG - Filtered result_product_ids: [276949462, 276025056, 276248817, 9979969, 275923542, 133920646, 191581297, 275513943, 276101028, 98731523]
2025-04-15 00:04:24,801 - DEBUG - Checking product_id 276949462 in DataFrame
2025-04-15 00:04:24,802 - DEBUG - Added product 276949462 to similar_products
2025-04-15 00:04:24,803 - DEBUG - Checking product_id 276025056 in DataFrame
2025-04-15 00:04:24,805 - DEBUG - Added product 276025056 to similar_products
2025-04-15 00:04:24,805 - DEBUG - Checking product_id 276248817 in DataFrame
2025-04-15 00:04:24,807 - DEBUG - Added product 276248817 to similar_products
2025-04-15 00:04:24,807 - DEBUG - Checking product_id 9979969 in DataFrame
2025-04-15 00:04:24,809 - DEBUG - Added product 9979969 to similar_products
2025-04-15 00:04:24,810 - DEBUG - Checking product_id 275923542 in DataFrame
2025-04-15 00:04:24,811 - DEBUG - Added product 275923542 to similar_products
2025-04-15 00:04:24,812 - DEBUG - Checking product_id 133920646 in DataFrame
2025-04-15 00:04:24,816 - DEBUG - Added product 133920646 to similar_products
2025-04-15 00:04:24,817 - DEBUG - Checking product_id 191581297 in DataFrame
2025-04-15 00:04:24,819 - DEBUG - Added product 191581297 to similar_products
2025-04-15 00:04:24,820 - DEBUG - Checking product_id 275513943 in DataFrame
2025-04-15 00:04:24,822 - DEBUG - Added product 275513943 to similar_products
2025-04-15 00:04:24,823 - DEBUG - Checking product_id 276101028 in DataFrame
2025-04-15 00:04:24,825 - DEBUG - Added product 276101028 to similar_products
2025-04-15 00:04:24,825 - DEBUG - Checking product_id 98731523 in DataFrame
2025-04-15 00:04:24,830 - DEBUG - Added product 98731523 to similar_products
2025-04-15 00:04:24,832 - DEBUG - Final similar_products count: 10
2025-04-15 00:04:24,833 - DEBUG - Final similar_products: [276949462, 276025056, 276248817, 9979969, 275923542, 133920646, 191581297, 275513943, 276101028, 98731523]
2025-04-15 00:04:24,833 - DEBUG - --- Completed get_similar_products_by_id for product_id: 196201409 ---
2025-04-15 00:04:24,835 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:04:24,836 - DEBUG - Preparing response with similar products
2025-04-15 00:04:24,843 - DEBUG - --- Completed request for /api/recommendations/196201409 ---
2025-04-15 00:04:38,486 - DEBUG - --- Processing request for /api/recommendations/133920646 ---
2025-04-15 00:04:38,487 - DEBUG - Limit set to: 10
2025-04-15 00:04:38,487 - DEBUG - --- Starting get_similar_products_by_id for product_id: 133920646 ---
2025-04-15 00:04:38,488 - DEBUG - Checking if product_id 133920646 exists in product_ids
2025-04-15 00:04:38,489 - DEBUG - Product_id exists in vector database: True
2025-04-15 00:04:38,490 - DEBUG - Fetching product details from Tiki API for product_id: 133920646
2025-04-15 00:04:38,595 - DEBUG - Extracting product details
2025-04-15 00:04:38,601 - DEBUG - Category_name: Loa Bluetooth
2025-04-15 00:04:38,601 - DEBUG - Brand_name: hoco
2025-04-15 00:04:38,605 - DEBUG - Encoding combined text to embedding
2025-04-15 00:04:38,682 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:04:38,683 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:04:38,687 - DEBUG - FAISS search results - distances: [[0.0, 0.199476957321167, 0.26737073063850403, 0.31629082560539246, 0.3498527407646179, 0.3544158339500427, 0.35758113861083984, 0.3648374378681183, 0.3706839978694916, 0.3765840232372284, 0.38730287551879883]]
2025-04-15 00:04:38,688 - DEBUG - FAISS search results - indices: [[8205, 8104, 2328, 5749, 383, 2776, 1887, 688, 2077, 342, 365]]
2025-04-15 00:04:38,689 - DEBUG - Filtered result_product_ids: [133920130, 25272684, 73744564, 66636612, 125555338, 23238896, 152380066, 272030678, 31246621, 275513943]
2025-04-15 00:04:38,689 - DEBUG - Checking product_id 133920130 in DataFrame
2025-04-15 00:04:38,691 - DEBUG - Added product 133920130 to similar_products
2025-04-15 00:04:38,692 - DEBUG - Checking product_id 25272684 in DataFrame
2025-04-15 00:04:38,693 - DEBUG - Added product 25272684 to similar_products
2025-04-15 00:04:38,694 - DEBUG - Checking product_id 73744564 in DataFrame
2025-04-15 00:04:38,695 - DEBUG - Added product 73744564 to similar_products
2025-04-15 00:04:38,695 - DEBUG - Checking product_id 66636612 in DataFrame
2025-04-15 00:04:38,697 - DEBUG - Added product 66636612 to similar_products
2025-04-15 00:04:38,698 - DEBUG - Checking product_id 125555338 in DataFrame
2025-04-15 00:04:38,699 - DEBUG - Added product 125555338 to similar_products
2025-04-15 00:04:38,700 - DEBUG - Checking product_id 23238896 in DataFrame
2025-04-15 00:04:38,702 - DEBUG - Added product 23238896 to similar_products
2025-04-15 00:04:38,703 - DEBUG - Checking product_id 152380066 in DataFrame
2025-04-15 00:04:38,705 - DEBUG - Added product 152380066 to similar_products
2025-04-15 00:04:38,706 - DEBUG - Checking product_id 272030678 in DataFrame
2025-04-15 00:04:38,707 - DEBUG - Added product 272030678 to similar_products
2025-04-15 00:04:38,708 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-15 00:04:38,709 - DEBUG - Added product 31246621 to similar_products
2025-04-15 00:04:38,710 - DEBUG - Checking product_id 275513943 in DataFrame
2025-04-15 00:04:38,711 - DEBUG - Added product 275513943 to similar_products
2025-04-15 00:04:38,712 - DEBUG - Final similar_products count: 10
2025-04-15 00:04:38,712 - DEBUG - Final similar_products: [133920130, 25272684, 73744564, 66636612, 125555338, 23238896, 152380066, 272030678, 31246621, 275513943]
2025-04-15 00:04:38,713 - DEBUG - --- Completed get_similar_products_by_id for product_id: 133920646 ---
2025-04-15 00:04:38,714 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:04:38,714 - DEBUG - Preparing response with similar products
2025-04-15 00:04:38,721 - DEBUG - --- Completed request for /api/recommendations/133920646 ---
2025-04-15 00:04:42,466 - DEBUG - --- Processing request for /api/recommendations/23238896 ---
2025-04-15 00:04:42,467 - DEBUG - Limit set to: 10
2025-04-15 00:04:42,467 - DEBUG - --- Starting get_similar_products_by_id for product_id: 23238896 ---
2025-04-15 00:04:42,468 - DEBUG - Checking if product_id 23238896 exists in product_ids
2025-04-15 00:04:42,468 - DEBUG - Product_id exists in vector database: True
2025-04-15 00:04:42,469 - DEBUG - Fetching product details from Tiki API for product_id: 23238896
2025-04-15 00:04:42,660 - DEBUG - Extracting product details
2025-04-15 00:04:42,670 - DEBUG - Brand_name: Hoco
2025-04-15 00:04:42,674 - DEBUG - Encoding combined text to embedding
2025-04-15 00:04:42,756 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:04:42,757 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:04:42,759 - DEBUG - FAISS search results - distances: [[9.863316489510526e-14, 0.2598153352737427, 0.2631884217262268, 0.3136897683143616, 0.33578193187713623, 0.3445083498954773, 0.3445829153060913, 0.35758113861083984, 0.359945684671402, 0.3689977526664734, 0.37012970447540283]]
2025-04-15 00:04:42,759 - DEBUG - FAISS search results - indices: [[1887, 2835, 2328, 365, 7807, 6895, 3626, 8205, 342, 5472, 2776]]
2025-04-15 00:04:42,760 - DEBUG - Filtered result_product_ids: [134543440, 25272684, 275513943, 50327179, 42293752, 6655991, 133920646, 31246621, 275495553, 125555338]
2025-04-15 00:04:42,761 - DEBUG - Checking product_id 134543440 in DataFrame
2025-04-15 00:04:42,763 - DEBUG - Added product 134543440 to similar_products
2025-04-15 00:04:42,764 - DEBUG - Checking product_id 25272684 in DataFrame
2025-04-15 00:04:42,766 - DEBUG - Added product 25272684 to similar_products
2025-04-15 00:04:42,767 - DEBUG - Checking product_id 275513943 in DataFrame
2025-04-15 00:04:42,769 - DEBUG - Added product 275513943 to similar_products
2025-04-15 00:04:42,773 - DEBUG - Checking product_id 50327179 in DataFrame
2025-04-15 00:04:42,774 - DEBUG - Added product 50327179 to similar_products
2025-04-15 00:04:42,775 - DEBUG - Checking product_id 42293752 in DataFrame
2025-04-15 00:04:42,777 - DEBUG - Added product 42293752 to similar_products
2025-04-15 00:04:42,777 - DEBUG - Checking product_id 6655991 in DataFrame
2025-04-15 00:04:42,779 - DEBUG - Added product 6655991 to similar_products
2025-04-15 00:04:42,780 - DEBUG - Checking product_id 133920646 in DataFrame
2025-04-15 00:04:42,781 - DEBUG - Added product 133920646 to similar_products
2025-04-15 00:04:42,781 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-15 00:04:42,783 - DEBUG - Added product 31246621 to similar_products
2025-04-15 00:04:42,784 - DEBUG - Checking product_id 275495553 in DataFrame
2025-04-15 00:04:42,785 - DEBUG - Added product 275495553 to similar_products
2025-04-15 00:04:42,788 - DEBUG - Checking product_id 125555338 in DataFrame
2025-04-15 00:04:42,790 - DEBUG - Added product 125555338 to similar_products
2025-04-15 00:04:42,791 - DEBUG - Final similar_products count: 10
2025-04-15 00:04:42,792 - DEBUG - Final similar_products: [134543440, 25272684, 275513943, 50327179, 42293752, 6655991, 133920646, 31246621, 275495553, 125555338]
2025-04-15 00:04:42,792 - DEBUG - --- Completed get_similar_products_by_id for product_id: 23238896 ---
2025-04-15 00:04:42,793 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:04:42,793 - DEBUG - Preparing response with similar products
2025-04-15 00:04:42,799 - DEBUG - --- Completed request for /api/recommendations/23238896 ---
2025-04-15 00:04:44,340 - DEBUG - --- Processing request for /api/recommendations/25272684 ---
2025-04-15 00:04:44,341 - DEBUG - Limit set to: 10
2025-04-15 00:04:44,342 - DEBUG - --- Starting get_similar_products_by_id for product_id: 25272684 ---
2025-04-15 00:04:44,344 - DEBUG - Checking if product_id 25272684 exists in product_ids
2025-04-15 00:04:44,345 - DEBUG - Product_id exists in vector database: True
2025-04-15 00:04:44,363 - DEBUG - Fetching product details from Tiki API for product_id: 25272684
2025-04-15 00:04:44,544 - DEBUG - Extracting product details
2025-04-15 00:04:44,558 - DEBUG - Brand_name: Hoco
2025-04-15 00:04:44,565 - DEBUG - Encoding combined text to embedding
2025-04-15 00:04:44,647 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:04:44,648 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:04:44,650 - DEBUG - FAISS search results - distances: [[1.3785569636780987e-13, 0.22481560707092285, 0.24940702319145203, 0.25162410736083984, 0.2631884217262268, 0.2673707604408264, 0.2817271947860718, 0.28858333826065063, 0.29890066385269165, 0.3018275797367096, 0.3232034146785736]]
2025-04-15 00:04:44,650 - DEBUG - FAISS search results - indices: [[2328, 2776, 383, 688, 1887, 8205, 5749, 1176, 8104, 4153, 2835]]
2025-04-15 00:04:44,651 - DEBUG - Filtered result_product_ids: [125555338, 66636612, 152380066, 23238896, 133920646, 73744564, 132827927, 133920130, 133045527, 134543440]
2025-04-15 00:04:44,651 - DEBUG - Checking product_id 125555338 in DataFrame
2025-04-15 00:04:44,653 - DEBUG - Added product 125555338 to similar_products
2025-04-15 00:04:44,654 - DEBUG - Checking product_id 66636612 in DataFrame
2025-04-15 00:04:44,656 - DEBUG - Added product 66636612 to similar_products
2025-04-15 00:04:44,657 - DEBUG - Checking product_id 152380066 in DataFrame
2025-04-15 00:04:44,660 - DEBUG - Added product 152380066 to similar_products
2025-04-15 00:04:44,661 - DEBUG - Checking product_id 23238896 in DataFrame
2025-04-15 00:04:44,663 - DEBUG - Added product 23238896 to similar_products
2025-04-15 00:04:44,664 - DEBUG - Checking product_id 133920646 in DataFrame
2025-04-15 00:04:44,665 - DEBUG - Added product 133920646 to similar_products
2025-04-15 00:04:44,666 - DEBUG - Checking product_id 73744564 in DataFrame
2025-04-15 00:04:44,668 - DEBUG - Added product 73744564 to similar_products
2025-04-15 00:04:44,668 - DEBUG - Checking product_id 132827927 in DataFrame
2025-04-15 00:04:44,670 - DEBUG - Added product 132827927 to similar_products
2025-04-15 00:04:44,671 - DEBUG - Checking product_id 133920130 in DataFrame
2025-04-15 00:04:44,674 - DEBUG - Added product 133920130 to similar_products
2025-04-15 00:04:44,675 - DEBUG - Checking product_id 133045527 in DataFrame
2025-04-15 00:04:44,677 - DEBUG - Added product 133045527 to similar_products
2025-04-15 00:04:44,678 - DEBUG - Checking product_id 134543440 in DataFrame
2025-04-15 00:04:44,679 - DEBUG - Added product 134543440 to similar_products
2025-04-15 00:04:44,679 - DEBUG - Final similar_products count: 10
2025-04-15 00:04:44,680 - DEBUG - Final similar_products: [125555338, 66636612, 152380066, 23238896, 133920646, 73744564, 132827927, 133920130, 133045527, 134543440]
2025-04-15 00:04:44,680 - DEBUG - --- Completed get_similar_products_by_id for product_id: 25272684 ---
2025-04-15 00:04:44,681 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:04:44,681 - DEBUG - Preparing response with similar products
2025-04-15 00:04:44,686 - DEBUG - --- Completed request for /api/recommendations/25272684 ---
2025-04-15 00:04:45,684 - DEBUG - --- Processing request for /api/recommendations/23238896 ---
2025-04-15 00:04:45,685 - DEBUG - Limit set to: 10
2025-04-15 00:04:45,686 - DEBUG - --- Starting get_similar_products_by_id for product_id: 23238896 ---
2025-04-15 00:04:45,686 - DEBUG - Checking if product_id 23238896 exists in product_ids
2025-04-15 00:04:45,688 - DEBUG - Product_id exists in vector database: True
2025-04-15 00:04:45,689 - DEBUG - Fetching product details from Tiki API for product_id: 23238896
2025-04-15 00:04:46,342 - DEBUG - Extracting product details
2025-04-15 00:04:46,351 - DEBUG - Brand_name: Hoco
2025-04-15 00:04:46,354 - DEBUG - Encoding combined text to embedding
2025-04-15 00:04:46,424 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:04:46,425 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:04:46,427 - DEBUG - FAISS search results - distances: [[9.863316489510526e-14, 0.2598153352737427, 0.2631884217262268, 0.3136897683143616, 0.33578193187713623, 0.3445083498954773, 0.3445829153060913, 0.35758113861083984, 0.359945684671402, 0.3689977526664734, 0.37012970447540283]]
2025-04-15 00:04:46,428 - DEBUG - FAISS search results - indices: [[1887, 2835, 2328, 365, 7807, 6895, 3626, 8205, 342, 5472, 2776]]
2025-04-15 00:04:46,429 - DEBUG - Filtered result_product_ids: [134543440, 25272684, 275513943, 50327179, 42293752, 6655991, 133920646, 31246621, 275495553, 125555338]
2025-04-15 00:04:46,430 - DEBUG - Checking product_id 134543440 in DataFrame
2025-04-15 00:04:46,432 - DEBUG - Added product 134543440 to similar_products
2025-04-15 00:04:46,432 - DEBUG - Checking product_id 25272684 in DataFrame
2025-04-15 00:04:46,434 - DEBUG - Added product 25272684 to similar_products
2025-04-15 00:04:46,435 - DEBUG - Checking product_id 275513943 in DataFrame
2025-04-15 00:04:46,438 - DEBUG - Added product 275513943 to similar_products
2025-04-15 00:04:46,439 - DEBUG - Checking product_id 50327179 in DataFrame
2025-04-15 00:04:46,440 - DEBUG - Added product 50327179 to similar_products
2025-04-15 00:04:46,441 - DEBUG - Checking product_id 42293752 in DataFrame
2025-04-15 00:04:46,443 - DEBUG - Added product 42293752 to similar_products
2025-04-15 00:04:46,443 - DEBUG - Checking product_id 6655991 in DataFrame
2025-04-15 00:04:46,445 - DEBUG - Added product 6655991 to similar_products
2025-04-15 00:04:46,446 - DEBUG - Checking product_id 133920646 in DataFrame
2025-04-15 00:04:46,447 - DEBUG - Added product 133920646 to similar_products
2025-04-15 00:04:46,448 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-15 00:04:46,450 - DEBUG - Added product 31246621 to similar_products
2025-04-15 00:04:46,450 - DEBUG - Checking product_id 275495553 in DataFrame
2025-04-15 00:04:46,452 - DEBUG - Added product 275495553 to similar_products
2025-04-15 00:04:46,452 - DEBUG - Checking product_id 125555338 in DataFrame
2025-04-15 00:04:46,454 - DEBUG - Added product 125555338 to similar_products
2025-04-15 00:04:46,454 - DEBUG - Final similar_products count: 10
2025-04-15 00:04:46,455 - DEBUG - Final similar_products: [134543440, 25272684, 275513943, 50327179, 42293752, 6655991, 133920646, 31246621, 275495553, 125555338]
2025-04-15 00:04:46,455 - DEBUG - --- Completed get_similar_products_by_id for product_id: 23238896 ---
2025-04-15 00:04:46,456 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:04:46,456 - DEBUG - Preparing response with similar products
2025-04-15 00:04:46,462 - DEBUG - --- Completed request for /api/recommendations/23238896 ---
2025-04-15 00:04:47,692 - DEBUG - --- Processing request for /api/recommendations/25272684 ---
2025-04-15 00:04:47,693 - DEBUG - Limit set to: 10
2025-04-15 00:04:47,694 - DEBUG - --- Starting get_similar_products_by_id for product_id: 25272684 ---
2025-04-15 00:04:47,695 - DEBUG - Checking if product_id 25272684 exists in product_ids
2025-04-15 00:04:47,696 - DEBUG - Product_id exists in vector database: True
2025-04-15 00:04:47,696 - DEBUG - Fetching product details from Tiki API for product_id: 25272684
2025-04-15 00:04:48,389 - DEBUG - Extracting product details
2025-04-15 00:04:48,402 - DEBUG - Brand_name: Hoco
2025-04-15 00:04:48,406 - DEBUG - Encoding combined text to embedding
2025-04-15 00:04:48,529 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:04:48,530 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:04:48,532 - DEBUG - FAISS search results - distances: [[1.3785569636780987e-13, 0.22481560707092285, 0.24940702319145203, 0.25162410736083984, 0.2631884217262268, 0.2673707604408264, 0.2817271947860718, 0.28858333826065063, 0.29890066385269165, 0.3018275797367096, 0.3232034146785736]]
2025-04-15 00:04:48,533 - DEBUG - FAISS search results - indices: [[2328, 2776, 383, 688, 1887, 8205, 5749, 1176, 8104, 4153, 2835]]
2025-04-15 00:04:48,534 - DEBUG - Filtered result_product_ids: [125555338, 66636612, 152380066, 23238896, 133920646, 73744564, 132827927, 133920130, 133045527, 134543440]
2025-04-15 00:04:48,534 - DEBUG - Checking product_id 125555338 in DataFrame
2025-04-15 00:04:48,536 - DEBUG - Added product 125555338 to similar_products
2025-04-15 00:04:48,537 - DEBUG - Checking product_id 66636612 in DataFrame
2025-04-15 00:04:48,538 - DEBUG - Added product 66636612 to similar_products
2025-04-15 00:04:48,539 - DEBUG - Checking product_id 152380066 in DataFrame
2025-04-15 00:04:48,541 - DEBUG - Added product 152380066 to similar_products
2025-04-15 00:04:48,541 - DEBUG - Checking product_id 23238896 in DataFrame
2025-04-15 00:04:48,543 - DEBUG - Added product 23238896 to similar_products
2025-04-15 00:04:48,544 - DEBUG - Checking product_id 133920646 in DataFrame
2025-04-15 00:04:48,547 - DEBUG - Added product 133920646 to similar_products
2025-04-15 00:04:48,547 - DEBUG - Checking product_id 73744564 in DataFrame
2025-04-15 00:04:48,549 - DEBUG - Added product 73744564 to similar_products
2025-04-15 00:04:48,550 - DEBUG - Checking product_id 132827927 in DataFrame
2025-04-15 00:04:48,551 - DEBUG - Added product 132827927 to similar_products
2025-04-15 00:04:48,552 - DEBUG - Checking product_id 133920130 in DataFrame
2025-04-15 00:04:48,556 - DEBUG - Added product 133920130 to similar_products
2025-04-15 00:04:48,557 - DEBUG - Checking product_id 133045527 in DataFrame
2025-04-15 00:04:48,559 - DEBUG - Added product 133045527 to similar_products
2025-04-15 00:04:48,562 - DEBUG - Checking product_id 134543440 in DataFrame
2025-04-15 00:04:48,564 - DEBUG - Added product 134543440 to similar_products
2025-04-15 00:04:48,565 - DEBUG - Final similar_products count: 10
2025-04-15 00:04:48,566 - DEBUG - Final similar_products: [125555338, 66636612, 152380066, 23238896, 133920646, 73744564, 132827927, 133920130, 133045527, 134543440]
2025-04-15 00:04:48,566 - DEBUG - --- Completed get_similar_products_by_id for product_id: 25272684 ---
2025-04-15 00:04:48,567 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:04:48,568 - DEBUG - Preparing response with similar products
2025-04-15 00:04:48,580 - DEBUG - --- Completed request for /api/recommendations/25272684 ---
2025-04-15 00:04:49,841 - DEBUG - --- Processing request for /api/recommendations/125555338 ---
2025-04-15 00:04:49,842 - DEBUG - Limit set to: 10
2025-04-15 00:04:49,844 - DEBUG - --- Starting get_similar_products_by_id for product_id: 125555338 ---
2025-04-15 00:04:49,846 - DEBUG - Checking if product_id 125555338 exists in product_ids
2025-04-15 00:04:49,846 - DEBUG - Product_id exists in vector database: True
2025-04-15 00:04:49,847 - DEBUG - Fetching product details from Tiki API for product_id: 125555338
2025-04-15 00:04:50,533 - DEBUG - Extracting product details
2025-04-15 00:04:50,534 - DEBUG - Name: Loa bluetooth Hoco BS31 không dây mini - Hàng Chính Hãng 
2025-04-15 00:04:50,536 - DEBUG - Category_name: Root
2025-04-15 00:04:50,537 - DEBUG - Brand_name: Hoco
2025-04-15 00:04:50,540 - DEBUG - Encoding combined text to embedding
2025-04-15 00:04:50,600 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:04:50,601 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:04:50,602 - DEBUG - FAISS search results - distances: [[1.577184699031245e-13, 0.22481562197208405, 0.2837475538253784, 0.2928740978240967, 0.2932339310646057, 0.3306211233139038, 0.3544158637523651, 0.36278679966926575, 0.37012961506843567, 0.4107048809528351, 0.4186208248138428]]
2025-04-15 00:04:50,603 - DEBUG - FAISS search results - indices: [[2776, 2328, 383, 688, 1176, 2009, 8205, 4153, 1887, 408, 2626]]
2025-04-15 00:04:50,604 - DEBUG - Filtered result_product_ids: [25272684, 66636612, 152380066, 132827927, 35289782, 133920646, 133045527, 23238896, 277005427, 42647938]
2025-04-15 00:04:50,605 - DEBUG - Checking product_id 25272684 in DataFrame
2025-04-15 00:04:50,607 - DEBUG - Added product 25272684 to similar_products
2025-04-15 00:04:50,608 - DEBUG - Checking product_id 66636612 in DataFrame
2025-04-15 00:04:50,610 - DEBUG - Added product 66636612 to similar_products
2025-04-15 00:04:50,611 - DEBUG - Checking product_id 152380066 in DataFrame
2025-04-15 00:04:50,612 - DEBUG - Added product 152380066 to similar_products
2025-04-15 00:04:50,613 - DEBUG - Checking product_id 132827927 in DataFrame
2025-04-15 00:04:50,615 - DEBUG - Added product 132827927 to similar_products
2025-04-15 00:04:50,615 - DEBUG - Checking product_id 35289782 in DataFrame
2025-04-15 00:04:50,617 - DEBUG - Added product 35289782 to similar_products
2025-04-15 00:04:50,617 - DEBUG - Checking product_id 133920646 in DataFrame
2025-04-15 00:04:50,619 - DEBUG - Added product 133920646 to similar_products
2025-04-15 00:04:50,619 - DEBUG - Checking product_id 133045527 in DataFrame
2025-04-15 00:04:50,620 - DEBUG - Added product 133045527 to similar_products
2025-04-15 00:04:50,621 - DEBUG - Checking product_id 23238896 in DataFrame
2025-04-15 00:04:50,623 - DEBUG - Added product 23238896 to similar_products
2025-04-15 00:04:50,624 - DEBUG - Checking product_id 277005427 in DataFrame
2025-04-15 00:04:50,626 - DEBUG - Added product 277005427 to similar_products
2025-04-15 00:04:50,627 - DEBUG - Checking product_id 42647938 in DataFrame
2025-04-15 00:04:50,628 - DEBUG - Added product 42647938 to similar_products
2025-04-15 00:04:50,629 - DEBUG - Final similar_products count: 10
2025-04-15 00:04:50,630 - DEBUG - Final similar_products: [25272684, 66636612, 152380066, 132827927, 35289782, 133920646, 133045527, 23238896, 277005427, 42647938]
2025-04-15 00:04:50,631 - DEBUG - --- Completed get_similar_products_by_id for product_id: 125555338 ---
2025-04-15 00:04:50,631 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:04:50,632 - DEBUG - Preparing response with similar products
2025-04-15 00:04:50,636 - DEBUG - --- Completed request for /api/recommendations/125555338 ---
2025-04-15 00:04:54,383 - DEBUG - --- Processing request for /api/recommendations/25272684 ---
2025-04-15 00:04:54,385 - DEBUG - Limit set to: 10
2025-04-15 00:04:54,386 - DEBUG - --- Starting get_similar_products_by_id for product_id: 25272684 ---
2025-04-15 00:04:54,387 - DEBUG - Checking if product_id 25272684 exists in product_ids
2025-04-15 00:04:54,388 - DEBUG - Product_id exists in vector database: True
2025-04-15 00:04:54,388 - DEBUG - Fetching product details from Tiki API for product_id: 25272684
2025-04-15 00:04:54,571 - DEBUG - Extracting product details
2025-04-15 00:04:54,582 - DEBUG - Brand_name: Hoco
2025-04-15 00:04:54,585 - DEBUG - Encoding combined text to embedding
2025-04-15 00:04:54,653 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:04:54,653 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:04:54,655 - DEBUG - FAISS search results - distances: [[1.3785569636780987e-13, 0.22481560707092285, 0.24940702319145203, 0.25162410736083984, 0.2631884217262268, 0.2673707604408264, 0.2817271947860718, 0.28858333826065063, 0.29890066385269165, 0.3018275797367096, 0.3232034146785736]]
2025-04-15 00:04:54,656 - DEBUG - FAISS search results - indices: [[2328, 2776, 383, 688, 1887, 8205, 5749, 1176, 8104, 4153, 2835]]
2025-04-15 00:04:54,658 - DEBUG - Filtered result_product_ids: [125555338, 66636612, 152380066, 23238896, 133920646, 73744564, 132827927, 133920130, 133045527, 134543440]
2025-04-15 00:04:54,659 - DEBUG - Checking product_id 125555338 in DataFrame
2025-04-15 00:04:54,662 - DEBUG - Added product 125555338 to similar_products
2025-04-15 00:04:54,662 - DEBUG - Checking product_id 66636612 in DataFrame
2025-04-15 00:04:54,664 - DEBUG - Added product 66636612 to similar_products
2025-04-15 00:04:54,665 - DEBUG - Checking product_id 152380066 in DataFrame
2025-04-15 00:04:54,667 - DEBUG - Added product 152380066 to similar_products
2025-04-15 00:04:54,668 - DEBUG - Checking product_id 23238896 in DataFrame
2025-04-15 00:04:54,670 - DEBUG - Added product 23238896 to similar_products
2025-04-15 00:04:54,671 - DEBUG - Checking product_id 133920646 in DataFrame
2025-04-15 00:04:54,672 - DEBUG - Added product 133920646 to similar_products
2025-04-15 00:04:54,673 - DEBUG - Checking product_id 73744564 in DataFrame
2025-04-15 00:04:54,676 - DEBUG - Added product 73744564 to similar_products
2025-04-15 00:04:54,677 - DEBUG - Checking product_id 132827927 in DataFrame
2025-04-15 00:04:54,679 - DEBUG - Added product 132827927 to similar_products
2025-04-15 00:04:54,679 - DEBUG - Checking product_id 133920130 in DataFrame
2025-04-15 00:04:54,680 - DEBUG - Added product 133920130 to similar_products
2025-04-15 00:04:54,681 - DEBUG - Checking product_id 133045527 in DataFrame
2025-04-15 00:04:54,683 - DEBUG - Added product 133045527 to similar_products
2025-04-15 00:04:54,684 - DEBUG - Checking product_id 134543440 in DataFrame
2025-04-15 00:04:54,685 - DEBUG - Added product 134543440 to similar_products
2025-04-15 00:04:54,693 - DEBUG - Final similar_products count: 10
2025-04-15 00:04:54,694 - DEBUG - Final similar_products: [125555338, 66636612, 152380066, 23238896, 133920646, 73744564, 132827927, 133920130, 133045527, 134543440]
2025-04-15 00:04:54,695 - DEBUG - --- Completed get_similar_products_by_id for product_id: 25272684 ---
2025-04-15 00:04:54,695 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:04:54,696 - DEBUG - Preparing response with similar products
2025-04-15 00:04:54,714 - DEBUG - --- Completed request for /api/recommendations/25272684 ---
2025-04-15 00:04:56,085 - DEBUG - --- Processing request for /api/recommendations/125555338 ---
2025-04-15 00:04:56,086 - DEBUG - Limit set to: 10
2025-04-15 00:04:56,086 - DEBUG - --- Starting get_similar_products_by_id for product_id: 125555338 ---
2025-04-15 00:04:56,087 - DEBUG - Checking if product_id 125555338 exists in product_ids
2025-04-15 00:04:56,088 - DEBUG - Product_id exists in vector database: True
2025-04-15 00:04:56,088 - DEBUG - Fetching product details from Tiki API for product_id: 125555338
2025-04-15 00:04:56,739 - DEBUG - Extracting product details
2025-04-15 00:04:56,739 - DEBUG - Name: Loa bluetooth Hoco BS31 không dây mini - Hàng Chính Hãng 
2025-04-15 00:04:56,742 - DEBUG - Category_name: Root
2025-04-15 00:04:56,743 - DEBUG - Brand_name: Hoco
2025-04-15 00:04:56,745 - DEBUG - Encoding combined text to embedding
2025-04-15 00:04:56,802 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:04:56,803 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:04:56,805 - DEBUG - FAISS search results - distances: [[1.577184699031245e-13, 0.22481562197208405, 0.2837475538253784, 0.2928740978240967, 0.2932339310646057, 0.3306211233139038, 0.3544158637523651, 0.36278679966926575, 0.37012961506843567, 0.4107048809528351, 0.4186208248138428]]
2025-04-15 00:04:56,806 - DEBUG - FAISS search results - indices: [[2776, 2328, 383, 688, 1176, 2009, 8205, 4153, 1887, 408, 2626]]
2025-04-15 00:04:56,806 - DEBUG - Filtered result_product_ids: [25272684, 66636612, 152380066, 132827927, 35289782, 133920646, 133045527, 23238896, 277005427, 42647938]
2025-04-15 00:04:56,807 - DEBUG - Checking product_id 25272684 in DataFrame
2025-04-15 00:04:56,809 - DEBUG - Added product 25272684 to similar_products
2025-04-15 00:04:56,809 - DEBUG - Checking product_id 66636612 in DataFrame
2025-04-15 00:04:56,811 - DEBUG - Added product 66636612 to similar_products
2025-04-15 00:04:56,812 - DEBUG - Checking product_id 152380066 in DataFrame
2025-04-15 00:04:56,814 - DEBUG - Added product 152380066 to similar_products
2025-04-15 00:04:56,814 - DEBUG - Checking product_id 132827927 in DataFrame
2025-04-15 00:04:56,816 - DEBUG - Added product 132827927 to similar_products
2025-04-15 00:04:56,817 - DEBUG - Checking product_id 35289782 in DataFrame
2025-04-15 00:04:56,818 - DEBUG - Added product 35289782 to similar_products
2025-04-15 00:04:56,819 - DEBUG - Checking product_id 133920646 in DataFrame
2025-04-15 00:04:56,821 - DEBUG - Added product 133920646 to similar_products
2025-04-15 00:04:56,821 - DEBUG - Checking product_id 133045527 in DataFrame
2025-04-15 00:04:56,823 - DEBUG - Added product 133045527 to similar_products
2025-04-15 00:04:56,824 - DEBUG - Checking product_id 23238896 in DataFrame
2025-04-15 00:04:56,826 - DEBUG - Added product 23238896 to similar_products
2025-04-15 00:04:56,827 - DEBUG - Checking product_id 277005427 in DataFrame
2025-04-15 00:04:56,828 - DEBUG - Added product 277005427 to similar_products
2025-04-15 00:04:56,829 - DEBUG - Checking product_id 42647938 in DataFrame
2025-04-15 00:04:56,830 - DEBUG - Added product 42647938 to similar_products
2025-04-15 00:04:56,831 - DEBUG - Final similar_products count: 10
2025-04-15 00:04:56,832 - DEBUG - Final similar_products: [25272684, 66636612, 152380066, 132827927, 35289782, 133920646, 133045527, 23238896, 277005427, 42647938]
2025-04-15 00:04:56,833 - DEBUG - --- Completed get_similar_products_by_id for product_id: 125555338 ---
2025-04-15 00:04:56,833 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:04:56,834 - DEBUG - Preparing response with similar products
2025-04-15 00:04:56,838 - DEBUG - --- Completed request for /api/recommendations/125555338 ---
2025-04-15 00:04:57,814 - DEBUG - --- Processing request for /api/recommendations/25272684 ---
2025-04-15 00:04:57,815 - DEBUG - Limit set to: 10
2025-04-15 00:04:57,816 - DEBUG - --- Starting get_similar_products_by_id for product_id: 25272684 ---
2025-04-15 00:04:57,816 - DEBUG - Checking if product_id 25272684 exists in product_ids
2025-04-15 00:04:57,817 - DEBUG - Product_id exists in vector database: True
2025-04-15 00:04:57,817 - DEBUG - Fetching product details from Tiki API for product_id: 25272684
2025-04-15 00:04:58,536 - DEBUG - Extracting product details
2025-04-15 00:04:58,568 - DEBUG - Brand_name: Hoco
2025-04-15 00:04:58,575 - DEBUG - Encoding combined text to embedding
2025-04-15 00:04:58,690 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:04:58,692 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:04:58,694 - DEBUG - FAISS search results - distances: [[1.3785569636780987e-13, 0.22481560707092285, 0.24940702319145203, 0.25162410736083984, 0.2631884217262268, 0.2673707604408264, 0.2817271947860718, 0.28858333826065063, 0.29890066385269165, 0.3018275797367096, 0.3232034146785736]]
2025-04-15 00:04:58,695 - DEBUG - FAISS search results - indices: [[2328, 2776, 383, 688, 1887, 8205, 5749, 1176, 8104, 4153, 2835]]
2025-04-15 00:04:58,696 - DEBUG - Filtered result_product_ids: [125555338, 66636612, 152380066, 23238896, 133920646, 73744564, 132827927, 133920130, 133045527, 134543440]
2025-04-15 00:04:58,697 - DEBUG - Checking product_id 125555338 in DataFrame
2025-04-15 00:04:58,700 - DEBUG - Added product 125555338 to similar_products
2025-04-15 00:04:58,701 - DEBUG - Checking product_id 66636612 in DataFrame
2025-04-15 00:04:58,702 - DEBUG - Added product 66636612 to similar_products
2025-04-15 00:04:58,703 - DEBUG - Checking product_id 152380066 in DataFrame
2025-04-15 00:04:58,705 - DEBUG - Added product 152380066 to similar_products
2025-04-15 00:04:58,706 - DEBUG - Checking product_id 23238896 in DataFrame
2025-04-15 00:04:58,707 - DEBUG - Added product 23238896 to similar_products
2025-04-15 00:04:58,708 - DEBUG - Checking product_id 133920646 in DataFrame
2025-04-15 00:04:58,710 - DEBUG - Added product 133920646 to similar_products
2025-04-15 00:04:58,711 - DEBUG - Checking product_id 73744564 in DataFrame
2025-04-15 00:04:58,713 - DEBUG - Added product 73744564 to similar_products
2025-04-15 00:04:58,714 - DEBUG - Checking product_id 132827927 in DataFrame
2025-04-15 00:04:58,716 - DEBUG - Added product 132827927 to similar_products
2025-04-15 00:04:58,717 - DEBUG - Checking product_id 133920130 in DataFrame
2025-04-15 00:04:58,719 - DEBUG - Added product 133920130 to similar_products
2025-04-15 00:04:58,720 - DEBUG - Checking product_id 133045527 in DataFrame
2025-04-15 00:04:58,722 - DEBUG - Added product 133045527 to similar_products
2025-04-15 00:04:58,723 - DEBUG - Checking product_id 134543440 in DataFrame
2025-04-15 00:04:58,724 - DEBUG - Added product 134543440 to similar_products
2025-04-15 00:04:58,726 - DEBUG - Final similar_products count: 10
2025-04-15 00:04:58,726 - DEBUG - Final similar_products: [125555338, 66636612, 152380066, 23238896, 133920646, 73744564, 132827927, 133920130, 133045527, 134543440]
2025-04-15 00:04:58,727 - DEBUG - --- Completed get_similar_products_by_id for product_id: 25272684 ---
2025-04-15 00:04:58,728 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:04:58,729 - DEBUG - Preparing response with similar products
2025-04-15 00:04:58,738 - DEBUG - --- Completed request for /api/recommendations/25272684 ---
2025-04-15 00:05:03,008 - DEBUG - --- Processing request for /api/recommendations/73744564 ---
2025-04-15 00:05:03,010 - DEBUG - Limit set to: 10
2025-04-15 00:05:03,011 - DEBUG - --- Starting get_similar_products_by_id for product_id: 73744564 ---
2025-04-15 00:05:03,012 - DEBUG - Checking if product_id 73744564 exists in product_ids
2025-04-15 00:05:03,013 - DEBUG - Product_id exists in vector database: True
2025-04-15 00:05:03,013 - DEBUG - Fetching product details from Tiki API for product_id: 73744564
2025-04-15 00:05:03,099 - DEBUG - Extracting product details
2025-04-15 00:05:03,107 - DEBUG - Category_name: 
2025-04-15 00:05:03,107 - DEBUG - Brand_name: PKCB
2025-04-15 00:05:03,115 - DEBUG - Encoding combined text to embedding
2025-04-15 00:05:03,219 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:05:03,221 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:05:03,223 - DEBUG - FAISS search results - distances: [[0.011389801278710365, 0.24686849117279053, 0.25095540285110474, 0.28102362155914307, 0.2832530438899994, 0.2872614860534668, 0.3043781518936157, 0.30832546949386597, 0.31021836400032043, 0.3198552429676056, 0.32849544286727905]]
2025-04-15 00:05:03,224 - DEBUG - FAISS search results - indices: [[5749, 331, 329, 1968, 2328, 7176, 8205, 2835, 1364, 1091, 715]]
2025-04-15 00:05:03,225 - DEBUG - Filtered result_product_ids: [74891402, 75761781, 111000087, 25272684, 275177388, 133920646, 134543440, 80998193, 89065883, 106685187]
2025-04-15 00:05:03,226 - DEBUG - Checking product_id 74891402 in DataFrame
2025-04-15 00:05:03,229 - DEBUG - Added product 74891402 to similar_products
2025-04-15 00:05:03,230 - DEBUG - Checking product_id 75761781 in DataFrame
2025-04-15 00:05:03,233 - DEBUG - Added product 75761781 to similar_products
2025-04-15 00:05:03,234 - DEBUG - Checking product_id 111000087 in DataFrame
2025-04-15 00:05:03,237 - DEBUG - Added product 111000087 to similar_products
2025-04-15 00:05:03,237 - DEBUG - Checking product_id 25272684 in DataFrame
2025-04-15 00:05:03,239 - DEBUG - Added product 25272684 to similar_products
2025-04-15 00:05:03,240 - DEBUG - Checking product_id 275177388 in DataFrame
2025-04-15 00:05:03,243 - DEBUG - Added product 275177388 to similar_products
2025-04-15 00:05:03,244 - DEBUG - Checking product_id 133920646 in DataFrame
2025-04-15 00:05:03,247 - DEBUG - Added product 133920646 to similar_products
2025-04-15 00:05:03,247 - DEBUG - Checking product_id 134543440 in DataFrame
2025-04-15 00:05:03,250 - DEBUG - Added product 134543440 to similar_products
2025-04-15 00:05:03,251 - DEBUG - Checking product_id 80998193 in DataFrame
2025-04-15 00:05:03,253 - DEBUG - Added product 80998193 to similar_products
2025-04-15 00:05:03,254 - DEBUG - Checking product_id 89065883 in DataFrame
2025-04-15 00:05:03,257 - DEBUG - Added product 89065883 to similar_products
2025-04-15 00:05:03,258 - DEBUG - Checking product_id 106685187 in DataFrame
2025-04-15 00:05:03,261 - DEBUG - Added product 106685187 to similar_products
2025-04-15 00:05:03,266 - DEBUG - Final similar_products count: 10
2025-04-15 00:05:03,267 - DEBUG - Final similar_products: [74891402, 75761781, 111000087, 25272684, 275177388, 133920646, 134543440, 80998193, 89065883, 106685187]
2025-04-15 00:05:03,268 - DEBUG - --- Completed get_similar_products_by_id for product_id: 73744564 ---
2025-04-15 00:05:03,268 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:05:03,269 - DEBUG - Preparing response with similar products
2025-04-15 00:05:03,276 - DEBUG - --- Completed request for /api/recommendations/73744564 ---
2025-04-15 00:05:08,777 - DEBUG - --- Processing request for /api/recommendations/74891402 ---
2025-04-15 00:05:08,778 - DEBUG - Limit set to: 10
2025-04-15 00:05:08,779 - DEBUG - --- Starting get_similar_products_by_id for product_id: 74891402 ---
2025-04-15 00:05:08,780 - DEBUG - Checking if product_id 74891402 exists in product_ids
2025-04-15 00:05:08,783 - DEBUG - Product_id exists in vector database: True
2025-04-15 00:05:08,783 - DEBUG - Fetching product details from Tiki API for product_id: 74891402
2025-04-15 00:05:08,901 - DEBUG - Extracting product details
2025-04-15 00:05:08,906 - DEBUG - Category_name: 
2025-04-15 00:05:08,907 - DEBUG - Brand_name: PKCB
2025-04-15 00:05:08,911 - DEBUG - Encoding combined text to embedding
2025-04-15 00:05:08,984 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:05:08,985 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:05:08,987 - DEBUG - FAISS search results - distances: [[0.015318125486373901, 0.2539462447166443, 0.2752078175544739, 0.31486499309539795, 0.31819888949394226, 0.3202165961265564, 0.32610753178596497, 0.33489611744880676, 0.335351824760437, 0.34234824776649475, 0.34392452239990234]]
2025-04-15 00:05:08,988 - DEBUG - FAISS search results - indices: [[331, 1968, 5749, 715, 946, 1293, 2852, 1316, 352, 1170, 687]]
2025-04-15 00:05:08,989 - DEBUG - Filtered result_product_ids: [111000087, 73744564, 106685187, 100083467, 115117462, 54770214, 170569209, 88191430, 94440195, 105513634]
2025-04-15 00:05:08,990 - DEBUG - Checking product_id 111000087 in DataFrame
2025-04-15 00:05:08,992 - DEBUG - Added product 111000087 to similar_products
2025-04-15 00:05:08,993 - DEBUG - Checking product_id 73744564 in DataFrame
2025-04-15 00:05:08,995 - DEBUG - Added product 73744564 to similar_products
2025-04-15 00:05:08,997 - DEBUG - Checking product_id 106685187 in DataFrame
2025-04-15 00:05:09,001 - DEBUG - Added product 106685187 to similar_products
2025-04-15 00:05:09,002 - DEBUG - Checking product_id 100083467 in DataFrame
2025-04-15 00:05:09,004 - DEBUG - Added product 100083467 to similar_products
2025-04-15 00:05:09,004 - DEBUG - Checking product_id 115117462 in DataFrame
2025-04-15 00:05:09,006 - DEBUG - Added product 115117462 to similar_products
2025-04-15 00:05:09,007 - DEBUG - Checking product_id 54770214 in DataFrame
2025-04-15 00:05:09,008 - DEBUG - Added product 54770214 to similar_products
2025-04-15 00:05:09,009 - DEBUG - Checking product_id 170569209 in DataFrame
2025-04-15 00:05:09,010 - DEBUG - Added product 170569209 to similar_products
2025-04-15 00:05:09,011 - DEBUG - Checking product_id 88191430 in DataFrame
2025-04-15 00:05:09,014 - DEBUG - Added product 88191430 to similar_products
2025-04-15 00:05:09,016 - DEBUG - Checking product_id 94440195 in DataFrame
2025-04-15 00:05:09,018 - DEBUG - Added product 94440195 to similar_products
2025-04-15 00:05:09,019 - DEBUG - Checking product_id 105513634 in DataFrame
2025-04-15 00:05:09,021 - DEBUG - Added product 105513634 to similar_products
2025-04-15 00:05:09,022 - DEBUG - Final similar_products count: 10
2025-04-15 00:05:09,022 - DEBUG - Final similar_products: [111000087, 73744564, 106685187, 100083467, 115117462, 54770214, 170569209, 88191430, 94440195, 105513634]
2025-04-15 00:05:09,023 - DEBUG - --- Completed get_similar_products_by_id for product_id: 74891402 ---
2025-04-15 00:05:09,024 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:05:09,024 - DEBUG - Preparing response with similar products
2025-04-15 00:05:09,031 - DEBUG - --- Completed request for /api/recommendations/74891402 ---
2025-04-15 00:05:25,892 - DEBUG - --- Processing request for /api/recommendations/73744564 ---
2025-04-15 00:05:25,893 - DEBUG - Limit set to: 10
2025-04-15 00:05:25,893 - DEBUG - --- Starting get_similar_products_by_id for product_id: 73744564 ---
2025-04-15 00:05:25,894 - DEBUG - Checking if product_id 73744564 exists in product_ids
2025-04-15 00:05:25,895 - DEBUG - Product_id exists in vector database: True
2025-04-15 00:05:25,895 - DEBUG - Fetching product details from Tiki API for product_id: 73744564
2025-04-15 00:05:25,979 - DEBUG - Extracting product details
2025-04-15 00:05:25,986 - DEBUG - Category_name: 
2025-04-15 00:05:25,986 - DEBUG - Brand_name: PKCB
2025-04-15 00:05:25,991 - DEBUG - Encoding combined text to embedding
2025-04-15 00:05:26,063 - DEBUG - Query embedding shape: (1, 384)
2025-04-15 00:05:26,064 - DEBUG - Searching FAISS index with top_k: 11
2025-04-15 00:05:26,066 - DEBUG - FAISS search results - distances: [[0.011389801278710365, 0.24686849117279053, 0.25095540285110474, 0.28102362155914307, 0.2832530438899994, 0.2872614860534668, 0.3043781518936157, 0.30832546949386597, 0.31021836400032043, 0.3198552429676056, 0.32849544286727905]]
2025-04-15 00:05:26,066 - DEBUG - FAISS search results - indices: [[5749, 331, 329, 1968, 2328, 7176, 8205, 2835, 1364, 1091, 715]]
2025-04-15 00:05:26,067 - DEBUG - Filtered result_product_ids: [74891402, 75761781, 111000087, 25272684, 275177388, 133920646, 134543440, 80998193, 89065883, 106685187]
2025-04-15 00:05:26,068 - DEBUG - Checking product_id 74891402 in DataFrame
2025-04-15 00:05:26,070 - DEBUG - Added product 74891402 to similar_products
2025-04-15 00:05:26,071 - DEBUG - Checking product_id 75761781 in DataFrame
2025-04-15 00:05:26,073 - DEBUG - Added product 75761781 to similar_products
2025-04-15 00:05:26,074 - DEBUG - Checking product_id 111000087 in DataFrame
2025-04-15 00:05:26,075 - DEBUG - Added product 111000087 to similar_products
2025-04-15 00:05:26,076 - DEBUG - Checking product_id 25272684 in DataFrame
2025-04-15 00:05:26,078 - DEBUG - Added product 25272684 to similar_products
2025-04-15 00:05:26,078 - DEBUG - Checking product_id 275177388 in DataFrame
2025-04-15 00:05:26,080 - DEBUG - Added product 275177388 to similar_products
2025-04-15 00:05:26,080 - DEBUG - Checking product_id 133920646 in DataFrame
2025-04-15 00:05:26,082 - DEBUG - Added product 133920646 to similar_products
2025-04-15 00:05:26,083 - DEBUG - Checking product_id 134543440 in DataFrame
2025-04-15 00:05:26,084 - DEBUG - Added product 134543440 to similar_products
2025-04-15 00:05:26,085 - DEBUG - Checking product_id 80998193 in DataFrame
2025-04-15 00:05:26,087 - DEBUG - Added product 80998193 to similar_products
2025-04-15 00:05:26,088 - DEBUG - Checking product_id 89065883 in DataFrame
2025-04-15 00:05:26,091 - DEBUG - Added product 89065883 to similar_products
2025-04-15 00:05:26,091 - DEBUG - Checking product_id 106685187 in DataFrame
2025-04-15 00:05:26,093 - DEBUG - Added product 106685187 to similar_products
2025-04-15 00:05:26,094 - DEBUG - Final similar_products count: 10
2025-04-15 00:05:26,094 - DEBUG - Final similar_products: [74891402, 75761781, 111000087, 25272684, 275177388, 133920646, 134543440, 80998193, 89065883, 106685187]
2025-04-15 00:05:26,095 - DEBUG - --- Completed get_similar_products_by_id for product_id: 73744564 ---
2025-04-15 00:05:26,095 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-15 00:05:26,096 - DEBUG - Preparing response with similar products
2025-04-15 00:05:26,103 - DEBUG - --- Completed request for /api/recommendations/73744564 ---
2025-04-17 09:02:09,935 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:02:09,935 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:02:09,936 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:02:13,614 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:02:13,614 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:02:13,615 - DEBUG - Loading FAISS index
2025-04-17 09:02:13,649 - DEBUG - Loading product DataFrame
2025-04-17 09:02:13,691 - DEBUG - Loading product_ids
2025-04-17 09:02:13,706 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:02:13,706 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:02:13,707 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:02:34,593 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:02:34,593 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:02:34,594 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:02:38,131 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:02:38,132 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:02:38,132 - DEBUG - Loading FAISS index
2025-04-17 09:02:38,141 - DEBUG - Loading product DataFrame
2025-04-17 09:02:38,164 - DEBUG - Loading product_ids
2025-04-17 09:02:38,166 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:02:38,167 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:02:38,167 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:04:34,976 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:04:34,977 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:04:34,978 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:04:38,202 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:04:38,203 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:04:38,204 - DEBUG - Loading FAISS index
2025-04-17 09:04:38,212 - DEBUG - Loading product DataFrame
2025-04-17 09:04:38,241 - DEBUG - Loading product_ids
2025-04-17 09:04:38,242 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:04:38,242 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:04:38,243 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:05:21,112 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:05:21,112 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:05:21,113 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:05:24,376 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:05:24,377 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:05:24,378 - DEBUG - Loading FAISS index
2025-04-17 09:05:24,386 - DEBUG - Loading product DataFrame
2025-04-17 09:05:24,412 - DEBUG - Loading product_ids
2025-04-17 09:05:24,420 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:05:24,421 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:05:24,421 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:05:49,683 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:05:49,683 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:05:49,684 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:05:52,893 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:05:52,894 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:05:52,896 - DEBUG - Loading FAISS index
2025-04-17 09:05:52,904 - DEBUG - Loading product DataFrame
2025-04-17 09:05:52,939 - DEBUG - Loading product_ids
2025-04-17 09:05:52,940 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:05:52,941 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:05:52,941 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:05:53,475 - DEBUG - --- Processing request for /api/recommendations/123518348 ---
2025-04-17 09:05:53,477 - DEBUG - Limit set to: 10
2025-04-17 09:05:53,481 - DEBUG - --- Starting get_similar_products_by_id for product_id: 123518348 ---
2025-04-17 09:05:53,484 - DEBUG - Checking if product_id 123518348 exists in product_ids
2025-04-17 09:05:53,485 - DEBUG - --- Processing request for /api/recommendations/102782859 ---
2025-04-17 09:05:53,486 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:05:53,486 - DEBUG - Limit set to: 10
2025-04-17 09:05:53,487 - DEBUG - Fetching product details from Tiki API for product_id: 123518348
2025-04-17 09:05:53,487 - DEBUG - --- Starting get_similar_products_by_id for product_id: 102782859 ---
2025-04-17 09:05:53,489 - DEBUG - Checking if product_id 102782859 exists in product_ids
2025-04-17 09:05:53,490 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:05:53,490 - DEBUG - Fetching product details from Tiki API for product_id: 102782859
2025-04-17 09:05:54,004 - DEBUG - Extracting product details
2025-04-17 09:05:54,008 - DEBUG - Extracting product details
2025-04-17 09:05:54,008 - DEBUG - Name: Tai nghe Remax RM-201 - Hàng chính hãng
2025-04-17 09:05:54,009 - DEBUG - Name: Tai nghe In Ear Remax RM330 - Hàng chính hãng
2025-04-17 09:05:54,012 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-17 09:05:54,015 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-17 09:05:54,016 - DEBUG - Brand_name: Remax
2025-04-17 09:05:54,016 - DEBUG - Brand_name: Remax
2025-04-17 09:05:54,020 - DEBUG - Encoding combined text to embedding
2025-04-17 09:05:54,023 - DEBUG - Encoding combined text to embedding
2025-04-17 09:05:54,485 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:05:54,485 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:05:54,485 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:05:54,486 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:05:54,502 - DEBUG - FAISS search results - distances: [[2.060875477433513e-13, 0.2062053084373474, 0.20735466480255127, 0.36586976051330566, 0.3676488995552063, 0.37697479128837585, 0.3882271647453308, 0.3888179063796997, 0.3909284472465515, 0.394778311252594, 0.3963314890861511]]
2025-04-17 09:05:54,502 - DEBUG - FAISS search results - distances: [[1.5445289361717962e-13, 0.24725571274757385, 0.29311609268188477, 0.2961730360984802, 0.31907978653907776, 0.34723448753356934, 0.3509403169155121, 0.3572787344455719, 0.3642429709434509, 0.3658698499202728, 0.3905647099018097]]
2025-04-17 09:05:54,504 - DEBUG - FAISS search results - indices: [[296, 103, 3024, 207, 544, 5317, 7719, 540, 670, 7857, 312]]
2025-04-17 09:05:54,505 - DEBUG - FAISS search results - indices: [[207, 1582, 103, 3024, 312, 5196, 7857, 283, 6892, 296, 7338]]
2025-04-17 09:05:54,509 - DEBUG - Filtered result_product_ids: [102785769, 102859364, 123518348, 118286272, 116963157, 12151865, 13524866, 180576829, 978850, 110850007]
2025-04-17 09:05:54,510 - DEBUG - Filtered result_product_ids: [202879835, 102785769, 102859364, 110850007, 126235874, 978850, 155780905, 270686707, 102782859, 272163837]
2025-04-17 09:05:54,513 - DEBUG - Checking product_id 102785769 in DataFrame
2025-04-17 09:05:54,515 - DEBUG - Checking product_id 202879835 in DataFrame
2025-04-17 09:05:54,531 - DEBUG - Added product 102785769 to similar_products
2025-04-17 09:05:54,535 - DEBUG - Added product 202879835 to similar_products
2025-04-17 09:05:54,535 - DEBUG - Checking product_id 102859364 in DataFrame
2025-04-17 09:05:54,536 - DEBUG - Checking product_id 102785769 in DataFrame
2025-04-17 09:05:54,537 - DEBUG - Added product 102859364 to similar_products
2025-04-17 09:05:54,541 - DEBUG - Added product 102785769 to similar_products
2025-04-17 09:05:54,542 - DEBUG - Checking product_id 123518348 in DataFrame
2025-04-17 09:05:54,543 - DEBUG - Checking product_id 102859364 in DataFrame
2025-04-17 09:05:54,547 - DEBUG - Added product 123518348 to similar_products
2025-04-17 09:05:54,551 - DEBUG - Added product 102859364 to similar_products
2025-04-17 09:05:54,553 - DEBUG - Checking product_id 118286272 in DataFrame
2025-04-17 09:05:54,555 - DEBUG - Checking product_id 110850007 in DataFrame
2025-04-17 09:05:54,561 - DEBUG - Added product 118286272 to similar_products
2025-04-17 09:05:54,565 - DEBUG - Added product 110850007 to similar_products
2025-04-17 09:05:54,566 - DEBUG - Checking product_id 116963157 in DataFrame
2025-04-17 09:05:54,569 - DEBUG - Checking product_id 126235874 in DataFrame
2025-04-17 09:05:54,574 - DEBUG - Added product 116963157 to similar_products
2025-04-17 09:05:54,577 - DEBUG - Added product 126235874 to similar_products
2025-04-17 09:05:54,579 - DEBUG - Checking product_id 12151865 in DataFrame
2025-04-17 09:05:54,582 - DEBUG - Checking product_id 978850 in DataFrame
2025-04-17 09:05:54,588 - DEBUG - Added product 12151865 to similar_products
2025-04-17 09:05:54,590 - DEBUG - Added product 978850 to similar_products
2025-04-17 09:05:54,591 - DEBUG - Checking product_id 13524866 in DataFrame
2025-04-17 09:05:54,594 - DEBUG - Checking product_id 155780905 in DataFrame
2025-04-17 09:05:54,598 - DEBUG - Added product 13524866 to similar_products
2025-04-17 09:05:54,603 - DEBUG - Added product 155780905 to similar_products
2025-04-17 09:05:54,604 - DEBUG - Checking product_id 180576829 in DataFrame
2025-04-17 09:05:54,608 - DEBUG - Checking product_id 270686707 in DataFrame
2025-04-17 09:05:54,614 - DEBUG - Added product 180576829 to similar_products
2025-04-17 09:05:54,617 - DEBUG - Added product 270686707 to similar_products
2025-04-17 09:05:54,622 - DEBUG - Checking product_id 978850 in DataFrame
2025-04-17 09:05:54,626 - DEBUG - Checking product_id 102782859 in DataFrame
2025-04-17 09:05:54,630 - DEBUG - Added product 978850 to similar_products
2025-04-17 09:05:54,634 - DEBUG - Added product 102782859 to similar_products
2025-04-17 09:05:54,637 - DEBUG - Checking product_id 110850007 in DataFrame
2025-04-17 09:05:54,637 - DEBUG - Checking product_id 272163837 in DataFrame
2025-04-17 09:05:54,638 - DEBUG - Added product 110850007 to similar_products
2025-04-17 09:05:54,644 - DEBUG - Added product 272163837 to similar_products
2025-04-17 09:05:54,646 - DEBUG - Final similar_products count: 10
2025-04-17 09:05:54,647 - DEBUG - Final similar_products count: 10
2025-04-17 09:05:54,652 - DEBUG - Final similar_products: [102785769, 102859364, 123518348, 118286272, 116963157, 12151865, 13524866, 180576829, 978850, 110850007]
2025-04-17 09:05:54,657 - DEBUG - Final similar_products: [202879835, 102785769, 102859364, 110850007, 126235874, 978850, 155780905, 270686707, 102782859, 272163837]
2025-04-17 09:05:54,658 - DEBUG - --- Completed get_similar_products_by_id for product_id: 102782859 ---
2025-04-17 09:05:54,663 - DEBUG - --- Completed get_similar_products_by_id for product_id: 123518348 ---
2025-04-17 09:05:54,666 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:05:54,668 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:05:54,670 - DEBUG - Preparing response with similar products
2025-04-17 09:05:54,672 - DEBUG - Preparing response with similar products
2025-04-17 09:05:54,714 - DEBUG - --- Completed request for /api/recommendations/102782859 ---
2025-04-17 09:05:54,732 - DEBUG - --- Completed request for /api/recommendations/123518348 ---
2025-04-17 09:05:57,938 - DEBUG - --- Processing request for /api/recommendations/123518348 ---
2025-04-17 09:05:57,939 - DEBUG - Limit set to: 10
2025-04-17 09:05:57,940 - DEBUG - --- Starting get_similar_products_by_id for product_id: 123518348 ---
2025-04-17 09:05:57,941 - DEBUG - Checking if product_id 123518348 exists in product_ids
2025-04-17 09:05:57,942 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:05:57,943 - DEBUG - Fetching product details from Tiki API for product_id: 123518348
2025-04-17 09:05:58,125 - DEBUG - Extracting product details
2025-04-17 09:05:58,126 - DEBUG - Name: Tai nghe Remax RM-201 - Hàng chính hãng
2025-04-17 09:05:58,128 - DEBUG - Category_name: Tai Nghe Có Dây Nhét Tai
2025-04-17 09:05:58,129 - DEBUG - Brand_name: Remax
2025-04-17 09:05:58,132 - DEBUG - Encoding combined text to embedding
2025-04-17 09:05:58,242 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:05:58,242 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:05:58,245 - DEBUG - FAISS search results - distances: [[1.5445289361717962e-13, 0.24725571274757385, 0.29311609268188477, 0.2961730360984802, 0.31907978653907776, 0.34723448753356934, 0.3509403169155121, 0.3572787344455719, 0.3642429709434509, 0.3658698499202728, 0.3905647099018097]]
2025-04-17 09:05:58,248 - DEBUG - FAISS search results - indices: [[207, 1582, 103, 3024, 312, 5196, 7857, 283, 6892, 296, 7338]]
2025-04-17 09:05:58,249 - DEBUG - Filtered result_product_ids: [202879835, 102785769, 102859364, 110850007, 126235874, 978850, 155780905, 270686707, 102782859, 272163837]
2025-04-17 09:05:58,251 - DEBUG - Checking product_id 202879835 in DataFrame
2025-04-17 09:05:58,252 - DEBUG - Added product 202879835 to similar_products
2025-04-17 09:05:58,253 - DEBUG - Checking product_id 102785769 in DataFrame
2025-04-17 09:05:58,254 - DEBUG - Added product 102785769 to similar_products
2025-04-17 09:05:58,254 - DEBUG - Checking product_id 102859364 in DataFrame
2025-04-17 09:05:58,255 - DEBUG - Added product 102859364 to similar_products
2025-04-17 09:05:58,256 - DEBUG - Checking product_id 110850007 in DataFrame
2025-04-17 09:05:58,258 - DEBUG - Added product 110850007 to similar_products
2025-04-17 09:05:58,259 - DEBUG - Checking product_id 126235874 in DataFrame
2025-04-17 09:05:58,260 - DEBUG - Added product 126235874 to similar_products
2025-04-17 09:05:58,260 - DEBUG - Checking product_id 978850 in DataFrame
2025-04-17 09:05:58,262 - DEBUG - Added product 978850 to similar_products
2025-04-17 09:05:58,262 - DEBUG - Checking product_id 155780905 in DataFrame
2025-04-17 09:05:58,264 - DEBUG - Added product 155780905 to similar_products
2025-04-17 09:05:58,264 - DEBUG - Checking product_id 270686707 in DataFrame
2025-04-17 09:05:58,268 - DEBUG - Added product 270686707 to similar_products
2025-04-17 09:05:58,269 - DEBUG - Checking product_id 102782859 in DataFrame
2025-04-17 09:05:58,270 - DEBUG - Added product 102782859 to similar_products
2025-04-17 09:05:58,271 - DEBUG - Checking product_id 272163837 in DataFrame
2025-04-17 09:05:58,272 - DEBUG - Added product 272163837 to similar_products
2025-04-17 09:05:58,273 - DEBUG - Final similar_products count: 10
2025-04-17 09:05:58,273 - DEBUG - Final similar_products: [202879835, 102785769, 102859364, 110850007, 126235874, 978850, 155780905, 270686707, 102782859, 272163837]
2025-04-17 09:05:58,274 - DEBUG - --- Completed get_similar_products_by_id for product_id: 123518348 ---
2025-04-17 09:05:58,274 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:05:58,275 - DEBUG - Preparing response with similar products
2025-04-17 09:05:58,282 - DEBUG - --- Completed request for /api/recommendations/123518348 ---
2025-04-17 09:06:26,137 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:06:26,137 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:06:26,138 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:06:30,403 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:06:30,404 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:06:30,405 - DEBUG - Loading FAISS index
2025-04-17 09:06:30,413 - DEBUG - Loading product DataFrame
2025-04-17 09:06:30,435 - DEBUG - Loading product_ids
2025-04-17 09:06:30,436 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:06:30,436 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:06:30,437 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:07:10,739 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:07:10,739 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:07:10,740 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:07:14,593 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:07:14,594 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:07:14,595 - DEBUG - Loading FAISS index
2025-04-17 09:07:14,614 - DEBUG - Loading product DataFrame
2025-04-17 09:07:14,636 - DEBUG - Loading product_ids
2025-04-17 09:07:14,637 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:07:14,638 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:07:14,639 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:11:12,495 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:11:12,495 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:11:12,496 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:11:15,623 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:11:15,624 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:11:15,624 - DEBUG - Loading FAISS index
2025-04-17 09:11:15,635 - DEBUG - Loading product DataFrame
2025-04-17 09:11:15,663 - DEBUG - Loading product_ids
2025-04-17 09:11:15,665 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:11:15,666 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:11:15,666 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:11:34,703 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:11:34,703 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:11:34,704 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:11:38,101 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:11:38,102 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:11:38,103 - DEBUG - Loading FAISS index
2025-04-17 09:11:38,115 - DEBUG - Loading product DataFrame
2025-04-17 09:11:38,173 - DEBUG - Loading product_ids
2025-04-17 09:11:38,177 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:11:38,178 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:11:38,179 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:11:54,362 - DEBUG - --- Processing request for /api/recommendations/276250848 ---
2025-04-17 09:11:54,362 - DEBUG - Limit set to: 10
2025-04-17 09:11:54,363 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276250848 ---
2025-04-17 09:11:54,364 - DEBUG - Checking if product_id 276250848 exists in product_ids
2025-04-17 09:11:54,364 - DEBUG - Product_id exists in vector database: False
2025-04-17 09:11:54,366 - DEBUG - Fetching product details from Tiki API for product_id: 276250848
2025-04-17 09:11:55,182 - DEBUG - Extracting product details
2025-04-17 09:11:55,269 - DEBUG - Brand_name: Samsung
2025-04-17 09:11:55,299 - DEBUG - Encoding combined text to embedding
2025-04-17 09:11:55,478 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:11:55,478 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:11:55,488 - DEBUG - FAISS search results - distances: [[0.17917698621749878, 0.18270835280418396, 0.18300119042396545, 0.19379845261573792, 0.20418068766593933, 0.20717504620552063, 0.21090546250343323, 0.21571066975593567, 0.21701058745384216, 0.22684380412101746, 0.23874607682228088]]
2025-04-17 09:11:55,489 - DEBUG - FAISS search results - indices: [[2204, 33, 2024, 224, 123, 242, 318, 228, 23, 204, 83]]
2025-04-17 09:11:55,490 - DEBUG - Filtered result_product_ids: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-17 09:11:55,491 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-17 09:11:55,493 - DEBUG - Added product 273186334 to similar_products
2025-04-17 09:11:55,494 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-17 09:11:55,496 - DEBUG - Added product 276250878 to similar_products
2025-04-17 09:11:55,509 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-17 09:11:55,511 - DEBUG - Added product 273029857 to similar_products
2025-04-17 09:11:55,512 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-17 09:11:55,514 - DEBUG - Added product 273636845 to similar_products
2025-04-17 09:11:55,515 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-17 09:11:55,517 - DEBUG - Added product 272348047 to similar_products
2025-04-17 09:11:55,518 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-17 09:11:55,520 - DEBUG - Added product 276274790 to similar_products
2025-04-17 09:11:55,520 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-17 09:11:55,523 - DEBUG - Added product 276944892 to similar_products
2025-04-17 09:11:55,523 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-17 09:11:55,525 - DEBUG - Added product 272328188 to similar_products
2025-04-17 09:11:55,526 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-17 09:11:55,528 - DEBUG - Added product 274405521 to similar_products
2025-04-17 09:11:55,544 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-17 09:11:55,546 - DEBUG - Added product 273610105 to similar_products
2025-04-17 09:11:55,547 - DEBUG - Final similar_products count: 10
2025-04-17 09:11:55,548 - DEBUG - Final similar_products: [273186334, 276250878, 273029857, 273636845, 272348047, 276274790, 276944892, 272328188, 274405521, 273610105]
2025-04-17 09:11:55,548 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276250848 ---
2025-04-17 09:11:55,549 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:11:55,550 - DEBUG - Preparing response with similar products
2025-04-17 09:11:55,556 - DEBUG - --- Completed request for /api/recommendations/276250848 ---
2025-04-17 09:12:46,764 - DEBUG - --- Processing request for /api/recommendations/276166741 ---
2025-04-17 09:12:46,766 - DEBUG - Limit set to: 10
2025-04-17 09:12:46,766 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276166741 ---
2025-04-17 09:12:46,767 - DEBUG - Checking if product_id 276166741 exists in product_ids
2025-04-17 09:12:46,768 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:12:46,769 - DEBUG - Fetching product details from Tiki API for product_id: 276166741
2025-04-17 09:12:47,454 - DEBUG - Extracting product details
2025-04-17 09:12:47,462 - DEBUG - Brand_name: Tecno
2025-04-17 09:12:47,465 - DEBUG - Encoding combined text to embedding
2025-04-17 09:12:47,522 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:12:47,523 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:12:47,525 - DEBUG - FAISS search results - distances: [[1.2842784019410913e-13, 0.31442129611968994, 0.33132219314575195, 0.33495086431503296, 0.3394099175930023, 0.3424556851387024, 0.3502369523048401, 0.3536352217197418, 0.3562469780445099, 0.3611341118812561, 0.36904382705688477]]
2025-04-17 09:12:47,526 - DEBUG - FAISS search results - indices: [[12, 23, 224, 1885, 240, 975, 1561, 644, 549, 318, 1550]]
2025-04-17 09:12:47,526 - DEBUG - Filtered result_product_ids: [274405521, 273636845, 273373420, 276536922, 277030799, 275206906, 277553639, 272850971, 276944892, 272241346]
2025-04-17 09:12:47,527 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-17 09:12:47,529 - DEBUG - Added product 274405521 to similar_products
2025-04-17 09:12:47,546 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-17 09:12:47,549 - DEBUG - Added product 273636845 to similar_products
2025-04-17 09:12:47,550 - DEBUG - Checking product_id 273373420 in DataFrame
2025-04-17 09:12:47,551 - DEBUG - Added product 273373420 to similar_products
2025-04-17 09:12:47,552 - DEBUG - Checking product_id 276536922 in DataFrame
2025-04-17 09:12:47,554 - DEBUG - Added product 276536922 to similar_products
2025-04-17 09:12:47,554 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-17 09:12:47,555 - DEBUG - Added product 277030799 to similar_products
2025-04-17 09:12:47,556 - DEBUG - Checking product_id 275206906 in DataFrame
2025-04-17 09:12:47,557 - DEBUG - Added product 275206906 to similar_products
2025-04-17 09:12:47,558 - DEBUG - Checking product_id 277553639 in DataFrame
2025-04-17 09:12:47,560 - DEBUG - Added product 277553639 to similar_products
2025-04-17 09:12:47,560 - DEBUG - Checking product_id 272850971 in DataFrame
2025-04-17 09:12:47,562 - DEBUG - Added product 272850971 to similar_products
2025-04-17 09:12:47,562 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-17 09:12:47,564 - DEBUG - Added product 276944892 to similar_products
2025-04-17 09:12:47,565 - DEBUG - Checking product_id 272241346 in DataFrame
2025-04-17 09:12:47,567 - DEBUG - Added product 272241346 to similar_products
2025-04-17 09:12:47,568 - DEBUG - Final similar_products count: 10
2025-04-17 09:12:47,568 - DEBUG - Final similar_products: [274405521, 273636845, 273373420, 276536922, 277030799, 275206906, 277553639, 272850971, 276944892, 272241346]
2025-04-17 09:12:47,569 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276166741 ---
2025-04-17 09:12:47,569 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:12:47,570 - DEBUG - Preparing response with similar products
2025-04-17 09:12:47,574 - DEBUG - --- Completed request for /api/recommendations/276166741 ---
2025-04-17 09:12:51,154 - DEBUG - --- Processing request for /api/recommendations/107018282 ---
2025-04-17 09:12:51,155 - DEBUG - Limit set to: 10
2025-04-17 09:12:51,156 - DEBUG - --- Starting get_similar_products_by_id for product_id: 107018282 ---
2025-04-17 09:12:51,157 - DEBUG - Checking if product_id 107018282 exists in product_ids
2025-04-17 09:12:51,159 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:12:51,160 - DEBUG - Fetching product details from Tiki API for product_id: 107018282
2025-04-17 09:12:51,279 - DEBUG - Extracting product details
2025-04-17 09:12:51,289 - DEBUG - Brand_name: Duka
2025-04-17 09:12:51,292 - DEBUG - Encoding combined text to embedding
2025-04-17 09:12:51,368 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:12:51,369 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:12:51,371 - DEBUG - FAISS search results - distances: [[2.171277616253367e-13, 0.4112345278263092, 0.4255812168121338, 0.42996540665626526, 0.4346553087234497, 0.43652600049972534, 0.43725964426994324, 0.43770885467529297, 0.4407106935977936, 0.4490489959716797, 0.4502086639404297]]
2025-04-17 09:12:51,372 - DEBUG - FAISS search results - indices: [[6, 4390, 3543, 7794, 2363, 6045, 8276, 4174, 7953, 3598, 3506]]
2025-04-17 09:12:51,373 - DEBUG - Filtered result_product_ids: [71148311, 276860431, 273509917, 276948201, 345778, 163543262, 272244112, 26046907, 273682277, 273288529]
2025-04-17 09:12:51,373 - DEBUG - Checking product_id 71148311 in DataFrame
2025-04-17 09:12:51,375 - DEBUG - Added product 71148311 to similar_products
2025-04-17 09:12:51,376 - DEBUG - Checking product_id 276860431 in DataFrame
2025-04-17 09:12:51,377 - DEBUG - Added product 276860431 to similar_products
2025-04-17 09:12:51,378 - DEBUG - Checking product_id 273509917 in DataFrame
2025-04-17 09:12:51,379 - DEBUG - Added product 273509917 to similar_products
2025-04-17 09:12:51,380 - DEBUG - Checking product_id 276948201 in DataFrame
2025-04-17 09:12:51,381 - DEBUG - Added product 276948201 to similar_products
2025-04-17 09:12:51,382 - DEBUG - Checking product_id 345778 in DataFrame
2025-04-17 09:12:51,383 - DEBUG - Added product 345778 to similar_products
2025-04-17 09:12:51,384 - DEBUG - Checking product_id 163543262 in DataFrame
2025-04-17 09:12:51,385 - DEBUG - Added product 163543262 to similar_products
2025-04-17 09:12:51,386 - DEBUG - Checking product_id 272244112 in DataFrame
2025-04-17 09:12:51,388 - DEBUG - Added product 272244112 to similar_products
2025-04-17 09:12:51,389 - DEBUG - Checking product_id 26046907 in DataFrame
2025-04-17 09:12:51,391 - DEBUG - Added product 26046907 to similar_products
2025-04-17 09:12:51,391 - DEBUG - Checking product_id 273682277 in DataFrame
2025-04-17 09:12:51,393 - DEBUG - Added product 273682277 to similar_products
2025-04-17 09:12:51,393 - DEBUG - Checking product_id 273288529 in DataFrame
2025-04-17 09:12:51,395 - DEBUG - Added product 273288529 to similar_products
2025-04-17 09:12:51,395 - DEBUG - Final similar_products count: 10
2025-04-17 09:12:51,396 - DEBUG - Final similar_products: [71148311, 276860431, 273509917, 276948201, 345778, 163543262, 272244112, 26046907, 273682277, 273288529]
2025-04-17 09:12:51,396 - DEBUG - --- Completed get_similar_products_by_id for product_id: 107018282 ---
2025-04-17 09:12:51,397 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:12:51,398 - DEBUG - Preparing response with similar products
2025-04-17 09:12:51,404 - DEBUG - --- Completed request for /api/recommendations/107018282 ---
2025-04-17 09:12:57,432 - DEBUG - --- Processing request for /api/recommendations/107018282 ---
2025-04-17 09:12:57,434 - DEBUG - Limit set to: 10
2025-04-17 09:12:57,434 - DEBUG - --- Starting get_similar_products_by_id for product_id: 107018282 ---
2025-04-17 09:12:57,435 - DEBUG - Checking if product_id 107018282 exists in product_ids
2025-04-17 09:12:57,436 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:12:57,437 - DEBUG - Fetching product details from Tiki API for product_id: 107018282
2025-04-17 09:12:57,543 - DEBUG - Extracting product details
2025-04-17 09:12:57,550 - DEBUG - Brand_name: Duka
2025-04-17 09:12:57,553 - DEBUG - Encoding combined text to embedding
2025-04-17 09:12:57,614 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:12:57,615 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:12:57,617 - DEBUG - FAISS search results - distances: [[2.171277616253367e-13, 0.4112345278263092, 0.4255812168121338, 0.42996540665626526, 0.4346553087234497, 0.43652600049972534, 0.43725964426994324, 0.43770885467529297, 0.4407106935977936, 0.4490489959716797, 0.4502086639404297]]
2025-04-17 09:12:57,618 - DEBUG - FAISS search results - indices: [[6, 4390, 3543, 7794, 2363, 6045, 8276, 4174, 7953, 3598, 3506]]
2025-04-17 09:12:57,618 - DEBUG - Filtered result_product_ids: [71148311, 276860431, 273509917, 276948201, 345778, 163543262, 272244112, 26046907, 273682277, 273288529]
2025-04-17 09:12:57,619 - DEBUG - Checking product_id 71148311 in DataFrame
2025-04-17 09:12:57,621 - DEBUG - Added product 71148311 to similar_products
2025-04-17 09:12:57,622 - DEBUG - Checking product_id 276860431 in DataFrame
2025-04-17 09:12:57,624 - DEBUG - Added product 276860431 to similar_products
2025-04-17 09:12:57,624 - DEBUG - Checking product_id 273509917 in DataFrame
2025-04-17 09:12:57,626 - DEBUG - Added product 273509917 to similar_products
2025-04-17 09:12:57,626 - DEBUG - Checking product_id 276948201 in DataFrame
2025-04-17 09:12:57,628 - DEBUG - Added product 276948201 to similar_products
2025-04-17 09:12:57,629 - DEBUG - Checking product_id 345778 in DataFrame
2025-04-17 09:12:57,631 - DEBUG - Added product 345778 to similar_products
2025-04-17 09:12:57,631 - DEBUG - Checking product_id 163543262 in DataFrame
2025-04-17 09:12:57,633 - DEBUG - Added product 163543262 to similar_products
2025-04-17 09:12:57,634 - DEBUG - Checking product_id 272244112 in DataFrame
2025-04-17 09:12:57,635 - DEBUG - Added product 272244112 to similar_products
2025-04-17 09:12:57,636 - DEBUG - Checking product_id 26046907 in DataFrame
2025-04-17 09:12:57,639 - DEBUG - Added product 26046907 to similar_products
2025-04-17 09:12:57,639 - DEBUG - Checking product_id 273682277 in DataFrame
2025-04-17 09:12:57,641 - DEBUG - Added product 273682277 to similar_products
2025-04-17 09:12:57,641 - DEBUG - Checking product_id 273288529 in DataFrame
2025-04-17 09:12:57,642 - DEBUG - Added product 273288529 to similar_products
2025-04-17 09:12:57,643 - DEBUG - Final similar_products count: 10
2025-04-17 09:12:57,644 - DEBUG - Final similar_products: [71148311, 276860431, 273509917, 276948201, 345778, 163543262, 272244112, 26046907, 273682277, 273288529]
2025-04-17 09:12:57,644 - DEBUG - --- Completed get_similar_products_by_id for product_id: 107018282 ---
2025-04-17 09:12:57,645 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:12:57,646 - DEBUG - Preparing response with similar products
2025-04-17 09:12:57,650 - DEBUG - --- Completed request for /api/recommendations/107018282 ---
2025-04-17 09:13:08,252 - DEBUG - --- Processing request for /api/recommendations/276281988 ---
2025-04-17 09:13:08,253 - DEBUG - Limit set to: 10
2025-04-17 09:13:08,253 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276281988 ---
2025-04-17 09:13:08,254 - DEBUG - Checking if product_id 276281988 exists in product_ids
2025-04-17 09:13:08,256 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:13:08,256 - DEBUG - Fetching product details from Tiki API for product_id: 276281988
2025-04-17 09:13:08,544 - DEBUG - Extracting product details
2025-04-17 09:13:08,568 - DEBUG - Brand_name: Samsung
2025-04-17 09:13:08,573 - DEBUG - Encoding combined text to embedding
2025-04-17 09:13:08,645 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:13:08,646 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:13:08,648 - DEBUG - FAISS search results - distances: [[0.0009191579883918166, 0.0865689143538475, 0.10723577439785004, 0.17993055284023285, 0.18983596563339233, 0.20008771121501923, 0.21955028176307678, 0.24247026443481445, 0.24816139042377472, 0.2549479007720947, 0.2637729346752167]]
2025-04-17 09:13:08,648 - DEBUG - FAISS search results - indices: [[83, 1550, 1015, 224, 1196, 204, 1311, 1458, 230, 1785, 1115]]
2025-04-17 09:13:08,649 - DEBUG - Filtered result_product_ids: [272241346, 272238679, 273636845, 276802409, 273610105, 276925932, 272273680, 277356031, 273438458, 277490201]
2025-04-17 09:13:08,650 - DEBUG - Checking product_id 272241346 in DataFrame
2025-04-17 09:13:08,652 - DEBUG - Added product 272241346 to similar_products
2025-04-17 09:13:08,652 - DEBUG - Checking product_id 272238679 in DataFrame
2025-04-17 09:13:08,655 - DEBUG - Added product 272238679 to similar_products
2025-04-17 09:13:08,673 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-17 09:13:08,676 - DEBUG - Added product 273636845 to similar_products
2025-04-17 09:13:08,677 - DEBUG - Checking product_id 276802409 in DataFrame
2025-04-17 09:13:08,679 - DEBUG - Added product 276802409 to similar_products
2025-04-17 09:13:08,680 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-17 09:13:08,682 - DEBUG - Added product 273610105 to similar_products
2025-04-17 09:13:08,683 - DEBUG - Checking product_id 276925932 in DataFrame
2025-04-17 09:13:08,685 - DEBUG - Added product 276925932 to similar_products
2025-04-17 09:13:08,686 - DEBUG - Checking product_id 272273680 in DataFrame
2025-04-17 09:13:08,687 - DEBUG - Added product 272273680 to similar_products
2025-04-17 09:13:08,688 - DEBUG - Checking product_id 277356031 in DataFrame
2025-04-17 09:13:08,690 - DEBUG - Added product 277356031 to similar_products
2025-04-17 09:13:08,691 - DEBUG - Checking product_id 273438458 in DataFrame
2025-04-17 09:13:08,693 - DEBUG - Added product 273438458 to similar_products
2025-04-17 09:13:08,694 - DEBUG - Checking product_id 277490201 in DataFrame
2025-04-17 09:13:08,696 - DEBUG - Added product 277490201 to similar_products
2025-04-17 09:13:08,696 - DEBUG - Final similar_products count: 10
2025-04-17 09:13:08,697 - DEBUG - Final similar_products: [272241346, 272238679, 273636845, 276802409, 273610105, 276925932, 272273680, 277356031, 273438458, 277490201]
2025-04-17 09:13:08,697 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276281988 ---
2025-04-17 09:13:08,698 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:13:08,699 - DEBUG - Preparing response with similar products
2025-04-17 09:13:08,705 - DEBUG - --- Completed request for /api/recommendations/276281988 ---
2025-04-17 09:13:11,737 - DEBUG - --- Processing request for /api/recommendations/271798615 ---
2025-04-17 09:13:11,738 - DEBUG - Limit set to: 10
2025-04-17 09:13:11,740 - DEBUG - --- Starting get_similar_products_by_id for product_id: 271798615 ---
2025-04-17 09:13:11,740 - DEBUG - Checking if product_id 271798615 exists in product_ids
2025-04-17 09:13:11,741 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:13:11,742 - DEBUG - Fetching product details from Tiki API for product_id: 271798615
2025-04-17 09:13:11,886 - DEBUG - Extracting product details
2025-04-17 09:13:11,899 - DEBUG - Brand_name: Oukitel
2025-04-17 09:13:11,903 - DEBUG - Encoding combined text to embedding
2025-04-17 09:13:12,061 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:13:12,062 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:13:12,064 - DEBUG - FAISS search results - distances: [[0.0, 0.33900386095046997, 0.34264716506004333, 0.3569304943084717, 0.38780003786087036, 0.40427643060684204, 0.4066769778728485, 0.41162043809890747, 0.41535866260528564, 0.41883206367492676, 0.42445677518844604]]
2025-04-17 09:13:12,065 - DEBUG - FAISS search results - indices: [[44, 1310, 1773, 871, 1350, 1204, 549, 975, 668, 969, 1885]]
2025-04-17 09:13:12,065 - DEBUG - Filtered result_product_ids: [274378214, 273430216, 271730109, 275746497, 274639765, 272850971, 277030799, 277004858, 277014407, 273373420]
2025-04-17 09:13:12,066 - DEBUG - Checking product_id 274378214 in DataFrame
2025-04-17 09:13:12,067 - DEBUG - Added product 274378214 to similar_products
2025-04-17 09:13:12,068 - DEBUG - Checking product_id 273430216 in DataFrame
2025-04-17 09:13:12,070 - DEBUG - Added product 273430216 to similar_products
2025-04-17 09:13:12,071 - DEBUG - Checking product_id 271730109 in DataFrame
2025-04-17 09:13:12,073 - DEBUG - Added product 271730109 to similar_products
2025-04-17 09:13:12,074 - DEBUG - Checking product_id 275746497 in DataFrame
2025-04-17 09:13:12,077 - DEBUG - Added product 275746497 to similar_products
2025-04-17 09:13:12,078 - DEBUG - Checking product_id 274639765 in DataFrame
2025-04-17 09:13:12,080 - DEBUG - Added product 274639765 to similar_products
2025-04-17 09:13:12,082 - DEBUG - Checking product_id 272850971 in DataFrame
2025-04-17 09:13:12,083 - DEBUG - Added product 272850971 to similar_products
2025-04-17 09:13:12,084 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-17 09:13:12,086 - DEBUG - Added product 277030799 to similar_products
2025-04-17 09:13:12,087 - DEBUG - Checking product_id 277004858 in DataFrame
2025-04-17 09:13:12,089 - DEBUG - Added product 277004858 to similar_products
2025-04-17 09:13:12,090 - DEBUG - Checking product_id 277014407 in DataFrame
2025-04-17 09:13:12,092 - DEBUG - Added product 277014407 to similar_products
2025-04-17 09:13:12,094 - DEBUG - Checking product_id 273373420 in DataFrame
2025-04-17 09:13:12,097 - DEBUG - Added product 273373420 to similar_products
2025-04-17 09:13:12,099 - DEBUG - Final similar_products count: 10
2025-04-17 09:13:12,100 - DEBUG - Final similar_products: [274378214, 273430216, 271730109, 275746497, 274639765, 272850971, 277030799, 277004858, 277014407, 273373420]
2025-04-17 09:13:12,100 - DEBUG - --- Completed get_similar_products_by_id for product_id: 271798615 ---
2025-04-17 09:13:12,101 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:13:12,102 - DEBUG - Preparing response with similar products
2025-04-17 09:13:12,108 - DEBUG - --- Completed request for /api/recommendations/271798615 ---
2025-04-17 09:13:17,809 - DEBUG - --- Processing request for /api/recommendations/274378214 ---
2025-04-17 09:13:17,810 - DEBUG - Limit set to: 10
2025-04-17 09:13:17,811 - DEBUG - --- Starting get_similar_products_by_id for product_id: 274378214 ---
2025-04-17 09:13:17,811 - DEBUG - Checking if product_id 274378214 exists in product_ids
2025-04-17 09:13:17,812 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:13:17,812 - DEBUG - Fetching product details from Tiki API for product_id: 274378214
2025-04-17 09:13:17,930 - DEBUG - Extracting product details
2025-04-17 09:13:17,946 - DEBUG - Brand_name: Ulefone
2025-04-17 09:13:17,951 - DEBUG - Encoding combined text to embedding
2025-04-17 09:13:18,063 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:13:18,064 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:13:18,066 - DEBUG - FAISS search results - distances: [[1.450260809880699e-13, 0.3390038013458252, 0.3538280129432678, 0.3888947367668152, 0.3933613896369934, 0.3988358974456787, 0.4168311357498169, 0.4346586763858795, 0.44880411028862, 0.45400434732437134, 0.45845216512680054]]
2025-04-17 09:13:18,068 - DEBUG - FAISS search results - indices: [[1310, 44, 1773, 1785, 1, 871, 1833, 1427, 1885, 2274, 1205]]
2025-04-17 09:13:18,068 - DEBUG - Filtered result_product_ids: [271798615, 273430216, 273438458, 273438724, 271730109, 274544634, 273412211, 273373420, 277315392, 230157205]
2025-04-17 09:13:18,069 - DEBUG - Checking product_id 271798615 in DataFrame
2025-04-17 09:13:18,071 - DEBUG - Added product 271798615 to similar_products
2025-04-17 09:13:18,072 - DEBUG - Checking product_id 273430216 in DataFrame
2025-04-17 09:13:18,074 - DEBUG - Added product 273430216 to similar_products
2025-04-17 09:13:18,075 - DEBUG - Checking product_id 273438458 in DataFrame
2025-04-17 09:13:18,078 - DEBUG - Added product 273438458 to similar_products
2025-04-17 09:13:18,079 - DEBUG - Checking product_id 273438724 in DataFrame
2025-04-17 09:13:18,082 - DEBUG - Added product 273438724 to similar_products
2025-04-17 09:13:18,083 - DEBUG - Checking product_id 271730109 in DataFrame
2025-04-17 09:13:18,084 - DEBUG - Added product 271730109 to similar_products
2025-04-17 09:13:18,085 - DEBUG - Checking product_id 274544634 in DataFrame
2025-04-17 09:13:18,087 - DEBUG - Added product 274544634 to similar_products
2025-04-17 09:13:18,088 - DEBUG - Checking product_id 273412211 in DataFrame
2025-04-17 09:13:18,090 - DEBUG - Added product 273412211 to similar_products
2025-04-17 09:13:18,091 - DEBUG - Checking product_id 273373420 in DataFrame
2025-04-17 09:13:18,093 - DEBUG - Added product 273373420 to similar_products
2025-04-17 09:13:18,095 - DEBUG - Checking product_id 277315392 in DataFrame
2025-04-17 09:13:18,097 - DEBUG - Added product 277315392 to similar_products
2025-04-17 09:13:18,098 - DEBUG - Checking product_id 230157205 in DataFrame
2025-04-17 09:13:18,100 - DEBUG - Added product 230157205 to similar_products
2025-04-17 09:13:18,101 - DEBUG - Final similar_products count: 10
2025-04-17 09:13:18,101 - DEBUG - Final similar_products: [271798615, 273430216, 273438458, 273438724, 271730109, 274544634, 273412211, 273373420, 277315392, 230157205]
2025-04-17 09:13:18,102 - DEBUG - --- Completed get_similar_products_by_id for product_id: 274378214 ---
2025-04-17 09:13:18,103 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:13:18,104 - DEBUG - Preparing response with similar products
2025-04-17 09:13:18,112 - DEBUG - --- Completed request for /api/recommendations/274378214 ---
2025-04-17 09:13:26,221 - DEBUG - --- Processing request for /api/recommendations/274405521 ---
2025-04-17 09:13:26,222 - DEBUG - Limit set to: 10
2025-04-17 09:13:26,223 - DEBUG - --- Starting get_similar_products_by_id for product_id: 274405521 ---
2025-04-17 09:13:26,223 - DEBUG - Checking if product_id 274405521 exists in product_ids
2025-04-17 09:13:26,224 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:13:26,226 - DEBUG - Fetching product details from Tiki API for product_id: 274405521
2025-04-17 09:13:26,441 - DEBUG - Extracting product details
2025-04-17 09:13:26,453 - DEBUG - Brand_name: Samsung
2025-04-17 09:13:26,457 - DEBUG - Encoding combined text to embedding
2025-04-17 09:13:26,512 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:13:26,513 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:13:26,515 - DEBUG - FAISS search results - distances: [[1.0428638475782487e-13, 0.036536335945129395, 0.049063146114349365, 0.0531403124332428, 0.07421354204416275, 0.07915368676185608, 0.12211150676012039, 0.1793418824672699, 0.18274562060832977, 0.19288082420825958, 0.19952958822250366]]
2025-04-17 09:13:26,517 - DEBUG - FAISS search results - indices: [[23, 228, 123, 242, 315, 318, 213, 1353, 2204, 55, 72]]
2025-04-17 09:13:26,518 - DEBUG - Filtered result_product_ids: [272328188, 272348047, 276274790, 276944868, 276944892, 277437876, 277360329, 273186334, 273664463, 273668660]
2025-04-17 09:13:26,519 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-17 09:13:26,521 - DEBUG - Added product 272328188 to similar_products
2025-04-17 09:13:26,522 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-17 09:13:26,524 - DEBUG - Added product 272348047 to similar_products
2025-04-17 09:13:26,525 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-17 09:13:26,529 - DEBUG - Added product 276274790 to similar_products
2025-04-17 09:13:26,531 - DEBUG - Checking product_id 276944868 in DataFrame
2025-04-17 09:13:26,533 - DEBUG - Added product 276944868 to similar_products
2025-04-17 09:13:26,534 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-17 09:13:26,535 - DEBUG - Added product 276944892 to similar_products
2025-04-17 09:13:26,536 - DEBUG - Checking product_id 277437876 in DataFrame
2025-04-17 09:13:26,537 - DEBUG - Added product 277437876 to similar_products
2025-04-17 09:13:26,538 - DEBUG - Checking product_id 277360329 in DataFrame
2025-04-17 09:13:26,540 - DEBUG - Added product 277360329 to similar_products
2025-04-17 09:13:26,541 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-17 09:13:26,543 - DEBUG - Added product 273186334 to similar_products
2025-04-17 09:13:26,544 - DEBUG - Checking product_id 273664463 in DataFrame
2025-04-17 09:13:26,546 - DEBUG - Added product 273664463 to similar_products
2025-04-17 09:13:26,549 - DEBUG - Checking product_id 273668660 in DataFrame
2025-04-17 09:13:26,552 - DEBUG - Added product 273668660 to similar_products
2025-04-17 09:13:26,553 - DEBUG - Final similar_products count: 10
2025-04-17 09:13:26,554 - DEBUG - Final similar_products: [272328188, 272348047, 276274790, 276944868, 276944892, 277437876, 277360329, 273186334, 273664463, 273668660]
2025-04-17 09:13:26,555 - DEBUG - --- Completed get_similar_products_by_id for product_id: 274405521 ---
2025-04-17 09:13:26,556 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:13:26,557 - DEBUG - Preparing response with similar products
2025-04-17 09:13:26,565 - DEBUG - --- Completed request for /api/recommendations/274405521 ---
2025-04-17 09:13:30,071 - DEBUG - --- Processing request for /api/recommendations/276944868 ---
2025-04-17 09:13:30,073 - DEBUG - Limit set to: 10
2025-04-17 09:13:30,074 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276944868 ---
2025-04-17 09:13:30,074 - DEBUG - Checking if product_id 276944868 exists in product_ids
2025-04-17 09:13:30,075 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:13:30,076 - DEBUG - Fetching product details from Tiki API for product_id: 276944868
2025-04-17 09:13:30,803 - DEBUG - Extracting product details
2025-04-17 09:13:30,810 - DEBUG - Brand_name: Samsung
2025-04-17 09:13:30,813 - DEBUG - Encoding combined text to embedding
2025-04-17 09:13:30,859 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:13:30,859 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:13:30,861 - DEBUG - FAISS search results - distances: [[1.2217523271285807e-13, 0.04260798543691635, 0.055214397609233856, 0.06198975443840027, 0.06883507966995239, 0.07421356439590454, 0.09858311712741852, 0.17378440499305725, 0.18478958308696747, 0.1925327181816101, 0.1938260942697525]]
2025-04-17 09:13:30,861 - DEBUG - FAISS search results - indices: [[315, 242, 228, 123, 318, 23, 213, 1353, 1265, 621, 1304]]
2025-04-17 09:13:30,862 - DEBUG - Filtered result_product_ids: [276274790, 272328188, 272348047, 276944892, 274405521, 277437876, 277360329, 274156763, 277356914, 277360073]
2025-04-17 09:13:30,862 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-17 09:13:30,864 - DEBUG - Added product 276274790 to similar_products
2025-04-17 09:13:30,866 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-17 09:13:30,868 - DEBUG - Added product 272328188 to similar_products
2025-04-17 09:13:30,869 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-17 09:13:30,870 - DEBUG - Added product 272348047 to similar_products
2025-04-17 09:13:30,871 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-17 09:13:30,873 - DEBUG - Added product 276944892 to similar_products
2025-04-17 09:13:30,874 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-17 09:13:30,875 - DEBUG - Added product 274405521 to similar_products
2025-04-17 09:13:30,875 - DEBUG - Checking product_id 277437876 in DataFrame
2025-04-17 09:13:30,877 - DEBUG - Added product 277437876 to similar_products
2025-04-17 09:13:30,878 - DEBUG - Checking product_id 277360329 in DataFrame
2025-04-17 09:13:30,879 - DEBUG - Added product 277360329 to similar_products
2025-04-17 09:13:30,880 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-17 09:13:30,882 - DEBUG - Added product 274156763 to similar_products
2025-04-17 09:13:30,883 - DEBUG - Checking product_id 277356914 in DataFrame
2025-04-17 09:13:30,885 - DEBUG - Added product 277356914 to similar_products
2025-04-17 09:13:30,885 - DEBUG - Checking product_id 277360073 in DataFrame
2025-04-17 09:13:30,887 - DEBUG - Added product 277360073 to similar_products
2025-04-17 09:13:30,887 - DEBUG - Final similar_products count: 10
2025-04-17 09:13:30,888 - DEBUG - Final similar_products: [276274790, 272328188, 272348047, 276944892, 274405521, 277437876, 277360329, 274156763, 277356914, 277360073]
2025-04-17 09:13:30,888 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276944868 ---
2025-04-17 09:13:30,889 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:13:30,890 - DEBUG - Preparing response with similar products
2025-04-17 09:13:30,894 - DEBUG - --- Completed request for /api/recommendations/276944868 ---
2025-04-17 09:13:35,618 - DEBUG - --- Processing request for /api/recommendations/272348047 ---
2025-04-17 09:13:35,620 - DEBUG - Limit set to: 10
2025-04-17 09:13:35,621 - DEBUG - --- Starting get_similar_products_by_id for product_id: 272348047 ---
2025-04-17 09:13:35,622 - DEBUG - Checking if product_id 272348047 exists in product_ids
2025-04-17 09:13:35,622 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:13:35,623 - DEBUG - Fetching product details from Tiki API for product_id: 272348047
2025-04-17 09:13:36,307 - DEBUG - Extracting product details
2025-04-17 09:13:36,314 - DEBUG - Brand_name: Samsung
2025-04-17 09:13:36,317 - DEBUG - Encoding combined text to embedding
2025-04-17 09:13:36,367 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:13:36,368 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:13:36,370 - DEBUG - FAISS search results - distances: [[1.4342963394666647e-13, 0.015570789575576782, 0.029496390372514725, 0.04906315356492996, 0.061989761888980865, 0.0629267692565918, 0.08717593550682068, 0.17413324117660522, 0.18362681567668915, 0.19785751402378082, 0.199163556098938]]
2025-04-17 09:13:36,370 - DEBUG - FAISS search results - indices: [[123, 228, 242, 23, 315, 318, 213, 2204, 1353, 1265, 2545]]
2025-04-17 09:13:36,371 - DEBUG - Filtered result_product_ids: [272328188, 276274790, 274405521, 276944868, 276944892, 277437876, 273186334, 277360329, 274156763, 276945332]
2025-04-17 09:13:36,371 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-17 09:13:36,373 - DEBUG - Added product 272328188 to similar_products
2025-04-17 09:13:36,373 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-17 09:13:36,375 - DEBUG - Added product 276274790 to similar_products
2025-04-17 09:13:36,376 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-17 09:13:36,378 - DEBUG - Added product 274405521 to similar_products
2025-04-17 09:13:36,378 - DEBUG - Checking product_id 276944868 in DataFrame
2025-04-17 09:13:36,379 - DEBUG - Added product 276944868 to similar_products
2025-04-17 09:13:36,380 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-17 09:13:36,381 - DEBUG - Added product 276944892 to similar_products
2025-04-17 09:13:36,382 - DEBUG - Checking product_id 277437876 in DataFrame
2025-04-17 09:13:36,383 - DEBUG - Added product 277437876 to similar_products
2025-04-17 09:13:36,384 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-17 09:13:36,385 - DEBUG - Added product 273186334 to similar_products
2025-04-17 09:13:36,386 - DEBUG - Checking product_id 277360329 in DataFrame
2025-04-17 09:13:36,387 - DEBUG - Added product 277360329 to similar_products
2025-04-17 09:13:36,388 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-17 09:13:36,389 - DEBUG - Added product 274156763 to similar_products
2025-04-17 09:13:36,390 - DEBUG - Checking product_id 276945332 in DataFrame
2025-04-17 09:13:36,392 - DEBUG - Added product 276945332 to similar_products
2025-04-17 09:13:36,393 - DEBUG - Final similar_products count: 10
2025-04-17 09:13:36,393 - DEBUG - Final similar_products: [272328188, 276274790, 274405521, 276944868, 276944892, 277437876, 273186334, 277360329, 274156763, 276945332]
2025-04-17 09:13:36,394 - DEBUG - --- Completed get_similar_products_by_id for product_id: 272348047 ---
2025-04-17 09:13:36,394 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:13:36,395 - DEBUG - Preparing response with similar products
2025-04-17 09:13:36,399 - DEBUG - --- Completed request for /api/recommendations/272348047 ---
2025-04-17 09:14:20,319 - DEBUG - --- Processing request for /api/recommendations/270975124 ---
2025-04-17 09:14:20,320 - DEBUG - Limit set to: 10
2025-04-17 09:14:20,321 - DEBUG - --- Starting get_similar_products_by_id for product_id: 270975124 ---
2025-04-17 09:14:20,322 - DEBUG - Checking if product_id 270975124 exists in product_ids
2025-04-17 09:14:20,323 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:14:20,324 - DEBUG - Fetching product details from Tiki API for product_id: 270975124
2025-04-17 09:14:20,527 - DEBUG - Extracting product details
2025-04-17 09:14:20,538 - DEBUG - Brand_name: OPPO
2025-04-17 09:14:20,541 - DEBUG - Encoding combined text to embedding
2025-04-17 09:14:20,609 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:14:20,610 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:14:20,612 - DEBUG - FAISS search results - distances: [[1.1005309348294939e-13, 0.23759132623672485, 0.2565249502658844, 0.284262478351593, 0.29593971371650696, 0.3031706213951111, 0.30994874238967896, 0.31468427181243896, 0.315155565738678, 0.31857672333717346, 0.32109448313713074]]
2025-04-17 09:14:20,612 - DEBUG - FAISS search results - indices: [[24, 75, 261, 1426, 1265, 2242, 831, 111, 2236, 72, 55]]
2025-04-17 09:14:20,613 - DEBUG - Filtered result_product_ids: [273252926, 271128271, 275386465, 274156763, 230203067, 274171148, 276046675, 277175972, 273668660, 273664463]
2025-04-17 09:14:20,614 - DEBUG - Checking product_id 273252926 in DataFrame
2025-04-17 09:14:20,615 - DEBUG - Added product 273252926 to similar_products
2025-04-17 09:14:20,617 - DEBUG - Checking product_id 271128271 in DataFrame
2025-04-17 09:14:20,621 - DEBUG - Added product 271128271 to similar_products
2025-04-17 09:14:20,622 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-17 09:14:20,624 - DEBUG - Added product 275386465 to similar_products
2025-04-17 09:14:20,625 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-17 09:14:20,627 - DEBUG - Added product 274156763 to similar_products
2025-04-17 09:14:20,628 - DEBUG - Checking product_id 230203067 in DataFrame
2025-04-17 09:14:20,630 - DEBUG - Added product 230203067 to similar_products
2025-04-17 09:14:20,631 - DEBUG - Checking product_id 274171148 in DataFrame
2025-04-17 09:14:20,633 - DEBUG - Added product 274171148 to similar_products
2025-04-17 09:14:20,636 - DEBUG - Checking product_id 276046675 in DataFrame
2025-04-17 09:14:20,639 - DEBUG - Added product 276046675 to similar_products
2025-04-17 09:14:20,640 - DEBUG - Checking product_id 277175972 in DataFrame
2025-04-17 09:14:20,642 - DEBUG - Added product 277175972 to similar_products
2025-04-17 09:14:20,643 - DEBUG - Checking product_id 273668660 in DataFrame
2025-04-17 09:14:20,645 - DEBUG - Added product 273668660 to similar_products
2025-04-17 09:14:20,645 - DEBUG - Checking product_id 273664463 in DataFrame
2025-04-17 09:14:20,647 - DEBUG - Added product 273664463 to similar_products
2025-04-17 09:14:20,648 - DEBUG - Final similar_products count: 10
2025-04-17 09:14:20,652 - DEBUG - Final similar_products: [273252926, 271128271, 275386465, 274156763, 230203067, 274171148, 276046675, 277175972, 273668660, 273664463]
2025-04-17 09:14:20,653 - DEBUG - --- Completed get_similar_products_by_id for product_id: 270975124 ---
2025-04-17 09:14:20,654 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:14:20,655 - DEBUG - Preparing response with similar products
2025-04-17 09:14:20,661 - DEBUG - --- Completed request for /api/recommendations/270975124 ---
2025-04-17 09:14:32,891 - DEBUG - --- Processing request for /api/recommendations/147969070 ---
2025-04-17 09:14:32,892 - DEBUG - Limit set to: 10
2025-04-17 09:14:32,893 - DEBUG - --- Starting get_similar_products_by_id for product_id: 147969070 ---
2025-04-17 09:14:32,894 - DEBUG - Checking if product_id 147969070 exists in product_ids
2025-04-17 09:14:32,895 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:14:32,896 - DEBUG - Fetching product details from Tiki API for product_id: 147969070
2025-04-17 09:14:33,102 - DEBUG - Extracting product details
2025-04-17 09:14:33,111 - DEBUG - Brand_name: Itel
2025-04-17 09:14:33,114 - DEBUG - Encoding combined text to embedding
2025-04-17 09:14:33,186 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:14:33,188 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:14:33,191 - DEBUG - FAISS search results - distances: [[1.3416375757753507e-13, 0.34175950288772583, 0.3835943937301636, 0.38420578837394714, 0.38748764991760254, 0.38867849111557007, 0.399701327085495, 0.4012923240661621, 0.40319326519966125, 0.4113118052482605, 0.4138253331184387]]
2025-04-17 09:14:33,191 - DEBUG - FAISS search results - indices: [[155, 2013, 1188, 228, 315, 33, 123, 75, 318, 35, 2024]]
2025-04-17 09:14:33,192 - DEBUG - Filtered result_product_ids: [273185467, 275589968, 272328188, 276944868, 276250878, 272348047, 273252926, 276944892, 275589387, 273029857]
2025-04-17 09:14:33,193 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-17 09:14:33,194 - DEBUG - Added product 273185467 to similar_products
2025-04-17 09:14:33,195 - DEBUG - Checking product_id 275589968 in DataFrame
2025-04-17 09:14:33,197 - DEBUG - Added product 275589968 to similar_products
2025-04-17 09:14:33,198 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-17 09:14:33,200 - DEBUG - Added product 272328188 to similar_products
2025-04-17 09:14:33,200 - DEBUG - Checking product_id 276944868 in DataFrame
2025-04-17 09:14:33,202 - DEBUG - Added product 276944868 to similar_products
2025-04-17 09:14:33,202 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-17 09:14:33,203 - DEBUG - Added product 276250878 to similar_products
2025-04-17 09:14:33,204 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-17 09:14:33,206 - DEBUG - Added product 272348047 to similar_products
2025-04-17 09:14:33,207 - DEBUG - Checking product_id 273252926 in DataFrame
2025-04-17 09:14:33,208 - DEBUG - Added product 273252926 to similar_products
2025-04-17 09:14:33,209 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-17 09:14:33,210 - DEBUG - Added product 276944892 to similar_products
2025-04-17 09:14:33,211 - DEBUG - Checking product_id 275589387 in DataFrame
2025-04-17 09:14:33,212 - DEBUG - Added product 275589387 to similar_products
2025-04-17 09:14:33,212 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-17 09:14:33,213 - DEBUG - Added product 273029857 to similar_products
2025-04-17 09:14:33,214 - DEBUG - Final similar_products count: 10
2025-04-17 09:14:33,214 - DEBUG - Final similar_products: [273185467, 275589968, 272328188, 276944868, 276250878, 272348047, 273252926, 276944892, 275589387, 273029857]
2025-04-17 09:14:33,215 - DEBUG - --- Completed get_similar_products_by_id for product_id: 147969070 ---
2025-04-17 09:14:33,215 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:14:33,216 - DEBUG - Preparing response with similar products
2025-04-17 09:14:33,220 - DEBUG - --- Completed request for /api/recommendations/147969070 ---
2025-04-17 09:14:35,311 - DEBUG - --- Processing request for /api/recommendations/275589968 ---
2025-04-17 09:14:35,312 - DEBUG - Limit set to: 10
2025-04-17 09:14:35,313 - DEBUG - --- Starting get_similar_products_by_id for product_id: 275589968 ---
2025-04-17 09:14:35,313 - DEBUG - Checking if product_id 275589968 exists in product_ids
2025-04-17 09:14:35,314 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:14:35,314 - DEBUG - Fetching product details from Tiki API for product_id: 275589968
2025-04-17 09:14:35,522 - DEBUG - Extracting product details
2025-04-17 09:14:35,531 - DEBUG - Brand_name: Nokia
2025-04-17 09:14:35,534 - DEBUG - Encoding combined text to embedding
2025-04-17 09:14:35,600 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:14:35,601 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:14:35,603 - DEBUG - FAISS search results - distances: [[0.0, 0.10440867394208908, 0.16604144871234894, 0.2433769404888153, 0.2823807895183563, 0.31792646646499634, 0.3448493480682373, 0.36625564098358154, 0.366314172744751, 0.3693223297595978, 0.3743981719017029]]
2025-04-17 09:14:35,604 - DEBUG - FAISS search results - indices: [[1188, 35, 1594, 1462, 1674, 41, 78, 23, 1115, 2024, 228]]
2025-04-17 09:14:35,605 - DEBUG - Filtered result_product_ids: [275589387, 270504848, 275386649, 271234313, 276246838, 275386982, 274405521, 277490201, 273029857, 272328188]
2025-04-17 09:14:35,607 - DEBUG - Checking product_id 275589387 in DataFrame
2025-04-17 09:14:35,609 - DEBUG - Added product 275589387 to similar_products
2025-04-17 09:14:35,610 - DEBUG - Checking product_id 270504848 in DataFrame
2025-04-17 09:14:35,613 - DEBUG - Added product 270504848 to similar_products
2025-04-17 09:14:35,614 - DEBUG - Checking product_id 275386649 in DataFrame
2025-04-17 09:14:35,617 - DEBUG - Added product 275386649 to similar_products
2025-04-17 09:14:35,619 - DEBUG - Checking product_id 271234313 in DataFrame
2025-04-17 09:14:35,621 - DEBUG - Added product 271234313 to similar_products
2025-04-17 09:14:35,622 - DEBUG - Checking product_id 276246838 in DataFrame
2025-04-17 09:14:35,624 - DEBUG - Added product 276246838 to similar_products
2025-04-17 09:14:35,626 - DEBUG - Checking product_id 275386982 in DataFrame
2025-04-17 09:14:35,628 - DEBUG - Added product 275386982 to similar_products
2025-04-17 09:14:35,629 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-17 09:14:35,632 - DEBUG - Added product 274405521 to similar_products
2025-04-17 09:14:35,633 - DEBUG - Checking product_id 277490201 in DataFrame
2025-04-17 09:14:35,635 - DEBUG - Added product 277490201 to similar_products
2025-04-17 09:14:35,636 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-17 09:14:35,637 - DEBUG - Added product 273029857 to similar_products
2025-04-17 09:14:35,639 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-17 09:14:35,641 - DEBUG - Added product 272328188 to similar_products
2025-04-17 09:14:35,641 - DEBUG - Final similar_products count: 10
2025-04-17 09:14:35,642 - DEBUG - Final similar_products: [275589387, 270504848, 275386649, 271234313, 276246838, 275386982, 274405521, 277490201, 273029857, 272328188]
2025-04-17 09:14:35,642 - DEBUG - --- Completed get_similar_products_by_id for product_id: 275589968 ---
2025-04-17 09:14:35,643 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:14:35,644 - DEBUG - Preparing response with similar products
2025-04-17 09:14:35,648 - DEBUG - --- Completed request for /api/recommendations/275589968 ---
2025-04-17 09:14:37,307 - DEBUG - --- Processing request for /api/recommendations/271234313 ---
2025-04-17 09:14:37,309 - DEBUG - Limit set to: 10
2025-04-17 09:14:37,310 - DEBUG - --- Starting get_similar_products_by_id for product_id: 271234313 ---
2025-04-17 09:14:37,310 - DEBUG - Checking if product_id 271234313 exists in product_ids
2025-04-17 09:14:37,311 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:14:37,312 - DEBUG - Fetching product details from Tiki API for product_id: 271234313
2025-04-17 09:14:37,579 - DEBUG - Extracting product details
2025-04-17 09:14:37,585 - DEBUG - Brand_name: Nokia
2025-04-17 09:14:37,588 - DEBUG - Encoding combined text to embedding
2025-04-17 09:14:37,636 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:14:37,637 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:14:37,639 - DEBUG - FAISS search results - distances: [[1.2212252693474812e-13, 0.11122836172580719, 0.18500536680221558, 0.18661010265350342, 0.21010510623455048, 0.2107049822807312, 0.2823808193206787, 0.3002421259880066, 0.3145613670349121, 0.3168497681617737, 0.3177241086959839]]
2025-04-17 09:14:37,640 - DEBUG - FAISS search results - indices: [[1674, 78, 35, 1594, 41, 1462, 1188, 123, 666, 228, 242]]
2025-04-17 09:14:37,640 - DEBUG - Filtered result_product_ids: [275386982, 275589387, 270504848, 276246838, 275386649, 275589968, 272348047, 276062770, 272328188, 276274790]
2025-04-17 09:14:37,641 - DEBUG - Checking product_id 275386982 in DataFrame
2025-04-17 09:14:37,642 - DEBUG - Added product 275386982 to similar_products
2025-04-17 09:14:37,643 - DEBUG - Checking product_id 275589387 in DataFrame
2025-04-17 09:14:37,644 - DEBUG - Added product 275589387 to similar_products
2025-04-17 09:14:37,644 - DEBUG - Checking product_id 270504848 in DataFrame
2025-04-17 09:14:37,645 - DEBUG - Added product 270504848 to similar_products
2025-04-17 09:14:37,646 - DEBUG - Checking product_id 276246838 in DataFrame
2025-04-17 09:14:37,647 - DEBUG - Added product 276246838 to similar_products
2025-04-17 09:14:37,647 - DEBUG - Checking product_id 275386649 in DataFrame
2025-04-17 09:14:37,648 - DEBUG - Added product 275386649 to similar_products
2025-04-17 09:14:37,649 - DEBUG - Checking product_id 275589968 in DataFrame
2025-04-17 09:14:37,650 - DEBUG - Added product 275589968 to similar_products
2025-04-17 09:14:37,651 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-17 09:14:37,652 - DEBUG - Added product 272348047 to similar_products
2025-04-17 09:14:37,652 - DEBUG - Checking product_id 276062770 in DataFrame
2025-04-17 09:14:37,655 - DEBUG - Added product 276062770 to similar_products
2025-04-17 09:14:37,657 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-17 09:14:37,660 - DEBUG - Added product 272328188 to similar_products
2025-04-17 09:14:37,661 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-17 09:14:37,663 - DEBUG - Added product 276274790 to similar_products
2025-04-17 09:14:37,665 - DEBUG - Final similar_products count: 10
2025-04-17 09:14:37,666 - DEBUG - Final similar_products: [275386982, 275589387, 270504848, 276246838, 275386649, 275589968, 272348047, 276062770, 272328188, 276274790]
2025-04-17 09:14:37,667 - DEBUG - --- Completed get_similar_products_by_id for product_id: 271234313 ---
2025-04-17 09:14:37,668 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:14:37,669 - DEBUG - Preparing response with similar products
2025-04-17 09:14:37,678 - DEBUG - --- Completed request for /api/recommendations/271234313 ---
2025-04-17 09:14:44,987 - DEBUG - --- Processing request for /api/recommendations/275386649 ---
2025-04-17 09:14:44,988 - DEBUG - Limit set to: 10
2025-04-17 09:14:44,989 - DEBUG - --- Starting get_similar_products_by_id for product_id: 275386649 ---
2025-04-17 09:14:44,989 - DEBUG - Checking if product_id 275386649 exists in product_ids
2025-04-17 09:14:44,990 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:14:44,990 - DEBUG - Fetching product details from Tiki API for product_id: 275386649
2025-04-17 09:14:45,229 - DEBUG - Extracting product details
2025-04-17 09:14:45,239 - DEBUG - Brand_name: Nokia
2025-04-17 09:14:45,248 - DEBUG - Encoding combined text to embedding
2025-04-17 09:14:45,319 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:14:45,320 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:14:45,321 - DEBUG - FAISS search results - distances: [[1.3535483497917333e-13, 0.18182373046875, 0.2107049822807312, 0.24337686598300934, 0.2984185814857483, 0.3257463872432709, 0.32748961448669434, 0.3299229145050049, 0.33654117584228516, 0.3395485579967499, 0.34220337867736816]]
2025-04-17 09:14:45,322 - DEBUG - FAISS search results - indices: [[1462, 78, 1674, 1188, 35, 1594, 41, 213, 123, 242, 228]]
2025-04-17 09:14:45,323 - DEBUG - Filtered result_product_ids: [275386982, 271234313, 275589968, 275589387, 270504848, 276246838, 277437876, 272348047, 276274790, 272328188]
2025-04-17 09:14:45,323 - DEBUG - Checking product_id 275386982 in DataFrame
2025-04-17 09:14:45,325 - DEBUG - Added product 275386982 to similar_products
2025-04-17 09:14:45,326 - DEBUG - Checking product_id 271234313 in DataFrame
2025-04-17 09:14:45,329 - DEBUG - Added product 271234313 to similar_products
2025-04-17 09:14:45,329 - DEBUG - Checking product_id 275589968 in DataFrame
2025-04-17 09:14:45,332 - DEBUG - Added product 275589968 to similar_products
2025-04-17 09:14:45,332 - DEBUG - Checking product_id 275589387 in DataFrame
2025-04-17 09:14:45,334 - DEBUG - Added product 275589387 to similar_products
2025-04-17 09:14:45,335 - DEBUG - Checking product_id 270504848 in DataFrame
2025-04-17 09:14:45,338 - DEBUG - Added product 270504848 to similar_products
2025-04-17 09:14:45,338 - DEBUG - Checking product_id 276246838 in DataFrame
2025-04-17 09:14:45,340 - DEBUG - Added product 276246838 to similar_products
2025-04-17 09:14:45,341 - DEBUG - Checking product_id 277437876 in DataFrame
2025-04-17 09:14:45,343 - DEBUG - Added product 277437876 to similar_products
2025-04-17 09:14:45,344 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-17 09:14:45,346 - DEBUG - Added product 272348047 to similar_products
2025-04-17 09:14:45,346 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-17 09:14:45,348 - DEBUG - Added product 276274790 to similar_products
2025-04-17 09:14:45,349 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-17 09:14:45,350 - DEBUG - Added product 272328188 to similar_products
2025-04-17 09:14:45,351 - DEBUG - Final similar_products count: 10
2025-04-17 09:14:45,351 - DEBUG - Final similar_products: [275386982, 271234313, 275589968, 275589387, 270504848, 276246838, 277437876, 272348047, 276274790, 272328188]
2025-04-17 09:14:45,352 - DEBUG - --- Completed get_similar_products_by_id for product_id: 275386649 ---
2025-04-17 09:14:45,352 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:14:45,353 - DEBUG - Preparing response with similar products
2025-04-17 09:14:45,358 - DEBUG - --- Completed request for /api/recommendations/275386649 ---
2025-04-17 09:14:46,922 - DEBUG - --- Processing request for /api/recommendations/275589387 ---
2025-04-17 09:14:46,923 - DEBUG - Limit set to: 10
2025-04-17 09:14:46,923 - DEBUG - --- Starting get_similar_products_by_id for product_id: 275589387 ---
2025-04-17 09:14:46,924 - DEBUG - Checking if product_id 275589387 exists in product_ids
2025-04-17 09:14:46,925 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:14:46,925 - DEBUG - Fetching product details from Tiki API for product_id: 275589387
2025-04-17 09:14:47,612 - DEBUG - Extracting product details
2025-04-17 09:14:47,624 - DEBUG - Brand_name: Nokia
2025-04-17 09:14:47,629 - DEBUG - Encoding combined text to embedding
2025-04-17 09:14:47,713 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:14:47,714 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:14:47,716 - DEBUG - FAISS search results - distances: [[0.0, 0.09803318232297897, 0.10440867394208908, 0.18500539660453796, 0.21893644332885742, 0.23573938012123108, 0.29813772439956665, 0.29841864109039307, 0.34542128443717957, 0.3487243056297302, 0.3492313027381897]]
2025-04-17 09:14:47,716 - DEBUG - FAISS search results - indices: [[35, 1594, 1188, 1674, 41, 78, 1970, 1462, 123, 224, 204]]
2025-04-17 09:14:47,717 - DEBUG - Filtered result_product_ids: [270504848, 275589968, 271234313, 276246838, 275386982, 276314665, 275386649, 272348047, 273636845, 273610105]
2025-04-17 09:14:47,717 - DEBUG - Checking product_id 270504848 in DataFrame
2025-04-17 09:14:47,719 - DEBUG - Added product 270504848 to similar_products
2025-04-17 09:14:47,719 - DEBUG - Checking product_id 275589968 in DataFrame
2025-04-17 09:14:47,721 - DEBUG - Added product 275589968 to similar_products
2025-04-17 09:14:47,721 - DEBUG - Checking product_id 271234313 in DataFrame
2025-04-17 09:14:47,723 - DEBUG - Added product 271234313 to similar_products
2025-04-17 09:14:47,724 - DEBUG - Checking product_id 276246838 in DataFrame
2025-04-17 09:14:47,725 - DEBUG - Added product 276246838 to similar_products
2025-04-17 09:14:47,726 - DEBUG - Checking product_id 275386982 in DataFrame
2025-04-17 09:14:47,729 - DEBUG - Added product 275386982 to similar_products
2025-04-17 09:14:47,729 - DEBUG - Checking product_id 276314665 in DataFrame
2025-04-17 09:14:47,732 - DEBUG - Added product 276314665 to similar_products
2025-04-17 09:14:47,733 - DEBUG - Checking product_id 275386649 in DataFrame
2025-04-17 09:14:47,734 - DEBUG - Added product 275386649 to similar_products
2025-04-17 09:14:47,734 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-17 09:14:47,736 - DEBUG - Added product 272348047 to similar_products
2025-04-17 09:14:47,737 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-17 09:14:47,738 - DEBUG - Added product 273636845 to similar_products
2025-04-17 09:14:47,740 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-17 09:14:47,742 - DEBUG - Added product 273610105 to similar_products
2025-04-17 09:14:47,743 - DEBUG - Final similar_products count: 10
2025-04-17 09:14:47,744 - DEBUG - Final similar_products: [270504848, 275589968, 271234313, 276246838, 275386982, 276314665, 275386649, 272348047, 273636845, 273610105]
2025-04-17 09:14:47,745 - DEBUG - --- Completed get_similar_products_by_id for product_id: 275589387 ---
2025-04-17 09:14:47,745 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:14:47,746 - DEBUG - Preparing response with similar products
2025-04-17 09:14:47,754 - DEBUG - --- Completed request for /api/recommendations/275589387 ---
2025-04-17 09:15:57,752 - DEBUG - --- Processing request for /api/recommendations/118100164 ---
2025-04-17 09:15:57,753 - DEBUG - Limit set to: 10
2025-04-17 09:15:57,754 - DEBUG - --- Starting get_similar_products_by_id for product_id: 118100164 ---
2025-04-17 09:15:57,754 - DEBUG - Checking if product_id 118100164 exists in product_ids
2025-04-17 09:15:57,755 - DEBUG - Product_id exists in vector database: False
2025-04-17 09:15:57,756 - DEBUG - Fetching product details from Tiki API for product_id: 118100164
2025-04-17 09:15:57,885 - DEBUG - Extracting product details
2025-04-17 09:15:57,897 - DEBUG - Brand_name: Panasonic
2025-04-17 09:15:57,900 - DEBUG - Encoding combined text to embedding
2025-04-17 09:15:57,972 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:15:57,973 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:15:57,975 - DEBUG - FAISS search results - distances: [[0.21234604716300964, 0.2981429994106293, 0.3269948363304138, 0.35214969515800476, 0.356012761592865, 0.39996087551116943, 0.4144130349159241, 0.41456860303878784, 0.42216336727142334, 0.42494291067123413, 0.4265681803226471]]
2025-04-17 09:15:57,976 - DEBUG - FAISS search results - indices: [[1736, 206, 3025, 2987, 8232, 6258, 1373, 1702, 4330, 2013, 2324]]
2025-04-17 09:15:57,976 - DEBUG - Filtered result_product_ids: [117929538, 117929342, 203293287, 53019062, 258766867, 135416573, 146419544, 277034393, 273162635, 273185467]
2025-04-17 09:15:57,977 - DEBUG - Checking product_id 117929538 in DataFrame
2025-04-17 09:15:57,979 - DEBUG - Added product 117929538 to similar_products
2025-04-17 09:15:57,979 - DEBUG - Checking product_id 117929342 in DataFrame
2025-04-17 09:15:57,981 - DEBUG - Added product 117929342 to similar_products
2025-04-17 09:15:57,982 - DEBUG - Checking product_id 203293287 in DataFrame
2025-04-17 09:15:57,983 - DEBUG - Added product 203293287 to similar_products
2025-04-17 09:15:57,983 - DEBUG - Checking product_id 53019062 in DataFrame
2025-04-17 09:15:57,985 - DEBUG - Added product 53019062 to similar_products
2025-04-17 09:15:57,986 - DEBUG - Checking product_id 258766867 in DataFrame
2025-04-17 09:15:57,988 - DEBUG - Added product 258766867 to similar_products
2025-04-17 09:15:57,988 - DEBUG - Checking product_id 135416573 in DataFrame
2025-04-17 09:15:57,990 - DEBUG - Added product 135416573 to similar_products
2025-04-17 09:15:57,991 - DEBUG - Checking product_id 146419544 in DataFrame
2025-04-17 09:15:57,993 - DEBUG - Added product 146419544 to similar_products
2025-04-17 09:15:57,993 - DEBUG - Checking product_id 277034393 in DataFrame
2025-04-17 09:15:57,995 - DEBUG - Added product 277034393 to similar_products
2025-04-17 09:15:57,995 - DEBUG - Checking product_id 273162635 in DataFrame
2025-04-17 09:15:57,997 - DEBUG - Added product 273162635 to similar_products
2025-04-17 09:15:57,997 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-17 09:15:57,999 - DEBUG - Added product 273185467 to similar_products
2025-04-17 09:15:58,000 - DEBUG - Final similar_products count: 10
2025-04-17 09:15:58,000 - DEBUG - Final similar_products: [117929538, 117929342, 203293287, 53019062, 258766867, 135416573, 146419544, 277034393, 273162635, 273185467]
2025-04-17 09:15:58,001 - DEBUG - --- Completed get_similar_products_by_id for product_id: 118100164 ---
2025-04-17 09:15:58,002 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:15:58,002 - DEBUG - Preparing response with similar products
2025-04-17 09:15:58,008 - DEBUG - --- Completed request for /api/recommendations/118100164 ---
2025-04-17 09:16:23,212 - DEBUG - --- Processing request for /api/recommendations/273942001 ---
2025-04-17 09:16:23,213 - DEBUG - Limit set to: 10
2025-04-17 09:16:23,214 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273942001 ---
2025-04-17 09:16:23,214 - DEBUG - Checking if product_id 273942001 exists in product_ids
2025-04-17 09:16:23,215 - DEBUG - Product_id exists in vector database: False
2025-04-17 09:16:23,216 - DEBUG - Fetching product details from Tiki API for product_id: 273942001
2025-04-17 09:16:23,900 - DEBUG - Extracting product details
2025-04-17 09:16:23,905 - DEBUG - Category_name: Root
2025-04-17 09:16:23,905 - DEBUG - Brand_name: Xiaomi
2025-04-17 09:16:23,909 - DEBUG - Encoding combined text to embedding
2025-04-17 09:16:23,965 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:16:23,965 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:16:23,967 - DEBUG - FAISS search results - distances: [[0.3626858592033386, 0.3706132173538208, 0.38457635045051575, 0.44370388984680176, 0.4471973478794098, 0.45123422145843506, 0.46106526255607605, 0.46729427576065063, 0.47191929817199707, 0.47853216528892517, 0.48001500964164734]]
2025-04-17 09:16:23,968 - DEBUG - FAISS search results - indices: [[893, 666, 305, 1885, 1723, 287, 2545, 75, 1347, 41, 318]]
2025-04-17 09:16:23,969 - DEBUG - Filtered result_product_ids: [275621450, 276062770, 277360579, 273373420, 273454566, 276440892, 276945332, 273252926, 277360298, 276246838]
2025-04-17 09:16:23,970 - DEBUG - Checking product_id 275621450 in DataFrame
2025-04-17 09:16:23,971 - DEBUG - Added product 275621450 to similar_products
2025-04-17 09:16:23,972 - DEBUG - Checking product_id 276062770 in DataFrame
2025-04-17 09:16:23,973 - DEBUG - Added product 276062770 to similar_products
2025-04-17 09:16:23,974 - DEBUG - Checking product_id 277360579 in DataFrame
2025-04-17 09:16:23,975 - DEBUG - Added product 277360579 to similar_products
2025-04-17 09:16:23,976 - DEBUG - Checking product_id 273373420 in DataFrame
2025-04-17 09:16:23,977 - DEBUG - Added product 273373420 to similar_products
2025-04-17 09:16:23,978 - DEBUG - Checking product_id 273454566 in DataFrame
2025-04-17 09:16:23,980 - DEBUG - Added product 273454566 to similar_products
2025-04-17 09:16:23,980 - DEBUG - Checking product_id 276440892 in DataFrame
2025-04-17 09:16:23,982 - DEBUG - Added product 276440892 to similar_products
2025-04-17 09:16:23,983 - DEBUG - Checking product_id 276945332 in DataFrame
2025-04-17 09:16:23,984 - DEBUG - Added product 276945332 to similar_products
2025-04-17 09:16:23,985 - DEBUG - Checking product_id 273252926 in DataFrame
2025-04-17 09:16:23,986 - DEBUG - Added product 273252926 to similar_products
2025-04-17 09:16:23,987 - DEBUG - Checking product_id 277360298 in DataFrame
2025-04-17 09:16:23,989 - DEBUG - Added product 277360298 to similar_products
2025-04-17 09:16:23,989 - DEBUG - Checking product_id 276246838 in DataFrame
2025-04-17 09:16:23,991 - DEBUG - Added product 276246838 to similar_products
2025-04-17 09:16:23,991 - DEBUG - Final similar_products count: 10
2025-04-17 09:16:23,992 - DEBUG - Final similar_products: [275621450, 276062770, 277360579, 273373420, 273454566, 276440892, 276945332, 273252926, 277360298, 276246838]
2025-04-17 09:16:23,992 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273942001 ---
2025-04-17 09:16:23,993 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:16:23,993 - DEBUG - Preparing response with similar products
2025-04-17 09:16:23,998 - DEBUG - --- Completed request for /api/recommendations/273942001 ---
2025-04-17 09:18:13,631 - DEBUG - --- Processing request for /api/recommendations/106318753 ---
2025-04-17 09:18:13,631 - DEBUG - Limit set to: 10
2025-04-17 09:18:13,632 - DEBUG - --- Starting get_similar_products_by_id for product_id: 106318753 ---
2025-04-17 09:18:13,633 - DEBUG - Checking if product_id 106318753 exists in product_ids
2025-04-17 09:18:13,634 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:18:13,635 - DEBUG - Fetching product details from Tiki API for product_id: 106318753
2025-04-17 09:18:13,768 - DEBUG - Extracting product details
2025-04-17 09:18:13,768 - DEBUG - Name: Máy tính xách tay Laptop Dell Latitude 3420 (Intel Core i5-1135G7 | 14 Inch | RAM 8GB | 256GB SSD NVMe | Intel Iris Xe Graphics | Fedora Os) - Hàng chính hãng
2025-04-17 09:18:13,782 - DEBUG - Brand_name: Dell
2025-04-17 09:18:13,801 - DEBUG - Encoding combined text to embedding
2025-04-17 09:18:13,925 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:18:13,925 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:18:13,928 - DEBUG - FAISS search results - distances: [[1.478426078392256e-13, 0.2726292312145233, 0.2775992155075073, 0.28904372453689575, 0.2897151708602905, 0.30893832445144653, 0.31912028789520264, 0.3230518102645874, 0.3398922383785248, 0.3429626226425171, 0.34842538833618164]]
2025-04-17 09:18:13,929 - DEBUG - FAISS search results - indices: [[127, 1192, 4501, 107, 216, 709, 2161, 7809, 2228, 311, 18]]
2025-04-17 09:18:13,930 - DEBUG - Filtered result_product_ids: [276802395, 214672808, 248912686, 249085376, 273679076, 225205574, 225210012, 249945720, 248287190, 252174435]
2025-04-17 09:18:13,930 - DEBUG - Checking product_id 276802395 in DataFrame
2025-04-17 09:18:13,932 - DEBUG - Added product 276802395 to similar_products
2025-04-17 09:18:13,933 - DEBUG - Checking product_id 214672808 in DataFrame
2025-04-17 09:18:13,934 - DEBUG - Added product 214672808 to similar_products
2025-04-17 09:18:13,935 - DEBUG - Checking product_id 248912686 in DataFrame
2025-04-17 09:18:13,939 - DEBUG - Added product 248912686 to similar_products
2025-04-17 09:18:13,940 - DEBUG - Checking product_id 249085376 in DataFrame
2025-04-17 09:18:13,941 - DEBUG - Added product 249085376 to similar_products
2025-04-17 09:18:13,942 - DEBUG - Checking product_id 273679076 in DataFrame
2025-04-17 09:18:13,944 - DEBUG - Added product 273679076 to similar_products
2025-04-17 09:18:13,945 - DEBUG - Checking product_id 225205574 in DataFrame
2025-04-17 09:18:13,947 - DEBUG - Added product 225205574 to similar_products
2025-04-17 09:18:13,947 - DEBUG - Checking product_id 225210012 in DataFrame
2025-04-17 09:18:13,949 - DEBUG - Added product 225210012 to similar_products
2025-04-17 09:18:13,950 - DEBUG - Checking product_id 249945720 in DataFrame
2025-04-17 09:18:13,952 - DEBUG - Added product 249945720 to similar_products
2025-04-17 09:18:13,954 - DEBUG - Checking product_id 248287190 in DataFrame
2025-04-17 09:18:13,957 - DEBUG - Added product 248287190 to similar_products
2025-04-17 09:18:13,957 - DEBUG - Checking product_id 252174435 in DataFrame
2025-04-17 09:18:13,960 - DEBUG - Added product 252174435 to similar_products
2025-04-17 09:18:13,961 - DEBUG - Final similar_products count: 10
2025-04-17 09:18:13,961 - DEBUG - Final similar_products: [276802395, 214672808, 248912686, 249085376, 273679076, 225205574, 225210012, 249945720, 248287190, 252174435]
2025-04-17 09:18:13,962 - DEBUG - --- Completed get_similar_products_by_id for product_id: 106318753 ---
2025-04-17 09:18:13,962 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:18:13,963 - DEBUG - Preparing response with similar products
2025-04-17 09:18:13,968 - DEBUG - --- Completed request for /api/recommendations/106318753 ---
2025-04-17 09:18:48,571 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:18:48,572 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:18:48,573 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:18:54,253 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:18:54,254 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:18:54,255 - DEBUG - Loading FAISS index
2025-04-17 09:18:54,262 - DEBUG - Loading product DataFrame
2025-04-17 09:18:54,285 - DEBUG - Loading product_ids
2025-04-17 09:18:54,286 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:18:54,287 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:18:54,287 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:19:19,414 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:19:19,415 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:19:19,415 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:19:23,124 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:19:23,125 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:19:23,125 - DEBUG - Loading FAISS index
2025-04-17 09:19:23,134 - DEBUG - Loading product DataFrame
2025-04-17 09:19:23,164 - DEBUG - Loading product_ids
2025-04-17 09:19:23,165 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:19:23,166 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:19:23,166 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:19:55,369 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:19:55,369 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:19:55,370 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:19:59,925 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:19:59,926 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:19:59,926 - DEBUG - Loading FAISS index
2025-04-17 09:19:59,934 - DEBUG - Loading product DataFrame
2025-04-17 09:19:59,955 - DEBUG - Loading product_ids
2025-04-17 09:19:59,956 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:19:59,957 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:19:59,958 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:20:00,453 - DEBUG - --- Processing request for /api/recommendations/106318753 ---
2025-04-17 09:20:00,453 - DEBUG - Limit set to: 10
2025-04-17 09:20:00,454 - DEBUG - --- Starting get_similar_products_by_id for product_id: 106318753 ---
2025-04-17 09:20:00,454 - DEBUG - Checking if product_id 106318753 exists in product_ids
2025-04-17 09:20:00,454 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:20:00,455 - DEBUG - Fetching product details from Tiki API for product_id: 106318753
2025-04-17 09:20:00,670 - DEBUG - Extracting product details
2025-04-17 09:20:00,670 - DEBUG - Name: Máy tính xách tay Laptop Dell Latitude 3420 (Intel Core i5-1135G7 | 14 Inch | RAM 8GB | 256GB SSD NVMe | Intel Iris Xe Graphics | Fedora Os) - Hàng chính hãng
2025-04-17 09:20:00,676 - DEBUG - Brand_name: Dell
2025-04-17 09:20:00,681 - DEBUG - Encoding combined text to embedding
2025-04-17 09:20:00,818 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:20:00,818 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:20:00,837 - DEBUG - FAISS search results - distances: [[1.478426078392256e-13, 0.2726292312145233, 0.2775992155075073, 0.28904372453689575, 0.2897151708602905, 0.30893832445144653, 0.31912028789520264, 0.3230518102645874, 0.3398922383785248, 0.3429626226425171, 0.34842538833618164]]
2025-04-17 09:20:00,838 - DEBUG - FAISS search results - indices: [[127, 1192, 4501, 107, 216, 709, 2161, 7809, 2228, 311, 18]]
2025-04-17 09:20:00,839 - DEBUG - Filtered result_product_ids: [276802395, 214672808, 248912686, 249085376, 273679076, 225205574, 225210012, 249945720, 248287190, 252174435]
2025-04-17 09:20:00,839 - DEBUG - Checking product_id 276802395 in DataFrame
2025-04-17 09:20:00,842 - DEBUG - Added product 276802395 to similar_products
2025-04-17 09:20:00,850 - DEBUG - Checking product_id 214672808 in DataFrame
2025-04-17 09:20:00,855 - DEBUG - Added product 214672808 to similar_products
2025-04-17 09:20:00,861 - DEBUG - Checking product_id 248912686 in DataFrame
2025-04-17 09:20:00,868 - DEBUG - Added product 248912686 to similar_products
2025-04-17 09:20:00,871 - DEBUG - Checking product_id 249085376 in DataFrame
2025-04-17 09:20:00,876 - DEBUG - Added product 249085376 to similar_products
2025-04-17 09:20:00,878 - DEBUG - Checking product_id 273679076 in DataFrame
2025-04-17 09:20:00,884 - DEBUG - Added product 273679076 to similar_products
2025-04-17 09:20:00,889 - DEBUG - Checking product_id 225205574 in DataFrame
2025-04-17 09:20:00,895 - DEBUG - Added product 225205574 to similar_products
2025-04-17 09:20:00,898 - DEBUG - Checking product_id 225210012 in DataFrame
2025-04-17 09:20:00,903 - DEBUG - Added product 225210012 to similar_products
2025-04-17 09:20:00,905 - DEBUG - Checking product_id 249945720 in DataFrame
2025-04-17 09:20:00,912 - DEBUG - Added product 249945720 to similar_products
2025-04-17 09:20:00,918 - DEBUG - Checking product_id 248287190 in DataFrame
2025-04-17 09:20:00,924 - DEBUG - Added product 248287190 to similar_products
2025-04-17 09:20:00,935 - DEBUG - Checking product_id 252174435 in DataFrame
2025-04-17 09:20:00,951 - DEBUG - Added product 252174435 to similar_products
2025-04-17 09:20:00,956 - DEBUG - Final similar_products count: 10
2025-04-17 09:20:00,963 - DEBUG - Final similar_products: [276802395, 214672808, 248912686, 249085376, 273679076, 225205574, 225210012, 249945720, 248287190, 252174435]
2025-04-17 09:20:00,970 - DEBUG - --- Completed get_similar_products_by_id for product_id: 106318753 ---
2025-04-17 09:20:00,978 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:20:00,988 - DEBUG - Preparing response with similar products
2025-04-17 09:20:01,065 - DEBUG - --- Completed request for /api/recommendations/106318753 ---
2025-04-17 09:22:00,425 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:22:00,425 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:22:00,426 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:22:06,451 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:22:06,452 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:22:06,453 - DEBUG - Loading FAISS index
2025-04-17 09:22:06,464 - DEBUG - Loading product DataFrame
2025-04-17 09:22:06,487 - DEBUG - Loading product_ids
2025-04-17 09:22:06,488 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:22:06,488 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:22:06,489 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:22:27,878 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:22:27,879 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:22:27,880 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:22:32,672 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:22:32,673 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:22:32,674 - DEBUG - Loading FAISS index
2025-04-17 09:22:32,681 - DEBUG - Loading product DataFrame
2025-04-17 09:22:32,704 - DEBUG - Loading product_ids
2025-04-17 09:22:32,705 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:22:32,705 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:22:32,706 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:41:12,053 - DEBUG - --- Processing request for /api/recommendations/276802395 ---
2025-04-17 09:41:12,054 - DEBUG - Limit set to: 10
2025-04-17 09:41:12,055 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276802395 ---
2025-04-17 09:41:12,056 - DEBUG - Checking if product_id 276802395 exists in product_ids
2025-04-17 09:41:12,057 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:41:12,058 - DEBUG - Fetching product details from Tiki API for product_id: 276802395
2025-04-17 09:41:12,240 - DEBUG - Extracting product details
2025-04-17 09:41:12,240 - DEBUG - Name: Laptop Dell Latitude 3420 i5 1135G7/16GB/256GB/14 Inch Full HD Hàng chính hãng
2025-04-17 09:41:12,243 - DEBUG - Category_name: 
2025-04-17 09:41:12,244 - DEBUG - Brand_name: Dell
2025-04-17 09:41:12,250 - DEBUG - Encoding combined text to embedding
2025-04-17 09:41:12,340 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:41:12,341 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:41:12,348 - DEBUG - FAISS search results - distances: [[0.008582277223467827, 0.2804605960845947, 0.2962302565574646, 0.31249332427978516, 0.31949031352996826, 0.3589102625846863, 0.36034950613975525, 0.3684951364994049, 0.3841036260128021, 0.39753812551498413, 0.40658682584762573]]
2025-04-17 09:41:12,348 - DEBUG - FAISS search results - indices: [[1192, 709, 127, 163, 1568, 1095, 1332, 1494, 1665, 1691, 7809]]
2025-04-17 09:41:12,349 - DEBUG - Filtered result_product_ids: [273679076, 106318753, 276370494, 275288865, 198732215, 219401840, 192729512, 183719135, 207041896, 225210012]
2025-04-17 09:41:12,350 - DEBUG - Checking product_id 273679076 in DataFrame
2025-04-17 09:41:12,352 - DEBUG - Added product 273679076 to similar_products
2025-04-17 09:41:12,353 - DEBUG - Checking product_id 106318753 in DataFrame
2025-04-17 09:41:12,354 - DEBUG - Added product 106318753 to similar_products
2025-04-17 09:41:12,355 - DEBUG - Checking product_id 276370494 in DataFrame
2025-04-17 09:41:12,356 - DEBUG - Added product 276370494 to similar_products
2025-04-17 09:41:12,357 - DEBUG - Checking product_id 275288865 in DataFrame
2025-04-17 09:41:12,358 - DEBUG - Added product 275288865 to similar_products
2025-04-17 09:41:12,358 - DEBUG - Checking product_id 198732215 in DataFrame
2025-04-17 09:41:12,360 - DEBUG - Added product 198732215 to similar_products
2025-04-17 09:41:12,361 - DEBUG - Checking product_id 219401840 in DataFrame
2025-04-17 09:41:12,362 - DEBUG - Added product 219401840 to similar_products
2025-04-17 09:41:12,362 - DEBUG - Checking product_id 192729512 in DataFrame
2025-04-17 09:41:12,364 - DEBUG - Added product 192729512 to similar_products
2025-04-17 09:41:12,364 - DEBUG - Checking product_id 183719135 in DataFrame
2025-04-17 09:41:12,366 - DEBUG - Added product 183719135 to similar_products
2025-04-17 09:41:12,367 - DEBUG - Checking product_id 207041896 in DataFrame
2025-04-17 09:41:12,368 - DEBUG - Added product 207041896 to similar_products
2025-04-17 09:41:12,369 - DEBUG - Checking product_id 225210012 in DataFrame
2025-04-17 09:41:12,370 - DEBUG - Added product 225210012 to similar_products
2025-04-17 09:41:12,371 - DEBUG - Final similar_products count: 10
2025-04-17 09:41:12,371 - DEBUG - Final similar_products: [273679076, 106318753, 276370494, 275288865, 198732215, 219401840, 192729512, 183719135, 207041896, 225210012]
2025-04-17 09:41:12,372 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276802395 ---
2025-04-17 09:41:12,372 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:41:12,373 - DEBUG - Preparing response with similar products
2025-04-17 09:41:12,377 - DEBUG - --- Completed request for /api/recommendations/276802395 ---
2025-04-17 09:41:15,064 - DEBUG - --- Processing request for /api/recommendations/275288865 ---
2025-04-17 09:41:15,065 - DEBUG - Limit set to: 10
2025-04-17 09:41:15,067 - DEBUG - --- Starting get_similar_products_by_id for product_id: 275288865 ---
2025-04-17 09:41:15,067 - DEBUG - Checking if product_id 275288865 exists in product_ids
2025-04-17 09:41:15,068 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:41:15,068 - DEBUG - Fetching product details from Tiki API for product_id: 275288865
2025-04-17 09:41:15,664 - DEBUG - Extracting product details
2025-04-17 09:41:15,664 - DEBUG - Name: Laptop Dell Latitude 5310 | Core i5-10310U Ram 16GB PCIe 256GB 13.3" FHD - Hàng Chính Hãng
2025-04-17 09:41:15,670 - DEBUG - Category_name: 
2025-04-17 09:41:15,670 - DEBUG - Brand_name: Dell
2025-04-17 09:41:15,675 - DEBUG - Encoding combined text to embedding
2025-04-17 09:41:15,741 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:41:15,742 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:41:15,743 - DEBUG - FAISS search results - distances: [[0.007923230528831482, 0.28104570508003235, 0.33472150564193726, 0.3789815902709961, 0.3791641592979431, 0.3926261067390442, 0.40135657787323, 0.42591673135757446, 0.4303058385848999, 0.4310725927352905, 0.433253675699234]]
2025-04-17 09:41:15,744 - DEBUG - FAISS search results - indices: [[1568, 709, 1192, 311, 1691, 2228, 1494, 2291, 127, 163, 1443]]
2025-04-17 09:41:15,745 - DEBUG - Filtered result_product_ids: [273679076, 276802395, 248287190, 207041896, 249945720, 192729512, 274734984, 106318753, 276370494, 225210585]
2025-04-17 09:41:15,745 - DEBUG - Checking product_id 273679076 in DataFrame
2025-04-17 09:41:15,747 - DEBUG - Added product 273679076 to similar_products
2025-04-17 09:41:15,747 - DEBUG - Checking product_id 276802395 in DataFrame
2025-04-17 09:41:15,749 - DEBUG - Added product 276802395 to similar_products
2025-04-17 09:41:15,749 - DEBUG - Checking product_id 248287190 in DataFrame
2025-04-17 09:41:15,751 - DEBUG - Added product 248287190 to similar_products
2025-04-17 09:41:15,752 - DEBUG - Checking product_id 207041896 in DataFrame
2025-04-17 09:41:15,753 - DEBUG - Added product 207041896 to similar_products
2025-04-17 09:41:15,753 - DEBUG - Checking product_id 249945720 in DataFrame
2025-04-17 09:41:15,755 - DEBUG - Added product 249945720 to similar_products
2025-04-17 09:41:15,756 - DEBUG - Checking product_id 192729512 in DataFrame
2025-04-17 09:41:15,757 - DEBUG - Added product 192729512 to similar_products
2025-04-17 09:41:15,758 - DEBUG - Checking product_id 274734984 in DataFrame
2025-04-17 09:41:15,760 - DEBUG - Added product 274734984 to similar_products
2025-04-17 09:41:15,760 - DEBUG - Checking product_id 106318753 in DataFrame
2025-04-17 09:41:15,762 - DEBUG - Added product 106318753 to similar_products
2025-04-17 09:41:15,763 - DEBUG - Checking product_id 276370494 in DataFrame
2025-04-17 09:41:15,764 - DEBUG - Added product 276370494 to similar_products
2025-04-17 09:41:15,765 - DEBUG - Checking product_id 225210585 in DataFrame
2025-04-17 09:41:15,766 - DEBUG - Added product 225210585 to similar_products
2025-04-17 09:41:15,767 - DEBUG - Final similar_products count: 10
2025-04-17 09:41:15,768 - DEBUG - Final similar_products: [273679076, 276802395, 248287190, 207041896, 249945720, 192729512, 274734984, 106318753, 276370494, 225210585]
2025-04-17 09:41:15,768 - DEBUG - --- Completed get_similar_products_by_id for product_id: 275288865 ---
2025-04-17 09:41:15,769 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:41:15,770 - DEBUG - Preparing response with similar products
2025-04-17 09:41:15,774 - DEBUG - --- Completed request for /api/recommendations/275288865 ---
2025-04-17 09:41:19,859 - DEBUG - --- Processing request for /api/recommendations/106318753 ---
2025-04-17 09:41:19,859 - DEBUG - Limit set to: 10
2025-04-17 09:41:19,860 - DEBUG - --- Starting get_similar_products_by_id for product_id: 106318753 ---
2025-04-17 09:41:19,861 - DEBUG - Checking if product_id 106318753 exists in product_ids
2025-04-17 09:41:19,862 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:41:19,862 - DEBUG - Fetching product details from Tiki API for product_id: 106318753
2025-04-17 09:41:19,980 - DEBUG - Extracting product details
2025-04-17 09:41:19,982 - DEBUG - Name: Máy tính xách tay Laptop Dell Latitude 3420 (Intel Core i5-1135G7 | 14 Inch | RAM 8GB | 256GB SSD NVMe | Intel Iris Xe Graphics | Fedora Os) - Hàng chính hãng
2025-04-17 09:41:19,991 - DEBUG - Brand_name: Dell
2025-04-17 09:41:19,994 - DEBUG - Encoding combined text to embedding
2025-04-17 09:41:20,124 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:41:20,125 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:41:20,127 - DEBUG - FAISS search results - distances: [[1.478426078392256e-13, 0.2726292312145233, 0.2775992155075073, 0.28904372453689575, 0.2897151708602905, 0.30893832445144653, 0.31912028789520264, 0.3230518102645874, 0.3398922383785248, 0.3429626226425171, 0.34842538833618164]]
2025-04-17 09:41:20,128 - DEBUG - FAISS search results - indices: [[127, 1192, 4501, 107, 216, 709, 2161, 7809, 2228, 311, 18]]
2025-04-17 09:41:20,129 - DEBUG - Filtered result_product_ids: [276802395, 214672808, 248912686, 249085376, 273679076, 225205574, 225210012, 249945720, 248287190, 252174435]
2025-04-17 09:41:20,129 - DEBUG - Checking product_id 276802395 in DataFrame
2025-04-17 09:41:20,131 - DEBUG - Added product 276802395 to similar_products
2025-04-17 09:41:20,132 - DEBUG - Checking product_id 214672808 in DataFrame
2025-04-17 09:41:20,134 - DEBUG - Added product 214672808 to similar_products
2025-04-17 09:41:20,138 - DEBUG - Checking product_id 248912686 in DataFrame
2025-04-17 09:41:20,140 - DEBUG - Added product 248912686 to similar_products
2025-04-17 09:41:20,141 - DEBUG - Checking product_id 249085376 in DataFrame
2025-04-17 09:41:20,142 - DEBUG - Added product 249085376 to similar_products
2025-04-17 09:41:20,143 - DEBUG - Checking product_id 273679076 in DataFrame
2025-04-17 09:41:20,146 - DEBUG - Added product 273679076 to similar_products
2025-04-17 09:41:20,146 - DEBUG - Checking product_id 225205574 in DataFrame
2025-04-17 09:41:20,149 - DEBUG - Added product 225205574 to similar_products
2025-04-17 09:41:20,149 - DEBUG - Checking product_id 225210012 in DataFrame
2025-04-17 09:41:20,153 - DEBUG - Added product 225210012 to similar_products
2025-04-17 09:41:20,154 - DEBUG - Checking product_id 249945720 in DataFrame
2025-04-17 09:41:20,158 - DEBUG - Added product 249945720 to similar_products
2025-04-17 09:41:20,163 - DEBUG - Checking product_id 248287190 in DataFrame
2025-04-17 09:41:20,171 - DEBUG - Added product 248287190 to similar_products
2025-04-17 09:41:20,175 - DEBUG - Checking product_id 252174435 in DataFrame
2025-04-17 09:41:20,180 - DEBUG - Added product 252174435 to similar_products
2025-04-17 09:41:20,186 - DEBUG - Final similar_products count: 10
2025-04-17 09:41:20,191 - DEBUG - Final similar_products: [276802395, 214672808, 248912686, 249085376, 273679076, 225205574, 225210012, 249945720, 248287190, 252174435]
2025-04-17 09:41:20,194 - DEBUG - --- Completed get_similar_products_by_id for product_id: 106318753 ---
2025-04-17 09:41:20,196 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:41:20,199 - DEBUG - Preparing response with similar products
2025-04-17 09:41:20,233 - DEBUG - --- Completed request for /api/recommendations/106318753 ---
2025-04-17 09:41:26,314 - DEBUG - --- Processing request for /api/recommendations/106318753 ---
2025-04-17 09:41:26,316 - DEBUG - Limit set to: 10
2025-04-17 09:41:26,317 - DEBUG - --- Starting get_similar_products_by_id for product_id: 106318753 ---
2025-04-17 09:41:26,317 - DEBUG - Checking if product_id 106318753 exists in product_ids
2025-04-17 09:41:26,318 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:41:26,319 - DEBUG - Fetching product details from Tiki API for product_id: 106318753
2025-04-17 09:41:26,431 - DEBUG - Extracting product details
2025-04-17 09:41:26,431 - DEBUG - Name: Máy tính xách tay Laptop Dell Latitude 3420 (Intel Core i5-1135G7 | 14 Inch | RAM 8GB | 256GB SSD NVMe | Intel Iris Xe Graphics | Fedora Os) - Hàng chính hãng
2025-04-17 09:41:26,436 - DEBUG - Brand_name: Dell
2025-04-17 09:41:26,440 - DEBUG - Encoding combined text to embedding
2025-04-17 09:41:26,541 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:41:26,542 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:41:26,544 - DEBUG - FAISS search results - distances: [[1.478426078392256e-13, 0.2726292312145233, 0.2775992155075073, 0.28904372453689575, 0.2897151708602905, 0.30893832445144653, 0.31912028789520264, 0.3230518102645874, 0.3398922383785248, 0.3429626226425171, 0.34842538833618164]]
2025-04-17 09:41:26,545 - DEBUG - FAISS search results - indices: [[127, 1192, 4501, 107, 216, 709, 2161, 7809, 2228, 311, 18]]
2025-04-17 09:41:26,545 - DEBUG - Filtered result_product_ids: [276802395, 214672808, 248912686, 249085376, 273679076, 225205574, 225210012, 249945720, 248287190, 252174435]
2025-04-17 09:41:26,546 - DEBUG - Checking product_id 276802395 in DataFrame
2025-04-17 09:41:26,548 - DEBUG - Added product 276802395 to similar_products
2025-04-17 09:41:26,548 - DEBUG - Checking product_id 214672808 in DataFrame
2025-04-17 09:41:26,549 - DEBUG - Added product 214672808 to similar_products
2025-04-17 09:41:26,550 - DEBUG - Checking product_id 248912686 in DataFrame
2025-04-17 09:41:26,551 - DEBUG - Added product 248912686 to similar_products
2025-04-17 09:41:26,552 - DEBUG - Checking product_id 249085376 in DataFrame
2025-04-17 09:41:26,554 - DEBUG - Added product 249085376 to similar_products
2025-04-17 09:41:26,555 - DEBUG - Checking product_id 273679076 in DataFrame
2025-04-17 09:41:26,557 - DEBUG - Added product 273679076 to similar_products
2025-04-17 09:41:26,558 - DEBUG - Checking product_id 225205574 in DataFrame
2025-04-17 09:41:26,560 - DEBUG - Added product 225205574 to similar_products
2025-04-17 09:41:26,560 - DEBUG - Checking product_id 225210012 in DataFrame
2025-04-17 09:41:26,564 - DEBUG - Added product 225210012 to similar_products
2025-04-17 09:41:26,566 - DEBUG - Checking product_id 249945720 in DataFrame
2025-04-17 09:41:26,567 - DEBUG - Added product 249945720 to similar_products
2025-04-17 09:41:26,568 - DEBUG - Checking product_id 248287190 in DataFrame
2025-04-17 09:41:26,570 - DEBUG - Added product 248287190 to similar_products
2025-04-17 09:41:26,571 - DEBUG - Checking product_id 252174435 in DataFrame
2025-04-17 09:41:26,575 - DEBUG - Added product 252174435 to similar_products
2025-04-17 09:41:26,577 - DEBUG - Final similar_products count: 10
2025-04-17 09:41:26,579 - DEBUG - Final similar_products: [276802395, 214672808, 248912686, 249085376, 273679076, 225205574, 225210012, 249945720, 248287190, 252174435]
2025-04-17 09:41:26,580 - DEBUG - --- Completed get_similar_products_by_id for product_id: 106318753 ---
2025-04-17 09:41:26,580 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:41:26,581 - DEBUG - Preparing response with similar products
2025-04-17 09:41:26,587 - DEBUG - --- Completed request for /api/recommendations/106318753 ---
2025-04-17 09:41:39,360 - DEBUG - --- Processing request for /api/recommendations/73987509 ---
2025-04-17 09:41:39,361 - DEBUG - Limit set to: 10
2025-04-17 09:41:39,362 - DEBUG - --- Starting get_similar_products_by_id for product_id: 73987509 ---
2025-04-17 09:41:39,363 - DEBUG - Checking if product_id 73987509 exists in product_ids
2025-04-17 09:41:39,364 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:41:39,364 - DEBUG - Fetching product details from Tiki API for product_id: 73987509
2025-04-17 09:41:39,576 - DEBUG - Extracting product details
2025-04-17 09:41:39,576 - DEBUG - Name: Loa Bluetooth JBL Xtreme 3 - Hàng Chính Hãng
2025-04-17 09:41:39,580 - DEBUG - Category_name: Loa Bluetooth
2025-04-17 09:41:39,580 - DEBUG - Brand_name: JBL
2025-04-17 09:41:39,583 - DEBUG - Encoding combined text to embedding
2025-04-17 09:41:39,648 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:41:39,648 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:41:39,650 - DEBUG - FAISS search results - distances: [[1.490310831556499e-13, 0.26018083095550537, 0.26101723313331604, 0.2669559419155121, 0.27023833990097046, 0.3016090393066406, 0.3044206500053406, 0.3117372393608093, 0.3221457600593567, 0.3328481614589691, 0.33484897017478943]]
2025-04-17 09:41:39,651 - DEBUG - FAISS search results - indices: [[2809, 2802, 2698, 430, 2892, 2747, 2699, 2830, 2628, 2692, 2715]]
2025-04-17 09:41:39,652 - DEBUG - Filtered result_product_ids: [73987448, 275130480, 73987485, 215990219, 276025056, 275130483, 275543974, 275513834, 275761136, 276949462]
2025-04-17 09:41:39,652 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-17 09:41:39,654 - DEBUG - Added product 73987448 to similar_products
2025-04-17 09:41:39,655 - DEBUG - Checking product_id 275130480 in DataFrame
2025-04-17 09:41:39,658 - DEBUG - Added product 275130480 to similar_products
2025-04-17 09:41:39,660 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-17 09:41:39,662 - DEBUG - Added product 73987485 to similar_products
2025-04-17 09:41:39,663 - DEBUG - Checking product_id 215990219 in DataFrame
2025-04-17 09:41:39,665 - DEBUG - Added product 215990219 to similar_products
2025-04-17 09:41:39,665 - DEBUG - Checking product_id 276025056 in DataFrame
2025-04-17 09:41:39,667 - DEBUG - Added product 276025056 to similar_products
2025-04-17 09:41:39,667 - DEBUG - Checking product_id 275130483 in DataFrame
2025-04-17 09:41:39,669 - DEBUG - Added product 275130483 to similar_products
2025-04-17 09:41:39,670 - DEBUG - Checking product_id 275543974 in DataFrame
2025-04-17 09:41:39,671 - DEBUG - Added product 275543974 to similar_products
2025-04-17 09:41:39,672 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-17 09:41:39,673 - DEBUG - Added product 275513834 to similar_products
2025-04-17 09:41:39,676 - DEBUG - Checking product_id 275761136 in DataFrame
2025-04-17 09:41:39,678 - DEBUG - Added product 275761136 to similar_products
2025-04-17 09:41:39,678 - DEBUG - Checking product_id 276949462 in DataFrame
2025-04-17 09:41:39,681 - DEBUG - Added product 276949462 to similar_products
2025-04-17 09:41:39,682 - DEBUG - Final similar_products count: 10
2025-04-17 09:41:39,682 - DEBUG - Final similar_products: [73987448, 275130480, 73987485, 215990219, 276025056, 275130483, 275543974, 275513834, 275761136, 276949462]
2025-04-17 09:41:39,683 - DEBUG - --- Completed get_similar_products_by_id for product_id: 73987509 ---
2025-04-17 09:41:39,684 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:41:39,685 - DEBUG - Preparing response with similar products
2025-04-17 09:41:39,702 - DEBUG - --- Completed request for /api/recommendations/73987509 ---
2025-04-17 09:41:44,607 - DEBUG - --- Processing request for /api/recommendations/73987485 ---
2025-04-17 09:41:44,608 - DEBUG - Limit set to: 10
2025-04-17 09:41:44,608 - DEBUG - --- Starting get_similar_products_by_id for product_id: 73987485 ---
2025-04-17 09:41:44,609 - DEBUG - Checking if product_id 73987485 exists in product_ids
2025-04-17 09:41:44,610 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:41:44,610 - DEBUG - Fetching product details from Tiki API for product_id: 73987485
2025-04-17 09:41:44,833 - DEBUG - Extracting product details
2025-04-17 09:41:44,833 - DEBUG - Name: Loa Bluetooth JBL Go 3 - Hàng Chính Hãng
2025-04-17 09:41:44,836 - DEBUG - Category_name: Loa Bluetooth
2025-04-17 09:41:44,836 - DEBUG - Brand_name: JBL
2025-04-17 09:41:44,843 - DEBUG - Encoding combined text to embedding
2025-04-17 09:41:44,894 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:41:44,895 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:41:44,897 - DEBUG - FAISS search results - distances: [[1.4734012078986003e-13, 0.1871301233768463, 0.23136639595031738, 0.24081039428710938, 0.2445048987865448, 0.2669559419155121, 0.26712560653686523, 0.2781882882118225, 0.2805670499801636, 0.2884690463542938, 0.2989574670791626]]
2025-04-17 09:41:44,898 - DEBUG - FAISS search results - indices: [[430, 2699, 2848, 2692, 2698, 2809, 2628, 2830, 7807, 2802, 2865]]
2025-04-17 09:41:44,899 - DEBUG - Filtered result_product_ids: [275130483, 190544240, 275761136, 275130480, 73987509, 275513834, 275543974, 50327179, 73987448, 50240635]
2025-04-17 09:41:44,900 - DEBUG - Checking product_id 275130483 in DataFrame
2025-04-17 09:41:44,901 - DEBUG - Added product 275130483 to similar_products
2025-04-17 09:41:44,902 - DEBUG - Checking product_id 190544240 in DataFrame
2025-04-17 09:41:44,904 - DEBUG - Added product 190544240 to similar_products
2025-04-17 09:41:44,904 - DEBUG - Checking product_id 275761136 in DataFrame
2025-04-17 09:41:44,905 - DEBUG - Added product 275761136 to similar_products
2025-04-17 09:41:44,906 - DEBUG - Checking product_id 275130480 in DataFrame
2025-04-17 09:41:44,908 - DEBUG - Added product 275130480 to similar_products
2025-04-17 09:41:44,908 - DEBUG - Checking product_id 73987509 in DataFrame
2025-04-17 09:41:44,910 - DEBUG - Added product 73987509 to similar_products
2025-04-17 09:41:44,911 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-17 09:41:44,912 - DEBUG - Added product 275513834 to similar_products
2025-04-17 09:41:44,913 - DEBUG - Checking product_id 275543974 in DataFrame
2025-04-17 09:41:44,915 - DEBUG - Added product 275543974 to similar_products
2025-04-17 09:41:44,916 - DEBUG - Checking product_id 50327179 in DataFrame
2025-04-17 09:41:44,918 - DEBUG - Added product 50327179 to similar_products
2025-04-17 09:41:44,919 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-17 09:41:44,920 - DEBUG - Added product 73987448 to similar_products
2025-04-17 09:41:44,921 - DEBUG - Checking product_id 50240635 in DataFrame
2025-04-17 09:41:44,922 - DEBUG - Added product 50240635 to similar_products
2025-04-17 09:41:44,922 - DEBUG - Final similar_products count: 10
2025-04-17 09:41:44,923 - DEBUG - Final similar_products: [275130483, 190544240, 275761136, 275130480, 73987509, 275513834, 275543974, 50327179, 73987448, 50240635]
2025-04-17 09:41:44,923 - DEBUG - --- Completed get_similar_products_by_id for product_id: 73987485 ---
2025-04-17 09:41:44,924 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:41:44,924 - DEBUG - Preparing response with similar products
2025-04-17 09:41:44,929 - DEBUG - --- Completed request for /api/recommendations/73987485 ---
2025-04-17 09:43:03,351 - DEBUG - --- Processing request for /api/recommendations/165345530 ---
2025-04-17 09:43:03,352 - DEBUG - Limit set to: 10
2025-04-17 09:43:03,353 - DEBUG - --- Starting get_similar_products_by_id for product_id: 165345530 ---
2025-04-17 09:43:03,353 - DEBUG - Checking if product_id 165345530 exists in product_ids
2025-04-17 09:43:03,354 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:43:03,355 - DEBUG - Fetching product details from Tiki API for product_id: 165345530
2025-04-17 09:43:03,593 - DEBUG - Extracting product details
2025-04-17 09:43:03,594 - DEBUG - Name: Loa Bluetooth JBL Charge 5 JBLCHARGE5 - Hàng chính hãng
2025-04-17 09:43:03,598 - DEBUG - Category_name: Loa Bluetooth
2025-04-17 09:43:03,599 - DEBUG - Brand_name:  JBL
2025-04-17 09:43:03,603 - DEBUG - Encoding combined text to embedding
2025-04-17 09:43:03,684 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:43:03,685 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:43:03,687 - DEBUG - FAISS search results - distances: [[1.6707799423490433e-13, 0.24460144340991974, 0.2912159562110901, 0.3036814332008362, 0.3075469732284546, 0.30768460035324097, 0.32360023260116577, 0.34145405888557434, 0.348984956741333, 0.3763927221298218, 0.3814429044723511]]
2025-04-17 09:43:03,687 - DEBUG - FAISS search results - indices: [[2847, 2692, 2830, 2836, 2865, 2848, 430, 2802, 2892, 2698, 2628]]
2025-04-17 09:43:03,688 - DEBUG - Filtered result_product_ids: [275761136, 275543974, 126998612, 50240635, 190544240, 73987485, 73987448, 215990219, 275130480, 275513834]
2025-04-17 09:43:03,689 - DEBUG - Checking product_id 275761136 in DataFrame
2025-04-17 09:43:03,691 - DEBUG - Added product 275761136 to similar_products
2025-04-17 09:43:03,691 - DEBUG - Checking product_id 275543974 in DataFrame
2025-04-17 09:43:03,693 - DEBUG - Added product 275543974 to similar_products
2025-04-17 09:43:03,694 - DEBUG - Checking product_id 126998612 in DataFrame
2025-04-17 09:43:03,696 - DEBUG - Added product 126998612 to similar_products
2025-04-17 09:43:03,697 - DEBUG - Checking product_id 50240635 in DataFrame
2025-04-17 09:43:03,699 - DEBUG - Added product 50240635 to similar_products
2025-04-17 09:43:03,699 - DEBUG - Checking product_id 190544240 in DataFrame
2025-04-17 09:43:03,701 - DEBUG - Added product 190544240 to similar_products
2025-04-17 09:43:03,702 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-17 09:43:03,703 - DEBUG - Added product 73987485 to similar_products
2025-04-17 09:43:03,704 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-17 09:43:03,705 - DEBUG - Added product 73987448 to similar_products
2025-04-17 09:43:03,706 - DEBUG - Checking product_id 215990219 in DataFrame
2025-04-17 09:43:03,707 - DEBUG - Added product 215990219 to similar_products
2025-04-17 09:43:03,708 - DEBUG - Checking product_id 275130480 in DataFrame
2025-04-17 09:43:03,709 - DEBUG - Added product 275130480 to similar_products
2025-04-17 09:43:03,709 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-17 09:43:03,711 - DEBUG - Added product 275513834 to similar_products
2025-04-17 09:43:03,711 - DEBUG - Final similar_products count: 10
2025-04-17 09:43:03,712 - DEBUG - Final similar_products: [275761136, 275543974, 126998612, 50240635, 190544240, 73987485, 73987448, 215990219, 275130480, 275513834]
2025-04-17 09:43:03,712 - DEBUG - --- Completed get_similar_products_by_id for product_id: 165345530 ---
2025-04-17 09:43:03,713 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:43:03,713 - DEBUG - Preparing response with similar products
2025-04-17 09:43:03,717 - DEBUG - --- Completed request for /api/recommendations/165345530 ---
2025-04-17 09:43:07,622 - DEBUG - --- Processing request for /api/recommendations/126998612 ---
2025-04-17 09:43:07,622 - DEBUG - Limit set to: 10
2025-04-17 09:43:07,623 - DEBUG - --- Starting get_similar_products_by_id for product_id: 126998612 ---
2025-04-17 09:43:07,624 - DEBUG - Checking if product_id 126998612 exists in product_ids
2025-04-17 09:43:07,626 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:43:07,626 - DEBUG - Fetching product details from Tiki API for product_id: 126998612
2025-04-17 09:43:07,839 - DEBUG - Extracting product details
2025-04-17 09:43:07,840 - DEBUG - Name: Loa Bluetooth JBL Charge 5 - Hàng Chính Hãng
2025-04-17 09:43:07,844 - DEBUG - Category_name: Root
2025-04-17 09:43:07,844 - DEBUG - Brand_name: JBL
2025-04-17 09:43:07,848 - DEBUG - Encoding combined text to embedding
2025-04-17 09:43:07,926 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:43:07,927 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:43:07,929 - DEBUG - FAISS search results - distances: [[0.0, 0.2678082287311554, 0.3036814332008362, 0.30939656496047974, 0.3183974623680115, 0.3310645818710327, 0.36594370007514954, 0.38059157133102417, 0.3809170722961426, 0.39433977007865906, 0.42072129249572754]]
2025-04-17 09:43:07,929 - DEBUG - FAISS search results - indices: [[2836, 2730, 2847, 430, 2865, 2848, 2830, 2692, 2698, 2628, 2699]]
2025-04-17 09:43:07,930 - DEBUG - Filtered result_product_ids: [8326109, 165345530, 73987485, 50240635, 190544240, 275543974, 275761136, 275130480, 275513834, 275130483]
2025-04-17 09:43:07,930 - DEBUG - Checking product_id 8326109 in DataFrame
2025-04-17 09:43:07,932 - DEBUG - Added product 8326109 to similar_products
2025-04-17 09:43:07,932 - DEBUG - Checking product_id 165345530 in DataFrame
2025-04-17 09:43:07,934 - DEBUG - Added product 165345530 to similar_products
2025-04-17 09:43:07,934 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-17 09:43:07,935 - DEBUG - Added product 73987485 to similar_products
2025-04-17 09:43:07,936 - DEBUG - Checking product_id 50240635 in DataFrame
2025-04-17 09:43:07,937 - DEBUG - Added product 50240635 to similar_products
2025-04-17 09:43:07,938 - DEBUG - Checking product_id 190544240 in DataFrame
2025-04-17 09:43:07,939 - DEBUG - Added product 190544240 to similar_products
2025-04-17 09:43:07,941 - DEBUG - Checking product_id 275543974 in DataFrame
2025-04-17 09:43:07,943 - DEBUG - Added product 275543974 to similar_products
2025-04-17 09:43:07,944 - DEBUG - Checking product_id 275761136 in DataFrame
2025-04-17 09:43:07,946 - DEBUG - Added product 275761136 to similar_products
2025-04-17 09:43:07,946 - DEBUG - Checking product_id 275130480 in DataFrame
2025-04-17 09:43:07,948 - DEBUG - Added product 275130480 to similar_products
2025-04-17 09:43:07,948 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-17 09:43:07,950 - DEBUG - Added product 275513834 to similar_products
2025-04-17 09:43:07,950 - DEBUG - Checking product_id 275130483 in DataFrame
2025-04-17 09:43:07,952 - DEBUG - Added product 275130483 to similar_products
2025-04-17 09:43:07,952 - DEBUG - Final similar_products count: 10
2025-04-17 09:43:07,953 - DEBUG - Final similar_products: [8326109, 165345530, 73987485, 50240635, 190544240, 275543974, 275761136, 275130480, 275513834, 275130483]
2025-04-17 09:43:07,953 - DEBUG - --- Completed get_similar_products_by_id for product_id: 126998612 ---
2025-04-17 09:43:07,954 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:43:07,954 - DEBUG - Preparing response with similar products
2025-04-17 09:43:07,959 - DEBUG - --- Completed request for /api/recommendations/126998612 ---
2025-04-17 09:43:09,985 - DEBUG - --- Processing request for /api/recommendations/73987485 ---
2025-04-17 09:43:09,986 - DEBUG - Limit set to: 10
2025-04-17 09:43:09,986 - DEBUG - --- Starting get_similar_products_by_id for product_id: 73987485 ---
2025-04-17 09:43:09,987 - DEBUG - Checking if product_id 73987485 exists in product_ids
2025-04-17 09:43:09,987 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:43:09,989 - DEBUG - Fetching product details from Tiki API for product_id: 73987485
2025-04-17 09:43:10,194 - DEBUG - Extracting product details
2025-04-17 09:43:10,195 - DEBUG - Name: Loa Bluetooth JBL Go 3 - Hàng Chính Hãng
2025-04-17 09:43:10,200 - DEBUG - Category_name: Loa Bluetooth
2025-04-17 09:43:10,201 - DEBUG - Brand_name: JBL
2025-04-17 09:43:10,204 - DEBUG - Encoding combined text to embedding
2025-04-17 09:43:10,264 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:43:10,264 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:43:10,266 - DEBUG - FAISS search results - distances: [[1.4734012078986003e-13, 0.1871301233768463, 0.23136639595031738, 0.24081039428710938, 0.2445048987865448, 0.2669559419155121, 0.26712560653686523, 0.2781882882118225, 0.2805670499801636, 0.2884690463542938, 0.2989574670791626]]
2025-04-17 09:43:10,268 - DEBUG - FAISS search results - indices: [[430, 2699, 2848, 2692, 2698, 2809, 2628, 2830, 7807, 2802, 2865]]
2025-04-17 09:43:10,268 - DEBUG - Filtered result_product_ids: [275130483, 190544240, 275761136, 275130480, 73987509, 275513834, 275543974, 50327179, 73987448, 50240635]
2025-04-17 09:43:10,269 - DEBUG - Checking product_id 275130483 in DataFrame
2025-04-17 09:43:10,270 - DEBUG - Added product 275130483 to similar_products
2025-04-17 09:43:10,271 - DEBUG - Checking product_id 190544240 in DataFrame
2025-04-17 09:43:10,272 - DEBUG - Added product 190544240 to similar_products
2025-04-17 09:43:10,273 - DEBUG - Checking product_id 275761136 in DataFrame
2025-04-17 09:43:10,275 - DEBUG - Added product 275761136 to similar_products
2025-04-17 09:43:10,277 - DEBUG - Checking product_id 275130480 in DataFrame
2025-04-17 09:43:10,279 - DEBUG - Added product 275130480 to similar_products
2025-04-17 09:43:10,280 - DEBUG - Checking product_id 73987509 in DataFrame
2025-04-17 09:43:10,281 - DEBUG - Added product 73987509 to similar_products
2025-04-17 09:43:10,282 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-17 09:43:10,283 - DEBUG - Added product 275513834 to similar_products
2025-04-17 09:43:10,284 - DEBUG - Checking product_id 275543974 in DataFrame
2025-04-17 09:43:10,286 - DEBUG - Added product 275543974 to similar_products
2025-04-17 09:43:10,287 - DEBUG - Checking product_id 50327179 in DataFrame
2025-04-17 09:43:10,288 - DEBUG - Added product 50327179 to similar_products
2025-04-17 09:43:10,290 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-17 09:43:10,292 - DEBUG - Added product 73987448 to similar_products
2025-04-17 09:43:10,294 - DEBUG - Checking product_id 50240635 in DataFrame
2025-04-17 09:43:10,297 - DEBUG - Added product 50240635 to similar_products
2025-04-17 09:43:10,297 - DEBUG - Final similar_products count: 10
2025-04-17 09:43:10,298 - DEBUG - Final similar_products: [275130483, 190544240, 275761136, 275130480, 73987509, 275513834, 275543974, 50327179, 73987448, 50240635]
2025-04-17 09:43:10,298 - DEBUG - --- Completed get_similar_products_by_id for product_id: 73987485 ---
2025-04-17 09:43:10,314 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:43:10,315 - DEBUG - Preparing response with similar products
2025-04-17 09:43:10,319 - DEBUG - --- Completed request for /api/recommendations/73987485 ---
2025-04-17 09:44:51,906 - DEBUG - --- Initializing SearchService ---
2025-04-17 09:44:51,906 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 09:44:51,907 - DEBUG - Loading SentenceTransformer model
2025-04-17 09:44:55,435 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 09:44:55,436 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 09:44:55,437 - DEBUG - Loading FAISS index
2025-04-17 09:44:55,444 - DEBUG - Loading product DataFrame
2025-04-17 09:44:55,465 - DEBUG - Loading product_ids
2025-04-17 09:44:55,466 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 09:44:55,466 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 09:44:55,467 - DEBUG - FAISS index ntotal: 8587
2025-04-17 09:50:50,595 - DEBUG - --- Processing request for /api/recommendations/157425493 ---
2025-04-17 09:50:50,596 - DEBUG - Limit set to: 10
2025-04-17 09:50:50,597 - DEBUG - --- Starting get_similar_products_by_id for product_id: 157425493 ---
2025-04-17 09:50:50,598 - DEBUG - Checking if product_id 157425493 exists in product_ids
2025-04-17 09:50:50,599 - DEBUG - Product_id exists in vector database: False
2025-04-17 09:50:50,600 - DEBUG - Fetching product details from Tiki API for product_id: 157425493
2025-04-17 09:50:51,347 - DEBUG - Extracting product details
2025-04-17 09:50:51,382 - DEBUG - Category_name: Loa Bluetooth Vi Tính
2025-04-17 09:50:51,382 - DEBUG - Brand_name: Crown
2025-04-17 09:50:51,386 - DEBUG - Encoding combined text to embedding
2025-04-17 09:50:51,464 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:50:51,464 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:50:51,483 - DEBUG - FAISS search results - distances: [[0.5293311476707458, 0.5329488515853882, 0.540629506111145, 0.5445607900619507, 0.5450800061225891, 0.5483427047729492, 0.5517357587814331, 0.5545967817306519, 0.5634488463401794, 0.5691717863082886, 0.5716025829315186]]
2025-04-17 09:50:51,484 - DEBUG - FAISS search results - indices: [[2777, 3712, 444, 6866, 430, 4223, 2802, 438, 3201, 2628, 5177]]
2025-04-17 09:50:51,484 - DEBUG - Filtered result_product_ids: [202052235, 197628463, 77743707, 19257726, 73987485, 157425347, 73987448, 77710857, 98731523, 275513834]
2025-04-17 09:50:51,485 - DEBUG - Checking product_id 202052235 in DataFrame
2025-04-17 09:50:51,488 - DEBUG - Added product 202052235 to similar_products
2025-04-17 09:50:51,489 - DEBUG - Checking product_id 197628463 in DataFrame
2025-04-17 09:50:51,491 - DEBUG - Added product 197628463 to similar_products
2025-04-17 09:50:51,491 - DEBUG - Checking product_id 77743707 in DataFrame
2025-04-17 09:50:51,493 - DEBUG - Added product 77743707 to similar_products
2025-04-17 09:50:51,494 - DEBUG - Checking product_id 19257726 in DataFrame
2025-04-17 09:50:51,496 - DEBUG - Added product 19257726 to similar_products
2025-04-17 09:50:51,497 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-17 09:50:51,499 - DEBUG - Added product 73987485 to similar_products
2025-04-17 09:50:51,500 - DEBUG - Checking product_id 157425347 in DataFrame
2025-04-17 09:50:51,502 - DEBUG - Added product 157425347 to similar_products
2025-04-17 09:50:51,503 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-17 09:50:51,504 - DEBUG - Added product 73987448 to similar_products
2025-04-17 09:50:51,505 - DEBUG - Checking product_id 77710857 in DataFrame
2025-04-17 09:50:51,507 - DEBUG - Added product 77710857 to similar_products
2025-04-17 09:50:51,507 - DEBUG - Checking product_id 98731523 in DataFrame
2025-04-17 09:50:51,509 - DEBUG - Added product 98731523 to similar_products
2025-04-17 09:50:51,510 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-17 09:50:51,512 - DEBUG - Added product 275513834 to similar_products
2025-04-17 09:50:51,513 - DEBUG - Final similar_products count: 10
2025-04-17 09:50:51,514 - DEBUG - Final similar_products: [202052235, 197628463, 77743707, 19257726, 73987485, 157425347, 73987448, 77710857, 98731523, 275513834]
2025-04-17 09:50:51,515 - DEBUG - --- Completed get_similar_products_by_id for product_id: 157425493 ---
2025-04-17 09:50:51,516 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:50:51,517 - DEBUG - Preparing response with similar products
2025-04-17 09:50:51,522 - DEBUG - --- Completed request for /api/recommendations/157425493 ---
2025-04-17 09:50:54,106 - DEBUG - --- Processing request for /api/recommendations/77743707 ---
2025-04-17 09:50:54,106 - DEBUG - Limit set to: 10
2025-04-17 09:50:54,107 - DEBUG - --- Starting get_similar_products_by_id for product_id: 77743707 ---
2025-04-17 09:50:54,108 - DEBUG - Checking if product_id 77743707 exists in product_ids
2025-04-17 09:50:54,109 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:50:54,109 - DEBUG - Fetching product details from Tiki API for product_id: 77743707
2025-04-17 09:50:54,213 - DEBUG - Extracting product details
2025-04-17 09:50:54,214 - DEBUG - Name: Loa Bluetooth Speaker không dây PKCB - Hàng chính hãng
2025-04-17 09:50:54,217 - DEBUG - Category_name: 
2025-04-17 09:50:54,218 - DEBUG - Brand_name: PKCB
2025-04-17 09:50:54,222 - DEBUG - Encoding combined text to embedding
2025-04-17 09:50:54,265 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:50:54,266 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:50:54,267 - DEBUG - FAISS search results - distances: [[0.0332731269299984, 0.2569214105606079, 0.2602250576019287, 0.27119341492652893, 0.2749212384223938, 0.2766723930835724, 0.29434263706207275, 0.3081706166267395, 0.3147929310798645, 0.31943464279174805, 0.32176071405410767]]
2025-04-17 09:50:54,268 - DEBUG - FAISS search results - indices: [[444, 340, 438, 7503, 1091, 715, 454, 385, 394, 328, 1968]]
2025-04-17 09:50:54,269 - DEBUG - Filtered result_product_ids: [75301142, 77710857, 273704800, 89065883, 106685187, 95469280, 77712221, 73745311, 77918308, 111000087]
2025-04-17 09:50:54,269 - DEBUG - Checking product_id 75301142 in DataFrame
2025-04-17 09:50:54,271 - DEBUG - Added product 75301142 to similar_products
2025-04-17 09:50:54,271 - DEBUG - Checking product_id 77710857 in DataFrame
2025-04-17 09:50:54,273 - DEBUG - Added product 77710857 to similar_products
2025-04-17 09:50:54,273 - DEBUG - Checking product_id 273704800 in DataFrame
2025-04-17 09:50:54,274 - DEBUG - Added product 273704800 to similar_products
2025-04-17 09:50:54,275 - DEBUG - Checking product_id 89065883 in DataFrame
2025-04-17 09:50:54,276 - DEBUG - Added product 89065883 to similar_products
2025-04-17 09:50:54,277 - DEBUG - Checking product_id 106685187 in DataFrame
2025-04-17 09:50:54,278 - DEBUG - Added product 106685187 to similar_products
2025-04-17 09:50:54,278 - DEBUG - Checking product_id 95469280 in DataFrame
2025-04-17 09:50:54,280 - DEBUG - Added product 95469280 to similar_products
2025-04-17 09:50:54,281 - DEBUG - Checking product_id 77712221 in DataFrame
2025-04-17 09:50:54,282 - DEBUG - Added product 77712221 to similar_products
2025-04-17 09:50:54,282 - DEBUG - Checking product_id 73745311 in DataFrame
2025-04-17 09:50:54,285 - DEBUG - Added product 73745311 to similar_products
2025-04-17 09:50:54,285 - DEBUG - Checking product_id 77918308 in DataFrame
2025-04-17 09:50:54,287 - DEBUG - Added product 77918308 to similar_products
2025-04-17 09:50:54,287 - DEBUG - Checking product_id 111000087 in DataFrame
2025-04-17 09:50:54,288 - DEBUG - Added product 111000087 to similar_products
2025-04-17 09:50:54,289 - DEBUG - Final similar_products count: 10
2025-04-17 09:50:54,289 - DEBUG - Final similar_products: [75301142, 77710857, 273704800, 89065883, 106685187, 95469280, 77712221, 73745311, 77918308, 111000087]
2025-04-17 09:50:54,290 - DEBUG - --- Completed get_similar_products_by_id for product_id: 77743707 ---
2025-04-17 09:50:54,290 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:50:54,291 - DEBUG - Preparing response with similar products
2025-04-17 09:50:54,295 - DEBUG - --- Completed request for /api/recommendations/77743707 ---
2025-04-17 09:55:38,244 - DEBUG - --- Processing request for /api/recommendations/191719745 ---
2025-04-17 09:55:38,245 - DEBUG - Limit set to: 10
2025-04-17 09:55:38,246 - DEBUG - --- Starting get_similar_products_by_id for product_id: 191719745 ---
2025-04-17 09:55:38,247 - DEBUG - Checking if product_id 191719745 exists in product_ids
2025-04-17 09:55:38,248 - DEBUG - Product_id exists in vector database: False
2025-04-17 09:55:38,249 - DEBUG - Fetching product details from Tiki API for product_id: 191719745
2025-04-17 09:55:38,960 - DEBUG - Extracting product details
2025-04-17 09:55:38,961 - DEBUG - Name: Loa Bluetooth Marshall Willen Portable - Hàng chính hãng
2025-04-17 09:55:38,964 - DEBUG - Category_name: Loa Bluetooth
2025-04-17 09:55:38,964 - DEBUG - Brand_name: Marshall
2025-04-17 09:55:38,967 - DEBUG - Encoding combined text to embedding
2025-04-17 09:55:39,014 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:55:39,015 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:55:39,016 - DEBUG - FAISS search results - distances: [[0.3211596608161926, 0.3452359139919281, 0.36203867197036743, 0.36958903074264526, 0.3720223307609558, 0.37670496106147766, 0.3875423073768616, 0.3898598551750183, 0.40498536825180054, 0.40658217668533325, 0.40817633271217346]]
2025-04-17 09:55:39,017 - DEBUG - FAISS search results - indices: [[2777, 7807, 1284, 438, 2802, 430, 1887, 365, 6682, 342, 340]]
2025-04-17 09:55:39,017 - DEBUG - Filtered result_product_ids: [202052235, 50327179, 275467638, 77710857, 73987448, 73987485, 23238896, 275513943, 20698365, 31246621]
2025-04-17 09:55:39,018 - DEBUG - Checking product_id 202052235 in DataFrame
2025-04-17 09:55:39,019 - DEBUG - Added product 202052235 to similar_products
2025-04-17 09:55:39,020 - DEBUG - Checking product_id 50327179 in DataFrame
2025-04-17 09:55:39,021 - DEBUG - Added product 50327179 to similar_products
2025-04-17 09:55:39,022 - DEBUG - Checking product_id 275467638 in DataFrame
2025-04-17 09:55:39,023 - DEBUG - Added product 275467638 to similar_products
2025-04-17 09:55:39,023 - DEBUG - Checking product_id 77710857 in DataFrame
2025-04-17 09:55:39,024 - DEBUG - Added product 77710857 to similar_products
2025-04-17 09:55:39,025 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-17 09:55:39,026 - DEBUG - Added product 73987448 to similar_products
2025-04-17 09:55:39,027 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-17 09:55:39,028 - DEBUG - Added product 73987485 to similar_products
2025-04-17 09:55:39,029 - DEBUG - Checking product_id 23238896 in DataFrame
2025-04-17 09:55:39,030 - DEBUG - Added product 23238896 to similar_products
2025-04-17 09:55:39,030 - DEBUG - Checking product_id 275513943 in DataFrame
2025-04-17 09:55:39,032 - DEBUG - Added product 275513943 to similar_products
2025-04-17 09:55:39,032 - DEBUG - Checking product_id 20698365 in DataFrame
2025-04-17 09:55:39,034 - DEBUG - Added product 20698365 to similar_products
2025-04-17 09:55:39,034 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-17 09:55:39,036 - DEBUG - Added product 31246621 to similar_products
2025-04-17 09:55:39,036 - DEBUG - Final similar_products count: 10
2025-04-17 09:55:39,037 - DEBUG - Final similar_products: [202052235, 50327179, 275467638, 77710857, 73987448, 73987485, 23238896, 275513943, 20698365, 31246621]
2025-04-17 09:55:39,038 - DEBUG - --- Completed get_similar_products_by_id for product_id: 191719745 ---
2025-04-17 09:55:39,038 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:55:39,039 - DEBUG - Preparing response with similar products
2025-04-17 09:55:39,043 - DEBUG - --- Completed request for /api/recommendations/191719745 ---
2025-04-17 09:55:43,622 - DEBUG - --- Processing request for /api/recommendations/77710857 ---
2025-04-17 09:55:43,624 - DEBUG - Limit set to: 10
2025-04-17 09:55:43,625 - DEBUG - --- Starting get_similar_products_by_id for product_id: 77710857 ---
2025-04-17 09:55:43,626 - DEBUG - Checking if product_id 77710857 exists in product_ids
2025-04-17 09:55:43,626 - DEBUG - Product_id exists in vector database: True
2025-04-17 09:55:43,627 - DEBUG - Fetching product details from Tiki API for product_id: 77710857
2025-04-17 09:55:44,216 - DEBUG - Extracting product details
2025-04-17 09:55:44,231 - DEBUG - Category_name: 
2025-04-17 09:55:44,232 - DEBUG - Brand_name: PKCB
2025-04-17 09:55:44,237 - DEBUG - Encoding combined text to embedding
2025-04-17 09:55:44,336 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 09:55:44,340 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 09:55:44,342 - DEBUG - FAISS search results - distances: [[0.009676255285739899, 0.1258147656917572, 0.17218303680419922, 0.22083008289337158, 0.24746881425380707, 0.2503355145454407, 0.25033557415008545, 0.25033557415008545, 0.26553890109062195, 0.2674099802970886, 0.2682620584964752]]
2025-04-17 09:55:44,343 - DEBUG - FAISS search results - indices: [[438, 328, 385, 340, 715, 334, 348, 417, 891, 444, 7503]]
2025-04-17 09:55:44,344 - DEBUG - Filtered result_product_ids: [77918308, 77712221, 75301142, 106685187, 80959641, 82874789, 82861299, 139200046, 77743707, 273704800]
2025-04-17 09:55:44,346 - DEBUG - Checking product_id 77918308 in DataFrame
2025-04-17 09:55:44,348 - DEBUG - Added product 77918308 to similar_products
2025-04-17 09:55:44,350 - DEBUG - Checking product_id 77712221 in DataFrame
2025-04-17 09:55:44,352 - DEBUG - Added product 77712221 to similar_products
2025-04-17 09:55:44,353 - DEBUG - Checking product_id 75301142 in DataFrame
2025-04-17 09:55:44,355 - DEBUG - Added product 75301142 to similar_products
2025-04-17 09:55:44,356 - DEBUG - Checking product_id 106685187 in DataFrame
2025-04-17 09:55:44,357 - DEBUG - Added product 106685187 to similar_products
2025-04-17 09:55:44,358 - DEBUG - Checking product_id 80959641 in DataFrame
2025-04-17 09:55:44,360 - DEBUG - Added product 80959641 to similar_products
2025-04-17 09:55:44,361 - DEBUG - Checking product_id 82874789 in DataFrame
2025-04-17 09:55:44,363 - DEBUG - Added product 82874789 to similar_products
2025-04-17 09:55:44,364 - DEBUG - Checking product_id 82861299 in DataFrame
2025-04-17 09:55:44,366 - DEBUG - Added product 82861299 to similar_products
2025-04-17 09:55:44,366 - DEBUG - Checking product_id 139200046 in DataFrame
2025-04-17 09:55:44,368 - DEBUG - Added product 139200046 to similar_products
2025-04-17 09:55:44,369 - DEBUG - Checking product_id 77743707 in DataFrame
2025-04-17 09:55:44,370 - DEBUG - Added product 77743707 to similar_products
2025-04-17 09:55:44,371 - DEBUG - Checking product_id 273704800 in DataFrame
2025-04-17 09:55:44,372 - DEBUG - Added product 273704800 to similar_products
2025-04-17 09:55:44,373 - DEBUG - Final similar_products count: 10
2025-04-17 09:55:44,374 - DEBUG - Final similar_products: [77918308, 77712221, 75301142, 106685187, 80959641, 82874789, 82861299, 139200046, 77743707, 273704800]
2025-04-17 09:55:44,375 - DEBUG - --- Completed get_similar_products_by_id for product_id: 77710857 ---
2025-04-17 09:55:44,375 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 09:55:44,376 - DEBUG - Preparing response with similar products
2025-04-17 09:55:44,382 - DEBUG - --- Completed request for /api/recommendations/77710857 ---
2025-04-17 12:36:55,888 - DEBUG - --- Processing request for /api/recommendations/145717791 ---
2025-04-17 12:36:55,903 - DEBUG - Limit set to: 10
2025-04-17 12:36:55,904 - DEBUG - --- Starting get_similar_products_by_id for product_id: 145717791 ---
2025-04-17 12:36:55,905 - DEBUG - Checking if product_id 145717791 exists in product_ids
2025-04-17 12:36:55,907 - DEBUG - Product_id exists in vector database: False
2025-04-17 12:36:55,907 - DEBUG - Fetching product details from Tiki API for product_id: 145717791
2025-04-17 12:36:56,164 - DEBUG - Extracting product details
2025-04-17 12:36:56,165 - DEBUG - Name: Loa bluetooth Microlab MS210 - Hàng Chính Hãng
2025-04-17 12:36:56,169 - DEBUG - Category_name: Loa Bluetooth
2025-04-17 12:36:56,169 - DEBUG - Brand_name: Microlab
2025-04-17 12:36:56,173 - DEBUG - Encoding combined text to embedding
2025-04-17 12:36:56,282 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 12:36:56,282 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 12:36:56,287 - DEBUG - FAISS search results - distances: [[0.33608540892601013, 0.43131178617477417, 0.4343501031398773, 0.43940794467926025, 0.4434923827648163, 0.44407588243484497, 0.4492255449295044, 0.45553871989250183, 0.4654953181743622, 0.47279176115989685, 0.47456228733062744]]
2025-04-17 12:36:56,287 - DEBUG - FAISS search results - indices: [[6552, 7452, 5177, 1987, 3626, 342, 2802, 2777, 1359, 1330, 2809]]
2025-04-17 12:36:56,288 - DEBUG - Filtered result_product_ids: [11194860, 173663856, 274642014, 14260838, 6655991, 31246621, 73987448, 202052235, 276688668, 83349091]
2025-04-17 12:36:56,289 - DEBUG - Checking product_id 11194860 in DataFrame
2025-04-17 12:36:56,306 - DEBUG - Added product 11194860 to similar_products
2025-04-17 12:36:56,323 - DEBUG - Checking product_id 173663856 in DataFrame
2025-04-17 12:36:56,373 - DEBUG - Added product 173663856 to similar_products
2025-04-17 12:36:56,406 - DEBUG - Checking product_id 274642014 in DataFrame
2025-04-17 12:36:56,428 - DEBUG - Added product 274642014 to similar_products
2025-04-17 12:36:56,429 - DEBUG - Checking product_id 14260838 in DataFrame
2025-04-17 12:36:56,432 - DEBUG - Added product 14260838 to similar_products
2025-04-17 12:36:56,433 - DEBUG - Checking product_id 6655991 in DataFrame
2025-04-17 12:36:56,436 - DEBUG - Added product 6655991 to similar_products
2025-04-17 12:36:56,437 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-17 12:36:56,439 - DEBUG - Added product 31246621 to similar_products
2025-04-17 12:36:56,440 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-17 12:36:56,519 - DEBUG - Added product 73987448 to similar_products
2025-04-17 12:36:56,530 - DEBUG - Checking product_id 202052235 in DataFrame
2025-04-17 12:36:56,554 - DEBUG - Added product 202052235 to similar_products
2025-04-17 12:36:56,555 - DEBUG - Checking product_id 276688668 in DataFrame
2025-04-17 12:36:56,557 - DEBUG - Added product 276688668 to similar_products
2025-04-17 12:36:56,561 - DEBUG - Checking product_id 83349091 in DataFrame
2025-04-17 12:36:56,566 - DEBUG - Added product 83349091 to similar_products
2025-04-17 12:36:56,574 - DEBUG - Final similar_products count: 10
2025-04-17 12:36:56,578 - DEBUG - Final similar_products: [11194860, 173663856, 274642014, 14260838, 6655991, 31246621, 73987448, 202052235, 276688668, 83349091]
2025-04-17 12:36:56,586 - DEBUG - --- Completed get_similar_products_by_id for product_id: 145717791 ---
2025-04-17 12:36:56,596 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 12:36:56,598 - DEBUG - Preparing response with similar products
2025-04-17 12:36:56,612 - DEBUG - --- Completed request for /api/recommendations/145717791 ---
2025-04-17 12:36:59,469 - DEBUG - --- Processing request for /api/recommendations/157425493 ---
2025-04-17 12:36:59,470 - DEBUG - Limit set to: 10
2025-04-17 12:36:59,471 - DEBUG - --- Starting get_similar_products_by_id for product_id: 157425493 ---
2025-04-17 12:36:59,472 - DEBUG - Checking if product_id 157425493 exists in product_ids
2025-04-17 12:36:59,473 - DEBUG - Product_id exists in vector database: False
2025-04-17 12:36:59,474 - DEBUG - Fetching product details from Tiki API for product_id: 157425493
2025-04-17 12:37:00,074 - DEBUG - Extracting product details
2025-04-17 12:37:00,081 - DEBUG - Category_name: Loa Bluetooth Vi Tính
2025-04-17 12:37:00,081 - DEBUG - Brand_name: Crown
2025-04-17 12:37:00,085 - DEBUG - Encoding combined text to embedding
2025-04-17 12:37:00,144 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 12:37:00,144 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 12:37:00,146 - DEBUG - FAISS search results - distances: [[0.5293311476707458, 0.5329488515853882, 0.540629506111145, 0.5445607900619507, 0.5450800061225891, 0.5483427047729492, 0.5517357587814331, 0.5545967817306519, 0.5634488463401794, 0.5691717863082886, 0.5716025829315186]]
2025-04-17 12:37:00,147 - DEBUG - FAISS search results - indices: [[2777, 3712, 444, 6866, 430, 4223, 2802, 438, 3201, 2628, 5177]]
2025-04-17 12:37:00,148 - DEBUG - Filtered result_product_ids: [202052235, 197628463, 77743707, 19257726, 73987485, 157425347, 73987448, 77710857, 98731523, 275513834]
2025-04-17 12:37:00,148 - DEBUG - Checking product_id 202052235 in DataFrame
2025-04-17 12:37:00,150 - DEBUG - Added product 202052235 to similar_products
2025-04-17 12:37:00,151 - DEBUG - Checking product_id 197628463 in DataFrame
2025-04-17 12:37:00,153 - DEBUG - Added product 197628463 to similar_products
2025-04-17 12:37:00,154 - DEBUG - Checking product_id 77743707 in DataFrame
2025-04-17 12:37:00,155 - DEBUG - Added product 77743707 to similar_products
2025-04-17 12:37:00,156 - DEBUG - Checking product_id 19257726 in DataFrame
2025-04-17 12:37:00,158 - DEBUG - Added product 19257726 to similar_products
2025-04-17 12:37:00,159 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-17 12:37:00,160 - DEBUG - Added product 73987485 to similar_products
2025-04-17 12:37:00,161 - DEBUG - Checking product_id 157425347 in DataFrame
2025-04-17 12:37:00,163 - DEBUG - Added product 157425347 to similar_products
2025-04-17 12:37:00,163 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-17 12:37:00,165 - DEBUG - Added product 73987448 to similar_products
2025-04-17 12:37:00,165 - DEBUG - Checking product_id 77710857 in DataFrame
2025-04-17 12:37:00,167 - DEBUG - Added product 77710857 to similar_products
2025-04-17 12:37:00,168 - DEBUG - Checking product_id 98731523 in DataFrame
2025-04-17 12:37:00,171 - DEBUG - Added product 98731523 to similar_products
2025-04-17 12:37:00,171 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-17 12:37:00,173 - DEBUG - Added product 275513834 to similar_products
2025-04-17 12:37:00,174 - DEBUG - Final similar_products count: 10
2025-04-17 12:37:00,174 - DEBUG - Final similar_products: [202052235, 197628463, 77743707, 19257726, 73987485, 157425347, 73987448, 77710857, 98731523, 275513834]
2025-04-17 12:37:00,175 - DEBUG - --- Completed get_similar_products_by_id for product_id: 157425493 ---
2025-04-17 12:37:00,175 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 12:37:00,176 - DEBUG - Preparing response with similar products
2025-04-17 12:37:00,181 - DEBUG - --- Completed request for /api/recommendations/157425493 ---
2025-04-17 12:37:08,783 - DEBUG - --- Processing request for /api/recommendations/276318081 ---
2025-04-17 12:37:08,785 - DEBUG - Limit set to: 10
2025-04-17 12:37:08,786 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276318081 ---
2025-04-17 12:37:08,787 - DEBUG - Checking if product_id 276318081 exists in product_ids
2025-04-17 12:37:08,788 - DEBUG - Product_id exists in vector database: True
2025-04-17 12:37:08,788 - DEBUG - Fetching product details from Tiki API for product_id: 276318081
2025-04-17 12:37:09,413 - DEBUG - Extracting product details
2025-04-17 12:37:09,414 - DEBUG - Name: Loa Bluetooth Jonter M99 (HÀNG CHÍNH HÃNG)
2025-04-17 12:37:09,420 - DEBUG - Category_name: Loa Bluetooth
2025-04-17 12:37:09,421 - DEBUG - Brand_name: Baseus
2025-04-17 12:37:09,425 - DEBUG - Encoding combined text to embedding
2025-04-17 12:37:09,485 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 12:37:09,486 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 12:37:09,488 - DEBUG - FAISS search results - distances: [[1.1651801485462743e-13, 0.3785518705844879, 0.3787113428115845, 0.38968145847320557, 0.39127829670906067, 0.4053909480571747, 0.409948468208313, 0.4113369882106781, 0.4166675806045532, 0.4296514689922333, 0.4320507049560547]]
2025-04-17 12:37:09,489 - DEBUG - FAISS search results - indices: [[466, 342, 5177, 331, 7807, 1038, 365, 430, 5544, 1199, 8019]]
2025-04-17 12:37:09,490 - DEBUG - Filtered result_product_ids: [31246621, 274642014, 74891402, 50327179, 43395259, 275513943, 73987485, 51198977, 977792, 19395458]
2025-04-17 12:37:09,490 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-17 12:37:09,492 - DEBUG - Added product 31246621 to similar_products
2025-04-17 12:37:09,493 - DEBUG - Checking product_id 274642014 in DataFrame
2025-04-17 12:37:09,495 - DEBUG - Added product 274642014 to similar_products
2025-04-17 12:37:09,495 - DEBUG - Checking product_id 74891402 in DataFrame
2025-04-17 12:37:09,497 - DEBUG - Added product 74891402 to similar_products
2025-04-17 12:37:09,498 - DEBUG - Checking product_id 50327179 in DataFrame
2025-04-17 12:37:09,500 - DEBUG - Added product 50327179 to similar_products
2025-04-17 12:37:09,501 - DEBUG - Checking product_id 43395259 in DataFrame
2025-04-17 12:37:09,503 - DEBUG - Added product 43395259 to similar_products
2025-04-17 12:37:09,503 - DEBUG - Checking product_id 275513943 in DataFrame
2025-04-17 12:37:09,505 - DEBUG - Added product 275513943 to similar_products
2025-04-17 12:37:09,506 - DEBUG - Checking product_id 73987485 in DataFrame
2025-04-17 12:37:09,508 - DEBUG - Added product 73987485 to similar_products
2025-04-17 12:37:09,508 - DEBUG - Checking product_id 51198977 in DataFrame
2025-04-17 12:37:09,510 - DEBUG - Added product 51198977 to similar_products
2025-04-17 12:37:09,511 - DEBUG - Checking product_id 977792 in DataFrame
2025-04-17 12:37:09,513 - DEBUG - Added product 977792 to similar_products
2025-04-17 12:37:09,513 - DEBUG - Checking product_id 19395458 in DataFrame
2025-04-17 12:37:09,515 - DEBUG - Added product 19395458 to similar_products
2025-04-17 12:37:09,516 - DEBUG - Final similar_products count: 10
2025-04-17 12:37:09,517 - DEBUG - Final similar_products: [31246621, 274642014, 74891402, 50327179, 43395259, 275513943, 73987485, 51198977, 977792, 19395458]
2025-04-17 12:37:09,517 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276318081 ---
2025-04-17 12:37:09,518 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 12:37:09,519 - DEBUG - Preparing response with similar products
2025-04-17 12:37:09,525 - DEBUG - --- Completed request for /api/recommendations/276318081 ---
2025-04-17 12:37:15,141 - DEBUG - --- Processing request for /api/recommendations/73653415 ---
2025-04-17 12:37:15,142 - DEBUG - Limit set to: 10
2025-04-17 12:37:15,142 - DEBUG - --- Starting get_similar_products_by_id for product_id: 73653415 ---
2025-04-17 12:37:15,143 - DEBUG - Checking if product_id 73653415 exists in product_ids
2025-04-17 12:37:15,145 - DEBUG - Product_id exists in vector database: False
2025-04-17 12:37:15,145 - DEBUG - Fetching product details from Tiki API for product_id: 73653415
2025-04-17 12:37:15,479 - DEBUG - Extracting product details
2025-04-17 12:37:15,480 - DEBUG - Name: Loa Bluetooth  KLIPSCH HERITAGE GROOVE - Hàng chính hãng
2025-04-17 12:37:15,487 - DEBUG - Brand_name: Klipsch
2025-04-17 12:37:15,490 - DEBUG - Encoding combined text to embedding
2025-04-17 12:37:15,551 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 12:37:15,553 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 12:37:15,555 - DEBUG - FAISS search results - distances: [[0.46235525608062744, 0.4628921151161194, 0.4788658022880554, 0.4862286150455475, 0.49778714776039124, 0.4978358745574951, 0.5085881948471069, 0.5100184082984924, 0.510639488697052, 0.5181165933609009, 0.5201749801635742]]
2025-04-17 12:37:15,555 - DEBUG - FAISS search results - indices: [[2207, 342, 4823, 2802, 6996, 2735, 791, 1887, 2628, 7886, 1284]]
2025-04-17 12:37:15,556 - DEBUG - Filtered result_product_ids: [76062253, 31246621, 273886284, 73987448, 12540930, 50326792, 275399773, 23238896, 275513834, 203386958]
2025-04-17 12:37:15,556 - DEBUG - Checking product_id 76062253 in DataFrame
2025-04-17 12:37:15,558 - DEBUG - Added product 76062253 to similar_products
2025-04-17 12:37:15,558 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-17 12:37:15,560 - DEBUG - Added product 31246621 to similar_products
2025-04-17 12:37:15,560 - DEBUG - Checking product_id 273886284 in DataFrame
2025-04-17 12:37:15,562 - DEBUG - Added product 273886284 to similar_products
2025-04-17 12:37:15,563 - DEBUG - Checking product_id 73987448 in DataFrame
2025-04-17 12:37:15,565 - DEBUG - Added product 73987448 to similar_products
2025-04-17 12:37:15,566 - DEBUG - Checking product_id 12540930 in DataFrame
2025-04-17 12:37:15,569 - DEBUG - Added product 12540930 to similar_products
2025-04-17 12:37:15,570 - DEBUG - Checking product_id 50326792 in DataFrame
2025-04-17 12:37:15,572 - DEBUG - Added product 50326792 to similar_products
2025-04-17 12:37:15,573 - DEBUG - Checking product_id 275399773 in DataFrame
2025-04-17 12:37:15,574 - DEBUG - Added product 275399773 to similar_products
2025-04-17 12:37:15,575 - DEBUG - Checking product_id 23238896 in DataFrame
2025-04-17 12:37:15,577 - DEBUG - Added product 23238896 to similar_products
2025-04-17 12:37:15,577 - DEBUG - Checking product_id 275513834 in DataFrame
2025-04-17 12:37:15,580 - DEBUG - Added product 275513834 to similar_products
2025-04-17 12:37:15,580 - DEBUG - Checking product_id 203386958 in DataFrame
2025-04-17 12:37:15,584 - DEBUG - Added product 203386958 to similar_products
2025-04-17 12:37:15,585 - DEBUG - Final similar_products count: 10
2025-04-17 12:37:15,586 - DEBUG - Final similar_products: [76062253, 31246621, 273886284, 73987448, 12540930, 50326792, 275399773, 23238896, 275513834, 203386958]
2025-04-17 12:37:15,587 - DEBUG - --- Completed get_similar_products_by_id for product_id: 73653415 ---
2025-04-17 12:37:15,588 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 12:37:15,589 - DEBUG - Preparing response with similar products
2025-04-17 12:37:15,593 - DEBUG - --- Completed request for /api/recommendations/73653415 ---
2025-04-17 12:37:22,325 - DEBUG - --- Processing request for /api/recommendations/34240181 ---
2025-04-17 12:37:22,327 - DEBUG - Limit set to: 10
2025-04-17 12:37:22,327 - DEBUG - --- Starting get_similar_products_by_id for product_id: 34240181 ---
2025-04-17 12:37:22,328 - DEBUG - Checking if product_id 34240181 exists in product_ids
2025-04-17 12:37:22,329 - DEBUG - Product_id exists in vector database: False
2025-04-17 12:37:22,330 - DEBUG - Fetching product details from Tiki API for product_id: 34240181
2025-04-17 12:37:22,537 - DEBUG - Extracting product details
2025-04-17 12:37:22,538 - DEBUG - Name: Loa Marshall Woburn 2 Bluetooth - Hàng chính hãng 
2025-04-17 12:37:22,546 - DEBUG - Brand_name: Marshall
2025-04-17 12:37:22,550 - DEBUG - Encoding combined text to embedding
2025-04-17 12:37:22,632 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 12:37:22,636 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 12:37:22,643 - DEBUG - FAISS search results - distances: [[0.40787309408187866, 0.4154512882232666, 0.49210673570632935, 0.510220468044281, 0.5214029550552368, 0.5318572521209717, 0.5361621975898743, 0.5398475527763367, 0.5441755056381226, 0.5441977977752686, 0.5442315340042114]]
2025-04-17 12:37:22,650 - DEBUG - FAISS search results - indices: [[2857, 2777, 4639, 342, 2848, 2615, 444, 5475, 140, 8454, 302]]
2025-04-17 12:37:22,652 - DEBUG - Filtered result_product_ids: [241638318, 202052235, 277555304, 31246621, 190544240, 271122521, 77743707, 17906331, 82072571, 199916805]
2025-04-17 12:37:22,653 - DEBUG - Checking product_id 241638318 in DataFrame
2025-04-17 12:37:22,657 - DEBUG - Added product 241638318 to similar_products
2025-04-17 12:37:22,659 - DEBUG - Checking product_id 202052235 in DataFrame
2025-04-17 12:37:22,661 - DEBUG - Added product 202052235 to similar_products
2025-04-17 12:37:22,663 - DEBUG - Checking product_id 277555304 in DataFrame
2025-04-17 12:37:22,665 - DEBUG - Added product 277555304 to similar_products
2025-04-17 12:37:22,670 - DEBUG - Checking product_id 31246621 in DataFrame
2025-04-17 12:37:22,679 - DEBUG - Added product 31246621 to similar_products
2025-04-17 12:37:22,681 - DEBUG - Checking product_id 190544240 in DataFrame
2025-04-17 12:37:22,684 - DEBUG - Added product 190544240 to similar_products
2025-04-17 12:37:22,686 - DEBUG - Checking product_id 271122521 in DataFrame
2025-04-17 12:37:22,692 - DEBUG - Added product 271122521 to similar_products
2025-04-17 12:37:22,695 - DEBUG - Checking product_id 77743707 in DataFrame
2025-04-17 12:37:22,699 - DEBUG - Added product 77743707 to similar_products
2025-04-17 12:37:22,700 - DEBUG - Checking product_id 17906331 in DataFrame
2025-04-17 12:37:22,706 - DEBUG - Added product 17906331 to similar_products
2025-04-17 12:37:22,708 - DEBUG - Checking product_id 82072571 in DataFrame
2025-04-17 12:37:22,711 - DEBUG - Added product 82072571 to similar_products
2025-04-17 12:37:22,712 - DEBUG - Checking product_id 199916805 in DataFrame
2025-04-17 12:37:22,715 - DEBUG - Added product 199916805 to similar_products
2025-04-17 12:37:22,715 - DEBUG - Final similar_products count: 10
2025-04-17 12:37:22,721 - DEBUG - Final similar_products: [241638318, 202052235, 277555304, 31246621, 190544240, 271122521, 77743707, 17906331, 82072571, 199916805]
2025-04-17 12:37:22,723 - DEBUG - --- Completed get_similar_products_by_id for product_id: 34240181 ---
2025-04-17 12:37:22,724 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 12:37:22,725 - DEBUG - Preparing response with similar products
2025-04-17 12:37:22,732 - DEBUG - --- Completed request for /api/recommendations/34240181 ---
2025-04-17 20:45:07,161 - DEBUG - --- Initializing SearchService ---
2025-04-17 20:45:07,162 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 20:45:07,162 - DEBUG - Loading SentenceTransformer model
2025-04-17 20:45:10,884 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 20:45:10,884 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 20:45:10,885 - DEBUG - Loading FAISS index
2025-04-17 20:45:11,343 - DEBUG - Loading product DataFrame
2025-04-17 20:45:11,600 - DEBUG - Loading product_ids
2025-04-17 20:45:11,645 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 20:45:11,645 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 20:45:11,646 - DEBUG - FAISS index ntotal: 8587
2025-04-17 20:45:31,371 - DEBUG - --- Initializing SearchService ---
2025-04-17 20:45:31,372 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 20:45:31,372 - DEBUG - Loading SentenceTransformer model
2025-04-17 20:45:36,049 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 20:45:36,050 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 20:45:36,051 - DEBUG - Loading FAISS index
2025-04-17 20:45:36,060 - DEBUG - Loading product DataFrame
2025-04-17 20:45:36,091 - DEBUG - Loading product_ids
2025-04-17 20:45:36,093 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 20:45:36,094 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 20:45:36,094 - DEBUG - FAISS index ntotal: 8587
2025-04-17 20:48:34,988 - DEBUG - --- Initializing SearchService ---
2025-04-17 20:48:34,989 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 20:48:34,989 - DEBUG - Loading SentenceTransformer model
2025-04-17 20:48:40,093 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 20:48:40,093 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 20:48:40,094 - DEBUG - Loading FAISS index
2025-04-17 20:48:40,107 - DEBUG - Loading product DataFrame
2025-04-17 20:48:40,148 - DEBUG - Loading product_ids
2025-04-17 20:48:40,150 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 20:48:40,151 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 20:48:40,152 - DEBUG - FAISS index ntotal: 8587
2025-04-17 20:49:07,330 - DEBUG - --- Processing request for /api/recommendations/184059211 ---
2025-04-17 20:49:07,332 - DEBUG - Limit set to: 10
2025-04-17 20:49:07,332 - DEBUG - --- Starting get_similar_products_by_id for product_id: 184059211 ---
2025-04-17 20:49:07,333 - DEBUG - Checking if product_id 184059211 exists in product_ids
2025-04-17 20:49:07,335 - DEBUG - Product_id exists in vector database: False
2025-04-17 20:49:07,336 - DEBUG - Fetching product details from Tiki API for product_id: 184059211
2025-04-17 20:49:08,231 - DEBUG - Extracting product details
2025-04-17 20:49:08,231 - DEBUG - Name: Apple iPhone 13
2025-04-17 20:49:08,263 - DEBUG - Brand_name: Apple
2025-04-17 20:49:08,269 - DEBUG - Encoding combined text to embedding
2025-04-17 20:49:08,584 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 20:49:08,585 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 20:49:08,605 - DEBUG - FAISS search results - distances: [[0.6164488196372986, 0.6294758319854736, 0.650195837020874, 0.6850014328956604, 0.7004382610321045, 0.7051544189453125, 0.7058439254760742, 0.7092292308807373, 0.710883617401123, 0.7109403610229492, 0.7109628319740295]]
2025-04-17 20:49:08,606 - DEBUG - FAISS search results - indices: [[7387, 2736, 4172, 2521, 975, 1295, 6724, 2665, 2725, 8546, 240]]
2025-04-17 20:49:08,606 - DEBUG - Filtered result_product_ids: [183330021, 134933833, 203201921, 200914701, 277030799, 277466537, 50714154, 133039431, 197528405, 205815576]
2025-04-17 20:49:08,607 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-17 20:49:08,621 - DEBUG - Added product 183330021 to similar_products
2025-04-17 20:49:08,622 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-17 20:49:08,624 - DEBUG - Added product 134933833 to similar_products
2025-04-17 20:49:08,625 - DEBUG - Checking product_id 203201921 in DataFrame
2025-04-17 20:49:08,627 - DEBUG - Added product 203201921 to similar_products
2025-04-17 20:49:08,628 - DEBUG - Checking product_id 200914701 in DataFrame
2025-04-17 20:49:08,630 - DEBUG - Added product 200914701 to similar_products
2025-04-17 20:49:08,630 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-17 20:49:08,632 - DEBUG - Added product 277030799 to similar_products
2025-04-17 20:49:08,633 - DEBUG - Checking product_id 277466537 in DataFrame
2025-04-17 20:49:08,634 - DEBUG - Added product 277466537 to similar_products
2025-04-17 20:49:08,635 - DEBUG - Checking product_id 50714154 in DataFrame
2025-04-17 20:49:08,637 - DEBUG - Added product 50714154 to similar_products
2025-04-17 20:49:08,637 - DEBUG - Checking product_id 133039431 in DataFrame
2025-04-17 20:49:08,640 - DEBUG - Added product 133039431 to similar_products
2025-04-17 20:49:08,640 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-17 20:49:08,643 - DEBUG - Added product 197528405 to similar_products
2025-04-17 20:49:08,643 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-17 20:49:08,645 - DEBUG - Added product 205815576 to similar_products
2025-04-17 20:49:08,646 - DEBUG - Final similar_products count: 10
2025-04-17 20:49:08,647 - DEBUG - Final similar_products: [183330021, 134933833, 203201921, 200914701, 277030799, 277466537, 50714154, 133039431, 197528405, 205815576]
2025-04-17 20:49:08,648 - DEBUG - --- Completed get_similar_products_by_id for product_id: 184059211 ---
2025-04-17 20:49:08,649 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 20:49:08,650 - DEBUG - Preparing response with similar products
2025-04-17 20:49:08,656 - DEBUG - --- Completed request for /api/recommendations/184059211 ---
2025-04-17 20:50:06,524 - DEBUG - --- Processing request for /api/recommendations/276110349 ---
2025-04-17 20:50:06,525 - DEBUG - Limit set to: 10
2025-04-17 20:50:06,526 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276110349 ---
2025-04-17 20:50:06,526 - DEBUG - Checking if product_id 276110349 exists in product_ids
2025-04-17 20:50:06,527 - DEBUG - Product_id exists in vector database: False
2025-04-17 20:50:06,527 - DEBUG - Fetching product details from Tiki API for product_id: 276110349
2025-04-17 20:50:07,245 - DEBUG - Extracting product details
2025-04-17 20:50:07,246 - DEBUG - Name: Apple iPhone 16
2025-04-17 20:50:07,247 - DEBUG - Short_description: ...
2025-04-17 20:50:07,255 - DEBUG - Brand_name: Apple
2025-04-17 20:50:07,260 - DEBUG - Encoding combined text to embedding
2025-04-17 20:50:07,291 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 20:50:07,292 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 20:50:07,294 - DEBUG - FAISS search results - distances: [[0.7269222736358643, 0.7687099575996399, 0.7795100212097168, 0.7871565818786621, 0.8045234680175781, 0.817284345626831, 0.8229020237922668, 0.8246817588806152, 0.8259897232055664, 0.8284562230110168, 0.8299679160118103]]
2025-04-17 20:50:07,294 - DEBUG - FAISS search results - indices: [[7387, 930, 3877, 8546, 35, 2294, 1115, 1205, 1833, 1188, 1785]]
2025-04-17 20:50:07,295 - DEBUG - Filtered result_product_ids: [183330021, 273237704, 72849098, 205815576, 275589387, 273440662, 277490201, 230157205, 274544634, 275589968]
2025-04-17 20:50:07,298 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-17 20:50:07,301 - DEBUG - Added product 183330021 to similar_products
2025-04-17 20:50:07,302 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-17 20:50:07,305 - DEBUG - Added product 273237704 to similar_products
2025-04-17 20:50:07,306 - DEBUG - Checking product_id 72849098 in DataFrame
2025-04-17 20:50:07,308 - DEBUG - Added product 72849098 to similar_products
2025-04-17 20:50:07,308 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-17 20:50:07,311 - DEBUG - Added product 205815576 to similar_products
2025-04-17 20:50:07,312 - DEBUG - Checking product_id 275589387 in DataFrame
2025-04-17 20:50:07,315 - DEBUG - Added product 275589387 to similar_products
2025-04-17 20:50:07,315 - DEBUG - Checking product_id 273440662 in DataFrame
2025-04-17 20:50:07,317 - DEBUG - Added product 273440662 to similar_products
2025-04-17 20:50:07,318 - DEBUG - Checking product_id 277490201 in DataFrame
2025-04-17 20:50:07,321 - DEBUG - Added product 277490201 to similar_products
2025-04-17 20:50:07,321 - DEBUG - Checking product_id 230157205 in DataFrame
2025-04-17 20:50:07,323 - DEBUG - Added product 230157205 to similar_products
2025-04-17 20:50:07,324 - DEBUG - Checking product_id 274544634 in DataFrame
2025-04-17 20:50:07,326 - DEBUG - Added product 274544634 to similar_products
2025-04-17 20:50:07,327 - DEBUG - Checking product_id 275589968 in DataFrame
2025-04-17 20:50:07,330 - DEBUG - Added product 275589968 to similar_products
2025-04-17 20:50:07,331 - DEBUG - Final similar_products count: 10
2025-04-17 20:50:07,332 - DEBUG - Final similar_products: [183330021, 273237704, 72849098, 205815576, 275589387, 273440662, 277490201, 230157205, 274544634, 275589968]
2025-04-17 20:50:07,333 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276110349 ---
2025-04-17 20:50:07,334 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 20:50:07,335 - DEBUG - Preparing response with similar products
2025-04-17 20:50:07,345 - DEBUG - --- Completed request for /api/recommendations/276110349 ---
2025-04-17 20:50:12,888 - DEBUG - --- Processing request for /api/recommendations/271966786 ---
2025-04-17 20:50:12,889 - DEBUG - Limit set to: 10
2025-04-17 20:50:12,890 - DEBUG - --- Starting get_similar_products_by_id for product_id: 271966786 ---
2025-04-17 20:50:12,891 - DEBUG - Checking if product_id 271966786 exists in product_ids
2025-04-17 20:50:12,892 - DEBUG - Product_id exists in vector database: False
2025-04-17 20:50:12,893 - DEBUG - Fetching product details from Tiki API for product_id: 271966786
2025-04-17 20:50:13,077 - DEBUG - Extracting product details
2025-04-17 20:50:13,077 - DEBUG - Name: Apple iPhone 15
2025-04-17 20:50:13,086 - DEBUG - Brand_name: Apple
2025-04-17 20:50:13,092 - DEBUG - Encoding combined text to embedding
2025-04-17 20:50:13,164 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 20:50:13,165 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 20:50:13,173 - DEBUG - FAISS search results - distances: [[0.5941897630691528, 0.6034287810325623, 0.6115133762359619, 0.6171912550926208, 0.62945157289505, 0.6332588195800781, 0.6350051164627075, 0.6367793083190918, 0.6435586810112, 0.6453861594200134, 0.6461893320083618]]
2025-04-17 20:50:13,174 - DEBUG - FAISS search results - indices: [[2725, 930, 1295, 4001, 7387, 1076, 616, 1471, 1748, 1882, 655]]
2025-04-17 20:50:13,175 - DEBUG - Filtered result_product_ids: [197528405, 273237704, 277466537, 15669650, 183330021, 48703833, 172818782, 22368573, 276248164, 276150494]
2025-04-17 20:50:13,176 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-17 20:50:13,178 - DEBUG - Added product 197528405 to similar_products
2025-04-17 20:50:13,179 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-17 20:50:13,181 - DEBUG - Added product 273237704 to similar_products
2025-04-17 20:50:13,182 - DEBUG - Checking product_id 277466537 in DataFrame
2025-04-17 20:50:13,185 - DEBUG - Added product 277466537 to similar_products
2025-04-17 20:50:13,186 - DEBUG - Checking product_id 15669650 in DataFrame
2025-04-17 20:50:13,189 - DEBUG - Added product 15669650 to similar_products
2025-04-17 20:50:13,190 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-17 20:50:13,192 - DEBUG - Added product 183330021 to similar_products
2025-04-17 20:50:13,192 - DEBUG - Checking product_id 48703833 in DataFrame
2025-04-17 20:50:13,195 - DEBUG - Added product 48703833 to similar_products
2025-04-17 20:50:13,196 - DEBUG - Checking product_id 172818782 in DataFrame
2025-04-17 20:50:13,199 - DEBUG - Added product 172818782 to similar_products
2025-04-17 20:50:13,201 - DEBUG - Checking product_id 22368573 in DataFrame
2025-04-17 20:50:13,206 - DEBUG - Added product 22368573 to similar_products
2025-04-17 20:50:13,207 - DEBUG - Checking product_id 276248164 in DataFrame
2025-04-17 20:50:13,209 - DEBUG - Added product 276248164 to similar_products
2025-04-17 20:50:13,210 - DEBUG - Checking product_id 276150494 in DataFrame
2025-04-17 20:50:13,213 - DEBUG - Added product 276150494 to similar_products
2025-04-17 20:50:13,214 - DEBUG - Final similar_products count: 10
2025-04-17 20:50:13,216 - DEBUG - Final similar_products: [197528405, 273237704, 277466537, 15669650, 183330021, 48703833, 172818782, 22368573, 276248164, 276150494]
2025-04-17 20:50:13,217 - DEBUG - --- Completed get_similar_products_by_id for product_id: 271966786 ---
2025-04-17 20:50:13,246 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 20:50:13,249 - DEBUG - Preparing response with similar products
2025-04-17 20:50:13,269 - DEBUG - --- Completed request for /api/recommendations/271966786 ---
2025-04-17 20:50:24,468 - DEBUG - --- Processing request for /api/recommendations/271966786 ---
2025-04-17 20:50:24,469 - DEBUG - Limit set to: 10
2025-04-17 20:50:24,469 - DEBUG - --- Starting get_similar_products_by_id for product_id: 271966786 ---
2025-04-17 20:50:24,470 - DEBUG - Checking if product_id 271966786 exists in product_ids
2025-04-17 20:50:24,472 - DEBUG - Product_id exists in vector database: False
2025-04-17 20:50:24,473 - DEBUG - Fetching product details from Tiki API for product_id: 271966786
2025-04-17 20:50:25,153 - DEBUG - Extracting product details
2025-04-17 20:50:25,153 - DEBUG - Name: Apple iPhone 15
2025-04-17 20:50:25,162 - DEBUG - Brand_name: Apple
2025-04-17 20:50:25,165 - DEBUG - Encoding combined text to embedding
2025-04-17 20:50:25,210 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 20:50:25,212 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 20:50:25,214 - DEBUG - FAISS search results - distances: [[0.5941897630691528, 0.6034287810325623, 0.6115133762359619, 0.6171912550926208, 0.62945157289505, 0.6332588195800781, 0.6350051164627075, 0.6367793083190918, 0.6435586810112, 0.6453861594200134, 0.6461893320083618]]
2025-04-17 20:50:25,215 - DEBUG - FAISS search results - indices: [[2725, 930, 1295, 4001, 7387, 1076, 616, 1471, 1748, 1882, 655]]
2025-04-17 20:50:25,216 - DEBUG - Filtered result_product_ids: [197528405, 273237704, 277466537, 15669650, 183330021, 48703833, 172818782, 22368573, 276248164, 276150494]
2025-04-17 20:50:25,216 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-17 20:50:25,218 - DEBUG - Added product 197528405 to similar_products
2025-04-17 20:50:25,219 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-17 20:50:25,221 - DEBUG - Added product 273237704 to similar_products
2025-04-17 20:50:25,221 - DEBUG - Checking product_id 277466537 in DataFrame
2025-04-17 20:50:25,223 - DEBUG - Added product 277466537 to similar_products
2025-04-17 20:50:25,224 - DEBUG - Checking product_id 15669650 in DataFrame
2025-04-17 20:50:25,226 - DEBUG - Added product 15669650 to similar_products
2025-04-17 20:50:25,226 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-17 20:50:25,229 - DEBUG - Added product 183330021 to similar_products
2025-04-17 20:50:25,230 - DEBUG - Checking product_id 48703833 in DataFrame
2025-04-17 20:50:25,232 - DEBUG - Added product 48703833 to similar_products
2025-04-17 20:50:25,232 - DEBUG - Checking product_id 172818782 in DataFrame
2025-04-17 20:50:25,234 - DEBUG - Added product 172818782 to similar_products
2025-04-17 20:50:25,234 - DEBUG - Checking product_id 22368573 in DataFrame
2025-04-17 20:50:25,237 - DEBUG - Added product 22368573 to similar_products
2025-04-17 20:50:25,238 - DEBUG - Checking product_id 276248164 in DataFrame
2025-04-17 20:50:25,240 - DEBUG - Added product 276248164 to similar_products
2025-04-17 20:50:25,240 - DEBUG - Checking product_id 276150494 in DataFrame
2025-04-17 20:50:25,242 - DEBUG - Added product 276150494 to similar_products
2025-04-17 20:50:25,242 - DEBUG - Final similar_products count: 10
2025-04-17 20:50:25,243 - DEBUG - Final similar_products: [197528405, 273237704, 277466537, 15669650, 183330021, 48703833, 172818782, 22368573, 276248164, 276150494]
2025-04-17 20:50:25,244 - DEBUG - --- Completed get_similar_products_by_id for product_id: 271966786 ---
2025-04-17 20:50:25,245 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 20:50:25,246 - DEBUG - Preparing response with similar products
2025-04-17 20:50:25,252 - DEBUG - --- Completed request for /api/recommendations/271966786 ---
2025-04-17 20:51:03,766 - DEBUG - --- Processing request for /api/recommendations/271966786 ---
2025-04-17 20:51:03,767 - DEBUG - Limit set to: 10
2025-04-17 20:51:03,768 - DEBUG - --- Starting get_similar_products_by_id for product_id: 271966786 ---
2025-04-17 20:51:03,769 - DEBUG - Checking if product_id 271966786 exists in product_ids
2025-04-17 20:51:03,770 - DEBUG - Product_id exists in vector database: False
2025-04-17 20:51:03,772 - DEBUG - Fetching product details from Tiki API for product_id: 271966786
2025-04-17 20:51:04,562 - DEBUG - Extracting product details
2025-04-17 20:51:04,563 - DEBUG - Name: Apple iPhone 15
2025-04-17 20:51:04,571 - DEBUG - Brand_name: Apple
2025-04-17 20:51:04,576 - DEBUG - Encoding combined text to embedding
2025-04-17 20:51:04,653 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 20:51:04,654 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 20:51:04,656 - DEBUG - FAISS search results - distances: [[0.5941897630691528, 0.6034287810325623, 0.6115133762359619, 0.6171912550926208, 0.62945157289505, 0.6332588195800781, 0.6350051164627075, 0.6367793083190918, 0.6435586810112, 0.6453861594200134, 0.6461893320083618]]
2025-04-17 20:51:04,656 - DEBUG - FAISS search results - indices: [[2725, 930, 1295, 4001, 7387, 1076, 616, 1471, 1748, 1882, 655]]
2025-04-17 20:51:04,657 - DEBUG - Filtered result_product_ids: [197528405, 273237704, 277466537, 15669650, 183330021, 48703833, 172818782, 22368573, 276248164, 276150494]
2025-04-17 20:51:04,658 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-17 20:51:04,660 - DEBUG - Added product 197528405 to similar_products
2025-04-17 20:51:04,660 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-17 20:51:04,662 - DEBUG - Added product 273237704 to similar_products
2025-04-17 20:51:04,663 - DEBUG - Checking product_id 277466537 in DataFrame
2025-04-17 20:51:04,664 - DEBUG - Added product 277466537 to similar_products
2025-04-17 20:51:04,664 - DEBUG - Checking product_id 15669650 in DataFrame
2025-04-17 20:51:04,666 - DEBUG - Added product 15669650 to similar_products
2025-04-17 20:51:04,666 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-17 20:51:04,668 - DEBUG - Added product 183330021 to similar_products
2025-04-17 20:51:04,668 - DEBUG - Checking product_id 48703833 in DataFrame
2025-04-17 20:51:04,670 - DEBUG - Added product 48703833 to similar_products
2025-04-17 20:51:04,671 - DEBUG - Checking product_id 172818782 in DataFrame
2025-04-17 20:51:04,672 - DEBUG - Added product 172818782 to similar_products
2025-04-17 20:51:04,673 - DEBUG - Checking product_id 22368573 in DataFrame
2025-04-17 20:51:04,675 - DEBUG - Added product 22368573 to similar_products
2025-04-17 20:51:04,675 - DEBUG - Checking product_id 276248164 in DataFrame
2025-04-17 20:51:04,677 - DEBUG - Added product 276248164 to similar_products
2025-04-17 20:51:04,678 - DEBUG - Checking product_id 276150494 in DataFrame
2025-04-17 20:51:04,680 - DEBUG - Added product 276150494 to similar_products
2025-04-17 20:51:04,681 - DEBUG - Final similar_products count: 10
2025-04-17 20:51:04,681 - DEBUG - Final similar_products: [197528405, 273237704, 277466537, 15669650, 183330021, 48703833, 172818782, 22368573, 276248164, 276150494]
2025-04-17 20:51:04,682 - DEBUG - --- Completed get_similar_products_by_id for product_id: 271966786 ---
2025-04-17 20:51:04,682 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 20:51:04,683 - DEBUG - Preparing response with similar products
2025-04-17 20:51:04,688 - DEBUG - --- Completed request for /api/recommendations/271966786 ---
2025-04-17 20:53:16,986 - DEBUG - --- Processing request for /api/recommendations/183330021 ---
2025-04-17 20:53:16,987 - DEBUG - Limit set to: 10
2025-04-17 20:53:16,989 - DEBUG - --- Starting get_similar_products_by_id for product_id: 183330021 ---
2025-04-17 20:53:16,990 - DEBUG - Checking if product_id 183330021 exists in product_ids
2025-04-17 20:53:16,991 - DEBUG - Product_id exists in vector database: True
2025-04-17 20:53:16,992 - DEBUG - Fetching product details from Tiki API for product_id: 183330021
2025-04-17 20:53:17,178 - DEBUG - Extracting product details
2025-04-17 20:53:17,179 - DEBUG - Name: Apple iPad 10.2-inch (9th Gen) Wi-Fi, 2021
2025-04-17 20:53:17,184 - DEBUG - Brand_name: Apple
2025-04-17 20:53:17,189 - DEBUG - Encoding combined text to embedding
2025-04-17 20:53:17,256 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 20:53:17,256 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 20:53:17,259 - DEBUG - FAISS search results - distances: [[2.1368508091451632e-13, 0.21494871377944946, 0.5236576795578003, 0.5730737447738647, 0.5940837264060974, 0.6234952211380005, 0.6234952211380005, 0.632460355758667, 0.6538567543029785, 0.6557819247245789, 0.6572352647781372]]
2025-04-17 20:53:17,260 - DEBUG - FAISS search results - indices: [[7387, 8546, 3886, 1961, 2427, 2352, 2574, 975, 2314, 1959, 2561]]
2025-04-17 20:53:17,261 - DEBUG - Filtered result_product_ids: [205815576, 275224311, 136468988, 276368513, 276177761, 276159554, 277030799, 276471819, 136468984, 271145754]
2025-04-17 20:53:17,262 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-17 20:53:17,264 - DEBUG - Added product 205815576 to similar_products
2025-04-17 20:53:17,265 - DEBUG - Checking product_id 275224311 in DataFrame
2025-04-17 20:53:17,267 - DEBUG - Added product 275224311 to similar_products
2025-04-17 20:53:17,269 - DEBUG - Checking product_id 136468988 in DataFrame
2025-04-17 20:53:17,272 - DEBUG - Added product 136468988 to similar_products
2025-04-17 20:53:17,273 - DEBUG - Checking product_id 276368513 in DataFrame
2025-04-17 20:53:17,275 - DEBUG - Added product 276368513 to similar_products
2025-04-17 20:53:17,276 - DEBUG - Checking product_id 276177761 in DataFrame
2025-04-17 20:53:17,279 - DEBUG - Added product 276177761 to similar_products
2025-04-17 20:53:17,279 - DEBUG - Checking product_id 276159554 in DataFrame
2025-04-17 20:53:17,282 - DEBUG - Added product 276159554 to similar_products
2025-04-17 20:53:17,282 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-17 20:53:17,284 - DEBUG - Added product 277030799 to similar_products
2025-04-17 20:53:17,285 - DEBUG - Checking product_id 276471819 in DataFrame
2025-04-17 20:53:17,288 - DEBUG - Added product 276471819 to similar_products
2025-04-17 20:53:17,289 - DEBUG - Checking product_id 136468984 in DataFrame
2025-04-17 20:53:17,291 - DEBUG - Added product 136468984 to similar_products
2025-04-17 20:53:17,292 - DEBUG - Checking product_id 271145754 in DataFrame
2025-04-17 20:53:17,294 - DEBUG - Added product 271145754 to similar_products
2025-04-17 20:53:17,294 - DEBUG - Final similar_products count: 10
2025-04-17 20:53:17,295 - DEBUG - Final similar_products: [205815576, 275224311, 136468988, 276368513, 276177761, 276159554, 277030799, 276471819, 136468984, 271145754]
2025-04-17 20:53:17,296 - DEBUG - --- Completed get_similar_products_by_id for product_id: 183330021 ---
2025-04-17 20:53:17,298 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 20:53:17,298 - DEBUG - Preparing response with similar products
2025-04-17 20:53:17,308 - DEBUG - --- Completed request for /api/recommendations/183330021 ---
2025-04-17 20:53:20,766 - DEBUG - --- Processing request for /api/recommendations/276368513 ---
2025-04-17 20:53:20,767 - DEBUG - Limit set to: 10
2025-04-17 20:53:20,768 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276368513 ---
2025-04-17 20:53:20,769 - DEBUG - Checking if product_id 276368513 exists in product_ids
2025-04-17 20:53:20,770 - DEBUG - Product_id exists in vector database: True
2025-04-17 20:53:20,771 - DEBUG - Fetching product details from Tiki API for product_id: 276368513
2025-04-17 20:53:21,357 - DEBUG - Extracting product details
2025-04-17 20:53:21,366 - DEBUG - Brand_name: WIWU
2025-04-17 20:53:21,372 - DEBUG - Encoding combined text to embedding
2025-04-17 20:53:21,452 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 20:53:21,452 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 20:53:21,457 - DEBUG - FAISS search results - distances: [[8.785844502010726e-14, 0.04470085725188255, 0.04470085725188255, 0.18573424220085144, 0.21352115273475647, 0.21398305892944336, 0.21715492010116577, 0.22278618812561035, 0.2371038794517517, 0.2372870147228241, 0.2601116895675659]]
2025-04-17 20:53:21,458 - DEBUG - FAISS search results - indices: [[2427, 2352, 2574, 2314, 2502, 1961, 2561, 1959, 2516, 1222, 2300]]
2025-04-17 20:53:21,458 - DEBUG - Filtered result_product_ids: [276177761, 276159554, 276471819, 276370596, 136468988, 271145754, 136468984, 53999206, 212610046, 271245251]
2025-04-17 20:53:21,460 - DEBUG - Checking product_id 276177761 in DataFrame
2025-04-17 20:53:21,462 - DEBUG - Added product 276177761 to similar_products
2025-04-17 20:53:21,462 - DEBUG - Checking product_id 276159554 in DataFrame
2025-04-17 20:53:21,464 - DEBUG - Added product 276159554 to similar_products
2025-04-17 20:53:21,464 - DEBUG - Checking product_id 276471819 in DataFrame
2025-04-17 20:53:21,466 - DEBUG - Added product 276471819 to similar_products
2025-04-17 20:53:21,467 - DEBUG - Checking product_id 276370596 in DataFrame
2025-04-17 20:53:21,468 - DEBUG - Added product 276370596 to similar_products
2025-04-17 20:53:21,469 - DEBUG - Checking product_id 136468988 in DataFrame
2025-04-17 20:53:21,472 - DEBUG - Added product 136468988 to similar_products
2025-04-17 20:53:21,473 - DEBUG - Checking product_id 271145754 in DataFrame
2025-04-17 20:53:21,474 - DEBUG - Added product 271145754 to similar_products
2025-04-17 20:53:21,475 - DEBUG - Checking product_id 136468984 in DataFrame
2025-04-17 20:53:21,476 - DEBUG - Added product 136468984 to similar_products
2025-04-17 20:53:21,477 - DEBUG - Checking product_id 53999206 in DataFrame
2025-04-17 20:53:21,478 - DEBUG - Added product 53999206 to similar_products
2025-04-17 20:53:21,479 - DEBUG - Checking product_id 212610046 in DataFrame
2025-04-17 20:53:21,480 - DEBUG - Added product 212610046 to similar_products
2025-04-17 20:53:21,481 - DEBUG - Checking product_id 271245251 in DataFrame
2025-04-17 20:53:21,482 - DEBUG - Added product 271245251 to similar_products
2025-04-17 20:53:21,483 - DEBUG - Final similar_products count: 10
2025-04-17 20:53:21,484 - DEBUG - Final similar_products: [276177761, 276159554, 276471819, 276370596, 136468988, 271145754, 136468984, 53999206, 212610046, 271245251]
2025-04-17 20:53:21,484 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276368513 ---
2025-04-17 20:53:21,485 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 20:53:21,485 - DEBUG - Preparing response with similar products
2025-04-17 20:53:21,492 - DEBUG - --- Completed request for /api/recommendations/276368513 ---
2025-04-17 21:08:26,146 - DEBUG - --- Processing request for /api/recommendations/197214029 ---
2025-04-17 21:08:26,147 - DEBUG - Limit set to: 10
2025-04-17 21:08:26,149 - DEBUG - --- Starting get_similar_products_by_id for product_id: 197214029 ---
2025-04-17 21:08:26,150 - DEBUG - Checking if product_id 197214029 exists in product_ids
2025-04-17 21:08:26,151 - DEBUG - Product_id exists in vector database: False
2025-04-17 21:08:26,152 - DEBUG - Fetching product details from Tiki API for product_id: 197214029
2025-04-17 21:08:26,421 - DEBUG - Extracting product details
2025-04-17 21:08:26,421 - DEBUG - Name: Apple iPhone 14
2025-04-17 21:08:26,431 - DEBUG - Brand_name: Apple
2025-04-17 21:08:26,435 - DEBUG - Encoding combined text to embedding
2025-04-17 21:08:26,508 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:08:26,509 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:08:26,512 - DEBUG - FAISS search results - distances: [[0.4539893865585327, 0.49298587441444397, 0.49967658519744873, 0.5169777870178223, 0.5181034207344055, 0.5235098004341125, 0.5362296104431152, 0.5392694473266602, 0.5459560751914978, 0.5562722682952881, 0.5604740381240845]]
2025-04-17 21:08:26,513 - DEBUG - FAISS search results - indices: [[2736, 655, 2725, 616, 2521, 4200, 1710, 6724, 5423, 5766, 3261]]
2025-04-17 21:08:26,514 - DEBUG - Filtered result_product_ids: [134933833, 91374083, 197528405, 172818782, 200914701, 203202109, 119346603, 50714154, 72726907, 573697]
2025-04-17 21:08:26,515 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-17 21:08:26,517 - DEBUG - Added product 134933833 to similar_products
2025-04-17 21:08:26,518 - DEBUG - Checking product_id 91374083 in DataFrame
2025-04-17 21:08:26,519 - DEBUG - Added product 91374083 to similar_products
2025-04-17 21:08:26,520 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-17 21:08:26,523 - DEBUG - Added product 197528405 to similar_products
2025-04-17 21:08:26,524 - DEBUG - Checking product_id 172818782 in DataFrame
2025-04-17 21:08:26,526 - DEBUG - Added product 172818782 to similar_products
2025-04-17 21:08:26,527 - DEBUG - Checking product_id 200914701 in DataFrame
2025-04-17 21:08:26,529 - DEBUG - Added product 200914701 to similar_products
2025-04-17 21:08:26,530 - DEBUG - Checking product_id 203202109 in DataFrame
2025-04-17 21:08:26,531 - DEBUG - Added product 203202109 to similar_products
2025-04-17 21:08:26,532 - DEBUG - Checking product_id 119346603 in DataFrame
2025-04-17 21:08:26,533 - DEBUG - Added product 119346603 to similar_products
2025-04-17 21:08:26,533 - DEBUG - Checking product_id 50714154 in DataFrame
2025-04-17 21:08:26,535 - DEBUG - Added product 50714154 to similar_products
2025-04-17 21:08:26,536 - DEBUG - Checking product_id 72726907 in DataFrame
2025-04-17 21:08:26,537 - DEBUG - Added product 72726907 to similar_products
2025-04-17 21:08:26,538 - DEBUG - Checking product_id 573697 in DataFrame
2025-04-17 21:08:26,542 - DEBUG - Added product 573697 to similar_products
2025-04-17 21:08:26,544 - DEBUG - Final similar_products count: 10
2025-04-17 21:08:26,544 - DEBUG - Final similar_products: [134933833, 91374083, 197528405, 172818782, 200914701, 203202109, 119346603, 50714154, 72726907, 573697]
2025-04-17 21:08:26,545 - DEBUG - --- Completed get_similar_products_by_id for product_id: 197214029 ---
2025-04-17 21:08:26,546 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:08:26,547 - DEBUG - Preparing response with similar products
2025-04-17 21:08:26,553 - DEBUG - --- Completed request for /api/recommendations/197214029 ---
2025-04-17 21:08:29,120 - DEBUG - --- Processing request for /api/recommendations/271966786 ---
2025-04-17 21:08:29,121 - DEBUG - Limit set to: 10
2025-04-17 21:08:29,122 - DEBUG - --- Starting get_similar_products_by_id for product_id: 271966786 ---
2025-04-17 21:08:29,123 - DEBUG - Checking if product_id 271966786 exists in product_ids
2025-04-17 21:08:29,124 - DEBUG - Product_id exists in vector database: False
2025-04-17 21:08:29,132 - DEBUG - Fetching product details from Tiki API for product_id: 271966786
2025-04-17 21:08:29,865 - DEBUG - Extracting product details
2025-04-17 21:08:29,866 - DEBUG - Name: Apple iPhone 15
2025-04-17 21:08:29,872 - DEBUG - Brand_name: Apple
2025-04-17 21:08:29,877 - DEBUG - Encoding combined text to embedding
2025-04-17 21:08:29,934 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:08:29,935 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:08:29,937 - DEBUG - FAISS search results - distances: [[0.5941897630691528, 0.6034287810325623, 0.6115133762359619, 0.6171912550926208, 0.62945157289505, 0.6332588195800781, 0.6350051164627075, 0.6367793083190918, 0.6435586810112, 0.6453861594200134, 0.6461893320083618]]
2025-04-17 21:08:29,939 - DEBUG - FAISS search results - indices: [[2725, 930, 1295, 4001, 7387, 1076, 616, 1471, 1748, 1882, 655]]
2025-04-17 21:08:29,940 - DEBUG - Filtered result_product_ids: [197528405, 273237704, 277466537, 15669650, 183330021, 48703833, 172818782, 22368573, 276248164, 276150494]
2025-04-17 21:08:29,940 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-17 21:08:29,943 - DEBUG - Added product 197528405 to similar_products
2025-04-17 21:08:29,944 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-17 21:08:29,945 - DEBUG - Added product 273237704 to similar_products
2025-04-17 21:08:29,946 - DEBUG - Checking product_id 277466537 in DataFrame
2025-04-17 21:08:29,949 - DEBUG - Added product 277466537 to similar_products
2025-04-17 21:08:29,950 - DEBUG - Checking product_id 15669650 in DataFrame
2025-04-17 21:08:29,951 - DEBUG - Added product 15669650 to similar_products
2025-04-17 21:08:29,952 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-17 21:08:29,954 - DEBUG - Added product 183330021 to similar_products
2025-04-17 21:08:29,954 - DEBUG - Checking product_id 48703833 in DataFrame
2025-04-17 21:08:29,956 - DEBUG - Added product 48703833 to similar_products
2025-04-17 21:08:29,957 - DEBUG - Checking product_id 172818782 in DataFrame
2025-04-17 21:08:29,960 - DEBUG - Added product 172818782 to similar_products
2025-04-17 21:08:29,960 - DEBUG - Checking product_id 22368573 in DataFrame
2025-04-17 21:08:29,962 - DEBUG - Added product 22368573 to similar_products
2025-04-17 21:08:29,963 - DEBUG - Checking product_id 276248164 in DataFrame
2025-04-17 21:08:29,965 - DEBUG - Added product 276248164 to similar_products
2025-04-17 21:08:29,966 - DEBUG - Checking product_id 276150494 in DataFrame
2025-04-17 21:08:29,967 - DEBUG - Added product 276150494 to similar_products
2025-04-17 21:08:29,968 - DEBUG - Final similar_products count: 10
2025-04-17 21:08:29,969 - DEBUG - Final similar_products: [197528405, 273237704, 277466537, 15669650, 183330021, 48703833, 172818782, 22368573, 276248164, 276150494]
2025-04-17 21:08:29,969 - DEBUG - --- Completed get_similar_products_by_id for product_id: 271966786 ---
2025-04-17 21:08:29,970 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:08:29,971 - DEBUG - Preparing response with similar products
2025-04-17 21:08:29,976 - DEBUG - --- Completed request for /api/recommendations/271966786 ---
2025-04-17 21:08:33,428 - DEBUG - --- Processing request for /api/recommendations/183330021 ---
2025-04-17 21:08:33,430 - DEBUG - Limit set to: 10
2025-04-17 21:08:33,430 - DEBUG - --- Starting get_similar_products_by_id for product_id: 183330021 ---
2025-04-17 21:08:33,431 - DEBUG - Checking if product_id 183330021 exists in product_ids
2025-04-17 21:08:33,432 - DEBUG - Product_id exists in vector database: True
2025-04-17 21:08:33,433 - DEBUG - Fetching product details from Tiki API for product_id: 183330021
2025-04-17 21:08:34,126 - DEBUG - Extracting product details
2025-04-17 21:08:34,127 - DEBUG - Name: Apple iPad 10.2-inch (9th Gen) Wi-Fi, 2021
2025-04-17 21:08:34,134 - DEBUG - Brand_name: Apple
2025-04-17 21:08:34,137 - DEBUG - Encoding combined text to embedding
2025-04-17 21:08:34,205 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:08:34,206 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:08:34,208 - DEBUG - FAISS search results - distances: [[2.1368508091451632e-13, 0.21494871377944946, 0.5236576795578003, 0.5730737447738647, 0.5940837264060974, 0.6234952211380005, 0.6234952211380005, 0.632460355758667, 0.6538567543029785, 0.6557819247245789, 0.6572352647781372]]
2025-04-17 21:08:34,209 - DEBUG - FAISS search results - indices: [[7387, 8546, 3886, 1961, 2427, 2352, 2574, 975, 2314, 1959, 2561]]
2025-04-17 21:08:34,210 - DEBUG - Filtered result_product_ids: [205815576, 275224311, 136468988, 276368513, 276177761, 276159554, 277030799, 276471819, 136468984, 271145754]
2025-04-17 21:08:34,211 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-17 21:08:34,213 - DEBUG - Added product 205815576 to similar_products
2025-04-17 21:08:34,214 - DEBUG - Checking product_id 275224311 in DataFrame
2025-04-17 21:08:34,216 - DEBUG - Added product 275224311 to similar_products
2025-04-17 21:08:34,217 - DEBUG - Checking product_id 136468988 in DataFrame
2025-04-17 21:08:34,240 - DEBUG - Added product 136468988 to similar_products
2025-04-17 21:08:34,241 - DEBUG - Checking product_id 276368513 in DataFrame
2025-04-17 21:08:34,243 - DEBUG - Added product 276368513 to similar_products
2025-04-17 21:08:34,244 - DEBUG - Checking product_id 276177761 in DataFrame
2025-04-17 21:08:34,251 - DEBUG - Added product 276177761 to similar_products
2025-04-17 21:08:34,252 - DEBUG - Checking product_id 276159554 in DataFrame
2025-04-17 21:08:34,253 - DEBUG - Added product 276159554 to similar_products
2025-04-17 21:08:34,254 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-17 21:08:34,255 - DEBUG - Added product 277030799 to similar_products
2025-04-17 21:08:34,256 - DEBUG - Checking product_id 276471819 in DataFrame
2025-04-17 21:08:34,257 - DEBUG - Added product 276471819 to similar_products
2025-04-17 21:08:34,258 - DEBUG - Checking product_id 136468984 in DataFrame
2025-04-17 21:08:34,260 - DEBUG - Added product 136468984 to similar_products
2025-04-17 21:08:34,261 - DEBUG - Checking product_id 271145754 in DataFrame
2025-04-17 21:08:34,264 - DEBUG - Added product 271145754 to similar_products
2025-04-17 21:08:34,265 - DEBUG - Final similar_products count: 10
2025-04-17 21:08:34,266 - DEBUG - Final similar_products: [205815576, 275224311, 136468988, 276368513, 276177761, 276159554, 277030799, 276471819, 136468984, 271145754]
2025-04-17 21:08:34,267 - DEBUG - --- Completed get_similar_products_by_id for product_id: 183330021 ---
2025-04-17 21:08:34,268 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:08:34,268 - DEBUG - Preparing response with similar products
2025-04-17 21:08:34,274 - DEBUG - --- Completed request for /api/recommendations/183330021 ---
2025-04-17 21:09:55,865 - DEBUG - --- Processing request for /api/recommendations/184059211 ---
2025-04-17 21:09:55,866 - DEBUG - Limit set to: 10
2025-04-17 21:09:55,867 - DEBUG - --- Starting get_similar_products_by_id for product_id: 184059211 ---
2025-04-17 21:09:55,867 - DEBUG - Checking if product_id 184059211 exists in product_ids
2025-04-17 21:09:55,868 - DEBUG - Product_id exists in vector database: False
2025-04-17 21:09:55,868 - DEBUG - Fetching product details from Tiki API for product_id: 184059211
2025-04-17 21:09:56,564 - DEBUG - Extracting product details
2025-04-17 21:09:56,564 - DEBUG - Name: Apple iPhone 13
2025-04-17 21:09:56,570 - DEBUG - Brand_name: Apple
2025-04-17 21:09:56,575 - DEBUG - Encoding combined text to embedding
2025-04-17 21:09:56,627 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:09:56,628 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:09:56,630 - DEBUG - FAISS search results - distances: [[0.6164488196372986, 0.6294758319854736, 0.650195837020874, 0.6850014328956604, 0.7004382610321045, 0.7051544189453125, 0.7058439254760742, 0.7092292308807373, 0.710883617401123, 0.7109403610229492, 0.7109628319740295]]
2025-04-17 21:09:56,631 - DEBUG - FAISS search results - indices: [[7387, 2736, 4172, 2521, 975, 1295, 6724, 2665, 2725, 8546, 240]]
2025-04-17 21:09:56,632 - DEBUG - Filtered result_product_ids: [183330021, 134933833, 203201921, 200914701, 277030799, 277466537, 50714154, 133039431, 197528405, 205815576]
2025-04-17 21:09:56,632 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-17 21:09:56,633 - DEBUG - Added product 183330021 to similar_products
2025-04-17 21:09:56,634 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-17 21:09:56,636 - DEBUG - Added product 134933833 to similar_products
2025-04-17 21:09:56,636 - DEBUG - Checking product_id 203201921 in DataFrame
2025-04-17 21:09:56,638 - DEBUG - Added product 203201921 to similar_products
2025-04-17 21:09:56,639 - DEBUG - Checking product_id 200914701 in DataFrame
2025-04-17 21:09:56,641 - DEBUG - Added product 200914701 to similar_products
2025-04-17 21:09:56,642 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-17 21:09:56,643 - DEBUG - Added product 277030799 to similar_products
2025-04-17 21:09:56,644 - DEBUG - Checking product_id 277466537 in DataFrame
2025-04-17 21:09:56,645 - DEBUG - Added product 277466537 to similar_products
2025-04-17 21:09:56,646 - DEBUG - Checking product_id 50714154 in DataFrame
2025-04-17 21:09:56,648 - DEBUG - Added product 50714154 to similar_products
2025-04-17 21:09:56,648 - DEBUG - Checking product_id 133039431 in DataFrame
2025-04-17 21:09:56,650 - DEBUG - Added product 133039431 to similar_products
2025-04-17 21:09:56,651 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-17 21:09:56,652 - DEBUG - Added product 197528405 to similar_products
2025-04-17 21:09:56,653 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-17 21:09:56,654 - DEBUG - Added product 205815576 to similar_products
2025-04-17 21:09:56,655 - DEBUG - Final similar_products count: 10
2025-04-17 21:09:56,657 - DEBUG - Final similar_products: [183330021, 134933833, 203201921, 200914701, 277030799, 277466537, 50714154, 133039431, 197528405, 205815576]
2025-04-17 21:09:56,657 - DEBUG - --- Completed get_similar_products_by_id for product_id: 184059211 ---
2025-04-17 21:09:56,659 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:09:56,659 - DEBUG - Preparing response with similar products
2025-04-17 21:09:56,665 - DEBUG - --- Completed request for /api/recommendations/184059211 ---
2025-04-17 21:10:12,559 - DEBUG - --- Processing request for /api/recommendations/271966786 ---
2025-04-17 21:10:12,560 - DEBUG - Limit set to: 10
2025-04-17 21:10:12,560 - DEBUG - --- Starting get_similar_products_by_id for product_id: 271966786 ---
2025-04-17 21:10:12,561 - DEBUG - Checking if product_id 271966786 exists in product_ids
2025-04-17 21:10:12,561 - DEBUG - Product_id exists in vector database: False
2025-04-17 21:10:12,562 - DEBUG - Fetching product details from Tiki API for product_id: 271966786
2025-04-17 21:10:13,252 - DEBUG - Extracting product details
2025-04-17 21:10:13,252 - DEBUG - Name: Apple iPhone 15
2025-04-17 21:10:13,258 - DEBUG - Brand_name: Apple
2025-04-17 21:10:13,261 - DEBUG - Encoding combined text to embedding
2025-04-17 21:10:13,311 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:10:13,313 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:10:13,316 - DEBUG - FAISS search results - distances: [[0.5941897630691528, 0.6034287810325623, 0.6115133762359619, 0.6171912550926208, 0.62945157289505, 0.6332588195800781, 0.6350051164627075, 0.6367793083190918, 0.6435586810112, 0.6453861594200134, 0.6461893320083618]]
2025-04-17 21:10:13,316 - DEBUG - FAISS search results - indices: [[2725, 930, 1295, 4001, 7387, 1076, 616, 1471, 1748, 1882, 655]]
2025-04-17 21:10:13,317 - DEBUG - Filtered result_product_ids: [197528405, 273237704, 277466537, 15669650, 183330021, 48703833, 172818782, 22368573, 276248164, 276150494]
2025-04-17 21:10:13,318 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-17 21:10:13,320 - DEBUG - Added product 197528405 to similar_products
2025-04-17 21:10:13,320 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-17 21:10:13,322 - DEBUG - Added product 273237704 to similar_products
2025-04-17 21:10:13,323 - DEBUG - Checking product_id 277466537 in DataFrame
2025-04-17 21:10:13,324 - DEBUG - Added product 277466537 to similar_products
2025-04-17 21:10:13,325 - DEBUG - Checking product_id 15669650 in DataFrame
2025-04-17 21:10:13,326 - DEBUG - Added product 15669650 to similar_products
2025-04-17 21:10:13,326 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-17 21:10:13,328 - DEBUG - Added product 183330021 to similar_products
2025-04-17 21:10:13,329 - DEBUG - Checking product_id 48703833 in DataFrame
2025-04-17 21:10:13,331 - DEBUG - Added product 48703833 to similar_products
2025-04-17 21:10:13,331 - DEBUG - Checking product_id 172818782 in DataFrame
2025-04-17 21:10:13,333 - DEBUG - Added product 172818782 to similar_products
2025-04-17 21:10:13,334 - DEBUG - Checking product_id 22368573 in DataFrame
2025-04-17 21:10:13,336 - DEBUG - Added product 22368573 to similar_products
2025-04-17 21:10:13,337 - DEBUG - Checking product_id 276248164 in DataFrame
2025-04-17 21:10:13,339 - DEBUG - Added product 276248164 to similar_products
2025-04-17 21:10:13,339 - DEBUG - Checking product_id 276150494 in DataFrame
2025-04-17 21:10:13,341 - DEBUG - Added product 276150494 to similar_products
2025-04-17 21:10:13,342 - DEBUG - Final similar_products count: 10
2025-04-17 21:10:13,342 - DEBUG - Final similar_products: [197528405, 273237704, 277466537, 15669650, 183330021, 48703833, 172818782, 22368573, 276248164, 276150494]
2025-04-17 21:10:13,343 - DEBUG - --- Completed get_similar_products_by_id for product_id: 271966786 ---
2025-04-17 21:10:13,343 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:10:13,344 - DEBUG - Preparing response with similar products
2025-04-17 21:10:13,349 - DEBUG - --- Completed request for /api/recommendations/271966786 ---
2025-04-17 21:10:20,663 - DEBUG - --- Processing request for /api/recommendations/91066307 ---
2025-04-17 21:10:20,665 - DEBUG - Limit set to: 10
2025-04-17 21:10:20,667 - DEBUG - --- Starting get_similar_products_by_id for product_id: 91066307 ---
2025-04-17 21:10:20,668 - DEBUG - Checking if product_id 91066307 exists in product_ids
2025-04-17 21:10:20,669 - DEBUG - Product_id exists in vector database: False
2025-04-17 21:10:20,669 - DEBUG - Fetching product details from Tiki API for product_id: 91066307
2025-04-17 21:10:20,844 - DEBUG - Extracting product details
2025-04-17 21:10:20,859 - DEBUG - Brand_name: OLSG
2025-04-17 21:10:20,863 - DEBUG - Encoding combined text to embedding
2025-04-17 21:10:20,939 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:10:20,940 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:10:20,941 - DEBUG - FAISS search results - distances: [[0.16174395382404327, 0.2962440848350525, 0.3041945695877075, 0.35296139121055603, 0.35783204436302185, 0.3620367646217346, 0.36435794830322266, 0.3982672691345215, 0.39940470457077026, 0.4093884229660034, 0.4313722252845764]]
2025-04-17 21:10:20,942 - DEBUG - FAISS search results - indices: [[1678, 2820, 2806, 2798, 2772, 2761, 2804, 2736, 2725, 2782, 998]]
2025-04-17 21:10:20,943 - DEBUG - Filtered result_product_ids: [85562664, 48420623, 48420268, 48420056, 48419360, 48419114, 48420250, 134933833, 197528405, 48419610]
2025-04-17 21:10:20,943 - DEBUG - Checking product_id 85562664 in DataFrame
2025-04-17 21:10:20,945 - DEBUG - Added product 85562664 to similar_products
2025-04-17 21:10:20,945 - DEBUG - Checking product_id 48420623 in DataFrame
2025-04-17 21:10:20,947 - DEBUG - Added product 48420623 to similar_products
2025-04-17 21:10:20,948 - DEBUG - Checking product_id 48420268 in DataFrame
2025-04-17 21:10:20,950 - DEBUG - Added product 48420268 to similar_products
2025-04-17 21:10:20,951 - DEBUG - Checking product_id 48420056 in DataFrame
2025-04-17 21:10:20,953 - DEBUG - Added product 48420056 to similar_products
2025-04-17 21:10:20,954 - DEBUG - Checking product_id 48419360 in DataFrame
2025-04-17 21:10:20,956 - DEBUG - Added product 48419360 to similar_products
2025-04-17 21:10:20,957 - DEBUG - Checking product_id 48419114 in DataFrame
2025-04-17 21:10:20,958 - DEBUG - Added product 48419114 to similar_products
2025-04-17 21:10:20,959 - DEBUG - Checking product_id 48420250 in DataFrame
2025-04-17 21:10:20,960 - DEBUG - Added product 48420250 to similar_products
2025-04-17 21:10:20,961 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-17 21:10:20,962 - DEBUG - Added product 134933833 to similar_products
2025-04-17 21:10:20,963 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-17 21:10:20,964 - DEBUG - Added product 197528405 to similar_products
2025-04-17 21:10:20,964 - DEBUG - Checking product_id 48419610 in DataFrame
2025-04-17 21:10:20,966 - DEBUG - Added product 48419610 to similar_products
2025-04-17 21:10:20,967 - DEBUG - Final similar_products count: 10
2025-04-17 21:10:20,967 - DEBUG - Final similar_products: [85562664, 48420623, 48420268, 48420056, 48419360, 48419114, 48420250, 134933833, 197528405, 48419610]
2025-04-17 21:10:20,968 - DEBUG - --- Completed get_similar_products_by_id for product_id: 91066307 ---
2025-04-17 21:10:20,969 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:10:20,970 - DEBUG - Preparing response with similar products
2025-04-17 21:10:20,975 - DEBUG - --- Completed request for /api/recommendations/91066307 ---
2025-04-17 21:10:28,707 - DEBUG - --- Processing request for /api/recommendations/276110349 ---
2025-04-17 21:10:28,709 - DEBUG - Limit set to: 10
2025-04-17 21:10:28,709 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276110349 ---
2025-04-17 21:10:28,710 - DEBUG - Checking if product_id 276110349 exists in product_ids
2025-04-17 21:10:28,711 - DEBUG - Product_id exists in vector database: False
2025-04-17 21:10:28,712 - DEBUG - Fetching product details from Tiki API for product_id: 276110349
2025-04-17 21:10:29,373 - DEBUG - Extracting product details
2025-04-17 21:10:29,373 - DEBUG - Name: Apple iPhone 16
2025-04-17 21:10:29,374 - DEBUG - Short_description: ...
2025-04-17 21:10:29,379 - DEBUG - Brand_name: Apple
2025-04-17 21:10:29,384 - DEBUG - Encoding combined text to embedding
2025-04-17 21:10:29,410 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:10:29,411 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:10:29,412 - DEBUG - FAISS search results - distances: [[0.7269222736358643, 0.7687099575996399, 0.7795100212097168, 0.7871565818786621, 0.8045234680175781, 0.817284345626831, 0.8229020237922668, 0.8246817588806152, 0.8259897232055664, 0.8284562230110168, 0.8299679160118103]]
2025-04-17 21:10:29,413 - DEBUG - FAISS search results - indices: [[7387, 930, 3877, 8546, 35, 2294, 1115, 1205, 1833, 1188, 1785]]
2025-04-17 21:10:29,414 - DEBUG - Filtered result_product_ids: [183330021, 273237704, 72849098, 205815576, 275589387, 273440662, 277490201, 230157205, 274544634, 275589968]
2025-04-17 21:10:29,414 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-17 21:10:29,415 - DEBUG - Added product 183330021 to similar_products
2025-04-17 21:10:29,416 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-17 21:10:29,417 - DEBUG - Added product 273237704 to similar_products
2025-04-17 21:10:29,420 - DEBUG - Checking product_id 72849098 in DataFrame
2025-04-17 21:10:29,421 - DEBUG - Added product 72849098 to similar_products
2025-04-17 21:10:29,422 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-17 21:10:29,424 - DEBUG - Added product 205815576 to similar_products
2025-04-17 21:10:29,424 - DEBUG - Checking product_id 275589387 in DataFrame
2025-04-17 21:10:29,426 - DEBUG - Added product 275589387 to similar_products
2025-04-17 21:10:29,427 - DEBUG - Checking product_id 273440662 in DataFrame
2025-04-17 21:10:29,429 - DEBUG - Added product 273440662 to similar_products
2025-04-17 21:10:29,429 - DEBUG - Checking product_id 277490201 in DataFrame
2025-04-17 21:10:29,430 - DEBUG - Added product 277490201 to similar_products
2025-04-17 21:10:29,431 - DEBUG - Checking product_id 230157205 in DataFrame
2025-04-17 21:10:29,432 - DEBUG - Added product 230157205 to similar_products
2025-04-17 21:10:29,433 - DEBUG - Checking product_id 274544634 in DataFrame
2025-04-17 21:10:29,434 - DEBUG - Added product 274544634 to similar_products
2025-04-17 21:10:29,436 - DEBUG - Checking product_id 275589968 in DataFrame
2025-04-17 21:10:29,438 - DEBUG - Added product 275589968 to similar_products
2025-04-17 21:10:29,439 - DEBUG - Final similar_products count: 10
2025-04-17 21:10:29,439 - DEBUG - Final similar_products: [183330021, 273237704, 72849098, 205815576, 275589387, 273440662, 277490201, 230157205, 274544634, 275589968]
2025-04-17 21:10:29,440 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276110349 ---
2025-04-17 21:10:29,440 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:10:29,441 - DEBUG - Preparing response with similar products
2025-04-17 21:10:29,446 - DEBUG - --- Completed request for /api/recommendations/276110349 ---
2025-04-17 21:18:43,286 - DEBUG - --- Processing request for /api/recommendations/276110349 ---
2025-04-17 21:18:43,287 - DEBUG - Limit set to: 10
2025-04-17 21:18:43,288 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276110349 ---
2025-04-17 21:18:43,289 - DEBUG - Checking if product_id 276110349 exists in product_ids
2025-04-17 21:18:43,290 - DEBUG - Product_id exists in vector database: False
2025-04-17 21:18:43,291 - DEBUG - Fetching product details from Tiki API for product_id: 276110349
2025-04-17 21:18:43,450 - DEBUG - Extracting product details
2025-04-17 21:18:43,451 - DEBUG - Name: Apple iPhone 16
2025-04-17 21:18:43,453 - DEBUG - Short_description: ...
2025-04-17 21:18:43,460 - DEBUG - Brand_name: Apple
2025-04-17 21:18:43,464 - DEBUG - Encoding combined text to embedding
2025-04-17 21:18:43,512 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:18:43,513 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:18:43,515 - DEBUG - FAISS search results - distances: [[0.7269222736358643, 0.7687099575996399, 0.7795100212097168, 0.7871565818786621, 0.8045234680175781, 0.817284345626831, 0.8229020237922668, 0.8246817588806152, 0.8259897232055664, 0.8284562230110168, 0.8299679160118103]]
2025-04-17 21:18:43,516 - DEBUG - FAISS search results - indices: [[7387, 930, 3877, 8546, 35, 2294, 1115, 1205, 1833, 1188, 1785]]
2025-04-17 21:18:43,517 - DEBUG - Filtered result_product_ids: [183330021, 273237704, 72849098, 205815576, 275589387, 273440662, 277490201, 230157205, 274544634, 275589968]
2025-04-17 21:18:43,523 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-17 21:18:43,526 - DEBUG - Added product 183330021 to similar_products
2025-04-17 21:18:43,527 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-17 21:18:43,529 - DEBUG - Added product 273237704 to similar_products
2025-04-17 21:18:43,530 - DEBUG - Checking product_id 72849098 in DataFrame
2025-04-17 21:18:43,533 - DEBUG - Added product 72849098 to similar_products
2025-04-17 21:18:43,533 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-17 21:18:43,541 - DEBUG - Added product 205815576 to similar_products
2025-04-17 21:18:43,542 - DEBUG - Checking product_id 275589387 in DataFrame
2025-04-17 21:18:43,543 - DEBUG - Added product 275589387 to similar_products
2025-04-17 21:18:43,544 - DEBUG - Checking product_id 273440662 in DataFrame
2025-04-17 21:18:43,546 - DEBUG - Added product 273440662 to similar_products
2025-04-17 21:18:43,547 - DEBUG - Checking product_id 277490201 in DataFrame
2025-04-17 21:18:43,549 - DEBUG - Added product 277490201 to similar_products
2025-04-17 21:18:43,550 - DEBUG - Checking product_id 230157205 in DataFrame
2025-04-17 21:18:43,552 - DEBUG - Added product 230157205 to similar_products
2025-04-17 21:18:43,553 - DEBUG - Checking product_id 274544634 in DataFrame
2025-04-17 21:18:43,555 - DEBUG - Added product 274544634 to similar_products
2025-04-17 21:18:43,556 - DEBUG - Checking product_id 275589968 in DataFrame
2025-04-17 21:18:43,557 - DEBUG - Added product 275589968 to similar_products
2025-04-17 21:18:43,558 - DEBUG - Final similar_products count: 10
2025-04-17 21:18:43,558 - DEBUG - Final similar_products: [183330021, 273237704, 72849098, 205815576, 275589387, 273440662, 277490201, 230157205, 274544634, 275589968]
2025-04-17 21:18:43,559 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276110349 ---
2025-04-17 21:18:43,559 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:18:43,560 - DEBUG - Preparing response with similar products
2025-04-17 21:18:43,564 - DEBUG - --- Completed request for /api/recommendations/276110349 ---
2025-04-17 21:20:30,485 - DEBUG - --- Processing request for /api/recommendations/275678601 ---
2025-04-17 21:20:30,486 - DEBUG - Limit set to: 10
2025-04-17 21:20:30,487 - DEBUG - --- Starting get_similar_products_by_id for product_id: 275678601 ---
2025-04-17 21:20:30,488 - DEBUG - Checking if product_id 275678601 exists in product_ids
2025-04-17 21:20:30,489 - DEBUG - Product_id exists in vector database: False
2025-04-17 21:20:30,490 - DEBUG - Fetching product details from Tiki API for product_id: 275678601
2025-04-17 21:20:30,669 - DEBUG - Extracting product details
2025-04-17 21:20:30,679 - DEBUG - Brand_name: ICASE
2025-04-17 21:20:30,683 - DEBUG - Encoding combined text to embedding
2025-04-17 21:20:30,779 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:20:30,780 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:20:30,782 - DEBUG - FAISS search results - distances: [[0.3946448564529419, 0.4023312032222748, 0.41207826137542725, 0.4577714502811432, 0.4588339924812317, 0.4603668749332428, 0.4607376158237457, 0.4650686979293823, 0.46629929542541504, 0.4678725004196167, 0.47036245465278625]]
2025-04-17 21:20:30,782 - DEBUG - FAISS search results - indices: [[616, 1678, 3022, 2480, 7914, 7962, 3261, 1463, 7964, 1495, 7873]]
2025-04-17 21:20:30,783 - DEBUG - Filtered result_product_ids: [172818782, 85562664, 274596446, 17920511, 17920245, 17920493, 176588567, 17920296, 17920523, 17920433]
2025-04-17 21:20:30,784 - DEBUG - Checking product_id 172818782 in DataFrame
2025-04-17 21:20:30,786 - DEBUG - Added product 172818782 to similar_products
2025-04-17 21:20:30,787 - DEBUG - Checking product_id 85562664 in DataFrame
2025-04-17 21:20:30,789 - DEBUG - Added product 85562664 to similar_products
2025-04-17 21:20:30,789 - DEBUG - Checking product_id 274596446 in DataFrame
2025-04-17 21:20:30,792 - DEBUG - Added product 274596446 to similar_products
2025-04-17 21:20:30,793 - DEBUG - Checking product_id 17920511 in DataFrame
2025-04-17 21:20:30,796 - DEBUG - Added product 17920511 to similar_products
2025-04-17 21:20:30,797 - DEBUG - Checking product_id 17920245 in DataFrame
2025-04-17 21:20:30,799 - DEBUG - Added product 17920245 to similar_products
2025-04-17 21:20:30,800 - DEBUG - Checking product_id 17920493 in DataFrame
2025-04-17 21:20:30,801 - DEBUG - Added product 17920493 to similar_products
2025-04-17 21:20:30,803 - DEBUG - Checking product_id 176588567 in DataFrame
2025-04-17 21:20:30,805 - DEBUG - Added product 176588567 to similar_products
2025-04-17 21:20:30,806 - DEBUG - Checking product_id 17920296 in DataFrame
2025-04-17 21:20:30,808 - DEBUG - Added product 17920296 to similar_products
2025-04-17 21:20:30,809 - DEBUG - Checking product_id 17920523 in DataFrame
2025-04-17 21:20:30,811 - DEBUG - Added product 17920523 to similar_products
2025-04-17 21:20:30,812 - DEBUG - Checking product_id 17920433 in DataFrame
2025-04-17 21:20:30,814 - DEBUG - Added product 17920433 to similar_products
2025-04-17 21:20:30,815 - DEBUG - Final similar_products count: 10
2025-04-17 21:20:30,816 - DEBUG - Final similar_products: [172818782, 85562664, 274596446, 17920511, 17920245, 17920493, 176588567, 17920296, 17920523, 17920433]
2025-04-17 21:20:30,817 - DEBUG - --- Completed get_similar_products_by_id for product_id: 275678601 ---
2025-04-17 21:20:30,818 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:20:30,819 - DEBUG - Preparing response with similar products
2025-04-17 21:20:30,825 - DEBUG - --- Completed request for /api/recommendations/275678601 ---
2025-04-17 21:20:35,372 - DEBUG - --- Processing request for /api/recommendations/17920511 ---
2025-04-17 21:20:35,373 - DEBUG - Limit set to: 10
2025-04-17 21:20:35,373 - DEBUG - --- Starting get_similar_products_by_id for product_id: 17920511 ---
2025-04-17 21:20:35,374 - DEBUG - Checking if product_id 17920511 exists in product_ids
2025-04-17 21:20:35,374 - DEBUG - Product_id exists in vector database: True
2025-04-17 21:20:35,375 - DEBUG - Fetching product details from Tiki API for product_id: 17920511
2025-04-17 21:20:35,468 - DEBUG - Extracting product details
2025-04-17 21:20:35,473 - DEBUG - Category_name: Root
2025-04-17 21:20:35,474 - DEBUG - Brand_name: OLSG
2025-04-17 21:20:35,480 - DEBUG - Encoding combined text to embedding
2025-04-17 21:20:35,545 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:20:35,546 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:20:35,549 - DEBUG - FAISS search results - distances: [[1.8660709099910938e-13, 0.0010004558134824038, 0.0015545682981610298, 0.0034826009068638086, 0.012243558652698994, 0.013768089935183525, 0.014632404781877995, 0.014725830405950546, 0.01759531907737255, 0.017763178795576096, 0.018001005053520203]]
2025-04-17 21:20:35,550 - DEBUG - FAISS search results - indices: [[2480, 7962, 1463, 1495, 7873, 7964, 7874, 861, 1788, 1621, 1853]]
2025-04-17 21:20:35,550 - DEBUG - Filtered result_product_ids: [17920493, 17920296, 17920433, 17919977, 17920523, 17919987, 17925526, 17921793, 17921067, 17922110]
2025-04-17 21:20:35,551 - DEBUG - Checking product_id 17920493 in DataFrame
2025-04-17 21:20:35,553 - DEBUG - Added product 17920493 to similar_products
2025-04-17 21:20:35,554 - DEBUG - Checking product_id 17920296 in DataFrame
2025-04-17 21:20:35,555 - DEBUG - Added product 17920296 to similar_products
2025-04-17 21:20:35,556 - DEBUG - Checking product_id 17920433 in DataFrame
2025-04-17 21:20:35,557 - DEBUG - Added product 17920433 to similar_products
2025-04-17 21:20:35,558 - DEBUG - Checking product_id 17919977 in DataFrame
2025-04-17 21:20:35,559 - DEBUG - Added product 17919977 to similar_products
2025-04-17 21:20:35,560 - DEBUG - Checking product_id 17920523 in DataFrame
2025-04-17 21:20:35,563 - DEBUG - Added product 17920523 to similar_products
2025-04-17 21:20:35,564 - DEBUG - Checking product_id 17919987 in DataFrame
2025-04-17 21:20:35,565 - DEBUG - Added product 17919987 to similar_products
2025-04-17 21:20:35,566 - DEBUG - Checking product_id 17925526 in DataFrame
2025-04-17 21:20:35,567 - DEBUG - Added product 17925526 to similar_products
2025-04-17 21:20:35,568 - DEBUG - Checking product_id 17921793 in DataFrame
2025-04-17 21:20:35,569 - DEBUG - Added product 17921793 to similar_products
2025-04-17 21:20:35,570 - DEBUG - Checking product_id 17921067 in DataFrame
2025-04-17 21:20:35,571 - DEBUG - Added product 17921067 to similar_products
2025-04-17 21:20:35,572 - DEBUG - Checking product_id 17922110 in DataFrame
2025-04-17 21:20:35,573 - DEBUG - Added product 17922110 to similar_products
2025-04-17 21:20:35,574 - DEBUG - Final similar_products count: 10
2025-04-17 21:20:35,574 - DEBUG - Final similar_products: [17920493, 17920296, 17920433, 17919977, 17920523, 17919987, 17925526, 17921793, 17921067, 17922110]
2025-04-17 21:20:35,575 - DEBUG - --- Completed get_similar_products_by_id for product_id: 17920511 ---
2025-04-17 21:20:35,575 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:20:35,576 - DEBUG - Preparing response with similar products
2025-04-17 21:20:35,582 - DEBUG - --- Completed request for /api/recommendations/17920511 ---
2025-04-17 21:20:38,097 - DEBUG - --- Processing request for /api/recommendations/17919977 ---
2025-04-17 21:20:38,098 - DEBUG - Limit set to: 10
2025-04-17 21:20:38,100 - DEBUG - --- Starting get_similar_products_by_id for product_id: 17919977 ---
2025-04-17 21:20:38,101 - DEBUG - Checking if product_id 17919977 exists in product_ids
2025-04-17 21:20:38,102 - DEBUG - Product_id exists in vector database: True
2025-04-17 21:20:38,103 - DEBUG - Fetching product details from Tiki API for product_id: 17919977
2025-04-17 21:20:38,211 - DEBUG - Extracting product details
2025-04-17 21:20:38,223 - DEBUG - Category_name: Root
2025-04-17 21:20:38,224 - DEBUG - Brand_name: OLSG
2025-04-17 21:20:38,231 - DEBUG - Encoding combined text to embedding
2025-04-17 21:20:38,291 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:20:38,291 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:20:38,293 - DEBUG - FAISS search results - distances: [[1.7167121673863917e-13, 0.004183339886367321, 0.007772018201649189, 0.012234187684953213, 0.012243544682860374, 0.012464038096368313, 0.013345880433917046, 0.013389760628342628, 0.014297924935817719, 0.015393827110528946, 0.01639740541577339]]
2025-04-17 21:20:38,295 - DEBUG - FAISS search results - indices: [[7873, 7874, 7914, 7964, 2480, 7962, 1803, 1463, 1495, 2662, 1792]]
2025-04-17 21:20:38,296 - DEBUG - Filtered result_product_ids: [17919987, 17920245, 17920523, 17920511, 17920493, 17921863, 17920296, 17920433, 17925419, 17921807]
2025-04-17 21:20:38,297 - DEBUG - Checking product_id 17919987 in DataFrame
2025-04-17 21:20:38,298 - DEBUG - Added product 17919987 to similar_products
2025-04-17 21:20:38,299 - DEBUG - Checking product_id 17920245 in DataFrame
2025-04-17 21:20:38,301 - DEBUG - Added product 17920245 to similar_products
2025-04-17 21:20:38,301 - DEBUG - Checking product_id 17920523 in DataFrame
2025-04-17 21:20:38,304 - DEBUG - Added product 17920523 to similar_products
2025-04-17 21:20:38,305 - DEBUG - Checking product_id 17920511 in DataFrame
2025-04-17 21:20:38,306 - DEBUG - Added product 17920511 to similar_products
2025-04-17 21:20:38,306 - DEBUG - Checking product_id 17920493 in DataFrame
2025-04-17 21:20:38,308 - DEBUG - Added product 17920493 to similar_products
2025-04-17 21:20:38,308 - DEBUG - Checking product_id 17921863 in DataFrame
2025-04-17 21:20:38,310 - DEBUG - Added product 17921863 to similar_products
2025-04-17 21:20:38,311 - DEBUG - Checking product_id 17920296 in DataFrame
2025-04-17 21:20:38,313 - DEBUG - Added product 17920296 to similar_products
2025-04-17 21:20:38,314 - DEBUG - Checking product_id 17920433 in DataFrame
2025-04-17 21:20:38,316 - DEBUG - Added product 17920433 to similar_products
2025-04-17 21:20:38,316 - DEBUG - Checking product_id 17925419 in DataFrame
2025-04-17 21:20:38,318 - DEBUG - Added product 17925419 to similar_products
2025-04-17 21:20:38,318 - DEBUG - Checking product_id 17921807 in DataFrame
2025-04-17 21:20:38,319 - DEBUG - Added product 17921807 to similar_products
2025-04-17 21:20:38,320 - DEBUG - Final similar_products count: 10
2025-04-17 21:20:38,320 - DEBUG - Final similar_products: [17919987, 17920245, 17920523, 17920511, 17920493, 17921863, 17920296, 17920433, 17925419, 17921807]
2025-04-17 21:20:38,321 - DEBUG - --- Completed get_similar_products_by_id for product_id: 17919977 ---
2025-04-17 21:20:38,321 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:20:38,322 - DEBUG - Preparing response with similar products
2025-04-17 21:20:38,325 - DEBUG - --- Completed request for /api/recommendations/17919977 ---
2025-04-17 21:20:39,292 - DEBUG - --- Processing request for /api/recommendations/17920493 ---
2025-04-17 21:20:39,293 - DEBUG - Limit set to: 10
2025-04-17 21:20:39,294 - DEBUG - --- Starting get_similar_products_by_id for product_id: 17920493 ---
2025-04-17 21:20:39,295 - DEBUG - Checking if product_id 17920493 exists in product_ids
2025-04-17 21:20:39,296 - DEBUG - Product_id exists in vector database: True
2025-04-17 21:20:39,297 - DEBUG - Fetching product details from Tiki API for product_id: 17920493
2025-04-17 21:20:39,887 - DEBUG - Extracting product details
2025-04-17 21:20:39,893 - DEBUG - Category_name: Root
2025-04-17 21:20:39,893 - DEBUG - Brand_name: OLSG
2025-04-17 21:20:39,896 - DEBUG - Encoding combined text to embedding
2025-04-17 21:20:39,941 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:20:39,941 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:20:39,944 - DEBUG - FAISS search results - distances: [[1.3473694816107384e-13, 0.0008875986095517874, 0.0010004572104662657, 0.0024943153839558363, 0.012118439190089703, 0.012464040890336037, 0.01312282495200634, 0.014465125277638435, 0.01577026955783367, 0.015811050310730934, 0.015981607139110565]]
2025-04-17 21:20:39,946 - DEBUG - FAISS search results - indices: [[7962, 1463, 2480, 1495, 7964, 7873, 7874, 861, 1788, 1853, 1621]]
2025-04-17 21:20:39,947 - DEBUG - Filtered result_product_ids: [17920296, 17920511, 17920433, 17920523, 17919977, 17919987, 17925526, 17921793, 17922110, 17921067]
2025-04-17 21:20:39,948 - DEBUG - Checking product_id 17920296 in DataFrame
2025-04-17 21:20:39,949 - DEBUG - Added product 17920296 to similar_products
2025-04-17 21:20:39,950 - DEBUG - Checking product_id 17920511 in DataFrame
2025-04-17 21:20:39,951 - DEBUG - Added product 17920511 to similar_products
2025-04-17 21:20:39,952 - DEBUG - Checking product_id 17920433 in DataFrame
2025-04-17 21:20:39,954 - DEBUG - Added product 17920433 to similar_products
2025-04-17 21:20:39,954 - DEBUG - Checking product_id 17920523 in DataFrame
2025-04-17 21:20:39,955 - DEBUG - Added product 17920523 to similar_products
2025-04-17 21:20:39,956 - DEBUG - Checking product_id 17919977 in DataFrame
2025-04-17 21:20:39,957 - DEBUG - Added product 17919977 to similar_products
2025-04-17 21:20:39,958 - DEBUG - Checking product_id 17919987 in DataFrame
2025-04-17 21:20:39,960 - DEBUG - Added product 17919987 to similar_products
2025-04-17 21:20:39,960 - DEBUG - Checking product_id 17925526 in DataFrame
2025-04-17 21:20:39,962 - DEBUG - Added product 17925526 to similar_products
2025-04-17 21:20:39,963 - DEBUG - Checking product_id 17921793 in DataFrame
2025-04-17 21:20:39,964 - DEBUG - Added product 17921793 to similar_products
2025-04-17 21:20:39,965 - DEBUG - Checking product_id 17922110 in DataFrame
2025-04-17 21:20:39,967 - DEBUG - Added product 17922110 to similar_products
2025-04-17 21:20:39,967 - DEBUG - Checking product_id 17921067 in DataFrame
2025-04-17 21:20:39,969 - DEBUG - Added product 17921067 to similar_products
2025-04-17 21:20:39,970 - DEBUG - Final similar_products count: 10
2025-04-17 21:20:39,971 - DEBUG - Final similar_products: [17920296, 17920511, 17920433, 17920523, 17919977, 17919987, 17925526, 17921793, 17922110, 17921067]
2025-04-17 21:20:39,971 - DEBUG - --- Completed get_similar_products_by_id for product_id: 17920493 ---
2025-04-17 21:20:39,972 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:20:39,972 - DEBUG - Preparing response with similar products
2025-04-17 21:20:39,976 - DEBUG - --- Completed request for /api/recommendations/17920493 ---
2025-04-17 21:20:46,815 - DEBUG - --- Processing request for /api/recommendations/17920523 ---
2025-04-17 21:20:46,817 - DEBUG - Limit set to: 10
2025-04-17 21:20:46,820 - DEBUG - --- Starting get_similar_products_by_id for product_id: 17920523 ---
2025-04-17 21:20:46,822 - DEBUG - Checking if product_id 17920523 exists in product_ids
2025-04-17 21:20:46,823 - DEBUG - Product_id exists in vector database: True
2025-04-17 21:20:46,823 - DEBUG - Fetching product details from Tiki API for product_id: 17920523
2025-04-17 21:20:46,921 - DEBUG - Extracting product details
2025-04-17 21:20:46,931 - DEBUG - Category_name: Root
2025-04-17 21:20:46,932 - DEBUG - Brand_name: OLSG
2025-04-17 21:20:46,937 - DEBUG - Encoding combined text to embedding
2025-04-17 21:20:46,983 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:20:46,983 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:20:46,985 - DEBUG - FAISS search results - distances: [[1.5952706820462903e-13, 0.012118436396121979, 0.012234196066856384, 0.013326993212103844, 0.013597243465483189, 0.013768075034022331, 0.015438565984368324, 0.016504935920238495, 0.018838826566934586, 0.01970071718096733, 0.019877314567565918]]
2025-04-17 21:20:46,986 - DEBUG - FAISS search results - indices: [[7964, 7962, 7873, 1495, 1463, 2480, 7874, 2662, 2664, 2661, 908]]
2025-04-17 21:20:46,986 - DEBUG - Filtered result_product_ids: [17920493, 17919977, 17920433, 17920296, 17920511, 17919987, 17925419, 17925437, 17925402, 17925747]
2025-04-17 21:20:46,987 - DEBUG - Checking product_id 17920493 in DataFrame
2025-04-17 21:20:46,988 - DEBUG - Added product 17920493 to similar_products
2025-04-17 21:20:46,989 - DEBUG - Checking product_id 17919977 in DataFrame
2025-04-17 21:20:46,991 - DEBUG - Added product 17919977 to similar_products
2025-04-17 21:20:46,992 - DEBUG - Checking product_id 17920433 in DataFrame
2025-04-17 21:20:46,993 - DEBUG - Added product 17920433 to similar_products
2025-04-17 21:20:46,993 - DEBUG - Checking product_id 17920296 in DataFrame
2025-04-17 21:20:46,995 - DEBUG - Added product 17920296 to similar_products
2025-04-17 21:20:46,995 - DEBUG - Checking product_id 17920511 in DataFrame
2025-04-17 21:20:46,996 - DEBUG - Added product 17920511 to similar_products
2025-04-17 21:20:46,998 - DEBUG - Checking product_id 17919987 in DataFrame
2025-04-17 21:20:47,000 - DEBUG - Added product 17919987 to similar_products
2025-04-17 21:20:47,001 - DEBUG - Checking product_id 17925419 in DataFrame
2025-04-17 21:20:47,002 - DEBUG - Added product 17925419 to similar_products
2025-04-17 21:20:47,003 - DEBUG - Checking product_id 17925437 in DataFrame
2025-04-17 21:20:47,004 - DEBUG - Added product 17925437 to similar_products
2025-04-17 21:20:47,004 - DEBUG - Checking product_id 17925402 in DataFrame
2025-04-17 21:20:47,006 - DEBUG - Added product 17925402 to similar_products
2025-04-17 21:20:47,006 - DEBUG - Checking product_id 17925747 in DataFrame
2025-04-17 21:20:47,007 - DEBUG - Added product 17925747 to similar_products
2025-04-17 21:20:47,008 - DEBUG - Final similar_products count: 10
2025-04-17 21:20:47,009 - DEBUG - Final similar_products: [17920493, 17919977, 17920433, 17920296, 17920511, 17919987, 17925419, 17925437, 17925402, 17925747]
2025-04-17 21:20:47,009 - DEBUG - --- Completed get_similar_products_by_id for product_id: 17920523 ---
2025-04-17 21:20:47,009 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:20:47,010 - DEBUG - Preparing response with similar products
2025-04-17 21:20:47,014 - DEBUG - --- Completed request for /api/recommendations/17920523 ---
2025-04-17 21:20:50,029 - DEBUG - --- Processing request for /api/recommendations/91066307 ---
2025-04-17 21:20:50,030 - DEBUG - Limit set to: 10
2025-04-17 21:20:50,032 - DEBUG - --- Starting get_similar_products_by_id for product_id: 91066307 ---
2025-04-17 21:20:50,033 - DEBUG - Checking if product_id 91066307 exists in product_ids
2025-04-17 21:20:50,034 - DEBUG - Product_id exists in vector database: False
2025-04-17 21:20:50,035 - DEBUG - Fetching product details from Tiki API for product_id: 91066307
2025-04-17 21:20:50,189 - DEBUG - Extracting product details
2025-04-17 21:20:50,197 - DEBUG - Brand_name: OLSG
2025-04-17 21:20:50,207 - DEBUG - Encoding combined text to embedding
2025-04-17 21:20:50,286 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:20:50,287 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:20:50,289 - DEBUG - FAISS search results - distances: [[0.16174395382404327, 0.2962440848350525, 0.3041945695877075, 0.35296139121055603, 0.35783204436302185, 0.3620367646217346, 0.36435794830322266, 0.3982672691345215, 0.39940470457077026, 0.4093884229660034, 0.4313722252845764]]
2025-04-17 21:20:50,290 - DEBUG - FAISS search results - indices: [[1678, 2820, 2806, 2798, 2772, 2761, 2804, 2736, 2725, 2782, 998]]
2025-04-17 21:20:50,291 - DEBUG - Filtered result_product_ids: [85562664, 48420623, 48420268, 48420056, 48419360, 48419114, 48420250, 134933833, 197528405, 48419610]
2025-04-17 21:20:50,291 - DEBUG - Checking product_id 85562664 in DataFrame
2025-04-17 21:20:50,293 - DEBUG - Added product 85562664 to similar_products
2025-04-17 21:20:50,294 - DEBUG - Checking product_id 48420623 in DataFrame
2025-04-17 21:20:50,296 - DEBUG - Added product 48420623 to similar_products
2025-04-17 21:20:50,296 - DEBUG - Checking product_id 48420268 in DataFrame
2025-04-17 21:20:50,298 - DEBUG - Added product 48420268 to similar_products
2025-04-17 21:20:50,299 - DEBUG - Checking product_id 48420056 in DataFrame
2025-04-17 21:20:50,301 - DEBUG - Added product 48420056 to similar_products
2025-04-17 21:20:50,302 - DEBUG - Checking product_id 48419360 in DataFrame
2025-04-17 21:20:50,303 - DEBUG - Added product 48419360 to similar_products
2025-04-17 21:20:50,304 - DEBUG - Checking product_id 48419114 in DataFrame
2025-04-17 21:20:50,306 - DEBUG - Added product 48419114 to similar_products
2025-04-17 21:20:50,307 - DEBUG - Checking product_id 48420250 in DataFrame
2025-04-17 21:20:50,309 - DEBUG - Added product 48420250 to similar_products
2025-04-17 21:20:50,309 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-17 21:20:50,311 - DEBUG - Added product 134933833 to similar_products
2025-04-17 21:20:50,312 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-17 21:20:50,313 - DEBUG - Added product 197528405 to similar_products
2025-04-17 21:20:50,314 - DEBUG - Checking product_id 48419610 in DataFrame
2025-04-17 21:20:50,316 - DEBUG - Added product 48419610 to similar_products
2025-04-17 21:20:50,319 - DEBUG - Final similar_products count: 10
2025-04-17 21:20:50,320 - DEBUG - Final similar_products: [85562664, 48420623, 48420268, 48420056, 48419360, 48419114, 48420250, 134933833, 197528405, 48419610]
2025-04-17 21:20:50,321 - DEBUG - --- Completed get_similar_products_by_id for product_id: 91066307 ---
2025-04-17 21:20:50,322 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:20:50,322 - DEBUG - Preparing response with similar products
2025-04-17 21:20:50,327 - DEBUG - --- Completed request for /api/recommendations/91066307 ---
2025-04-17 21:21:06,622 - DEBUG - --- Processing request for /api/recommendations/276110349 ---
2025-04-17 21:21:06,622 - DEBUG - Limit set to: 10
2025-04-17 21:21:06,623 - DEBUG - --- Starting get_similar_products_by_id for product_id: 276110349 ---
2025-04-17 21:21:06,624 - DEBUG - Checking if product_id 276110349 exists in product_ids
2025-04-17 21:21:06,625 - DEBUG - Product_id exists in vector database: False
2025-04-17 21:21:06,626 - DEBUG - Fetching product details from Tiki API for product_id: 276110349
2025-04-17 21:21:07,282 - DEBUG - Extracting product details
2025-04-17 21:21:07,282 - DEBUG - Name: Apple iPhone 16
2025-04-17 21:21:07,283 - DEBUG - Short_description: ...
2025-04-17 21:21:07,286 - DEBUG - Brand_name: Apple
2025-04-17 21:21:07,292 - DEBUG - Encoding combined text to embedding
2025-04-17 21:21:07,315 - DEBUG - Query embedding shape: (1, 384)
2025-04-17 21:21:07,316 - DEBUG - Searching FAISS index with top_k: 11
2025-04-17 21:21:07,317 - DEBUG - FAISS search results - distances: [[0.7269222736358643, 0.7687099575996399, 0.7795100212097168, 0.7871565818786621, 0.8045234680175781, 0.817284345626831, 0.8229020237922668, 0.8246817588806152, 0.8259897232055664, 0.8284562230110168, 0.8299679160118103]]
2025-04-17 21:21:07,318 - DEBUG - FAISS search results - indices: [[7387, 930, 3877, 8546, 35, 2294, 1115, 1205, 1833, 1188, 1785]]
2025-04-17 21:21:07,319 - DEBUG - Filtered result_product_ids: [183330021, 273237704, 72849098, 205815576, 275589387, 273440662, 277490201, 230157205, 274544634, 275589968]
2025-04-17 21:21:07,320 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-17 21:21:07,323 - DEBUG - Added product 183330021 to similar_products
2025-04-17 21:21:07,324 - DEBUG - Checking product_id 273237704 in DataFrame
2025-04-17 21:21:07,325 - DEBUG - Added product 273237704 to similar_products
2025-04-17 21:21:07,326 - DEBUG - Checking product_id 72849098 in DataFrame
2025-04-17 21:21:07,328 - DEBUG - Added product 72849098 to similar_products
2025-04-17 21:21:07,328 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-17 21:21:07,330 - DEBUG - Added product 205815576 to similar_products
2025-04-17 21:21:07,331 - DEBUG - Checking product_id 275589387 in DataFrame
2025-04-17 21:21:07,332 - DEBUG - Added product 275589387 to similar_products
2025-04-17 21:21:07,332 - DEBUG - Checking product_id 273440662 in DataFrame
2025-04-17 21:21:07,333 - DEBUG - Added product 273440662 to similar_products
2025-04-17 21:21:07,334 - DEBUG - Checking product_id 277490201 in DataFrame
2025-04-17 21:21:07,335 - DEBUG - Added product 277490201 to similar_products
2025-04-17 21:21:07,336 - DEBUG - Checking product_id 230157205 in DataFrame
2025-04-17 21:21:07,338 - DEBUG - Added product 230157205 to similar_products
2025-04-17 21:21:07,339 - DEBUG - Checking product_id 274544634 in DataFrame
2025-04-17 21:21:07,340 - DEBUG - Added product 274544634 to similar_products
2025-04-17 21:21:07,341 - DEBUG - Checking product_id 275589968 in DataFrame
2025-04-17 21:21:07,342 - DEBUG - Added product 275589968 to similar_products
2025-04-17 21:21:07,343 - DEBUG - Final similar_products count: 10
2025-04-17 21:21:07,344 - DEBUG - Final similar_products: [183330021, 273237704, 72849098, 205815576, 275589387, 273440662, 277490201, 230157205, 274544634, 275589968]
2025-04-17 21:21:07,344 - DEBUG - --- Completed get_similar_products_by_id for product_id: 276110349 ---
2025-04-17 21:21:07,345 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-17 21:21:07,346 - DEBUG - Preparing response with similar products
2025-04-17 21:21:07,351 - DEBUG - --- Completed request for /api/recommendations/276110349 ---
2025-04-17 21:51:30,172 - DEBUG - --- Initializing SearchService ---
2025-04-17 21:51:30,172 - DEBUG - Current working directory: D:\MonThu6
2025-04-17 21:51:30,173 - DEBUG - Loading SentenceTransformer model
2025-04-17 21:51:34,921 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-17 21:51:34,922 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-17 21:51:34,923 - DEBUG - Loading FAISS index
2025-04-17 21:51:34,930 - DEBUG - Loading product DataFrame
2025-04-17 21:51:34,951 - DEBUG - Loading product_ids
2025-04-17 21:51:34,952 - DEBUG - Vector database loaded. Total products: 8587
2025-04-17 21:51:34,952 - DEBUG - DataFrame shape: (8587, 12)
2025-04-17 21:51:34,952 - DEBUG - FAISS index ntotal: 8587
2025-04-18 19:51:20,986 - DEBUG - --- Initializing SearchService ---
2025-04-18 19:51:20,987 - DEBUG - Current working directory: D:\MonThu6
2025-04-18 19:51:20,987 - DEBUG - Loading SentenceTransformer model
2025-04-18 19:51:26,287 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-18 19:51:26,288 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-18 19:51:26,289 - DEBUG - Loading FAISS index
2025-04-18 19:51:26,327 - DEBUG - Loading product DataFrame
2025-04-18 19:51:26,377 - DEBUG - Loading product_ids
2025-04-18 19:51:26,394 - DEBUG - Vector database loaded. Total products: 8587
2025-04-18 19:51:26,395 - DEBUG - DataFrame shape: (8587, 12)
2025-04-18 19:51:26,397 - DEBUG - FAISS index ntotal: 8587
2025-04-18 19:51:47,380 - DEBUG - --- Initializing SearchService ---
2025-04-18 19:51:47,381 - DEBUG - Current working directory: D:\MonThu6
2025-04-18 19:51:47,382 - DEBUG - Loading SentenceTransformer model
2025-04-18 19:51:51,982 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-18 19:51:51,983 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-18 19:51:51,983 - DEBUG - Loading FAISS index
2025-04-18 19:51:51,992 - DEBUG - Loading product DataFrame
2025-04-18 19:51:52,018 - DEBUG - Loading product_ids
2025-04-18 19:51:52,019 - DEBUG - Vector database loaded. Total products: 8587
2025-04-18 19:51:52,020 - DEBUG - DataFrame shape: (8587, 12)
2025-04-18 19:51:52,021 - DEBUG - FAISS index ntotal: 8587
2025-04-18 21:23:37,414 - DEBUG - --- Processing request for /api/recommendations/271128271 ---
2025-04-18 21:23:37,417 - DEBUG - Limit set to: 10
2025-04-18 21:23:37,419 - DEBUG - --- Starting get_similar_products_by_id for product_id: 271128271 ---
2025-04-18 21:23:37,423 - DEBUG - Checking if product_id 271128271 exists in product_ids
2025-04-18 21:23:37,425 - DEBUG - Product_id exists in vector database: True
2025-04-18 21:23:37,427 - DEBUG - Fetching product details from Tiki API for product_id: 271128271
2025-04-18 21:23:37,993 - DEBUG - Extracting product details
2025-04-18 21:23:38,016 - DEBUG - Brand_name: OPPO
2025-04-18 21:23:38,024 - DEBUG - Encoding combined text to embedding
2025-04-18 21:23:38,633 - DEBUG - Query embedding shape: (1, 384)
2025-04-18 21:23:38,634 - DEBUG - Searching FAISS index with top_k: 11
2025-04-18 21:23:38,671 - DEBUG - FAISS search results - distances: [[1.3748212095675283e-13, 0.07058018445968628, 0.079551100730896, 0.08254238963127136, 0.09476955235004425, 0.09664995968341827, 0.12460317462682724, 0.13870368897914886, 0.24299933016300201, 0.2519594430923462, 0.25280624628067017]]
2025-04-18 21:23:38,672 - DEBUG - FAISS search results - indices: [[261, 1426, 2236, 1265, 111, 793, 55, 72, 228, 123, 318]]
2025-04-18 21:23:38,672 - DEBUG - Filtered result_product_ids: [275386465, 277175972, 274156763, 276046675, 277005407, 273664463, 273668660, 272328188, 272348047, 276944892]
2025-04-18 21:23:38,673 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-18 21:23:38,711 - DEBUG - Added product 275386465 to similar_products
2025-04-18 21:23:38,748 - DEBUG - Checking product_id 277175972 in DataFrame
2025-04-18 21:23:38,751 - DEBUG - Added product 277175972 to similar_products
2025-04-18 21:23:38,754 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-18 21:23:38,759 - DEBUG - Added product 274156763 to similar_products
2025-04-18 21:23:38,760 - DEBUG - Checking product_id 276046675 in DataFrame
2025-04-18 21:23:38,799 - DEBUG - Added product 276046675 to similar_products
2025-04-18 21:23:38,818 - DEBUG - Checking product_id 277005407 in DataFrame
2025-04-18 21:23:38,835 - DEBUG - Added product 277005407 to similar_products
2025-04-18 21:23:38,844 - DEBUG - Checking product_id 273664463 in DataFrame
2025-04-18 21:23:38,853 - DEBUG - Added product 273664463 to similar_products
2025-04-18 21:23:38,854 - DEBUG - Checking product_id 273668660 in DataFrame
2025-04-18 21:23:38,856 - DEBUG - Added product 273668660 to similar_products
2025-04-18 21:23:38,857 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-18 21:23:38,860 - DEBUG - Added product 272328188 to similar_products
2025-04-18 21:23:38,860 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-18 21:23:38,864 - DEBUG - Added product 272348047 to similar_products
2025-04-18 21:23:38,865 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-18 21:23:38,871 - DEBUG - Added product 276944892 to similar_products
2025-04-18 21:23:38,872 - DEBUG - Final similar_products count: 10
2025-04-18 21:23:38,876 - DEBUG - Final similar_products: [275386465, 277175972, 274156763, 276046675, 277005407, 273664463, 273668660, 272328188, 272348047, 276944892]
2025-04-18 21:23:38,882 - DEBUG - --- Completed get_similar_products_by_id for product_id: 271128271 ---
2025-04-18 21:23:38,889 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-18 21:23:38,893 - DEBUG - Preparing response with similar products
2025-04-18 21:23:38,921 - DEBUG - --- Completed request for /api/recommendations/271128271 ---
2025-04-18 21:25:01,430 - DEBUG - --- Processing request for /api/recommendations/184059211 ---
2025-04-18 21:25:01,432 - DEBUG - Limit set to: 10
2025-04-18 21:25:01,433 - DEBUG - --- Starting get_similar_products_by_id for product_id: 184059211 ---
2025-04-18 21:25:01,434 - DEBUG - Checking if product_id 184059211 exists in product_ids
2025-04-18 21:25:01,435 - DEBUG - Product_id exists in vector database: False
2025-04-18 21:25:01,436 - DEBUG - Fetching product details from Tiki API for product_id: 184059211
2025-04-18 21:25:01,621 - DEBUG - Extracting product details
2025-04-18 21:25:01,622 - DEBUG - Name: Apple iPhone 13
2025-04-18 21:25:01,632 - DEBUG - Brand_name: Apple
2025-04-18 21:25:01,642 - DEBUG - Encoding combined text to embedding
2025-04-18 21:25:01,769 - DEBUG - Query embedding shape: (1, 384)
2025-04-18 21:25:01,770 - DEBUG - Searching FAISS index with top_k: 11
2025-04-18 21:25:01,773 - DEBUG - FAISS search results - distances: [[0.6164488196372986, 0.6294758319854736, 0.650195837020874, 0.6850014328956604, 0.7004382610321045, 0.7051544189453125, 0.7058439254760742, 0.7092292308807373, 0.710883617401123, 0.7109403610229492, 0.7109628319740295]]
2025-04-18 21:25:01,774 - DEBUG - FAISS search results - indices: [[7387, 2736, 4172, 2521, 975, 1295, 6724, 2665, 2725, 8546, 240]]
2025-04-18 21:25:01,775 - DEBUG - Filtered result_product_ids: [183330021, 134933833, 203201921, 200914701, 277030799, 277466537, 50714154, 133039431, 197528405, 205815576]
2025-04-18 21:25:01,775 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-18 21:25:01,778 - DEBUG - Added product 183330021 to similar_products
2025-04-18 21:25:01,779 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-18 21:25:01,795 - DEBUG - Added product 134933833 to similar_products
2025-04-18 21:25:01,796 - DEBUG - Checking product_id 203201921 in DataFrame
2025-04-18 21:25:01,799 - DEBUG - Added product 203201921 to similar_products
2025-04-18 21:25:01,804 - DEBUG - Checking product_id 200914701 in DataFrame
2025-04-18 21:25:01,808 - DEBUG - Added product 200914701 to similar_products
2025-04-18 21:25:01,808 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-18 21:25:01,810 - DEBUG - Added product 277030799 to similar_products
2025-04-18 21:25:01,811 - DEBUG - Checking product_id 277466537 in DataFrame
2025-04-18 21:25:01,813 - DEBUG - Added product 277466537 to similar_products
2025-04-18 21:25:01,814 - DEBUG - Checking product_id 50714154 in DataFrame
2025-04-18 21:25:01,818 - DEBUG - Added product 50714154 to similar_products
2025-04-18 21:25:01,820 - DEBUG - Checking product_id 133039431 in DataFrame
2025-04-18 21:25:01,823 - DEBUG - Added product 133039431 to similar_products
2025-04-18 21:25:01,823 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-18 21:25:01,827 - DEBUG - Added product 197528405 to similar_products
2025-04-18 21:25:01,828 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-18 21:25:01,830 - DEBUG - Added product 205815576 to similar_products
2025-04-18 21:25:01,831 - DEBUG - Final similar_products count: 10
2025-04-18 21:25:01,832 - DEBUG - Final similar_products: [183330021, 134933833, 203201921, 200914701, 277030799, 277466537, 50714154, 133039431, 197528405, 205815576]
2025-04-18 21:25:01,833 - DEBUG - --- Completed get_similar_products_by_id for product_id: 184059211 ---
2025-04-18 21:25:01,835 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-18 21:25:01,836 - DEBUG - Preparing response with similar products
2025-04-18 21:25:01,843 - DEBUG - --- Completed request for /api/recommendations/184059211 ---
2025-04-18 21:25:35,836 - DEBUG - --- Processing request for /api/recommendations/184059211 ---
2025-04-18 21:25:35,837 - DEBUG - Limit set to: 10
2025-04-18 21:25:35,838 - DEBUG - --- Starting get_similar_products_by_id for product_id: 184059211 ---
2025-04-18 21:25:35,838 - DEBUG - Checking if product_id 184059211 exists in product_ids
2025-04-18 21:25:35,839 - DEBUG - Product_id exists in vector database: False
2025-04-18 21:25:35,840 - DEBUG - Fetching product details from Tiki API for product_id: 184059211
2025-04-18 21:25:36,001 - DEBUG - Extracting product details
2025-04-18 21:25:36,002 - DEBUG - Name: Apple iPhone 13
2025-04-18 21:25:36,017 - DEBUG - Brand_name: Apple
2025-04-18 21:25:36,023 - DEBUG - Encoding combined text to embedding
2025-04-18 21:25:36,123 - DEBUG - Query embedding shape: (1, 384)
2025-04-18 21:25:36,124 - DEBUG - Searching FAISS index with top_k: 11
2025-04-18 21:25:36,127 - DEBUG - FAISS search results - distances: [[0.6164488196372986, 0.6294758319854736, 0.650195837020874, 0.6850014328956604, 0.7004382610321045, 0.7051544189453125, 0.7058439254760742, 0.7092292308807373, 0.710883617401123, 0.7109403610229492, 0.7109628319740295]]
2025-04-18 21:25:36,130 - DEBUG - FAISS search results - indices: [[7387, 2736, 4172, 2521, 975, 1295, 6724, 2665, 2725, 8546, 240]]
2025-04-18 21:25:36,133 - DEBUG - Filtered result_product_ids: [183330021, 134933833, 203201921, 200914701, 277030799, 277466537, 50714154, 133039431, 197528405, 205815576]
2025-04-18 21:25:36,135 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-18 21:25:36,139 - DEBUG - Added product 183330021 to similar_products
2025-04-18 21:25:36,142 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-18 21:25:36,145 - DEBUG - Added product 134933833 to similar_products
2025-04-18 21:25:36,146 - DEBUG - Checking product_id 203201921 in DataFrame
2025-04-18 21:25:36,149 - DEBUG - Added product 203201921 to similar_products
2025-04-18 21:25:36,150 - DEBUG - Checking product_id 200914701 in DataFrame
2025-04-18 21:25:36,153 - DEBUG - Added product 200914701 to similar_products
2025-04-18 21:25:36,154 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-18 21:25:36,156 - DEBUG - Added product 277030799 to similar_products
2025-04-18 21:25:36,157 - DEBUG - Checking product_id 277466537 in DataFrame
2025-04-18 21:25:36,159 - DEBUG - Added product 277466537 to similar_products
2025-04-18 21:25:36,160 - DEBUG - Checking product_id 50714154 in DataFrame
2025-04-18 21:25:36,167 - DEBUG - Added product 50714154 to similar_products
2025-04-18 21:25:36,169 - DEBUG - Checking product_id 133039431 in DataFrame
2025-04-18 21:25:36,175 - DEBUG - Added product 133039431 to similar_products
2025-04-18 21:25:36,178 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-18 21:25:36,185 - DEBUG - Added product 197528405 to similar_products
2025-04-18 21:25:36,186 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-18 21:25:36,189 - DEBUG - Added product 205815576 to similar_products
2025-04-18 21:25:36,190 - DEBUG - Final similar_products count: 10
2025-04-18 21:25:36,191 - DEBUG - Final similar_products: [183330021, 134933833, 203201921, 200914701, 277030799, 277466537, 50714154, 133039431, 197528405, 205815576]
2025-04-18 21:25:36,193 - DEBUG - --- Completed get_similar_products_by_id for product_id: 184059211 ---
2025-04-18 21:25:36,196 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-18 21:25:36,199 - DEBUG - Preparing response with similar products
2025-04-18 21:25:36,209 - DEBUG - --- Completed request for /api/recommendations/184059211 ---
2025-04-18 21:39:05,255 - DEBUG - --- Initializing SearchService ---
2025-04-18 21:39:05,256 - DEBUG - Current working directory: D:\MonThu6
2025-04-18 21:39:05,256 - DEBUG - Loading SentenceTransformer model
2025-04-18 21:39:08,777 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-18 21:39:08,778 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-18 21:39:08,780 - DEBUG - Loading FAISS index
2025-04-18 21:39:08,811 - DEBUG - Loading product DataFrame
2025-04-18 21:39:08,860 - DEBUG - Loading product_ids
2025-04-18 21:39:08,880 - DEBUG - Vector database loaded. Total products: 8587
2025-04-18 21:39:08,880 - DEBUG - DataFrame shape: (8587, 12)
2025-04-18 21:39:08,881 - DEBUG - FAISS index ntotal: 8587
2025-04-19 15:44:34,595 - DEBUG - --- Initializing SearchService ---
2025-04-19 15:44:34,595 - DEBUG - Current working directory: D:\MonThu6
2025-04-19 15:44:34,596 - DEBUG - Loading SentenceTransformer model
2025-04-19 15:44:38,194 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-19 15:44:38,194 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-19 15:44:38,195 - DEBUG - Loading FAISS index
2025-04-19 15:44:38,242 - DEBUG - Loading product DataFrame
2025-04-19 15:44:38,283 - DEBUG - Loading product_ids
2025-04-19 15:44:38,295 - DEBUG - Vector database loaded. Total products: 8587
2025-04-19 15:44:38,295 - DEBUG - DataFrame shape: (8587, 12)
2025-04-19 15:44:38,296 - DEBUG - FAISS index ntotal: 8587
2025-04-19 15:44:55,722 - DEBUG - --- Initializing SearchService ---
2025-04-19 15:44:55,723 - DEBUG - Current working directory: D:\MonThu6
2025-04-19 15:44:55,723 - DEBUG - Loading SentenceTransformer model
2025-04-19 15:45:01,710 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-19 15:45:01,711 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-19 15:45:01,711 - DEBUG - Loading FAISS index
2025-04-19 15:45:01,720 - DEBUG - Loading product DataFrame
2025-04-19 15:45:01,741 - DEBUG - Loading product_ids
2025-04-19 15:45:01,743 - DEBUG - Vector database loaded. Total products: 8587
2025-04-19 15:45:01,743 - DEBUG - DataFrame shape: (8587, 12)
2025-04-19 15:45:01,743 - DEBUG - FAISS index ntotal: 8587
2025-04-19 15:45:26,335 - DEBUG - --- Processing request for /api/recommendations/277776275 ---
2025-04-19 15:45:26,336 - DEBUG - Limit set to: 10
2025-04-19 15:45:26,337 - DEBUG - --- Starting get_similar_products_by_id for product_id: 277776275 ---
2025-04-19 15:45:26,338 - DEBUG - Checking if product_id 277776275 exists in product_ids
2025-04-19 15:45:26,339 - DEBUG - Product_id exists in vector database: False
2025-04-19 15:45:26,339 - DEBUG - Fetching product details from Tiki API for product_id: 277776275
2025-04-19 15:45:27,228 - DEBUG - Extracting product details
2025-04-19 15:45:27,234 - DEBUG - Category_name: Root
2025-04-19 15:45:27,235 - DEBUG - Brand_name: Samsung
2025-04-19 15:45:27,237 - DEBUG - Encoding combined text to embedding
2025-04-19 15:45:30,084 - DEBUG - Query embedding shape: (1, 384)
2025-04-19 15:45:30,084 - DEBUG - Searching FAISS index with top_k: 11
2025-04-19 15:45:30,140 - DEBUG - FAISS search results - distances: [[0.12433312833309174, 0.2731601595878601, 0.30893659591674805, 0.309124231338501, 0.3137260973453522, 0.31586480140686035, 0.3183300495147705, 0.31840622425079346, 0.32319605350494385, 0.32803672552108765, 0.33463940024375916]]
2025-04-19 15:45:30,140 - DEBUG - FAISS search results - indices: [[33, 2013, 2024, 204, 644, 318, 224, 2204, 242, 859, 23]]
2025-04-19 15:45:30,142 - DEBUG - Filtered result_product_ids: [276250878, 273185467, 273029857, 273610105, 277553639, 276944892, 273636845, 273186334, 276274790, 272270730]
2025-04-19 15:45:30,143 - DEBUG - Checking product_id 276250878 in DataFrame
2025-04-19 15:45:30,198 - DEBUG - Added product 276250878 to similar_products
2025-04-19 15:45:30,201 - DEBUG - Checking product_id 273185467 in DataFrame
2025-04-19 15:45:30,203 - DEBUG - Added product 273185467 to similar_products
2025-04-19 15:45:30,203 - DEBUG - Checking product_id 273029857 in DataFrame
2025-04-19 15:45:30,205 - DEBUG - Added product 273029857 to similar_products
2025-04-19 15:45:30,205 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-19 15:45:30,207 - DEBUG - Added product 273610105 to similar_products
2025-04-19 15:45:30,222 - DEBUG - Checking product_id 277553639 in DataFrame
2025-04-19 15:45:30,223 - DEBUG - Added product 277553639 to similar_products
2025-04-19 15:45:30,224 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-19 15:45:30,226 - DEBUG - Added product 276944892 to similar_products
2025-04-19 15:45:30,226 - DEBUG - Checking product_id 273636845 in DataFrame
2025-04-19 15:45:30,228 - DEBUG - Added product 273636845 to similar_products
2025-04-19 15:45:30,228 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-19 15:45:30,230 - DEBUG - Added product 273186334 to similar_products
2025-04-19 15:45:30,230 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-19 15:45:30,231 - DEBUG - Added product 276274790 to similar_products
2025-04-19 15:45:30,250 - DEBUG - Checking product_id 272270730 in DataFrame
2025-04-19 15:45:30,251 - DEBUG - Added product 272270730 to similar_products
2025-04-19 15:45:30,252 - DEBUG - Final similar_products count: 10
2025-04-19 15:45:30,252 - DEBUG - Final similar_products: [276250878, 273185467, 273029857, 273610105, 277553639, 276944892, 273636845, 273186334, 276274790, 272270730]
2025-04-19 15:45:30,252 - DEBUG - --- Completed get_similar_products_by_id for product_id: 277776275 ---
2025-04-19 15:45:30,253 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-19 15:45:30,253 - DEBUG - Preparing response with similar products
2025-04-19 15:45:30,257 - DEBUG - --- Completed request for /api/recommendations/277776275 ---
2025-04-19 15:52:22,280 - DEBUG - --- Initializing SearchService ---
2025-04-19 15:52:22,281 - DEBUG - Current working directory: D:\MonThu6
2025-04-19 15:52:22,281 - DEBUG - Loading SentenceTransformer model
2025-04-19 15:52:26,811 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-19 15:52:26,812 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-19 15:52:26,813 - DEBUG - Loading FAISS index
2025-04-19 15:52:26,820 - DEBUG - Loading product DataFrame
2025-04-19 15:52:26,844 - DEBUG - Loading product_ids
2025-04-19 15:52:26,846 - DEBUG - Vector database loaded. Total products: 8587
2025-04-19 15:52:26,847 - DEBUG - DataFrame shape: (8587, 12)
2025-04-19 15:52:26,847 - DEBUG - FAISS index ntotal: 8587
2025-04-19 15:52:46,666 - DEBUG - --- Initializing SearchService ---
2025-04-19 15:52:46,667 - DEBUG - Current working directory: D:\MonThu6
2025-04-19 15:52:46,667 - DEBUG - Loading SentenceTransformer model
2025-04-19 15:52:49,809 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-19 15:52:49,810 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-19 15:52:49,811 - DEBUG - Loading FAISS index
2025-04-19 15:52:49,818 - DEBUG - Loading product DataFrame
2025-04-19 15:52:49,840 - DEBUG - Loading product_ids
2025-04-19 15:52:49,841 - DEBUG - Vector database loaded. Total products: 8587
2025-04-19 15:52:49,842 - DEBUG - DataFrame shape: (8587, 12)
2025-04-19 15:52:49,842 - DEBUG - FAISS index ntotal: 8587
2025-04-19 15:52:56,668 - DEBUG - --- Processing request for /api/recommendations/277063012 ---
2025-04-19 15:52:56,670 - DEBUG - Limit set to: 10
2025-04-19 15:52:56,671 - DEBUG - --- Starting get_similar_products_by_id for product_id: 277063012 ---
2025-04-19 15:52:56,671 - DEBUG - Checking if product_id 277063012 exists in product_ids
2025-04-19 15:52:56,672 - DEBUG - Product_id exists in vector database: True
2025-04-19 15:52:56,673 - DEBUG - Fetching product details from Tiki API for product_id: 277063012
2025-04-19 15:52:57,126 - DEBUG - Extracting product details
2025-04-19 15:52:57,137 - DEBUG - Brand_name: Samsung
2025-04-19 15:52:57,139 - DEBUG - Encoding combined text to embedding
2025-04-19 15:52:58,719 - DEBUG - Query embedding shape: (1, 384)
2025-04-19 15:52:58,719 - DEBUG - Searching FAISS index with top_k: 11
2025-04-19 15:52:58,725 - DEBUG - FAISS search results - distances: [[0.0, 0.043444886803627014, 0.3553149998188019, 0.40352651476860046, 0.4053597152233124, 0.43214619159698486, 0.4357074797153473, 0.44877511262893677, 0.4524402618408203, 0.45325520634651184, 0.45375293493270874]]
2025-04-19 15:52:58,726 - DEBUG - FAISS search results - indices: [[203, 1994, 1295, 1458, 1785, 2204, 1051, 123, 5109, 204, 228]]
2025-04-19 15:52:58,726 - DEBUG - Filtered result_product_ids: [277068413, 277466537, 272273680, 273438458, 273186334, 277465334, 272348047, 274084565, 273610105, 272328188]
2025-04-19 15:52:58,726 - DEBUG - Checking product_id 277068413 in DataFrame
2025-04-19 15:52:58,729 - DEBUG - Added product 277068413 to similar_products
2025-04-19 15:52:58,729 - DEBUG - Checking product_id 277466537 in DataFrame
2025-04-19 15:52:58,730 - DEBUG - Added product 277466537 to similar_products
2025-04-19 15:52:58,731 - DEBUG - Checking product_id 272273680 in DataFrame
2025-04-19 15:52:58,732 - DEBUG - Added product 272273680 to similar_products
2025-04-19 15:52:58,733 - DEBUG - Checking product_id 273438458 in DataFrame
2025-04-19 15:52:58,734 - DEBUG - Added product 273438458 to similar_products
2025-04-19 15:52:58,735 - DEBUG - Checking product_id 273186334 in DataFrame
2025-04-19 15:52:58,736 - DEBUG - Added product 273186334 to similar_products
2025-04-19 15:52:58,737 - DEBUG - Checking product_id 277465334 in DataFrame
2025-04-19 15:52:58,738 - DEBUG - Added product 277465334 to similar_products
2025-04-19 15:52:58,739 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-19 15:52:58,740 - DEBUG - Added product 272348047 to similar_products
2025-04-19 15:52:58,740 - DEBUG - Checking product_id 274084565 in DataFrame
2025-04-19 15:52:58,742 - DEBUG - Added product 274084565 to similar_products
2025-04-19 15:52:58,743 - DEBUG - Checking product_id 273610105 in DataFrame
2025-04-19 15:52:58,745 - DEBUG - Added product 273610105 to similar_products
2025-04-19 15:52:58,746 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-19 15:52:58,747 - DEBUG - Added product 272328188 to similar_products
2025-04-19 15:52:58,748 - DEBUG - Final similar_products count: 10
2025-04-19 15:52:58,749 - DEBUG - Final similar_products: [277068413, 277466537, 272273680, 273438458, 273186334, 277465334, 272348047, 274084565, 273610105, 272328188]
2025-04-19 15:52:58,749 - DEBUG - --- Completed get_similar_products_by_id for product_id: 277063012 ---
2025-04-19 15:52:58,750 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-19 15:52:58,750 - DEBUG - Preparing response with similar products
2025-04-19 15:52:58,756 - DEBUG - --- Completed request for /api/recommendations/277063012 ---
2025-04-19 15:53:02,637 - DEBUG - --- Processing request for /api/recommendations/273668660 ---
2025-04-19 15:53:02,638 - DEBUG - Limit set to: 10
2025-04-19 15:53:02,639 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273668660 ---
2025-04-19 15:53:02,641 - DEBUG - Checking if product_id 273668660 exists in product_ids
2025-04-19 15:53:02,642 - DEBUG - Product_id exists in vector database: True
2025-04-19 15:53:02,642 - DEBUG - Fetching product details from Tiki API for product_id: 273668660
2025-04-19 15:53:02,831 - DEBUG - Extracting product details
2025-04-19 15:53:02,844 - DEBUG - Brand_name: OPPO
2025-04-19 15:53:02,851 - DEBUG - Encoding combined text to embedding
2025-04-19 15:53:02,972 - DEBUG - Query embedding shape: (1, 384)
2025-04-19 15:53:02,973 - DEBUG - Searching FAISS index with top_k: 11
2025-04-19 15:53:02,976 - DEBUG - FAISS search results - distances: [[1.2073024871495086e-13, 0.011584763415157795, 0.060070350766181946, 0.10548487305641174, 0.11010187864303589, 0.12039189040660858, 0.1267261803150177, 0.13870376348495483, 0.19952967762947083, 0.21247722208499908, 0.24021491408348083]]
2025-04-19 15:53:02,977 - DEBUG - FAISS search results - indices: [[72, 55, 111, 2236, 1265, 1426, 793, 261, 23, 315, 242]]
2025-04-19 15:53:02,978 - DEBUG - Filtered result_product_ids: [273664463, 276046675, 277175972, 274156763, 275386465, 277005407, 271128271, 274405521, 276944868, 276274790]
2025-04-19 15:53:02,979 - DEBUG - Checking product_id 273664463 in DataFrame
2025-04-19 15:53:02,984 - DEBUG - Added product 273664463 to similar_products
2025-04-19 15:53:02,984 - DEBUG - Checking product_id 276046675 in DataFrame
2025-04-19 15:53:02,986 - DEBUG - Added product 276046675 to similar_products
2025-04-19 15:53:02,987 - DEBUG - Checking product_id 277175972 in DataFrame
2025-04-19 15:53:02,989 - DEBUG - Added product 277175972 to similar_products
2025-04-19 15:53:02,990 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-19 15:53:02,991 - DEBUG - Added product 274156763 to similar_products
2025-04-19 15:53:02,992 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-19 15:53:02,994 - DEBUG - Added product 275386465 to similar_products
2025-04-19 15:53:02,995 - DEBUG - Checking product_id 277005407 in DataFrame
2025-04-19 15:53:02,997 - DEBUG - Added product 277005407 to similar_products
2025-04-19 15:53:02,998 - DEBUG - Checking product_id 271128271 in DataFrame
2025-04-19 15:53:03,000 - DEBUG - Added product 271128271 to similar_products
2025-04-19 15:53:03,001 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-19 15:53:03,002 - DEBUG - Added product 274405521 to similar_products
2025-04-19 15:53:03,003 - DEBUG - Checking product_id 276944868 in DataFrame
2025-04-19 15:53:03,005 - DEBUG - Added product 276944868 to similar_products
2025-04-19 15:53:03,006 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-19 15:53:03,007 - DEBUG - Added product 276274790 to similar_products
2025-04-19 15:53:03,008 - DEBUG - Final similar_products count: 10
2025-04-19 15:53:03,009 - DEBUG - Final similar_products: [273664463, 276046675, 277175972, 274156763, 275386465, 277005407, 271128271, 274405521, 276944868, 276274790]
2025-04-19 15:53:03,010 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273668660 ---
2025-04-19 15:53:03,011 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-19 15:53:03,012 - DEBUG - Preparing response with similar products
2025-04-19 15:53:03,018 - DEBUG - --- Completed request for /api/recommendations/273668660 ---
2025-04-19 15:53:23,899 - DEBUG - --- Processing request for /api/recommendations/270975124 ---
2025-04-19 15:53:23,900 - DEBUG - Limit set to: 10
2025-04-19 15:53:23,901 - DEBUG - --- Starting get_similar_products_by_id for product_id: 270975124 ---
2025-04-19 15:53:23,902 - DEBUG - Checking if product_id 270975124 exists in product_ids
2025-04-19 15:53:23,902 - DEBUG - Product_id exists in vector database: True
2025-04-19 15:53:23,903 - DEBUG - Fetching product details from Tiki API for product_id: 270975124
2025-04-19 15:53:24,091 - DEBUG - Extracting product details
2025-04-19 15:53:24,107 - DEBUG - Brand_name: OPPO
2025-04-19 15:53:24,113 - DEBUG - Encoding combined text to embedding
2025-04-19 15:53:24,236 - DEBUG - Query embedding shape: (1, 384)
2025-04-19 15:53:24,237 - DEBUG - Searching FAISS index with top_k: 11
2025-04-19 15:53:24,239 - DEBUG - FAISS search results - distances: [[1.1005309348294939e-13, 0.23759132623672485, 0.2565249502658844, 0.284262478351593, 0.29593971371650696, 0.3031706213951111, 0.30994874238967896, 0.31468427181243896, 0.315155565738678, 0.31857672333717346, 0.32109448313713074]]
2025-04-19 15:53:24,240 - DEBUG - FAISS search results - indices: [[24, 75, 261, 1426, 1265, 2242, 831, 111, 2236, 72, 55]]
2025-04-19 15:53:24,241 - DEBUG - Filtered result_product_ids: [273252926, 271128271, 275386465, 274156763, 230203067, 274171148, 276046675, 277175972, 273668660, 273664463]
2025-04-19 15:53:24,242 - DEBUG - Checking product_id 273252926 in DataFrame
2025-04-19 15:53:24,247 - DEBUG - Added product 273252926 to similar_products
2025-04-19 15:53:24,248 - DEBUG - Checking product_id 271128271 in DataFrame
2025-04-19 15:53:24,250 - DEBUG - Added product 271128271 to similar_products
2025-04-19 15:53:24,252 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-19 15:53:24,254 - DEBUG - Added product 275386465 to similar_products
2025-04-19 15:53:24,255 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-19 15:53:24,257 - DEBUG - Added product 274156763 to similar_products
2025-04-19 15:53:24,258 - DEBUG - Checking product_id 230203067 in DataFrame
2025-04-19 15:53:24,261 - DEBUG - Added product 230203067 to similar_products
2025-04-19 15:53:24,262 - DEBUG - Checking product_id 274171148 in DataFrame
2025-04-19 15:53:24,263 - DEBUG - Added product 274171148 to similar_products
2025-04-19 15:53:24,264 - DEBUG - Checking product_id 276046675 in DataFrame
2025-04-19 15:53:24,265 - DEBUG - Added product 276046675 to similar_products
2025-04-19 15:53:24,266 - DEBUG - Checking product_id 277175972 in DataFrame
2025-04-19 15:53:24,268 - DEBUG - Added product 277175972 to similar_products
2025-04-19 15:53:24,269 - DEBUG - Checking product_id 273668660 in DataFrame
2025-04-19 15:53:24,271 - DEBUG - Added product 273668660 to similar_products
2025-04-19 15:53:24,272 - DEBUG - Checking product_id 273664463 in DataFrame
2025-04-19 15:53:24,274 - DEBUG - Added product 273664463 to similar_products
2025-04-19 15:53:24,274 - DEBUG - Final similar_products count: 10
2025-04-19 15:53:24,275 - DEBUG - Final similar_products: [273252926, 271128271, 275386465, 274156763, 230203067, 274171148, 276046675, 277175972, 273668660, 273664463]
2025-04-19 15:53:24,276 - DEBUG - --- Completed get_similar_products_by_id for product_id: 270975124 ---
2025-04-19 15:53:24,276 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-19 15:53:24,277 - DEBUG - Preparing response with similar products
2025-04-19 15:53:24,281 - DEBUG - --- Completed request for /api/recommendations/270975124 ---
2025-04-19 15:55:14,454 - DEBUG - --- Initializing SearchService ---
2025-04-19 15:55:14,455 - DEBUG - Current working directory: D:\MonThu6
2025-04-19 15:55:14,455 - DEBUG - Loading SentenceTransformer model
2025-04-19 15:55:18,465 - DEBUG - Vector database directory: D:\MonThu6\api\..\vector_db
2025-04-19 15:55:18,465 - DEBUG - Checking vector database files: ['D:\\MonThu6\\api\\..\\vector_db\\product_index.faiss', 'D:\\MonThu6\\api\\..\\vector_db\\product_data.pkl', 'D:\\MonThu6\\api\\..\\vector_db\\product_ids.pkl']
2025-04-19 15:55:18,466 - DEBUG - Loading FAISS index
2025-04-19 15:55:18,475 - DEBUG - Loading product DataFrame
2025-04-19 15:55:18,499 - DEBUG - Loading product_ids
2025-04-19 15:55:18,501 - DEBUG - Vector database loaded. Total products: 8587
2025-04-19 15:55:18,501 - DEBUG - DataFrame shape: (8587, 12)
2025-04-19 15:55:18,502 - DEBUG - FAISS index ntotal: 8587
2025-04-19 15:55:22,821 - DEBUG - --- Processing request for /api/recommendations/271128271 ---
2025-04-19 15:55:22,823 - DEBUG - Limit set to: 10
2025-04-19 15:55:22,825 - DEBUG - --- Starting get_similar_products_by_id for product_id: 271128271 ---
2025-04-19 15:55:22,826 - DEBUG - Checking if product_id 271128271 exists in product_ids
2025-04-19 15:55:22,827 - DEBUG - Product_id exists in vector database: True
2025-04-19 15:55:22,829 - DEBUG - Fetching product details from Tiki API for product_id: 271128271
2025-04-19 15:55:23,128 - DEBUG - Extracting product details
2025-04-19 15:55:23,137 - DEBUG - Brand_name: OPPO
2025-04-19 15:55:23,141 - DEBUG - Encoding combined text to embedding
2025-04-19 15:55:23,297 - DEBUG - Query embedding shape: (1, 384)
2025-04-19 15:55:23,297 - DEBUG - Searching FAISS index with top_k: 11
2025-04-19 15:55:23,312 - DEBUG - FAISS search results - distances: [[1.3748212095675283e-13, 0.07058018445968628, 0.079551100730896, 0.08254238963127136, 0.09476955235004425, 0.09664995968341827, 0.12460317462682724, 0.13870368897914886, 0.24299933016300201, 0.2519594430923462, 0.25280624628067017]]
2025-04-19 15:55:23,313 - DEBUG - FAISS search results - indices: [[261, 1426, 2236, 1265, 111, 793, 55, 72, 228, 123, 318]]
2025-04-19 15:55:23,314 - DEBUG - Filtered result_product_ids: [275386465, 277175972, 274156763, 276046675, 277005407, 273664463, 273668660, 272328188, 272348047, 276944892]
2025-04-19 15:55:23,315 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-19 15:55:23,319 - DEBUG - Added product 275386465 to similar_products
2025-04-19 15:55:23,320 - DEBUG - Checking product_id 277175972 in DataFrame
2025-04-19 15:55:23,322 - DEBUG - Added product 277175972 to similar_products
2025-04-19 15:55:23,323 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-19 15:55:23,325 - DEBUG - Added product 274156763 to similar_products
2025-04-19 15:55:23,327 - DEBUG - Checking product_id 276046675 in DataFrame
2025-04-19 15:55:23,329 - DEBUG - Added product 276046675 to similar_products
2025-04-19 15:55:23,330 - DEBUG - Checking product_id 277005407 in DataFrame
2025-04-19 15:55:23,332 - DEBUG - Added product 277005407 to similar_products
2025-04-19 15:55:23,333 - DEBUG - Checking product_id 273664463 in DataFrame
2025-04-19 15:55:23,335 - DEBUG - Added product 273664463 to similar_products
2025-04-19 15:55:23,336 - DEBUG - Checking product_id 273668660 in DataFrame
2025-04-19 15:55:23,338 - DEBUG - Added product 273668660 to similar_products
2025-04-19 15:55:23,339 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-19 15:55:23,341 - DEBUG - Added product 272328188 to similar_products
2025-04-19 15:55:23,341 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-19 15:55:23,343 - DEBUG - Added product 272348047 to similar_products
2025-04-19 15:55:23,344 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-19 15:55:23,346 - DEBUG - Added product 276944892 to similar_products
2025-04-19 15:55:23,347 - DEBUG - Final similar_products count: 10
2025-04-19 15:55:23,347 - DEBUG - Final similar_products: [275386465, 277175972, 274156763, 276046675, 277005407, 273664463, 273668660, 272328188, 272348047, 276944892]
2025-04-19 15:55:23,348 - DEBUG - --- Completed get_similar_products_by_id for product_id: 271128271 ---
2025-04-19 15:55:23,349 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-19 15:55:23,350 - DEBUG - Preparing response with similar products
2025-04-19 15:55:23,357 - DEBUG - --- Completed request for /api/recommendations/271128271 ---
2025-04-19 15:55:36,985 - DEBUG - --- Processing request for /api/recommendations/271128271 ---
2025-04-19 15:55:36,987 - DEBUG - Limit set to: 10
2025-04-19 15:55:36,988 - DEBUG - --- Starting get_similar_products_by_id for product_id: 271128271 ---
2025-04-19 15:55:36,989 - DEBUG - Checking if product_id 271128271 exists in product_ids
2025-04-19 15:55:36,989 - DEBUG - Product_id exists in vector database: True
2025-04-19 15:55:36,990 - DEBUG - Fetching product details from Tiki API for product_id: 271128271
2025-04-19 15:55:37,170 - DEBUG - Extracting product details
2025-04-19 15:55:37,192 - DEBUG - Brand_name: OPPO
2025-04-19 15:55:37,196 - DEBUG - Encoding combined text to embedding
2025-04-19 15:55:37,266 - DEBUG - Query embedding shape: (1, 384)
2025-04-19 15:55:37,267 - DEBUG - Searching FAISS index with top_k: 11
2025-04-19 15:55:37,270 - DEBUG - FAISS search results - distances: [[1.3748212095675283e-13, 0.07058018445968628, 0.079551100730896, 0.08254238963127136, 0.09476955235004425, 0.09664995968341827, 0.12460317462682724, 0.13870368897914886, 0.24299933016300201, 0.2519594430923462, 0.25280624628067017]]
2025-04-19 15:55:37,271 - DEBUG - FAISS search results - indices: [[261, 1426, 2236, 1265, 111, 793, 55, 72, 228, 123, 318]]
2025-04-19 15:55:37,271 - DEBUG - Filtered result_product_ids: [275386465, 277175972, 274156763, 276046675, 277005407, 273664463, 273668660, 272328188, 272348047, 276944892]
2025-04-19 15:55:37,272 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-19 15:55:37,274 - DEBUG - Added product 275386465 to similar_products
2025-04-19 15:55:37,275 - DEBUG - Checking product_id 277175972 in DataFrame
2025-04-19 15:55:37,277 - DEBUG - Added product 277175972 to similar_products
2025-04-19 15:55:37,278 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-19 15:55:37,279 - DEBUG - Added product 274156763 to similar_products
2025-04-19 15:55:37,280 - DEBUG - Checking product_id 276046675 in DataFrame
2025-04-19 15:55:37,282 - DEBUG - Added product 276046675 to similar_products
2025-04-19 15:55:37,283 - DEBUG - Checking product_id 277005407 in DataFrame
2025-04-19 15:55:37,285 - DEBUG - Added product 277005407 to similar_products
2025-04-19 15:55:37,286 - DEBUG - Checking product_id 273664463 in DataFrame
2025-04-19 15:55:37,288 - DEBUG - Added product 273664463 to similar_products
2025-04-19 15:55:37,289 - DEBUG - Checking product_id 273668660 in DataFrame
2025-04-19 15:55:37,290 - DEBUG - Added product 273668660 to similar_products
2025-04-19 15:55:37,291 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-19 15:55:37,292 - DEBUG - Added product 272328188 to similar_products
2025-04-19 15:55:37,293 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-19 15:55:37,294 - DEBUG - Added product 272348047 to similar_products
2025-04-19 15:55:37,295 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-19 15:55:37,296 - DEBUG - Added product 276944892 to similar_products
2025-04-19 15:55:37,297 - DEBUG - Final similar_products count: 10
2025-04-19 15:55:37,297 - DEBUG - Final similar_products: [275386465, 277175972, 274156763, 276046675, 277005407, 273664463, 273668660, 272328188, 272348047, 276944892]
2025-04-19 15:55:37,298 - DEBUG - --- Completed get_similar_products_by_id for product_id: 271128271 ---
2025-04-19 15:55:37,298 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-19 15:55:37,299 - DEBUG - Preparing response with similar products
2025-04-19 15:55:37,303 - DEBUG - --- Completed request for /api/recommendations/271128271 ---
2025-04-19 15:55:42,576 - DEBUG - --- Processing request for /api/recommendations/273668660 ---
2025-04-19 15:55:42,577 - DEBUG - Limit set to: 10
2025-04-19 15:55:42,578 - DEBUG - --- Starting get_similar_products_by_id for product_id: 273668660 ---
2025-04-19 15:55:42,579 - DEBUG - Checking if product_id 273668660 exists in product_ids
2025-04-19 15:55:42,580 - DEBUG - Product_id exists in vector database: True
2025-04-19 15:55:42,581 - DEBUG - Fetching product details from Tiki API for product_id: 273668660
2025-04-19 15:55:42,780 - DEBUG - Extracting product details
2025-04-19 15:55:42,792 - DEBUG - Brand_name: OPPO
2025-04-19 15:55:42,797 - DEBUG - Encoding combined text to embedding
2025-04-19 15:55:42,866 - DEBUG - Query embedding shape: (1, 384)
2025-04-19 15:55:42,867 - DEBUG - Searching FAISS index with top_k: 11
2025-04-19 15:55:42,869 - DEBUG - FAISS search results - distances: [[1.2073024871495086e-13, 0.011584763415157795, 0.060070350766181946, 0.10548487305641174, 0.11010187864303589, 0.12039189040660858, 0.1267261803150177, 0.13870376348495483, 0.19952967762947083, 0.21247722208499908, 0.24021491408348083]]
2025-04-19 15:55:42,871 - DEBUG - FAISS search results - indices: [[72, 55, 111, 2236, 1265, 1426, 793, 261, 23, 315, 242]]
2025-04-19 15:55:42,872 - DEBUG - Filtered result_product_ids: [273664463, 276046675, 277175972, 274156763, 275386465, 277005407, 271128271, 274405521, 276944868, 276274790]
2025-04-19 15:55:42,873 - DEBUG - Checking product_id 273664463 in DataFrame
2025-04-19 15:55:42,876 - DEBUG - Added product 273664463 to similar_products
2025-04-19 15:55:42,879 - DEBUG - Checking product_id 276046675 in DataFrame
2025-04-19 15:55:42,882 - DEBUG - Added product 276046675 to similar_products
2025-04-19 15:55:42,883 - DEBUG - Checking product_id 277175972 in DataFrame
2025-04-19 15:55:42,886 - DEBUG - Added product 277175972 to similar_products
2025-04-19 15:55:42,887 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-19 15:55:42,889 - DEBUG - Added product 274156763 to similar_products
2025-04-19 15:55:42,890 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-19 15:55:42,894 - DEBUG - Added product 275386465 to similar_products
2025-04-19 15:55:42,895 - DEBUG - Checking product_id 277005407 in DataFrame
2025-04-19 15:55:42,897 - DEBUG - Added product 277005407 to similar_products
2025-04-19 15:55:42,898 - DEBUG - Checking product_id 271128271 in DataFrame
2025-04-19 15:55:42,900 - DEBUG - Added product 271128271 to similar_products
2025-04-19 15:55:42,901 - DEBUG - Checking product_id 274405521 in DataFrame
2025-04-19 15:55:42,904 - DEBUG - Added product 274405521 to similar_products
2025-04-19 15:55:42,906 - DEBUG - Checking product_id 276944868 in DataFrame
2025-04-19 15:55:42,911 - DEBUG - Added product 276944868 to similar_products
2025-04-19 15:55:42,914 - DEBUG - Checking product_id 276274790 in DataFrame
2025-04-19 15:55:42,918 - DEBUG - Added product 276274790 to similar_products
2025-04-19 15:55:42,919 - DEBUG - Final similar_products count: 10
2025-04-19 15:55:42,922 - DEBUG - Final similar_products: [273664463, 276046675, 277175972, 274156763, 275386465, 277005407, 271128271, 274405521, 276944868, 276274790]
2025-04-19 15:55:42,930 - DEBUG - --- Completed get_similar_products_by_id for product_id: 273668660 ---
2025-04-19 15:55:42,932 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-19 15:55:42,933 - DEBUG - Preparing response with similar products
2025-04-19 15:55:42,941 - DEBUG - --- Completed request for /api/recommendations/273668660 ---
2025-04-19 15:55:46,945 - DEBUG - --- Processing request for /api/recommendations/271128271 ---
2025-04-19 15:55:46,947 - DEBUG - Limit set to: 10
2025-04-19 15:55:46,948 - DEBUG - --- Starting get_similar_products_by_id for product_id: 271128271 ---
2025-04-19 15:55:46,948 - DEBUG - Checking if product_id 271128271 exists in product_ids
2025-04-19 15:55:46,949 - DEBUG - Product_id exists in vector database: True
2025-04-19 15:55:46,950 - DEBUG - Fetching product details from Tiki API for product_id: 271128271
2025-04-19 15:55:47,115 - DEBUG - Extracting product details
2025-04-19 15:55:47,123 - DEBUG - Brand_name: OPPO
2025-04-19 15:55:47,126 - DEBUG - Encoding combined text to embedding
2025-04-19 15:55:47,213 - DEBUG - Query embedding shape: (1, 384)
2025-04-19 15:55:47,213 - DEBUG - Searching FAISS index with top_k: 11
2025-04-19 15:55:47,215 - DEBUG - FAISS search results - distances: [[1.3748212095675283e-13, 0.07058018445968628, 0.079551100730896, 0.08254238963127136, 0.09476955235004425, 0.09664995968341827, 0.12460317462682724, 0.13870368897914886, 0.24299933016300201, 0.2519594430923462, 0.25280624628067017]]
2025-04-19 15:55:47,216 - DEBUG - FAISS search results - indices: [[261, 1426, 2236, 1265, 111, 793, 55, 72, 228, 123, 318]]
2025-04-19 15:55:47,216 - DEBUG - Filtered result_product_ids: [275386465, 277175972, 274156763, 276046675, 277005407, 273664463, 273668660, 272328188, 272348047, 276944892]
2025-04-19 15:55:47,217 - DEBUG - Checking product_id 275386465 in DataFrame
2025-04-19 15:55:47,218 - DEBUG - Added product 275386465 to similar_products
2025-04-19 15:55:47,219 - DEBUG - Checking product_id 277175972 in DataFrame
2025-04-19 15:55:47,220 - DEBUG - Added product 277175972 to similar_products
2025-04-19 15:55:47,222 - DEBUG - Checking product_id 274156763 in DataFrame
2025-04-19 15:55:47,223 - DEBUG - Added product 274156763 to similar_products
2025-04-19 15:55:47,224 - DEBUG - Checking product_id 276046675 in DataFrame
2025-04-19 15:55:47,225 - DEBUG - Added product 276046675 to similar_products
2025-04-19 15:55:47,226 - DEBUG - Checking product_id 277005407 in DataFrame
2025-04-19 15:55:47,227 - DEBUG - Added product 277005407 to similar_products
2025-04-19 15:55:47,228 - DEBUG - Checking product_id 273664463 in DataFrame
2025-04-19 15:55:47,229 - DEBUG - Added product 273664463 to similar_products
2025-04-19 15:55:47,230 - DEBUG - Checking product_id 273668660 in DataFrame
2025-04-19 15:55:47,231 - DEBUG - Added product 273668660 to similar_products
2025-04-19 15:55:47,232 - DEBUG - Checking product_id 272328188 in DataFrame
2025-04-19 15:55:47,233 - DEBUG - Added product 272328188 to similar_products
2025-04-19 15:55:47,233 - DEBUG - Checking product_id 272348047 in DataFrame
2025-04-19 15:55:47,235 - DEBUG - Added product 272348047 to similar_products
2025-04-19 15:55:47,235 - DEBUG - Checking product_id 276944892 in DataFrame
2025-04-19 15:55:47,236 - DEBUG - Added product 276944892 to similar_products
2025-04-19 15:55:47,237 - DEBUG - Final similar_products count: 10
2025-04-19 15:55:47,238 - DEBUG - Final similar_products: [275386465, 277175972, 274156763, 276046675, 277005407, 273664463, 273668660, 272328188, 272348047, 276944892]
2025-04-19 15:55:47,239 - DEBUG - --- Completed get_similar_products_by_id for product_id: 271128271 ---
2025-04-19 15:55:47,240 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-19 15:55:47,241 - DEBUG - Preparing response with similar products
2025-04-19 15:55:47,245 - DEBUG - --- Completed request for /api/recommendations/271128271 ---
2025-04-19 15:55:57,089 - DEBUG - --- Processing request for /api/recommendations/184059211 ---
2025-04-19 15:55:57,090 - DEBUG - Limit set to: 10
2025-04-19 15:55:57,091 - DEBUG - --- Starting get_similar_products_by_id for product_id: 184059211 ---
2025-04-19 15:55:57,092 - DEBUG - Checking if product_id 184059211 exists in product_ids
2025-04-19 15:55:57,093 - DEBUG - Product_id exists in vector database: False
2025-04-19 15:55:57,094 - DEBUG - Fetching product details from Tiki API for product_id: 184059211
2025-04-19 15:55:57,269 - DEBUG - Extracting product details
2025-04-19 15:55:57,270 - DEBUG - Name: Apple iPhone 13
2025-04-19 15:55:57,282 - DEBUG - Brand_name: Apple
2025-04-19 15:55:57,288 - DEBUG - Encoding combined text to embedding
2025-04-19 15:55:57,379 - DEBUG - Query embedding shape: (1, 384)
2025-04-19 15:55:57,380 - DEBUG - Searching FAISS index with top_k: 11
2025-04-19 15:55:57,382 - DEBUG - FAISS search results - distances: [[0.6164488196372986, 0.6294758319854736, 0.650195837020874, 0.6850014328956604, 0.7004382610321045, 0.7051544189453125, 0.7058439254760742, 0.7092292308807373, 0.710883617401123, 0.7109403610229492, 0.7109628319740295]]
2025-04-19 15:55:57,383 - DEBUG - FAISS search results - indices: [[7387, 2736, 4172, 2521, 975, 1295, 6724, 2665, 2725, 8546, 240]]
2025-04-19 15:55:57,383 - DEBUG - Filtered result_product_ids: [183330021, 134933833, 203201921, 200914701, 277030799, 277466537, 50714154, 133039431, 197528405, 205815576]
2025-04-19 15:55:57,384 - DEBUG - Checking product_id 183330021 in DataFrame
2025-04-19 15:55:57,385 - DEBUG - Added product 183330021 to similar_products
2025-04-19 15:55:57,386 - DEBUG - Checking product_id 134933833 in DataFrame
2025-04-19 15:55:57,387 - DEBUG - Added product 134933833 to similar_products
2025-04-19 15:55:57,388 - DEBUG - Checking product_id 203201921 in DataFrame
2025-04-19 15:55:57,389 - DEBUG - Added product 203201921 to similar_products
2025-04-19 15:55:57,390 - DEBUG - Checking product_id 200914701 in DataFrame
2025-04-19 15:55:57,394 - DEBUG - Added product 200914701 to similar_products
2025-04-19 15:55:57,395 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-19 15:55:57,397 - DEBUG - Added product 277030799 to similar_products
2025-04-19 15:55:57,398 - DEBUG - Checking product_id 277466537 in DataFrame
2025-04-19 15:55:57,399 - DEBUG - Added product 277466537 to similar_products
2025-04-19 15:55:57,400 - DEBUG - Checking product_id 50714154 in DataFrame
2025-04-19 15:55:57,401 - DEBUG - Added product 50714154 to similar_products
2025-04-19 15:55:57,402 - DEBUG - Checking product_id 133039431 in DataFrame
2025-04-19 15:55:57,403 - DEBUG - Added product 133039431 to similar_products
2025-04-19 15:55:57,404 - DEBUG - Checking product_id 197528405 in DataFrame
2025-04-19 15:55:57,406 - DEBUG - Added product 197528405 to similar_products
2025-04-19 15:55:57,406 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-19 15:55:57,409 - DEBUG - Added product 205815576 to similar_products
2025-04-19 15:55:57,410 - DEBUG - Final similar_products count: 10
2025-04-19 15:55:57,411 - DEBUG - Final similar_products: [183330021, 134933833, 203201921, 200914701, 277030799, 277466537, 50714154, 133039431, 197528405, 205815576]
2025-04-19 15:55:57,412 - DEBUG - --- Completed get_similar_products_by_id for product_id: 184059211 ---
2025-04-19 15:55:57,413 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-19 15:55:57,414 - DEBUG - Preparing response with similar products
2025-04-19 15:55:57,420 - DEBUG - --- Completed request for /api/recommendations/184059211 ---
2025-04-19 15:56:10,105 - DEBUG - --- Processing request for /api/recommendations/183330021 ---
2025-04-19 15:56:10,107 - DEBUG - Limit set to: 10
2025-04-19 15:56:10,107 - DEBUG - --- Starting get_similar_products_by_id for product_id: 183330021 ---
2025-04-19 15:56:10,108 - DEBUG - Checking if product_id 183330021 exists in product_ids
2025-04-19 15:56:10,109 - DEBUG - Product_id exists in vector database: True
2025-04-19 15:56:10,110 - DEBUG - Fetching product details from Tiki API for product_id: 183330021
2025-04-19 15:56:10,287 - DEBUG - Extracting product details
2025-04-19 15:56:10,287 - DEBUG - Name: Apple iPad 10.2-inch (9th Gen) Wi-Fi, 2021
2025-04-19 15:56:10,297 - DEBUG - Brand_name: Apple
2025-04-19 15:56:10,302 - DEBUG - Encoding combined text to embedding
2025-04-19 15:56:10,390 - DEBUG - Query embedding shape: (1, 384)
2025-04-19 15:56:10,391 - DEBUG - Searching FAISS index with top_k: 11
2025-04-19 15:56:10,393 - DEBUG - FAISS search results - distances: [[2.1368508091451632e-13, 0.21494871377944946, 0.5236576795578003, 0.5730737447738647, 0.5940837264060974, 0.6234952211380005, 0.6234952211380005, 0.632460355758667, 0.6538567543029785, 0.6557819247245789, 0.6572352647781372]]
2025-04-19 15:56:10,394 - DEBUG - FAISS search results - indices: [[7387, 8546, 3886, 1961, 2427, 2352, 2574, 975, 2314, 1959, 2561]]
2025-04-19 15:56:10,395 - DEBUG - Filtered result_product_ids: [205815576, 275224311, 136468988, 276368513, 276177761, 276159554, 277030799, 276471819, 136468984, 271145754]
2025-04-19 15:56:10,395 - DEBUG - Checking product_id 205815576 in DataFrame
2025-04-19 15:56:10,398 - DEBUG - Added product 205815576 to similar_products
2025-04-19 15:56:10,399 - DEBUG - Checking product_id 275224311 in DataFrame
2025-04-19 15:56:10,400 - DEBUG - Added product 275224311 to similar_products
2025-04-19 15:56:10,401 - DEBUG - Checking product_id 136468988 in DataFrame
2025-04-19 15:56:10,403 - DEBUG - Added product 136468988 to similar_products
2025-04-19 15:56:10,404 - DEBUG - Checking product_id 276368513 in DataFrame
2025-04-19 15:56:10,406 - DEBUG - Added product 276368513 to similar_products
2025-04-19 15:56:10,407 - DEBUG - Checking product_id 276177761 in DataFrame
2025-04-19 15:56:10,408 - DEBUG - Added product 276177761 to similar_products
2025-04-19 15:56:10,409 - DEBUG - Checking product_id 276159554 in DataFrame
2025-04-19 15:56:10,410 - DEBUG - Added product 276159554 to similar_products
2025-04-19 15:56:10,411 - DEBUG - Checking product_id 277030799 in DataFrame
2025-04-19 15:56:10,412 - DEBUG - Added product 277030799 to similar_products
2025-04-19 15:56:10,413 - DEBUG - Checking product_id 276471819 in DataFrame
2025-04-19 15:56:10,416 - DEBUG - Added product 276471819 to similar_products
2025-04-19 15:56:10,417 - DEBUG - Checking product_id 136468984 in DataFrame
2025-04-19 15:56:10,419 - DEBUG - Added product 136468984 to similar_products
2025-04-19 15:56:10,420 - DEBUG - Checking product_id 271145754 in DataFrame
2025-04-19 15:56:10,422 - DEBUG - Added product 271145754 to similar_products
2025-04-19 15:56:10,423 - DEBUG - Final similar_products count: 10
2025-04-19 15:56:10,424 - DEBUG - Final similar_products: [205815576, 275224311, 136468988, 276368513, 276177761, 276159554, 277030799, 276471819, 136468984, 271145754]
2025-04-19 15:56:10,424 - DEBUG - --- Completed get_similar_products_by_id for product_id: 183330021 ---
2025-04-19 15:56:10,425 - DEBUG - get_similar_products_by_id returned 10 products
2025-04-19 15:56:10,426 - DEBUG - Preparing response with similar products
2025-04-19 15:56:10,434 - DEBUG - --- Completed request for /api/recommendations/183330021 ---
